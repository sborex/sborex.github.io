!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=45)}([function(e,t,n){"use strict";function i(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return P})),n.d(t,"k",(function(){return j}));var r=[].indexOf,o=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},a=/\s+/,s=Object.prototype.toString;function c(e){return new l(e)}function l(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function u(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}l.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},l.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},l.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},l.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},l.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(a);return""===e[0]&&e.shift(),e},l.prototype.has=l.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)};var d="undefined"!=typeof Element?Element.prototype:{},p=d.matches||d.matchesSelector||d.webkitMatchesSelector||d.mozMatchesSelector||d.msMatchesSelector||d.oMatchesSelector,h=function(e,t){if(!e||1!==e.nodeType)return!1;if(p)return p.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1};function f(e,t,n){for(var i=n?e:e.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(h(i,t))return i;i=i.parentNode}return h(i,t)?i:null}var g=Element.prototype,m=g.matchesSelector||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector,v=function(e,t){if(m)return m.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1};var y,b=window.addEventListener?"addEventListener":"attachEvent",w=window.removeEventListener?"removeEventListener":"detachEvent",x="addEventListener"!==b?"on":"",E={bind:function(e,t,n,i){return e[b](x+t,n,i||!1),n},unbind:function(e,t,n,i){return e[w](x+t,n,i||!1),n}},_=["focus","blur"],S={bind:function(e,t,n,i,r){return-1!==_.indexOf(n)&&(r=!0),E.bind(e,n,(function(n){var r=n.target||n.srcElement;n.delegateTarget=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(v(i,t))return i;i=i.parentNode}}(r,t,!0),n.delegateTarget&&i.call(e,n)}),r)},unbind:function(e,t,n,i){-1!==_.indexOf(t)&&(i=!0),E.unbind(e,t,n,i)}},C=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){return(r=t.createElement("html")).innerHTML=e,r.removeChild(r.lastChild)}var r,o=k[i]||k._default,a=o[0],s=o[1],c=o[2];(r=t.createElement("div")).innerHTML=s+e+c;for(;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var l=t.createDocumentFragment();for(;r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l},O=!1;"undefined"!=typeof document&&((y=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',O=!y.getElementsByTagName("link").length,y=void 0);var k={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:O?[1,"X<div>","</div>"]:[0,"",""]};function T(e,t){return(t=t||document).querySelector(e)}function P(e,t){return(t=t||document).querySelectorAll(e)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}k.td=k.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],k.option=k.optgroup=[1,'<select multiple="multiple">',"</select>"],k.thead=k.tbody=k.colgroup=k.caption=k.tfoot=[1,"<table>","</table>"],k.polyline=k.ellipse=k.polygon=k.circle=k.text=k.line=k.path=k.rect=k.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";var i=n(9),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===r.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,i){"object"==typeof t[i]&&"object"==typeof n?t[i]=e(t[i],n):t[i]=n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return t},deepMerge:function e(){var t={};function n(n,i){"object"==typeof t[i]&&"object"==typeof n?t[i]=e(t[i],n):t[i]="object"==typeof n?e({},n):n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return t},extend:function(e,t,n){return l(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},,function(e,t,n){e.exports=n(18)},function(e,t,n){e.exports=n(41),e.exports.Collection=n(37)},function(e,t,n){var i;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(r,o,a,s){"use strict";var c,l=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d=Math.round,p=Math.abs,h=Date.now;function f(e,t,n){return setTimeout(x(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function v(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var y=v((function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&void 0===e[i[r]])&&(e[i[r]]=t[i[r]]),r++;return e}),"extend","Use `assign`."),b=v((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function w(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&c(i,n)}function x(e,t){return function(){return e.apply(t,arguments)}}function E(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function _(e,t){return void 0===e?t:e}function S(e,t,n){m(T(t),(function(t){e.addEventListener(t,n,!1)}))}function C(e,t,n){m(T(t),(function(t){e.removeEventListener(t,n,!1)}))}function O(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function k(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function j(e){return Array.prototype.slice.call(e,0)}function A(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];P(r,a)<0&&i.push(e[o]),r[o]=a,o++}return n&&(i=t?i.sort((function(e,n){return e[t]>n[t]})):i.sort()),i}function M(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<l.length;){if((i=(n=l[o])?n+r:t)in e)return i;o++}}var D=1;function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var N="ontouchstart"in r,L=void 0!==M(r,"PointerEvent"),B=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I=["x","y"],F=["clientX","clientY"];function z(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&n.handler(t)},this.init()}function H(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&t&&i-r==0,a=12&t&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=V(t));r>1&&!n.firstMultiple?n.firstMultiple=V(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=t.center=$(i);t.timeStamp=h(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=G(s,c),t.distance=q(s,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=W(t.deltaX,t.deltaY);var l=U(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=p(l.x)>p(l.y)?l.x:l.y,t.scale=a?(u=a.pointers,d=i,q(d[0],d[1],F)/q(u[0],u[1],F)):1,t.rotation=a?function(e,t){return G(t[1],t[0],F)+G(e[1],e[0],F)}(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,a=e.lastInterval||t,s=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(s>25||void 0===a.velocity)){var c=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,u=U(s,c,l);i=u.x,r=u.y,n=p(u.x)>p(u.y)?u.x:u.y,o=W(c,l),e.lastInterval=t}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var u,d;var f=e.element;O(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function V(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:t,center:$(t),deltaX:e.deltaX,deltaY:e.deltaY}}function $(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:d(n/t),y:d(i/t)}}function U(e,t,n){return{x:t/e||0,y:n/e||0}}function W(e,t){return e===t?1:p(e)>=p(t)?e<0?2:4:t<0?8:16}function q(e,t,n){n||(n=I);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function G(e,t,n){n||(n=I);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(R(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4};function K(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,z.apply(this,arguments)}w(K,z,{handler:function(e){var t=Y[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var X={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Z={2:"touch",3:"pen",4:"mouse",5:"kinect"},J="pointerdown",Q="pointermove pointerup pointercancel";function ee(){this.evEl=J,this.evWin=Q,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(J="MSPointerDown",Q="MSPointerMove MSPointerUp MSPointerCancel"),w(ee,z,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=X[i],o=Z[e.pointerType]||e.pointerType,a="touch"==o,s=P(t,e.pointerId,"pointerId");1&r&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&r&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ne(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,z.apply(this,arguments)}function ie(e,t){var n=j(e.touches),i=j(e.changedTouches);return 12&t&&(n=A(n.concat(i),"identifier",!0)),[n,i]}w(ne,z,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var n=ie.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var re={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function oe(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},z.apply(this,arguments)}function ae(e,t){var n=j(e.touches),i=this.targetIds;if(3&t&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=j(e.changedTouches),s=[],c=this.target;if(o=n.filter((function(e){return O(e.target,c)})),1===t)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),12&t&&delete i[a[r].identifier],r++;return s.length?[A(o.concat(s),"identifier",!0),s]:void 0}w(oe,z,{handler:function(e){var t=re[e.type],n=ae.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});function se(){z.apply(this,arguments);var e=x(this.handler,this);this.touch=new oe(this.manager,e),this.mouse=new K(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ce(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,le.call(this,t)):12&e&&le.call(this,t)}function le(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)}),2500)}}function ue(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}w(se,z,{handler:function(e,t,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)ce.call(this,t,n);else if(r&&ue.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var de=M(u.style,"touchAction"),pe=void 0!==de,he=function(){if(!pe)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||r.CSS.supports("touch-action",n)})),e}();function fe(e,t){this.manager=e,this.set(t)}fe.prototype={set:function(e){"compute"==e&&(e=this.compute()),pe&&this.manager.element.style&&he[e]&&(this.manager.element.style[de]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(k(e,"none"))return"none";var t=k(e,"pan-x"),n=k(e,"pan-y");if(t&&n)return"none";if(t||n)return t?"pan-x":"pan-y";if(k(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=k(i,"none")&&!he.none,o=k(i,"pan-y")&&!he["pan-y"],a=k(i,"pan-x")&&!he["pan-x"];if(r){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!a||!o)return r||o&&6&n||a&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ge(e){this.options=c({},this.defaults,e||{}),this.id=D++,this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function me(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ve(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ye(e,t){var n=t.manager;return n?n.get(e):e}function be(){ge.apply(this,arguments)}function we(){be.apply(this,arguments),this.pX=null,this.pY=null}function xe(){be.apply(this,arguments)}function Ee(){ge.apply(this,arguments),this._timer=null,this._input=null}function _e(){be.apply(this,arguments)}function Se(){be.apply(this,arguments)}function Ce(){ge.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Oe(e,t){return(t=t||{}).recognizers=_(t.recognizers,Oe.defaults.preset),new ke(e,t)}ge.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ye(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)||(e=ye(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=ye(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=ye(e,this);var t=P(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<8&&i(t.options.event+me(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=8&&i(t.options.event+me(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!E(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(be,ge,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,r=this.attrTest(e);return i&&(8&n||!r)?16|t:i||r?4&n?8|t:2&t?4|t:2:32}}),w(we,be,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(6&t.direction?(r=0===o?1:o<0?2:4,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?1:a<0?8:16,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ve(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(xe,be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(Ee,ge,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||12&e.eventType&&!r)this.reset();else if(1&e.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),w(_e,be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(Se,be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return we.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ve(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Ce,ge,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(i&&r&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||q(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=f((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Oe.VERSION="2.0.7",Oe.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[_e,{enable:!1}],[xe,{enable:!1},["rotate"]],[Se,{direction:6}],[we,{direction:6},["swipe"]],[Ce],[Ce,{event:"doubletap",taps:2},["tap"]],[Ee]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ke(e,t){var n;this.options=c({},Oe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(L?ee:B?oe:N?se:K))(n,H),this.touchAction=new fe(this,this.options.touchAction),Te(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Te(e,t){var n,i=e.element;i.style&&(m(e.options.cssProps,(function(r,o){n=M(i.style,o),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}ke.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof ge)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return m(T(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return m(T(e),(function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&Te(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Oe,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:ke,Input:z,TouchAction:fe,TouchInput:oe,MouseInput:K,PointerEventInput:ee,TouchMouseInput:se,SingleTouchInput:ne,Recognizer:ge,AttrRecognizer:be,Tap:Ce,Pan:we,Swipe:Se,Pinch:xe,Rotate:_e,Press:Ee,on:S,off:C,each:m,merge:b,extend:y,assign:c,inherit:w,bindFn:x,prefixed:M}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Oe,void 0===(i=function(){return Oe}.call(t,n,t,e))||(e.exports=i)}(window,document)},function(e,t,n){
/*! grapesjs - 0.16.12 */
window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=91)}([function(e,t,n){(function(e,n){var i;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=r._,a=Array.prototype,s=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,u=a.slice,d=s.toString,p=s.hasOwnProperty,h=Array.isArray,f=Object.keys,g=Object.create,m=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};t.nodeType?r._=v:(!n.nodeType&&n.exports&&(t=n.exports=v),t._=v),v.VERSION="1.9.1";var y,b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return v.iteratee!==y?v.iteratee(e,t):null==e?v.identity:v.isFunction(e)?b(e,t,n):v.isObject(e)&&!v.isArray(e)?v.matcher(e):v.property(e)};v.iteratee=y=function(e,t){return w(e,t,1/0)};var x=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var o=Array(t+1);for(r=0;r<t;r++)o[r]=arguments[r];return o[t]=i,e.apply(this,o)}},E=function(e){if(!v.isObject(e))return{};if(g)return g(e);m.prototype=e;var t=new m;return m.prototype=null,t},_=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&p.call(e,t)},C=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},O=Math.pow(2,53)-1,k=_("length"),T=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=O};v.each=v.forEach=function(e,t,n){var i,r;if(t=b(t,n),T(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=v.keys(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e},v.map=v.collect=function(e,t,n){t=w(t,n);for(var i=!T(e)&&v.keys(e),r=(i||e).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o};var P=function(e){var t=function(t,n,i,r){var o=!T(t)&&v.keys(t),a=(o||t).length,s=e>0?0:a-1;for(r||(i=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var c=o?o[s]:s;i=n(i,t[c],c,t)}return i};return function(e,n,i,r){var o=arguments.length>=3;return t(e,b(n,r,4),i,o)}};v.reduce=v.foldl=v.inject=P(1),v.reduceRight=v.foldr=P(-1),v.find=v.detect=function(e,t,n){var i=(T(e)?v.findIndex:v.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},v.filter=v.select=function(e,t,n){var i=[];return t=w(t,n),v.each(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i},v.reject=function(e,t,n){return v.filter(e,v.negate(w(t)),n)},v.every=v.all=function(e,t,n){t=w(t,n);for(var i=!T(e)&&v.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},v.some=v.any=function(e,t,n){t=w(t,n);for(var i=!T(e)&&v.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,i){return T(e)||(e=v.values(e)),("number"!=typeof n||i)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=x((function(e,t,n){var i,r;return v.isFunction(t)?r=t:v.isArray(t)&&(i=t.slice(0,-1),t=t[t.length-1]),v.map(e,(function(e){var o=r;if(!o){if(i&&i.length&&(e=C(e,i)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))})),v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var i,r,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=T(e)?e:v.values(e)).length;s<c;s++)null!=(i=e[s])&&i>o&&(o=i);else t=w(t,n),v.each(e,(function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&o===-1/0)&&(o=e,a=r)}));return o},v.min=function(e,t,n){var i,r,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=T(e)?e:v.values(e)).length;s<c;s++)null!=(i=e[s])&&i<o&&(o=i);else t=w(t,n),v.each(e,(function(e,n,i){((r=t(e,n,i))<a||r===1/0&&o===1/0)&&(o=e,a=r)}));return o},v.shuffle=function(e){return v.sample(e,1/0)},v.sample=function(e,t,n){if(null==t||n)return T(e)||(e=v.values(e)),e[v.random(e.length-1)];var i=T(e)?v.clone(e):v.values(e),r=k(i);t=Math.max(Math.min(t,r),0);for(var o=r-1,a=0;a<t;a++){var s=v.random(a,o),c=i[a];i[a]=i[s],i[s]=c}return i.slice(0,t)},v.sortBy=function(e,t,n){var i=0;return t=w(t,n),v.pluck(v.map(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};var j=function(e,t){return function(n,i,r){var o=t?[[],[]]:{};return i=w(i,r),v.each(n,(function(t,r){var a=i(t,r,n);e(o,t,a)})),o}};v.groupBy=j((function(e,t,n){S(e,n)?e[n].push(t):e[n]=[t]})),v.indexBy=j((function(e,t,n){e[n]=t})),v.countBy=j((function(e,t,n){S(e,n)?e[n]++:e[n]=1}));var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(e){return e?v.isArray(e)?u.call(e):v.isString(e)?e.match(A):T(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:T(e)?e.length:v.keys(e).length},v.partition=j((function(e,t,n){e[n?0:1].push(t)}),!0),v.first=v.head=v.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,Boolean)};var M=function(e,t,n,i){for(var r=(i=i||[]).length,o=0,a=k(e);o<a;o++){var s=e[o];if(T(s)&&(v.isArray(s)||v.isArguments(s)))if(t)for(var c=0,l=s.length;c<l;)i[r++]=s[c++];else M(s,t,n,i),r=i.length;else n||(i[r++]=s)}return i};v.flatten=function(e,t){return M(e,t,!1)},v.without=x((function(e,t){return v.difference(e,t)})),v.uniq=v.unique=function(e,t,n,i){v.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var r=[],o=[],a=0,s=k(e);a<s;a++){var c=e[a],l=n?n(c,a,e):c;t&&!n?(a&&o===l||r.push(c),o=l):n?v.contains(o,l)||(o.push(l),r.push(c)):v.contains(r,c)||r.push(c)}return r},v.union=x((function(e){return v.uniq(M(e,!0,!0))})),v.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=k(e);i<r;i++){var o=e[i];if(!v.contains(t,o)){var a;for(a=1;a<n&&v.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},v.difference=x((function(e,t){return t=M(t,!0,!0),v.filter(e,(function(e){return!v.contains(t,e)}))})),v.unzip=function(e){for(var t=e&&v.max(e,k).length||0,n=Array(t),i=0;i<t;i++)n[i]=v.pluck(e,i);return n},v.zip=x(v.unzip),v.object=function(e,t){for(var n={},i=0,r=k(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var D=function(e){return function(t,n,i){n=w(n,i);for(var r=k(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(n(t[o],o,t))return o;return-1}};v.findIndex=D(1),v.findLastIndex=D(-1),v.sortedIndex=function(e,t,n,i){for(var r=(n=w(n,i,1))(t),o=0,a=k(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o};var R=function(e,t,n){return function(i,r,o){var a=0,s=k(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=t(u.call(i,a,s),v.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(i[o]===r)return o;return-1}};v.indexOf=R(1,v.findIndex,v.sortedIndex),v.lastIndexOf=R(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r},v.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(u.call(e,i,i+=t));return n};var N=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=E(e.prototype),a=e.apply(o,r);return v.isObject(a)?a:o};v.bind=x((function(e,t,n){if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var i=x((function(r){return N(e,i,t,this,n.concat(r))}));return i})),v.partial=x((function(e,t){var n=v.partial.placeholder,i=function(){for(var r=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[r++]:t[s];for(;r<arguments.length;)a.push(arguments[r++]);return N(e,i,this,this,a)};return i})),v.partial.placeholder=v,v.bindAll=x((function(e,t){var n=(t=M(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=v.bind(e[i],e)}})),v.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return S(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},v.delay=x((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var i,r,o,a,s=0;n||(n={});var c=function(){s=!1===n.leading?0:v.now(),i=null,a=e.apply(r,o),i||(r=o=null)},l=function(){var l=v.now();s||!1!==n.leading||(s=l);var u=t-(l-s);return r=this,o=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),s=l,a=e.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(c,u)),a};return l.cancel=function(){clearTimeout(i),s=0,i=r=o=null},l},v.debounce=function(e,t,n){var i,r,o=function(t,n){i=null,n&&(r=e.apply(t,n))},a=x((function(a){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(o,t),s&&(r=e.apply(this,a))}else i=v.delay(o,t,this,a);return r}));return a.cancel=function(){clearTimeout(i),i=null},a},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2),v.restArguments=x;var L=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],I=function(e,t){var n=B.length,i=e.constructor,r=v.isFunction(i)&&i.prototype||s,o="constructor";for(S(e,o)&&!v.contains(t,o)&&t.push(o);n--;)(o=B[n])in e&&e[o]!==r[o]&&!v.contains(t,o)&&t.push(o)};v.keys=function(e){if(!v.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)S(e,n)&&t.push(n);return L&&I(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return L&&I(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},v.mapObject=function(e,t,n){t=w(t,n);for(var i=v.keys(e),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=t(e[s],s,e)}return o},v.pairs=function(e){for(var t=v.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},v.invert=function(e){for(var t={},n=v.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()};var F=function(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=e(o),s=a.length,c=0;c<s;c++){var l=a[c];t&&void 0!==n[l]||(n[l]=o[l])}return n}};v.extend=F(v.allKeys),v.extendOwn=v.assign=F(v.keys),v.findKey=function(e,t,n){t=w(t,n);for(var i,r=v.keys(e),o=0,a=r.length;o<a;o++)if(t(e[i=r[o]],i,e))return i};var z,H,V=function(e,t,n){return t in n};v.pick=x((function(e,t){var n={},i=t[0];if(null==e)return n;v.isFunction(i)?(t.length>1&&(i=b(i,t[1])),t=v.allKeys(e)):(i=V,t=M(t,!1,!1),e=Object(e));for(var r=0,o=t.length;r<o;r++){var a=t[r],s=e[a];i(s,a,e)&&(n[a]=s)}return n})),v.omit=x((function(e,t){var n,i=t[0];return v.isFunction(i)?(i=v.negate(i),t.length>1&&(n=t[1])):(t=v.map(M(t,!1,!1),String),i=function(e,n){return!v.contains(t,n)}),v.pick(e,i,n)})),v.defaults=F(v.allKeys,!0),v.create=function(e,t){var n=E(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0},z=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&H(e,t,n,i)},H=function(e,t,n,i){e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t)}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!z(e[l],t[l],n,i))return!1}else{var u,p=v.keys(e);if(l=p.length,v.keys(t).length!==l)return!1;for(;l--;)if(u=p[l],!S(t,u)||!z(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0},v.isEqual=function(e,t){return z(e,t)},v.isEmpty=function(e){return null==e||(T(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===d.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){v["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}})),v.isArguments(arguments)||(v.isArguments=function(e){return S(e,"callee")});var $=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof $&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return!v.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&isNaN(e)},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){if(!v.isArray(t))return S(e,t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(null==e||!p.call(e,r))return!1;e=e[r]}return!!n},v.noConflict=function(){return r._=o,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return v.isArray(e)?function(t){return C(t,e)}:_(e)},v.propertyOf=function(e){return null==e?function(){}:function(t){return v.isArray(t)?C(e,t):e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var i=Array(Math.max(0,e));t=b(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=v.invert(U),q=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};v.escape=q(U),v.unescape=q(W),v.result=function(e,t,n){v.isArray(t)||(t=[t]);var i=t.length;if(!i)return v.isFunction(n)?n.call(e):n;for(var r=0;r<i;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=n,r=i),e=v.isFunction(o)?o.call(e):o}return e};var G=0;v.uniqueId=function(e){var t=++G+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(e){return"\\"+K[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var i,r=RegExp([(t.escape||Y).source,(t.interpolate||Y).source,(t.evaluate||Y).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,(function(t,n,i,r,s){return a+=e.slice(o,s).replace(X,Z),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t})),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return i.call(this,e,v)},c=t.variable||"obj";return s.source="function("+c+"){\n"+a+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var J=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){return v.each(v.functions(e),(function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),J(this,n.apply(v,e))}})),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],J(this,n)}})),v.each(["concat","join","slice"],(function(e){var t=a[e];v.prototype[e]=function(){return J(this,t.apply(this._wrapped,arguments))}})),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(i=function(){return v}.apply(t,[]))||(n.exports=i)}()}).call(this,n(24),n(70)(e))},function(e,t,n){(function(i){var r,o,a;a="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i,r=[n(0),n(10),t],void 0===(o=function(e,t,n){a.Backbone=function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,i){n.each(t,(function(t,r){n[r]&&(e.prototype[r]=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],s(e,this),r)};case 4:return function(e,r,o){return n[t](this[i],s(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}}(t,r,i))}))},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?c(e):n.isString(e)?function(t){return t.get(e)}:e},c=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},u=/\s+/,d=function(e,t,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)t=d(e,t,a[s],i[a[s]],o)}else if(i&&u.test(i))for(a=i.split(u);s<a.length;s++)t=e(t,a[s],r,o);else t=e(t,i,r,o);return t};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,i,r){return e._events=d(h,e._events||{},t,n,{context:i,ctx:e,listening:r}),r&&((e._listeners||(e._listeners={}))[r.id]=r),e};l.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[r];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[r]={obj:e,objId:r,id:s,listeningTo:o,count:0}}return p(e,t,i,this,a),this};var h=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=d(f,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(t,i,this)}return this};var f=function(e,t,i,r){if(e){var o,a=0,s=r.context,c=r.listeners;if(t||i||s){for(var l=t?[t]:n.keys(e);a<l.length;a++){var u=e[t=l[a]];if(!u)break;for(var d=[],p=0;p<u.length;p++){var h=u[p];i&&i!==h.callback&&i!==h.callback._callback||s&&s!==h.context?d.push(h):(o=h.listening)&&0==--o.count&&(delete c[o.id],delete o.listeningTo[o.objId])}d.length?e[t]=d:delete e[t]}return e}for(var f=n.keys(c);a<f.length;a++)delete c[(o=c[f[a]]).id],delete o.listeningTo[o.objId]}};l.once=function(e,t,i){var r=d(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(r,t,i)},l.listenToOnce=function(e,t,i){var r=d(g,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var g=function(e,t,i,r){if(i){var o=e[t]=n.once((function(){r(t,o),i.apply(this,arguments)}));o._callback=i}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return d(m,this._events,e,void 0,n),this};var m=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&v(r,i),o&&v(o,[t].concat(i))}return e},v=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var y=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,u=this.changed,d=this._previousAttributes;for(var p in r)t=r[p],n.isEqual(l[p],t)||s.push(p),n.isEqual(d[p],t)?delete u[p]:u[p]=t,o?delete l[p]:l[p]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=i);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,l[s[h]],i)}if(c)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var o=e[r];n.isEqual(t[r],o)||(i[r]=o)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;if(!t.set(r,e))return!1;i&&i.call(e.context,t,n,e),t.trigger("sync",t,n,e)},B(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t;var o=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,c=this.attributes;i.success=function(e){a.attributes=c;var t=i.parse?a.parse(e,i):e;if(o&&(t=n.extend({},r,t)),t&&!a.set(t,i))return!1;s&&s.call(i.context,a,e,i),a.trigger("sync",a,e,i)},B(this,i),r&&o&&(this.attributes=n.extend({},c,r));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=r);var u=this.sync(l,this,i);return this.attributes=c,u},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(B(this,e),a=this.sync("delete",this,e)),r||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}}),a(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var b=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},E=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<o;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};n.extend(b.prototype,l,{model:y,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){(t=n.extend({},w,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,a,s=[],c=[],l=[],u=[],d={},p=t.add,h=t.merge,f=t.remove,g=!1,m=this.comparator&&null==r&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var y=this.get(o);if(y){if(h&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),l.push(y),m&&!g&&(g=y.hasChanged(v))}d[y.cid]||(d[y.cid]=!0,s.push(y)),e[a]=y}else p&&(o=e[a]=this._prepareModel(o,t))&&(c.push(o),this._addReference(o,t),d[o.cid]=!0,s.push(o))}if(f){for(a=0;a<this.length;a++)d[(o=this.models[a]).cid]||u.push(o);u.length&&this._removeModels(u,t)}var x=!1,_=!m&&p&&f;if(s.length&&_?(x=this.length!==s.length||n.some(this.models,(function(e,t){return e!==s[t]})),this.models.length=0,E(this.models,s,0),this.length=this.models.length):c.length&&(m&&(g=!0),E(this.models,c,null==r?this.length:r),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(a=0;a<c.length;a++)null!=r&&(t.index=r+a),(o=c[a]).trigger("add",o,this,t);(g||x)&&this.trigger("sort",this,t),(c.length||u.length||l.length)&&(t.changes={added:c,removed:u,merged:l},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){var i=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}}),a(b,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var _=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,C)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(S);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var o=O[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||L()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var c=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,c&&c.call(r.context,e,t,n)};var l=r.xhr=t.ajax(n.extend(a,r));return i.trigger("request",i,l,r),l};var O={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,j=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,l,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,(function(n){var a=o._extractParameters(e,n);!1!==o.execute(r,a,i)&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),t.history.trigger("route",o,i,a))})),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(T,"(?:$1)?").replace(P,(function(e,t){return t?e:"([^/?]+)"})).replace(j,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,(function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null}))}});var M=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,N=/#.*$/;M.started=!1,n.extend(M.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(D,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(R,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!M.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(N,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new M,y.extend=b.extend=k.extend=_.extend=M.extend=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};var L=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}(a,n,e,t)}.apply(t,r))||(e.exports=o)}).call(this,n(24))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"o",(function(){return b})),n.d(t,"t",(function(){return u})),n.d(t,"s",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"q",(function(){return s})),n.d(t,"g",(function(){return w})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return f})),n.d(t,"p",(function(){return y})),n.d(t,"f",(function(){return S})),n.d(t,"m",(function(){return C})),n.d(t,"e",(function(){return v})),n.d(t,"v",(function(){return l})),n.d(t,"r",(function(){return g})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return p})),n.d(t,"c",(function(){return O})),n.d(t,"j",(function(){return P})),n.d(t,"u",(function(){return j})),n.d(t,"a",(function(){return c})),n.d(t,"l",(function(){return k})),n.d(t,"n",(function(){return T}));var i=n(6),r=n.n(i),o=n(0),a=window.Element.prototype,s=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector,c=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(o.isArray)(t)?r()(t):[t];if(i.length){var a=i.shift();if(a&&(!n.unique||!document.querySelector('link[href="'.concat(a,'"]')))){var s=document,c=s.head,l=document.createElement("link");l.href=a,l.rel="stylesheet",n.prepand?c.insertBefore(l,c.firstChild):c.appendChild(l)}e(i)}},l=function(e,t){var n={},i=Object(o.keys)(t);for(var r in e)if(e.hasOwnProperty(r)){var a=e[r],s=t[r];i.indexOf(r)>=0?a!==s&&(n[r]=s):n[r]=null}for(var c in t)t.hasOwnProperty(c)&&Object(o.isUndefined)(e[c])&&(n[c]=t[c]);return n},u=function(e,t,n){t=t.split(/\s+/),e=e instanceof Array?e:[e];for(var i=function(i){e.forEach((function(e){return e.addEventListener(t[i],n)}))},r=0;r<t.length;++r)i(r)},d=function(e,t,n){t=t.split(/\s+/),e=e instanceof Array?e:[e];for(var i=function(i){e.forEach((function(e){return e.removeEventListener(t[i],n)}))},r=0;r<t.length;++r)i(r)},p=function(e){return e.replace(parseFloat(e),"")},h=function(e){return e[0].toUpperCase()+e.toLowerCase().slice(1)},f=function(e){var t=e.split("-").filter(String);return t[0].toLowerCase()+t.slice(1).map(h)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0;if(isNaN(e))return n;if(e=parseFloat(e),Math.floor(e)!==e){var r=t.toString().split(".")[1];i=r?r.length:0}return i?parseFloat(e.toFixed(i)):e},m=function(e){return"draggable"in document.createElement("i")&&(e?e.get("Config").nativeDnD:1)},v=function(e){return Object(o.isElement)(e)||y(e)?e:e&&e.getEl?e.getEl():void 0},y=function(e){return e&&3===e.nodeType},b=function(e){return e&&!y(e)&&!function(e){return e&&8===e.nodeType}(e)},w=function(e,t){var n=e;return Object(o.isElement)(e)&&(n=t(e).data("model")),n},x=function(e){var t,n={top:0,left:0,width:0,height:0};if(!e)return n;if(y(e)){var i=document.createRange();i.selectNode(e),t=i.getBoundingClientRect(),i.detach()}return t||(e.getBoundingClientRect?e.getBoundingClientRect():n)},E=function(e){return e.touches&&e.touches[0]?e.touches[0]:e},_=function(e){return e.which||e.keyCode},S=function(e){return String.fromCharCode(_(e))},C=function(e){return 27===_(e)},O=function(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)},k=function(e){return e&&e.toHTML},T=function(e){return e&&e.toCSS},P=function(e){return e.__gjsv},j=function(e,t){e.__gjsv=t}},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),o=n(2),a=n.n(o),s=n(0),c=n(3),l=n(22),u=n(1),d=n.n(u),p=n(20),h=n(9),f=n(11);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=d.a.Model.extend({defaults:{type:"text",label:"",name:"",min:"",max:"",unit:"",step:1,value:"",target:"",default:"",placeholder:"",changeProp:0,options:[]},initialize:function(){var e=this.get("target"),t=this.get("name"),n=this.get("changeProp");if(e){this.target=e,this.unset("target");var i=n?"change:".concat(t):"change:attributes:".concat(t);this.listenTo(e,i,this.targetUpdated)}},props:function(){return this.attributes},targetUpdated:function(){var e=this.getTargetValue();this.set({value:e},{fromTarget:1})},getTargetValue:function(){var e,t=this.get("name"),n=this.target;return e=this.get("changeProp")?n.get(t):n.getAttributes()[t],Object(s.isUndefined)(e)?"":e},setTargetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,i=this.get("name");if(!Object(s.isUndefined)(e)){var r=e;if("false"===e?r=!1:"true"===e&&(r=!0),this.get("changeProp"))n.set(i,r,t);else{var o=m({},n.get("attributes"));o[i]=r,n.set("attributes",o,t)}}},setValueFromInput:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={value:e};this.set(i,m({},n,{avoidStore:1})),t&&(this.set("value","",n),this.set(i,n))},getInitValue:function(){var e,t=this.target,n=this.get("name");if(t){var i=t.get("attributes");e=this.get("changeProp")?t.get(n):i[n]}return e||this.get("value")||this.get("default")}}),y=d.a.Collection.extend({model:v,initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.em=t.em||"",this.listenTo(this,"add",this.handleAdd),this.listenTo(this,"reset",this.handleReset)},handleReset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.previousModels,i=void 0===n?[]:n;i.forEach((function(e){return e.trigger("remove")}))},handleAdd:function(e){var t=this.target;t&&(e.target=t)},setTarget:function(e){this.target=e},add:function(e,t){var n=this.em;if(Object(s.isString)(e)||Object(s.isArray)(e)){var i=n&&n.get&&n.get("TraitManager"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{build:function(t){var n=[];"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++){var r={},o=t[i];switch(r.name=o,o){case"target":r.type="select"}switch(o){case"target":r.options=e.optionsTarget}n.push(r)}return n}}}(i&&i.getConfig());Object(s.isString)(e)&&(e=[e]);for(var o=0,a=e.length;o<a;o++){var c=e[o],l=Object(s.isString)(c)?r.build(c)[0]:c;l.target=this.target,e[o]=l}}return d.a.Collection.prototype.add.apply(this,[e,t])}});function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"eventDrag",(function(){return E}));var x=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},E="component:drag",_=d.a.Model.extend(l.a).extend({defaults:{tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",classes:"",script:"","script-export":"",attributes:"",traits:["id","title"],propagate:"",dmode:"",toolbar:null},init:function(){},updated:function(e,t,n){},removed:function(){},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.em,r=this.parent(),o=r&&r.attributes;if(o&&o.propagate){var a={},c=o.propagate;c.forEach((function(e){return a[e]=r.get(e)})),a.propagate=c,a=w({},a,{},t),this.set(a)}var l=this.get("propagate");l&&this.set("propagate",Object(s.isArray)(l)?l:[l]),n&&n.config&&n.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),n.em=i,this.opt=n,this.em=i,this.frame=n.frame,this.config=n.config||{},this.set("attributes",w({},this.defaults.attributes||{},{},this.get("attributes")||{})),this.ccid=_.createId(this),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.set("status",""),this.views=[],["classes","traits","components"].forEach((function(t){var n="add remove ".concat("components"!==t?"change":"");e.listenTo(e.get(t),n.trim(),(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.emitUpdate.apply(e,[t].concat(i))}))})),n.temporary||(this.init(),i&&i.trigger("component:create",this))},is:function(e){return!(this.get("type")!=e)},props:function(){return this.attributes},index:function(){var e=this.collection;return e&&e.indexOf(this)},setDragMode:function(e){return this.set("dmode",e)},find:function(e){var t=[],n=this.view.$el.find(e);return n.each((function(e){var i=n.eq(e).data("model");i&&t.push(i)})),t},findType:function(e){var t=[];return function n(i){return i.forEach((function(i){i.is(e)&&t.push(i),n(i.components())}))}(this.components()),t},closest:function(e){var t=this.view.$el.closest(e);return t.length&&t.data("model")},closestType:function(e){for(var t=this.parent();t&&!t.is(e);)t=t.parent();return t},tagUpdated:function(){var e=this.collection,t=e.indexOf(this);e.remove(this),e.add(this,{at:t})},replaceWith:function(e){var t=this.collection,n=t.indexOf(this);return t.remove(this),t.add(e,{at:n})},attrUpdated:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.get("attributes"),o=r.class;o&&this.setClass(o),delete r.class;var a=r.style;a&&this.setStyle(a),delete r.style;var l=w({},this.previous("attributes")),u=Object(c.v)(l,this.get("attributes"));Object(s.keys)(u).forEach((function(e){return n.trigger("change:attributes:".concat(e),n,u[e],i)}))},setAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.set("attributes",w({},e),t),this},addAttributes:function(e){var t=w({},this.getAttributes(),{},e);return this.setAttributes(t),this},getStyle:function(){var e=this.em;if(e&&e.getConfig("avoidInlineStyle")){var t=e.get("state"),n=e.get("CssComposer").getIdRule(this.getId(),{state:t});if(this.rule=n,n)return n.getStyle()}return l.a.getStyle.call(this)},setStyle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.em,r=this.opt;if(i&&i.getConfig("avoidInlineStyle")&&!r.temporary){var o=this.get("style")||{};t=w({},t=Object(s.isString)(t)?this.parseStyle(t):t,{},o);var a=i.get("state"),u=i.get("CssComposer"),d=this.getStyle();this.rule=u.setIdRule(this.getId(),t,w({},n,{state:a}));var p=Object(c.v)(d,t);this.set("style",{},{silent:1}),Object(s.keys)(p).forEach((function(t){return e.trigger("change:style:".concat(t))}))}else t=l.a.setStyle.apply(this,arguments);return t},getAttributes:function(){var e,t=this.em,n=[],i=w({},this.get("attributes")),r=t&&t.get("SelectorManager"),o=this.getId();return this.get("classes").forEach((function(e){return n.push(Object(s.isString)(e)?e:e.get("name"))})),n.length&&(i.class=n.join(" ")),Object(s.has)(i,"id")||(function(e){return e&&e.getConfig("avoidInlineStyle")}(t)?e=r&&r.get(o,r.Selector.TYPE_ID):Object(s.isEmpty)(this.getStyle())||(e=1),e&&(i.id=this.getId())),i},addClass:function(e){var t=this.em.get("SelectorManager").addClass(e);return this.get("classes").add(t)},setClass:function(e){return this.get("classes").reset(),this.addClass(e)},removeClass:function(e){var t=[];e=Object(s.isArray)(e)?e:[e];var n=this.get("classes"),i=h.a.TYPE_CLASS;return e.forEach((function(e){e.split(" ").forEach((function(e){var r=n.where({name:e,type:i})[0];r&&t.push(n.remove(r))}))})),t},getClasses:function(){var e=this.getAttributes().class;return e?e.split(" "):[]},initClasses:function(){var e=[this,"change:classes",this.initClasses],t=this.get("classes")||[],n=Object(s.isString)(t)?t.split(" "):t;this.stopListening.apply(this,e);var i=this.normalizeClasses(n),r=new f.a([]);return this.set("classes",r),r.add(i),this.listenTo.apply(this,e),this},initComponents:function(){var e=[this,"change:components",this.initComponents];this.stopListening.apply(this,e);var t=new p.a(null,this.opt);t.parent=this;var n=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",t),i&&t.add(Object(s.isFunction)(n)?n(this):n),this.listenTo.apply(this,e),this},initTraits:function(e){var t=this.em,n=[this,"change:traits",this.initTraits];this.stopListening.apply(this,n),this.loadTraits();var i=w({},this.get("attributes")),r=this.get("traits");return r.each((function(e){if(!e.get("changeProp")){var t=e.get("name"),n=e.getInitValue();t&&n&&(i[t]=n)}})),r.length&&this.set("attributes",i),this.listenTo.apply(this,n),e&&t&&t.trigger("component:toggled"),this},append:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.components().add(e,t);return Object(s.isArray)(n)?n:[n]},components:function(e){var t=this.get("components");return Object(s.isUndefined)(e)?t:(t.reset(),e&&this.append(e))},empty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.components().reset(null,e),this},parent:function(){var e=this.collection;return e&&e.parent},scriptUpdated:function(){this.set("scriptUpdated",1)},initToolbar:function(){var e=this.em,t=e&&e.getConfig("stylePrefix")||"";if(!this.get("toolbar")){var n=[];this.collection&&n.push({attributes:{class:"fa fa-arrow-up"},command:function(e){return e.runCommand("core:component-exit",{force:1})}}),this.get("draggable")&&n.push({attributes:{class:"fa fa-arrows ".concat(t,"no-touch-actions"),draggable:!0},command:"tlb-move"}),this.get("copyable")&&n.push({attributes:{class:"fa fa-clone"},command:"tlb-clone"}),this.get("removable")&&n.push({attributes:{class:"fa fa-trash-o"},command:"tlb-delete"}),this.set("toolbar",n)}},loadTraits:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=e||this.get("traits"),!((e=Object(s.isFunction)(e)?e(this):e)instanceof y)){var n=new y([],this.opt);n.setTarget(this),e.length&&(e.forEach((function(e){return e.attributes&&delete e.attributes.value})),n.add(e)),this.set("traits",n,t)}return this},getTrait:function(e){return this.get("traits").filter((function(t){return t.get("id")===e||t.get("name")===e}))[0]},updateTrait:function(e,t){var n=this.em,i=this.getTrait(e);return i&&i.set(t),n&&n.trigger("component:toggled"),this},getTraitIndex:function(e){var t=this.getTrait(e);return t?this.get("traits").indexOf(t):t},removeTrait:function(e){var t=this,n=this.em,i=(Object(s.isArray)(e)?e:[e]).map((function(e){return t.getTrait(e)})),r=this.get("traits").remove(i);return n&&n.trigger("component:toggled"),r},addTrait:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,i=this.get("traits").add(e,t);return n&&n.trigger("component:toggled"),i},normalizeClasses:function(e){var t=[],n=this.em;if(n){var i=n.get("SelectorManager");if(i)return e.forEach((function(e){var n;n="string"==typeof e?e:e.name;var r=i.add(n);t.push(r)})),t}},clone:function(){var e=this.em,t=this.getStyle(),n=w({},this.attributes),i=w({},this.opt);n.attributes=w({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.get("components").each((function(e,t){n.components[t]=e.clone()})),this.get("traits").each((function(e,t){n.traits[t]=e.clone()})),this.get("classes").each((function(e,t){n.classes[t]=e.get("name")})),n.status="",n.view="",i.collection=null,e&&e.getConfig("avoidInlineStyle")&&!Object(s.isEmpty)(t)&&(n.style=t);var r=new this.constructor(n,i);return e&&e.trigger("component:clone",r),this.trigger("component:clone",r),r},getName:function(){var e=this.em,t=this.attributes,n=t.type,i=t.tagName,r=this.get("name"),o="div"==i,a=n||(o?"box":i),s=!n&&i&&!o&&i,l="domComponents.names.",u=r&&e&&e.t("".concat(l).concat(r)),d=s&&e&&e.t("".concat(l).concat(s)),p=e&&(e.t("".concat(l).concat(n))||e.t("".concat(l).concat(i)));return this.get("custom-name")||u||r||d||Object(c.c)(s)||p||Object(c.c)(a)},getIcon:function(){var e=this.get("icon");return e?e+" ":""},toHTML:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=[],i=e.tag,r=i||t.get("tagName"),o=t.get("void"),a=e.attributes,c=this.getAttrToHTML();for(var l in delete e.tag,a&&(Object(s.isFunction)(a)?c=a(t,c)||{}:Object(s.isObject)(a)&&(c=a)),c){var u=c[l],d=Object(s.isString)(u)?u.replace(/"/g,"&quot;"):u;Object(s.isUndefined)(d)||(Object(s.isBoolean)(d)?d&&n.push(l):n.push("".concat(l,'="').concat(d,'"')))}var p=n.length?" ".concat(n.join(" ")):"",h="<".concat(r).concat(p).concat(o?"/":"",">").concat(t.get("content"));return t.get("components").each((function(t){return h+=t.toHTML(e)})),!o&&(h+="</".concat(r,">")),h},getAttrToHTML:function(){var e=this.getAttributes();return delete e.style,e},toJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=d.a.Model.prototype.toJSON.apply(this,t);if(i.attributes=this.getAttributes(),delete i.attributes.class,delete i.toolbar,delete i.traits,this.em.getConfig("avoidDefaults")){var r=Object(s.result)(this,"defaults");Object(s.forEach)(r,(function(e,t){-1===["type","content"].indexOf(t)&&i[t]===e&&delete i[t]})),Object(s.isEmpty)(i.type)&&delete i.type,Object(s.forEach)(["attributes","style"],(function(e){Object(s.isEmpty)(r[e])&&Object(s.isEmpty)(i[e])&&delete i[e]})),Object(s.forEach)(["classes","components"],(function(e){Object(s.isEmpty)(r[e])&&!i[e].length&&delete i[e]}))}return i},getId:function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},setId:function(e,t){var n=w({},this.get("attributes"));return n.id=e,this.set("attributes",n,t),this},getEl:function(e){var t=this.getView(e);return t&&t.el},getView:function(e){var t=this.view,n=this.views;return e&&(t=n.filter((function(t){return t._getFrame()===e.view}))[0]),t},getCurrentView:function(){var e=(this.em.get("currentFrame")||{}).model;return this.getView(e)},getScriptString:function(e){var t=this,n=e||this.get("script");if(!n)return n;if("function"==typeof n){var i=n.toString().trim();n=(i=i.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var o=this.em.getConfig(),a=x(o.tagVarStart||"{[ "),c=x(o.tagVarEnd||" ]}"),l=new RegExp("".concat(a,"([\\w\\d-]*)").concat(c),"g");return n.replace(l,(function(e,n){t.scriptUpdated();var i=t.attributes[n]||"";return Object(s.isArray)(i)||"object"==r()(i)?JSON.stringify(i):i}))},emitUpdate:function(e){for(var t=this.em,n="component:update"+(e?":".concat(e):""),i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];e&&this.updated.apply(this,[e,e&&this.get(e),e&&this.previous(e)].concat(r)),this.trigger.apply(this,[n].concat(r)),t&&t.trigger.apply(t,[n,this].concat(r))},onAll:function(e){return Object(s.isFunction)(e)&&(e(this),this.components().forEach((function(t){return t.onAll(e)}))),this},remove:function(){var e=this.collection;return e&&e.remove(this)},resetId:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.em,t=this.getId();if(t){var n=_.createId(this);this.setId(n);var i=e&&e.get("CssComposer").getIdRule(t),r=i&&i.get("selectors").at(0);return r&&r.set("name",n),this}},_getStyleRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=this.em,i=t||this.getId();return n&&n.get("CssComposer").getIdRule(i)},_getStyleSelector:function(e){var t=this._getStyleRule(e);return t&&t.get("selectors").at(0)},_idUpdated:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.idUpdate){var i=this.ccid,r=this.get("attributes")||{},o=r.id,a=(this.previous("attributes")||{}).id||i,s=_.getList(this);if(s[o])return this.setId(a,{idUpdate:1});delete s[a],s[o]=this,this.ccid=o;var c=this._getStyleSelector({id:a});c&&c.set({name:o,label:o})}}},{isComponent:function(e){return{tagName:e.tagName?e.tagName.toLowerCase():""}},ensureInList:function(e){var t=_.getList(e),n=e.getId(),i=t[n];if(i){if(i!==e){var r=_.getIncrementId(n,t);e.setId(r),t[r]=e}}else t[n]=e;e.components().forEach((function(e){return _.ensureInList(e)}))},createId:function(e){var t,n=_.getList(e),i=e.get("attributes").id;return i?(t=_.getIncrementId(i,n),e.setId(t)):t=_.getNewId(n),n[t]=e,t},getNewId:function(e){for(var t=Object.keys(e).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-t),i="i".concat(n);e[i];)i=_.getNewId(e);return i},getIncrementId:function(e,t){for(var n=1,i=e;t[i];)n++,i="".concat(e,"-").concat(n);return i},getList:function(e){var t=e.opt&&e.opt.domc;return t?t.componentsById:{}},checkId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object(s.isArray)(e)?e:[e];i.forEach((function(e){var i=e.attributes,r=void 0===i?{}:i,o=e.components,a=r.id;if(a&&n[a]){var c=_.getIncrementId(a,n);r.id=c,Object(s.isArray)(t)&&t.forEach((function(e){var t=e.selectors;t.forEach((function(e,n){e==="#".concat(a)&&(t[n]="#".concat(c))}))}))}o&&_.checkId(o,t,n)}))}});t.default=_},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(1),a=n.n(o),s=n(0),c=n(20),l=n(34),u=n(11),d=n(7),p=n(3);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=a.a.View.extend({className:function(){return this.getClasses()},tagName:function(){return this.model.get("tagName")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=e.config||{},i=n.em,r=t.opt||{},o=this.$el,a=this.el,s=n.draggableComponents;this.opts=e,this.modelOpt=r,this.config=n,this.em=i||"",this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=t.get("attributes"),this.classe=this.attr.class||[],this.listenTo(t,"change:style",this.updateStyle),this.listenTo(t,"change:attributes change:_innertext",this.renderAttributes),this.listenTo(t,"change:highlightable",this.updateHighlight),this.listenTo(t,"change:status",this.updateStatus),this.listenTo(t,"change:script",this.reset),this.listenTo(t,"change:content",this.updateContent),this.listenTo(t,"change",this.handleChange),this.listenTo(t,"active",this.onActive),this.listenTo(t,"disable",this.onDisable),o.data("model",t),Object(p.u)(a,this),t.view=this,this._getFrame()&&t.views.push(this),this.initClasses(),this.initComponents({avoidRender:1}),this.events=f({},this.events,{},s&&{dragstart:"handleDragStart"}),this.delegateEvents(),!r.temporary&&this.init(this._clbObj())},_clbObj:function(){var e=this.em,t=this.model,n=this.el;return{editor:e&&e.getEditor(),model:t,el:n}},init:function(){},removed:function(){},onActive:function(){},onDisable:function(){},remove:function(){var e=this;a.a.View.prototype.remove.apply(e,arguments);var t=e.model,n=e._getFrame()||{},i=n.model;t.components().forEach((function(e){var t=e.getView(i);t&&t.remove()}));var r=t.views;return r.splice(r.indexOf(e),1),e.removed(e._clbObj()),e.$el.data({model:"",collection:"",view:""}),delete e.model,delete e.$el,delete e.el.__gjsv,delete e.childrenView,delete e.scriptContainer,delete e.opts,e},handleDragStart:function(e){e.preventDefault(),e.stopPropagation(),this.em.get("Commands").run("tlb-move",{target:this.model,event:e})},initClasses:function(){var e=this.model,t=e.get("classes");t instanceof u.a&&(this.stopListening(e,"change:classes",this.initClasses),this.listenTo(e,"change:classes",this.initClasses),this.listenTo(t,"add remove change",this.updateClasses),t.length&&this.importClasses())},initComponents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.$el,i=this.childrenView,r="change:components",o=t.get("components"),a=[t,r,this.initComponents];o instanceof c.a&&(n.data("collection",o),i&&i.remove(),this.stopListening.apply(this,a),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,a))},handleChange:function(){var e=this.model,t=Object(s.keys)(e.changed);if(1!==t.length||"status"!==t[0])for(var n in e.emitUpdate(),e.changed)e.emitUpdate(n)},importClasses:function(){var e=this.config.em.get("SelectorManager");e&&this.model.get("classes").each((function(t){e.add(t.get("name"))}))},updateStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(this.em,this.el),n=this.model.get("status"),i=(this.pfx,this.ppfx),r="".concat(i,"selected"),o="".concat(r,"-parent"),a="".concat(i,"freezed"),s="".concat(i,"hovered"),c=[r,o,a,s];this.$el.removeClass(c.join(" "));var l=t.getAttribute("class")||"",u="";switch(n){case"selected":u="".concat(l," ").concat(r);break;case"selected-parent":u="".concat(l," ").concat(o);break;case"freezed":u="".concat(l," ").concat(a);break;case"freezed-selected":u="".concat(l," ").concat(a," ").concat(r);break;case"hovered":u=e.avoidHover?"":"".concat(l," ").concat(s)}(u=u.trim())&&t.setAttribute("class",u)},updateHighlight:function(){var e=this.model.get("highlightable");this.setAttribute("data-highlightable",e?1:"")},updateStyle:function(){var e=this.model,t=this.em,n=this.el;if(t&&t.getConfig("avoidInlineStyle")){e.get("_innertext")?n.removeAttribute("id"):n.id=e.getId();var i=e.getStyle();!Object(s.isEmpty)(i)&&e.setStyle(i)}else this.setAttribute("style",e.styleToString())},updateClasses:function(){var e=this.model.get("classes").pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus()},setAttribute:function(e,t){var n=this.$el;t?n.attr(e,t):n.removeAttr(e)},getClasses:function(){return this.model.getClasses().join(" ")},updateAttributes:function(){var e=[],t=this.model,n=this.$el,i=this.el,r=this.config,o=t.attributes,a=o.highlightable,c=o.textable,l=o.type,u=o._innertext,d=f({"data-gjs-type":l||"default"},r.draggableComponents&&!u?{draggable:!0}:{},{},a?{"data-highlightable":1}:{},{},c?{contenteditable:"false","data-gjs-textable":"true"}:{});Object(s.each)(i.attributes,(function(t){return e.push(t.nodeName)})),e.forEach((function(e){return n.removeAttr(e)}));var p=f({},d,{},t.getAttributes());Object(s.keys)(p).forEach((function(e){return!1===p[e]&&delete p[e]})),n.attr(p),this.updateStyle()},updateContent:function(){this.getChildrenContainer().innerHTML=this.model.get("content")},prevDef:function(e){e.preventDefault()},updateScript:function(){var e=this.model,t=this.em;e.get("script")&&t&&t.get("Canvas").getCanvasView().updateScript(this)},getChildrenContainer:function(){var e=this.el;return"function"==typeof this.getChildrenSelector?e=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,e},getOffsetRect:function(){var e={},t=this.el,n=0,i=0;return function r(o){var a=o.offsetParent;a?(n+=a.offsetTop,i+=a.offsetLeft,r(a)):(e.top=t.offsetTop+n,e.left=t.offsetLeft+i,e.bottom=e.top+t.offsetHeight,e.right=e.left+t.offsetWidth)}(t),e},isInViewport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rect,n=this.el,i=n.ownerDocument,r=i.body,o=i.defaultView.frameElement,a=t||this.getOffsetRect(),s=a.top,c=a.left,l=this._getFrame().getOffsetRect();return s>=l.scrollTop&&c>=l.scrollLeft&&s<=l.scrollBottom&&c<=o.offsetWidth+r.scrollLeft},scrollIntoView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getOffsetRect(),n=this.isInViewport({rect:t});if(!n||e.force){var i=this.el;"smooth"!==e.behavior?i.ownerDocument.defaultView.scrollTo(0,t.top):i.scrollIntoView(f({behavior:"smooth",block:"nearest"},e))}},reset:function(){var e=this.el;this.el="",this._ensureElement(),this._setData(),Object(d.h)(e,this.el),this.render()},_setData:function(){var e=this.model,t=e.components();this.$el.data({model:e,collection:t,view:this})},_getFrame:function(){return this.config.frameView},renderChildren:function(){this.updateContent();var e=this.getChildrenContainer(),t=this.childrenView||new l.a({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});t.render(e),this.childrenView=t;for(var n=Array.prototype.slice.call(t.el.childNodes),i=0,r=n.length;i<r;i++)e.appendChild(n.shift())},renderAttributes:function(){this.updateAttributes(),this.updateClasses()},render:function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),Object(p.u)(this.el,this),this.postRender()),this},postRender:function(){var e=this.em,t=this.model;this.modelOpt.temporary||(this.onRender(this._clbObj()),e&&e.trigger("component:mount",t))},onRender:function(){}})},function(e,t,n){var i=n(71),r=n(72),o=n(73);e.exports=function(e){return i(e)||r(e)||o()}},function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d}));var i=n(0),r="transitionend oTransitionEnd transitionend webkitTransitionEnd",o=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},a=function(e,t){e.parentNode.replaceChild(t,e)},s=function(e,t,n){var r=e.childNodes,o=r.length,a=Object(i.isUndefined)(n)?o:n;Object(i.isString)(t)&&(e.insertAdjacentHTML("beforeEnd",t),t=e.lastChild,e.removeChild(t)),a>=o?e.appendChild(t):e.insertBefore(t,r[a])},c=function(e,t){return s(e,t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=document.createElement(e);return t&&Object(i.each)(t,(function(e,t){return r.setAttribute(t,e)})),n&&(Object(i.isString)(n)?r.innerHTML=n:r.appendChild(n)),r},u=function(e,t){var n;try{n=new window[t](e.type,e)}catch(e){(n=document.createEvent(t)).initEvent(e.type,!0,!0)}return n.keyCodeVal=e.keyCode,n._parentEvent=e,["keyCode","which"].forEach((function(e){Object.defineProperty(n,e,{get:function(){return this.keyCodeVal}})})),n},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(t)?t:[t];n.forEach((function(t){var n=t.tag||"div",r=t.attributes||{},o=document.createElement(n);Object(i.each)(r,(function(e,t){o.setAttribute(t,e)})),e.appendChild(o)}))}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){"use strict";var i=n(1),r=n.n(i).a.Model.extend({idAttribute:"name",defaults:{name:"",label:"",type:1,active:!0,private:!1,protected:!1},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.config,i=void 0===n?{}:n,o=this.get("name"),a=this.get("label");o?a||this.set("label",o):this.set("name",a);var s=this.get("name"),c=i.escapeName,l=c?c(s):r.escapeName(s);this.set("name",l)},getFullName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.escape,n=this.get("name"),i="";switch(this.get("type")){case 1:i=".";break;case 2:i="#"}return i+(t?t(n):n)}},{TYPE_CLASS:1,TYPE_ID:2,escapeName:function(e){return"".concat(e).trim().replace(/([^a-z0-9\w-\:]+)/gi,"-")}});t.a=r},function(e,t,n){"use strict";n.r(t);var i=document,r=window,o=Array.prototype,a=o.filter,s=o.indexOf,c=o.map,l=o.push,u=o.reverse,d=o.slice,p=o.splice,h=/^#[\w-]*$/,f=/^\.[\w-]*$/,g=/<.+>/,m=/^\w+$/;function v(e,t){return void 0===t&&(t=i),f.test(e)?t.getElementsByClassName(e.slice(1)):m.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e)}function y(e,t){if(void 0===t&&(t=i),e){if(e.__cash)return e;var n=e;if(T(e)){if(t.__cash&&(t=t[0]),!(n=h.test(e)?t.getElementById(e.slice(1)):g.test(e)?de(e):v(e,t)))return}else if(k(e))return this.ready(e);(n.nodeType||n===r)&&(n=[n]),this.length=n.length;for(var o=0,a=this.length;o<a;o++)this[o]=n[o]}}function b(e,t){return new y(e,t)}var w=b.fn=b.prototype=y.prototype={constructor:b,__cash:!0,length:0,splice:p};w.get=function(e){return void 0===e?d.call(this):this[e<0?e+this.length:e]},w.eq=function(e){return b(this.get(e))},w.first=function(){return this.eq(0)},w.last=function(){return this.eq(-1)},w.map=function(e){return b(c.call(this,(function(t,n){return e.call(t,n,t)})))},w.slice=function(){return b(d.apply(this,arguments))};var x=/(?:^\w|[A-Z]|\b\w)/g,E=/[\s-_]+/g;function _(e){return e.replace(x,(function(e,t){return e[t?"toUpperCase":"toLowerCase"]()})).replace(E,"")}function S(e,t){for(var n=0,i=e.length;n<i&&!1!==t.call(e[n],e[n],n,e);n++);}b.camelCase=_,b.each=S,w.each=function(e){return S(this,(function(t,n){return e.call(t,n,t)})),this},w.removeProp=function(e){return this.each((function(t,n){delete n[e]}))},b.extend=w.extend=function(e){void 0===e&&(e=this);for(var t=arguments,n=t.length,i=n<2?0:1;i<n;i++)for(var r in t[i])e[r]=t[i][r];return e};var C=1;function O(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function k(e){return"function"==typeof e}function T(e){return"string"==typeof e}function P(e){return!isNaN(parseFloat(e))&&isFinite(e)}b.guid=C,b.matches=O,b.isFunction=k,b.isString=T,b.isNumeric=P;var j=Array.isArray;function A(e){return T(e)?function(t,n){return O(n,e)}:e.__cash?function(t,n){return e.is(n)}:function(e,t,n){return t===n}}b.isArray=j,w.prop=function(e,t){if(e){if(T(e))return arguments.length<2?this[0]&&this[0][e]:this.each((function(n,i){i[e]=t}));for(var n in e)this.prop(n,e[n]);return this}},w.filter=function(e){if(!e)return b();var t=k(e)?e:A(e);return b(a.call(this,(function(n,i){return t.call(n,i,n,e)})))};var M=/\S+/g;function D(e){return T(e)&&e.match(M)||[]}function R(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function N(e,t,n){if(1===e.nodeType){var i=r.getComputedStyle(e,null);return t?n?i.getPropertyValue(t):i[t]:i}}function L(e,t){return parseInt(N(e,t),10)||0}w.hasClass=function(e){var t=D(e),n=!1;return t.length&&this.each((function(e,i){return!(n=i.classList.contains(t[0]))})),n},w.removeAttr=function(e){var t=D(e);return t.length?this.each((function(e,n){S(t,(function(e){n.removeAttribute(e)}))})):this},w.attr=function(e,t){if(e){if(T(e)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(e);return null===n?void 0:n}return null===t?this.removeAttr(e):this.each((function(n,i){i.setAttribute(e,t)}))}for(var i in e)this.attr(i,e[i]);return this}},w.toggleClass=function(e,t){var n=D(e),i=void 0!==t;return n.length?this.each((function(e,r){S(n,(function(e){i?t?r.classList.add(e):r.classList.remove(e):r.classList.toggle(e)}))})):this},w.addClass=function(e){return this.toggleClass(e,!0)},w.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},b.unique=R,w.add=function(e,t){return b(R(this.get().concat(b(e,t).get())))};var B=/^--/;function I(e){return B.test(e)}var F={},z=i.createElement("div").style,H=["webkit","moz","ms","o"];function V(e,t){if(void 0===t&&(t=I(e)),t)return e;if(!F[e]){var n=_(e),i=""+n.charAt(0).toUpperCase()+n.slice(1);S((n+" "+H.join(i+" ")+i).split(" "),(function(t){if(t in z)return F[e]=t,!1}))}return F[e]}b.prefixedProp=V;var $={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function U(e,t,n){return void 0===n&&(n=I(e)),n||$[e]||!P(t)?t:t+"px"}w.css=function(e,t){if(T(e)){var n=I(e);return e=V(e,n),arguments.length<2?this[0]&&N(this[0],e,n):e?(t=U(e,t,n),this.each((function(i,r){1===r.nodeType&&(n?r.style.setProperty(e,t):r.style[e]=t)}))):this}for(var i in e)this.css(i,e[i]);return this};var W="__cashData",q=/^data-(.*)/;function G(e){return e[W]=e[W]||{}}function Y(e,t){var n=G(e);if(t){if(!(t in n)){var i=e.dataset?e.dataset[t]||e.dataset[_(t)]:b(e).attr("data-"+t);if(void 0!==i){try{i=JSON.parse(i)}catch(e){}n[t]=i}}return n[t]}return n}function K(e,t){return L(e,"border"+(t?"Left":"Top")+"Width")+L(e,"padding"+(t?"Left":"Top"))+L(e,"padding"+(t?"Right":"Bottom"))+L(e,"border"+(t?"Right":"Bottom")+"Width")}function X(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])<0)return!1;return!0}function Z(e,t,n){S(e[n],(function(e){e[0];var i=e[1];t.removeEventListener(n,i)})),delete e[n]}b.hasData=function(e){return W in e},w.data=function(e,t){var n=this;if(!e){if(!this[0])return;return S(this[0].attributes,(function(e){var t=e.name.match(q);t&&n.data(t[1])})),Y(this[0])}if(T(e))return void 0===t?this[0]&&Y(this[0],e):this.each((function(n,i){return function(e,t,n){G(e)[t]=n}(i,e,t)}));for(var i in e)this.data(i,e[i]);return this},w.removeData=function(e){return this.each((function(t,n){return function(e,t){void 0===t?delete e[W]:delete G(e)[t]}(n,e)}))},S(["Width","Height"],(function(e){w["inner"+e]=function(){if(this[0])return this[0]===r?r["inner"+e]:this[0]["client"+e]}})),S(["width","height"],(function(e,t){w[e]=function(n){return this[0]?arguments.length?(n=parseInt(n,10),this.each((function(i,r){if(1===r.nodeType){var o=N(r,"boxSizing");r.style[e]=U(e,n+("border-box"===o?K(r,!t):0))}}))):this[0]===r?this[0][_("outer-"+e)]:this[0].getBoundingClientRect()[e]-K(this[0],!t):void 0===n?void 0:this}})),S(["Width","Height"],(function(e,t){w["outer"+e]=function(n){if(this[0])return this[0]===r?r["outer"+e]:this[0]["offset"+e]+(n?L(this[0],"margin"+(t?"Top":"Left"))+L(this[0],"margin"+(t?"Bottom":"Right")):0)}}));var J="__cashEvents";function Q(e){return e[J]=e[J]||{}}function ee(e){var t=e.split(".");return[t[0],t.slice(1).sort()]}function te(e,t,n,i){var r=Q(e);if(t){var o=r[t];if(!o)return;i&&(i.guid=i.guid||C++),r[t]=o.filter((function(r){var o=r[0],a=r[1];if(i&&a.guid!==i.guid||!X(o,n))return!0;e.removeEventListener(t,a)}))}else if(n&&n.length)for(t in r)te(e,t,n,i);else for(t in r)Z(r,e,t)}w.off=function(e,t){var n=this;return void 0===e?this.each((function(e,t){return te(t)})):S(D(e),(function(e){var i=ee(e),r=i[0],o=i[1];n.each((function(e,n){return te(n,r,o,t)}))})),this},w.on=function(e,t,n,i){var r=this;if(!T(e)){for(var o in e)this.on(o,t,e[o]);return this}return k(t)&&(n=t,t=!1),S(D(e),(function(e){var o=ee(e),a=o[0],s=o[1];r.each((function(e,r){var o=function e(o){if(!o.namespace||X(s,o.namespace.split("."))){var c=r;if(t){for(var l=o.target;!O(l,t);){if(l===r)return;if(!(l=l.parentNode))return}c=l}o.namespace=o.namespace||"";var u=n.call(c,o,o.data);i&&te(r,a,s,e),!1===u&&(o.preventDefault(),o.stopPropagation())}};o.guid=n.guid=n.guid||C++,function(e,t,n,i){i.guid=i.guid||C++;var r=Q(e);r[t]=r[t]||[],r[t].push([n,i]),e.addEventListener(t,i)}(r,a,s,o)}))})),this},w.one=function(e,t,n){return this.on(e,t,n,!0)},w.ready=function(e){var t=function(){return e(b)};return"loading"!==i.readyState?setTimeout(t):i.addEventListener("DOMContentLoaded",t),this},w.trigger=function(e,t){var n=e;if(T(e)){var r=ee(e),o=r[0],a=r[1];(n=i.createEvent("HTMLEvents")).initEvent(o,!0,!0),n.namespace=a.join(".")}return n.data=t,this.each((function(e,t){t.dispatchEvent(n)}))};var ne=/select-one/i,ie=/select-multiple/i;function re(e){var t=e.type;return ne.test(t)?function(e){return e.selectedIndex<0?null:e.options[e.selectedIndex].value}(e):ie.test(t)?function(e){var t=[];return S(e.options,(function(e){!e.selected||e.disabled||e.parentNode.disabled||t.push(e.value)})),t}(e):e.value}var oe=/%20/g,ae=/file|reset|submit|button|image/i,se=/radio|checkbox/i;w.serialize=function(){var e="";return this.each((function(t,n){S(n.elements||[n],(function(t){if(!t.disabled&&t.name&&"FIELDSET"!==t.tagName&&!ae.test(t.type)&&(!se.test(t.type)||t.checked)){var n=re(t);void 0!==n&&S(j(n)?n:[n],(function(n){e+=function(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(oe,"+")}(t.name,n)}))}}))})),e.substr(1)},w.val=function(e){return void 0===e?this[0]&&re(this[0]):this.each((function(t,n){var i=ie.test(n.type),r=null===e?i?[]:"":e;i&&j(r)?S(n.options,(function(e){e.selected=r.indexOf(e.value)>=0})):n.value=r}))},w.clone=function(){return this.map((function(e,t){return t.cloneNode(!0)}))},w.detach=function(){return this.each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))};var ce,le=/^\s*<(\w+)[^>]*>/,ue=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function de(e){if(function(){if(!ce){var e=i.createElement("table"),t=i.createElement("tr");ce={"*":i.createElement("div"),tr:i.createElement("tbody"),td:t,th:t,thead:e,tbody:e,tfoot:e}}}(),!T(e))return[];if(ue.test(e))return[i.createElement(RegExp.$1)];var t=le.test(e)&&RegExp.$1,n=ce[t]||ce["*"];return n.innerHTML=e,b(n.childNodes).detach().get()}function pe(e,t,n){if(void 0!==t){var i=T(t);!i&&t.length?S(t,(function(t){return pe(e,t,n)})):S(e,i?function(e){e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,i){return function(e,t,n){n?e.insertBefore(t,e.childNodes[0]):e.appendChild(t)}(e,i?t.cloneNode(!0):t,n)})}}b.parseHTML=de,w.empty=function(){var e=this[0];if(e)for(;e.firstChild;)e.removeChild(e.firstChild);return this},w.append=function(){var e=this;return S(arguments,(function(t){pe(e,t)})),this},w.appendTo=function(e){return pe(b(e),this),this},w.html=function(e){if(void 0===e)return this[0]&&this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each((function(e,n){n.innerHTML=t}))},w.insertAfter=function(e){var t=this;return b(e).each((function(e,n){var i=n.parentNode;t.each((function(t,r){i.insertBefore(e?r.cloneNode(!0):r,n.nextSibling)}))})),this},w.after=function(){var e=this;return S(u.apply(arguments),(function(t){u.apply(b(t).slice()).insertAfter(e)})),this},w.insertBefore=function(e){var t=this;return b(e).each((function(e,n){var i=n.parentNode;t.each((function(t,r){i.insertBefore(e?r.cloneNode(!0):r,n)}))})),this},w.before=function(){var e=this;return S(arguments,(function(t){b(t).insertBefore(e)})),this},w.prepend=function(){var e=this;return S(arguments,(function(t){pe(e,t,!0)})),this},w.prependTo=function(e){return pe(b(e),u.apply(this.slice()),!0),this},w.remove=function(){return this.detach().off()},w.replaceWith=function(e){var t=this;return this.each((function(n,i){var r=i.parentNode;if(r){var o=n?b(e).clone():b(e);if(!o[0])return t.remove(),!1;r.replaceChild(o[0],i),b(o[0]).after(o.slice(1))}}))},w.replaceAll=function(e){return b(e).replaceWith(this),this},w.text=function(e){return void 0===e?this[0]?this[0].textContent:"":this.each((function(t,n){n.textContent=e}))};var he=i.documentElement;w.offset=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top+r.pageYOffset-he.clientTop,left:t.left+r.pageXOffset-he.clientLeft}}},w.offsetParent=function(){return b(this[0]&&this[0].offsetParent)},w.position=function(){var e=this[0];if(e)return{left:e.offsetLeft,top:e.offsetTop}},w.children=function(e){var t=[];return this.each((function(e,n){l.apply(t,n.children)})),t=b(R(t)),e?t.filter((function(t,n){return O(n,e)})):t},w.contents=function(){var e=[];return this.each((function(t,n){l.apply(e,"IFRAME"===n.tagName?[n.contentDocument]:n.childNodes)})),b(e.length&&R(e))},w.find=function(e){for(var t=[],n=0,i=this.length;n<i;n++){var r=v(e,this[n]);r.length&&l.apply(t,r)}return b(t.length&&R(t))},w.has=function(e){var t=T(e)?function(t,n){return!!v(e,n).length}:function(t,n){return n.contains(e)};return this.filter(t)},w.is=function(e){if(!e||!this[0])return!1;var t=A(e),n=!1;return this.each((function(i,r){return!(n=t(i,r,e))})),n},w.next=function(){return b(this[0]&&this[0].nextElementSibling)},w.not=function(e){if(!e||!this[0])return this;var t=A(e);return this.filter((function(n,i){return!t(n,i,e)}))},w.parent=function(){var e=[];return this.each((function(t,n){n&&n.parentNode&&e.push(n.parentNode)})),b(R(e))},w.index=function(e){var t=e?b(e)[0]:this[0],n=e?this:b(t).parent().children();return s.call(n,t)},w.closest=function(e){return e&&this[0]?this.is(e)?this.filter(e):this.parent().closest(e):b()},w.parents=function(e){var t,n=[];return this.each((function(r,o){for(t=o;t&&t.parentNode&&t!==i.body.parentNode;)t=t.parentNode,(!e||e&&O(t,e))&&n.push(t)})),b(R(n))},w.prev=function(){return b(this[0]&&this[0].previousElementSibling)},w.siblings=function(){var e=this[0];return this.parent().children().filter((function(t,n){return n!==e}))},t.default=b},function(e,t,n){"use strict";var i=n(0),r=n(1),o=n.n(r),a=n(9);t.a=o.a.Collection.extend({model:a.a,modelId:function(e){return"".concat(e.name,"_").concat(e.type||a.a.TYPE_CLASS)},getStyleable:function(){return Object(i.filter)(this.models,(function(e){return e.get("active")&&!e.get("private")}))},getValid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.noDisabled;return Object(i.filter)(this.models,(function(e){return!e.get("private")})).filter((function(e){return t?e.get("active"):1}))},getFullString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=e||this;return i.forEach((function(e){return n.push(e.getFullName(t))})),n.join("").trim()}})},function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=i||r||o,s=a&&(i?document.documentMode||6:+(o||r)[1]),c=!o&&/WebKit\//.test(e),l=c&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),x=d&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(d=!1,c=!0);var E=y&&(l||d&&(null==x||x<12.11)),_=n||a&&s>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var C,O=function(e,t){var n=e.className,i=S(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function k(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return k(e).appendChild(t)}function P(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function j(e,t,n,i){var r=P(e,t,n,i);return r.setAttribute("role","presentation"),r}function A(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function M(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function D(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function R(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!S(n[i]).test(t)&&(t+=" "+n[i]);return t}C=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var N=function(e){e.select()};function L(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function B(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function I(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,a=r||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}g?N=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(N=function(e){try{e.select()}catch(e){}});var F=function(){this.id=null,this.f=null,this.time=0,this.handler=L(this.onTimeout,this)};function z(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}F.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},F.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var H={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},$={origin:"*mouse"},U={origin:"+move"};function W(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var a=o-i;if(o==e.length||r+a>=t)return i+Math.min(a,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var q=[""];function G(e){for(;q.length<=e;)q.push(Y(q)+" ");return q[e]}function Y(e){return e[e.length-1]}function K(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function X(){}function Z(e,t){var n;return Object.create?n=Object.create(e):(X.prototype=e,n=new X),t&&B(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Q(e))||t.test(e):Q(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&ne.test(e)}function re(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}var ae=null;function se(e,t,n){var i;ae=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:ae=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:ae=r)}return null!=i?i:ae}var ce=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,r=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(a,s){var c="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!e.test(a))return!1;for(var l,u=a.length,d=[],p=0;p<u;++p)d.push((l=a.charCodeAt(p))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var h=0,f=c;h<u;++h){var g=d[h];"m"==g?d[h]=f:f=g}for(var m=0,v=c;m<u;++m){var y=d[m];"1"==y&&"r"==v?d[m]="n":n.test(y)&&(v=y,"r"==y&&(d[m]="R"))}for(var b=1,w=d[0];b<u-1;++b){var x=d[b];"+"==x&&"1"==w&&"1"==d[b+1]?d[b]="1":","!=x||w!=d[b+1]||"1"!=w&&"n"!=w||(d[b]=w),w=x}for(var E=0;E<u;++E){var _=d[E];if(","==_)d[E]="N";else if("%"==_){var S=void 0;for(S=E+1;S<u&&"%"==d[S];++S);for(var C=E&&"!"==d[E-1]||S<u&&"1"==d[S]?"1":"N",O=E;O<S;++O)d[O]=C;E=S-1}}for(var k=0,T=c;k<u;++k){var P=d[k];"L"==T&&"1"==P?d[k]="L":n.test(P)&&(T=P)}for(var j=0;j<u;++j)if(t.test(d[j])){var A=void 0;for(A=j+1;A<u&&t.test(d[A]);++A);for(var M="L"==(j?d[j-1]:c),D=M==("L"==(A<u?d[A]:c))?M?"L":"R":c,R=j;R<A;++R)d[R]=D;j=A-1}for(var N,L=[],B=0;B<u;)if(i.test(d[B])){var I=B;for(++B;B<u&&i.test(d[B]);++B);L.push(new o(0,I,B))}else{var F=B,z=L.length;for(++B;B<u&&"L"!=d[B];++B);for(var H=F;H<B;)if(r.test(d[H])){F<H&&L.splice(z,0,new o(1,F,H));var V=H;for(++H;H<B&&r.test(d[H]);++H);L.splice(z,0,new o(2,V,H)),F=H}else++H;F<B&&L.splice(z,0,new o(1,F,B))}return"ltr"==s&&(1==L[0].level&&(N=a.match(/^\s+/))&&(L[0].from=N[0].length,L.unshift(new o(0,0,N[0].length))),1==Y(L).level&&(N=a.match(/\s+$/))&&(Y(L).to-=N[0].length,L.push(new o(0,u-N[0].length,u)))),"rtl"==s?L.reverse():L}}();function le(e,t){var n=e.order;return null==n&&(n=e.order=ce(e.text,t)),n}var ue=[],de=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||ue).concat(n)}};function pe(e,t){return e._handlers&&e._handlers[t]||ue}function he(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=z(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function fe(e,t){var n=pe(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function ge(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),fe(e,n||t.type,e,t),xe(t)||t.codemirrorIgnore}function me(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==z(n,t[i])&&n.push(t[i])}function ve(e,t){return pe(e,t).length>0}function ye(e){e.prototype.on=function(e,t){de(this,e,t)},e.prototype.off=function(e,t){he(this,e,t)}}function be(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xe(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ee(e){be(e),we(e)}function _e(e){return e.target||e.srcElement}function Se(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var Ce,Oe,ke=function(){if(a&&s<9)return!1;var e=P("div");return"draggable"in e||"dragDrop"in e}();function Te(e){if(null==Ce){var t=P("span","");T(e,P("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ce=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=Ce?P("span",""):P("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Pe(e){if(null!=Oe)return Oe;var t=T(e,document.createTextNode("AA")),n=C(t,0,1).getBoundingClientRect(),i=C(t,1,2).getBoundingClientRect();return k(e),!(!n||n.left==n.right)&&(Oe=i.right-n.right<3)}var je,Ae=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Me=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},De="oncopy"in(je=P("div"))||(je.setAttribute("oncopy","return;"),"function"==typeof je.oncopy),Re=null,Ne={},Le={};function Be(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ne[e]=t}function Ie(e){if("string"==typeof e&&Le.hasOwnProperty(e))e=Le[e];else if(e&&"string"==typeof e.name&&Le.hasOwnProperty(e.name)){var t=Le[e.name];"string"==typeof t&&(t={name:t}),(e=Z(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ie("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ie("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Fe(e,t){t=Ie(t);var n=Ne[t.name];if(!n)return Fe(e,"text/plain");var i=n(e,t);if(ze.hasOwnProperty(t.name)){var r=ze[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)i[a]=t.modeProps[a];return i}var ze={};function He(e,t){B(t,ze.hasOwnProperty(e)?ze[e]:ze[e]={})}function Ve(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function $e(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ue(e,t,n){return!e.startState||e.startState(t,n)}var We=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function qe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function Ge(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function Ye(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Ke(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Xe(e){if(null==e.parent)return null;for(var t=e.parent,n=z(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Ze(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a].height;if(t<s)break;t-=s}return n+a}function Je(e,t){return t>=e.first&&t<e.first+e.size}function Qe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,n){if(void 0===n&&(n=null),!(this instanceof et))return new et(e,t,n);this.line=e,this.ch=t,this.sticky=n}function tt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function it(e){return et(e.line,e.ch)}function rt(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function at(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function st(e,t){if(t.line<e.first)return et(e.first,0);var n=e.first+e.size-1;return t.line>n?et(n,qe(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?et(e.line,t):n<0?et(e.line,0):e}(t,qe(e,t.line).text.length)}function ct(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=st(e,t[i]);return n}We.prototype.eol=function(){return this.pos>=this.string.length},We.prototype.sol=function(){return this.pos==this.lineStart},We.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},We.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},We.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},We.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},We.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},We.prototype.skipToEnd=function(){this.pos=this.string.length},We.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},We.prototype.backUp=function(e){this.pos-=e},We.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=I(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},We.prototype.indentation=function(){return I(this.string,null,this.tabSize)-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},We.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},We.prototype.current=function(){return this.string.slice(this.start,this.pos)},We.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},We.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},We.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var lt=function(e,t){this.state=e,this.lookAhead=t},ut=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function dt(e,t,n,i){var r=[e.state.modeGen],o={};wt(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var a=n.state,s=function(i){n.baseTokens=r;var s=e.state.overlays[i],c=1,l=0;n.state=!0,wt(e,t.text,s.mode,n,(function(e,t){for(var n=c;l<e;){var i=r[c];i>e&&r.splice(c,1,e,r[c+1],i),c+=2,l=Math.min(e,i)}if(t)if(s.opaque)r.splice(n,c-n,e,"overlay "+t),c=n+2;else for(;n<c;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},c=0;c<e.state.overlays.length;++c)s(c);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function pt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=ht(e,Xe(t)),r=t.text.length>e.options.maxHighlightLength&&Ve(e.doc.mode,i.state),o=dt(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ht(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new ut(i,!0,t);var o=function(e,t,n){for(var i,r,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var c=qe(o,s-1),l=c.stateAfter;if(l&&(!n||s+(l instanceof lt?l.lookAhead:0)<=o.modeFrontier))return s;var u=I(c.text,null,e.options.tabSize);(null==r||i>u)&&(r=s-1,i=u)}return r}(e,t,n),a=o>i.first&&qe(i,o-1).stateAfter,s=a?ut.fromSaved(i,a,o):new ut(i,Ue(i.mode),o);return i.iter(o,t,(function(n){ft(e,n.text,s);var i=s.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()})),n&&(i.modeFrontier=s.line),s}function ft(e,t,n,i){var r=e.doc.mode,o=new We(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&gt(r,n.state);!o.eol();)mt(r,o,n.state),o.start=o.pos}function gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=$e(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function mt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=$e(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ut.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ut.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ut.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ut.fromSaved=function(e,t,n){return t instanceof lt?new ut(e,Ve(e.mode,t.state),n,t.lookAhead):new ut(e,Ve(e.mode,t),n)},ut.prototype.save=function(e){var t=!1!==e?Ve(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lt(t,this.maxLookAhead):t};var vt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function yt(e,t,n,i){var r,o,a=e.doc,s=a.mode,c=qe(a,(t=st(a,t)).line),l=ht(e,t.line,n),u=new We(c.text,e.options.tabSize,l);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=mt(s,u,l.state),i&&o.push(new vt(u,r,Ve(a.mode,l.state)));return i?o:new vt(u,r,l.state)}function bt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function wt(e,t,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var c,l=0,u=null,d=new We(t,e.options.tabSize,i),p=e.options.addModeClass&&[null];for(""==t&&bt(gt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,a&&ft(e,t,i,d.pos),d.pos=t.length,c=null):c=bt(mt(n,d,i.state,p),o),p){var h=p[0].name;h&&(c="m-"+(c?h+" "+c:h))}if(!s||u!=c){for(;l<d.start;)r(l=Math.min(d.start,l+5e3),u);u=c}d.start=d.pos}for(;l<d.pos;){var f=Math.min(d.pos,l+5e3);r(f,u),l=f}}var xt=!1,Et=!1;function _t(e,t,n){this.marker=e,this.from=t,this.to=n}function St(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Ct(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Ot(e,t){if(t.full)return null;var n=Je(e,t.from.line)&&qe(e,t.from.line).markedSpans,i=Je(e,t.to.line)&&qe(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,a=0==tt(t.from,t.to),s=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new _t(a,o.from,s?null:o.to))}}return i}(n,r,a),c=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new _t(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,a),l=1==t.text.length,u=Y(t.text).length+(l?r:0);if(s)for(var d=0;d<s.length;++d){var p=s[d];if(null==p.to){var h=St(c,p.marker);h?l&&(p.to=null==h.to?null:h.to+u):p.to=r}}if(c)for(var f=0;f<c.length;++f){var g=c[f];null!=g.to&&(g.to+=u),null==g.from?St(s,g.marker)||(g.from=u,l&&(s||(s=[])).push(g)):(g.from+=u,l&&(s||(s=[])).push(g))}s&&(s=kt(s)),c&&c!=s&&(c=kt(c));var m=[s];if(!l){var v,y=t.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(v||(v=[])).push(new _t(s[b].marker,null,null));for(var w=0;w<y;++w)m.push(v);m.push(c)}return m}function kt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Tt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Pt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function jt(e){return e.inclusiveLeft?-1:0}function At(e){return e.inclusiveRight?1:0}function Mt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=tt(i.from,r.from)||jt(e)-jt(t);return o?-o:tt(i.to,r.to)||At(e)-At(t)||t.id-e.id}function Dt(e,t){var n,i=Et&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Mt(n,r.marker)<0)&&(n=r.marker);return n}function Rt(e){return Dt(e,!0)}function Nt(e){return Dt(e,!1)}function Lt(e,t){var n,i=Et&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Mt(n,o.marker)<0)&&(n=o.marker)}return n}function Bt(e,t,n,i,r){var o=qe(e,t),a=Et&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var c=a[s];if(c.marker.collapsed){var l=c.marker.find(0),u=tt(l.from,n)||jt(c.marker)-jt(r),d=tt(l.to,i)||At(c.marker)-At(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(c.marker.inclusiveRight&&r.inclusiveLeft?tt(l.to,n)>=0:tt(l.to,n)>0)||u>=0&&(c.marker.inclusiveRight&&r.inclusiveLeft?tt(l.from,i)<=0:tt(l.from,i)<0)))return!0}}}function It(e){for(var t;t=Rt(e);)e=t.find(-1,!0).line;return e}function Ft(e,t){var n=qe(e,t),i=It(n);return n==i?t:Xe(i)}function zt(e,t){if(t>e.lastLine())return t;var n,i=qe(e,t);if(!Ht(e,i))return t;for(;n=Nt(i);)i=n.find(1,!0).line;return Xe(i)+1}function Ht(e,t){var n=Et&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Vt(e,t,i))return!0}}function Vt(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return Vt(e,i.line,St(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Vt(e,t,r))return!0}function $t(e){for(var t=0,n=(e=It(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function Ut(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Rt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Nt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Wt(e){var t=e.display,n=e.doc;t.maxLine=qe(n,n.first),t.maxLineLength=Ut(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=Ut(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var qt=function(e,t,n){this.text=e,Pt(this,t),this.height=n?n(this):1};function Gt(e){e.parent=null,Tt(e)}qt.prototype.lineNo=function(){return Xe(this)},ye(qt);var Yt={},Kt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Kt:Yt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var n=j("span",null,null,c?"padding-right: .1px":null),i={pre:j("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,a=void 0;i.pos=0,i.addToken=Qt,Pe(e.display.measure)&&(a=le(o,e.doc.direction))&&(i.addToken=en(i.addToken,a)),i.map=[],nn(o,i,pt(e,o,t!=e.display.externalMeasured&&Xe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=R(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=R(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Te(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(c){var s=i.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return fe(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=R(i.pre.className,i.textClass||"")),i}function Jt(e){var t=P("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,i,r,o,c){if(t){var l,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=""),i+=o,n=" "==o}return i}(t,e.trailingSpace):t,d=e.cm.state.specialChars,p=!1;if(d.test(t)){l=document.createDocumentFragment();for(var h=0;;){d.lastIndex=h;var f=d.exec(t),g=f?f.index-h:t.length-h;if(g){var m=document.createTextNode(u.slice(h,h+g));a&&s<9?l.appendChild(P("span",[m])):l.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!f)break;h+=g+1;var v=void 0;if("\t"==f[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=l.appendChild(P("span",G(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?((v=l.appendChild(P("span","\r"==f[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),a&&s<9?l.appendChild(P("span",[v])):l.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,l=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,l),a&&s<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||r||p||o){var w=n||"";i&&(w+=i),r&&(w+=r);var x=P("span",[l],w,o);if(c)for(var E in c)c.hasOwnProperty(E)&&"style"!=E&&"class"!=E&&x.setAttribute(E,c[E]);return e.content.appendChild(x)}e.content.appendChild(l)}}function en(e,t){return function(n,i,r,o,a,s,c){r=r?r+" cm-force-border":"cm-force-border";for(var l=n.pos,u=l+i.length;;){for(var d=void 0,p=0;p<t.length&&!((d=t[p]).to>l&&d.from<=l);p++);if(d.to>=u)return e(n,i,r,o,a,s,c);e(n,i.slice(0,d.to-l),r,o,null,s,c),o=null,i=i.slice(d.to-l),l=d.to}}}function tn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var a,s,c,l,u,d,p,h=r.length,f=0,g=1,m="",v=0;;){if(v==f){c=l=u=s="",p=null,d=null,v=1/0;for(var y=[],b=void 0,w=0;w<i.length;++w){var x=i[w],E=x.marker;if("bookmark"==E.type&&x.from==f&&E.widgetNode)y.push(E);else if(x.from<=f&&(null==x.to||x.to>f||E.collapsed&&x.to==f&&x.from==f)){if(null!=x.to&&x.to!=f&&v>x.to&&(v=x.to,l=""),E.className&&(c+=" "+E.className),E.css&&(s=(s?s+";":"")+E.css),E.startStyle&&x.from==f&&(u+=" "+E.startStyle),E.endStyle&&x.to==v&&(b||(b=[])).push(E.endStyle,x.to),E.title&&((p||(p={})).title=E.title),E.attributes)for(var _ in E.attributes)(p||(p={}))[_]=E.attributes[_];E.collapsed&&(!d||Mt(d.marker,E)<0)&&(d=x)}else x.from>f&&v>x.from&&(v=x.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==v&&(l+=" "+b[S]);if(!d||d.from==f)for(var C=0;C<y.length;++C)tn(t,0,y[C]);if(d&&(d.from||0)==f){if(tn(t,(null==d.to?h+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=h)break;for(var O=Math.min(h,v);;){if(m){var k=f+m.length;if(!d){var T=k>O?m.slice(0,O-f):m;t.addToken(t,T,a?a+c:c,u,f+T.length==v?l:"",s,p)}if(k>=O){m=m.slice(O-f),f=O;break}f=k,u=""}m=r.slice(o,o=n[g++]),a=Xt(n[g++],t.cm.options)}}else for(var P=1;P<n.length;P+=2)t.addToken(t,r.slice(o,o=n[P]),Xt(n[P+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Nt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Xe(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ht(e,t)}function on(e,t,n){for(var i,r=[],o=t;o<n;o=i){var a=new rn(e.doc,qe(e.doc,o),o);i=o+a.size,r.push(a)}return r}var an=null,sn=null;function cn(e,t){var n=pe(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);an?i=an.delayedCallbacks:sn?i=sn:(i=sn=[],setTimeout(ln,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},a=0;a<n.length;++a)o(a)}}function ln(){var e=sn;sn=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?hn(e,t):"gutter"==o?gn(e,t,n,i):"class"==o?fn(e,t):"widget"==o&&mn(e,t,i)}t.changes=null}function dn(e){return e.node==e.text&&(e.node=P("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&s<8&&(e.node.style.zIndex=2)),e.node}function pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Zt(e,t)}function hn(e,t){var n=t.text.className,i=pn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,fn(e,t)):n&&(t.text.className=n)}function fn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=dn(t);t.background=i.insertBefore(P("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function gn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=dn(t);t.gutterBackground=P("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=dn(t),s=t.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(P("div",Qe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var c=0;c<e.display.gutterSpecs.length;++c){var l=e.display.gutterSpecs[c].className,u=o.hasOwnProperty(l)&&o[l];u&&s.appendChild(P("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,r=void 0;i;i=r)r=i.nextSibling,"CodeMirror-linewidget"==i.className&&t.node.removeChild(i);yn(e,t,n)}function vn(e,t,n,i){var r=pn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),fn(e,t),gn(e,t,n,i),yn(e,t,i),t.node}function yn(e,t,n){if(bn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)bn(e,t.rest[i],t,n,!1)}function bn(e,t,n,i,r){if(t.widgets)for(var o=dn(n),a=0,s=t.widgets;a<s.length;++a){var c=s[a],l=P("div",[c.node],"CodeMirror-linewidget");c.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),wn(c,l,n,i),e.display.input.setUneditable(l),r&&c.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),cn(c,"redraw")}}function wn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!A(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),T(t.display.measure,P("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function En(e,t){for(var n=_e(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function _n(e){return e.lineSpace.offsetTop}function Sn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Cn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,P("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function On(e){return 30-e.display.nativeBarWidth}function kn(e){return e.display.scroller.clientWidth-On(e)-e.display.barWidth}function Tn(e){return e.display.scroller.clientHeight-On(e)-e.display.barHeight}function Pn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Xe(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function jn(e,t,n,i){return Dn(e,Mn(e,t),n,i)}function An(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ui(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Mn(e,t){var n=Xe(t),i=An(e,n);i&&!i.text?i=null:i&&i.changes&&(un(e,i,n,oi(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var n=Xe(t=It(t)),i=e.display.externalMeasured=new rn(e.doc,t,n);i.lineN=n;var r=i.built=Zt(e,i);return i.text=r.pre,T(e.display.lineMeasure,r.pre),i}(e,t));var r=Pn(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Dn(e,t,n,i,r){t.before&&(n=-1);var o,c=n+(i||"");return t.cache.hasOwnProperty(c)?o=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var i=e.options.lineWrapping,r=i&&kn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var c=a[s],l=a[s+1];Math.abs(c.bottom-l.bottom)>2&&o.push((c.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,i){var r,o=Ln(t.map,n,i),c=o.node,l=o.start,u=o.end,d=o.collapse;if(3==c.nodeType){for(var p=0;p<4;p++){for(;l&&ie(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+u<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+u));)++u;if((r=a&&s<9&&0==l&&u==o.coverEnd-o.coverStart?c.parentNode.getBoundingClientRect():Bn(C(c,l,u).getClientRects(),i)).left||r.right||0==l)break;u=l,l-=1,d="right"}a&&s<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Re)return Re;var t=T(e,P("span","x")),n=t.getBoundingClientRect(),i=C(t,0,1).getBoundingClientRect();return Re=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,r))}else{var h;l>0&&(d=i="right"),r=e.options.lineWrapping&&(h=c.getClientRects()).length>1?h["right"==i?h.length-1:0]:c.getBoundingClientRect()}if(a&&s<9&&!l&&(!r||!r.left&&!r.right)){var f=c.parentNode.getClientRects()[0];r=f?{left:f.left,right:f.left+ri(e.display),top:f.top,bottom:f.bottom}:Nn}for(var g=r.top-t.rect.top,m=r.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w=b?y[b-1]:0,x=y[b],E={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:w,bottom:x};return r.left||r.right||(E.bogus=!0),e.options.singleCursorHeightPerLine||(E.rtop=g,E.rbottom=m),E}(e,t,n,i)).bogus||(t.cache[c]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Rn,Nn={left:0,right:0,top:0,bottom:0};function Ln(e,t,n){for(var i,r,o,a,s,c,l=0;l<e.length;l+=3)if(s=e[l],c=e[l+1],t<s?(r=0,o=1,a="left"):t<c?o=1+(r=t-s):(l==e.length-3||t==c&&e[l+3]>t)&&(r=(o=c-s)-1,t>=c&&(a="right")),null!=r){if(i=e[l+2],s==c&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;l&&e[l-2]==e[l-3]&&e[l-1].insertLeft;)i=e[2+(l-=3)],a="left";if("right"==n&&r==c-s)for(;l<e.length-3&&e[l+3]==e[l+4]&&!e[l+5].insertLeft;)i=e[(l+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:s,coverEnd:c}}function Bn(e,t){var n=Nn;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function In(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fn(e){e.display.externalMeasure=null,k(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)In(e.display.view[t])}function zn(e){Fn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Hn(){return u&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vn(){return u&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function $n(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=xn(e.widgets[n]));return t}function Un(e,t,n,i,r){if(!r){var o=$n(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=$t(t);if("local"==i?a+=_n(e.display):a-=e.display.viewOffset,"page"==i||"window"==i){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==i?0:Vn());var c=s.left+("window"==i?0:Hn());n.left+=c,n.right+=c}return n.top+=a,n.bottom+=a,n}function Wn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Hn(),r-=Vn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function qn(e,t,n,i,r){return i||(i=qe(e.doc,t.line)),Un(e,i,jn(e,i,t.ch,r),n)}function Gn(e,t,n,i,r,o){function a(t,a){var s=Dn(e,r,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Un(e,i,s,n)}i=i||qe(e.doc,t.line),r||(r=Mn(e,i));var s=le(i,e.doc.direction),c=t.ch,l=t.sticky;if(c>=i.text.length?(c=i.text.length,l="before"):c<=0&&(c=0,l="after"),!s)return a("before"==l?c-1:c,"before"==l);function u(e,t,n){return a(n?e-1:e,1==s[t].level!=n)}var d=se(s,c,l),p=ae,h=u(c,d,"before"==l);return null!=p&&(h.other=u(c,p,"before"!=l)),h}function Yn(e,t){var n=0;t=st(e.doc,t),e.options.lineWrapping||(n=ri(e.display)*t.ch);var i=qe(e.doc,t.line),r=$t(i)+_n(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Kn(e,t,n,i,r){var o=et(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function Xn(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Kn(i.first,0,null,-1,-1);var r=Ze(i,n),o=i.first+i.size-1;if(r>o)return Kn(i.first+i.size-1,qe(i,o).text.length,null,1,1);t<0&&(t=0);for(var a=qe(i,r);;){var s=ei(e,a,r,t,n),c=Lt(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!c)return s;var l=c.find(1);if(l.line==r)return l;a=qe(i,r=l.line)}}function Zn(e,t,n,i){i-=$n(t);var r=t.text.length,o=oe((function(t){return Dn(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=oe((function(t){return Dn(e,n,t).top>i}),o,r)}}function Jn(e,t,n,i){return n||(n=Mn(e,t)),Zn(e,t,n,Un(e,t,Dn(e,n,i),"line").top)}function Qn(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function ei(e,t,n,i,r){r-=$t(t);var o=Mn(e,t),a=$n(t),s=0,c=t.text.length,l=!0,u=le(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?ni:ti)(e,t,n,o,u,i,r);s=(l=1!=d.level)?d.from:d.to-1,c=l?d.to:d.from-1}var p,h,f=null,g=null,m=oe((function(t){var n=Dn(e,o,t);return n.top+=a,n.bottom+=a,!!Qn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(f=t,g=n),!0)}),s,c),v=!1;if(g){var y=i-g.left<g.right-i,b=y==l;m=f+(b?0:1),h=b?"after":"before",p=y?g.left:g.right}else{l||m!=c&&m!=s||m++,h=0==m?"after":m==t.text.length?"before":Dn(e,o,m-(l?1:0)).bottom+a<=r==l?"after":"before";var w=Gn(e,et(n,m,h),"line",t,o);p=w.left,v=r<w.top?-1:r>=w.bottom?1:0}return Kn(n,m=re(t.text,m,1),h,v,i-p)}function ti(e,t,n,i,r,o,a){var s=oe((function(s){var c=r[s],l=1!=c.level;return Qn(Gn(e,et(n,l?c.to:c.from,l?"before":"after"),"line",t,i),o,a,!0)}),0,r.length-1),c=r[s];if(s>0){var l=1!=c.level,u=Gn(e,et(n,l?c.from:c.to,l?"after":"before"),"line",t,i);Qn(u,o,a,!0)&&u.top>a&&(c=r[s-1])}return c}function ni(e,t,n,i,r,o,a){var s=Zn(e,t,i,a),c=s.begin,l=s.end;/\s/.test(t.text.charAt(l-1))&&l--;for(var u=null,d=null,p=0;p<r.length;p++){var h=r[p];if(!(h.from>=l||h.to<=c)){var f=Dn(e,i,1!=h.level?Math.min(l,h.to)-1:Math.max(c,h.from)).right,g=f<o?o-f+1e9:f-o;(!u||d>g)&&(u=h,d=g)}}return u||(u=r[r.length-1]),u.from<c&&(u={from:c,to:u.to,level:u.level}),u.to>l&&(u={from:u.from,to:l,level:u.level}),u}function ii(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=P("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(P("br"));Rn.appendChild(document.createTextNode("x"))}T(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),k(e.measure),n||1}function ri(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=P("span","xxxxxxxxxx"),n=P("pre",[t],"CodeMirror-line-like");T(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function oi(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=e.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+r,i[s]=o.clientWidth}return{fixedPos:ai(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function ai(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function si(e){var t=ii(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ri(e.display)-3);return function(r){if(Ht(e.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function ci(e){var t=e.doc,n=si(e);t.iter((function(e){var t=n(e);t!=e.height&&Ke(e,t)}))}function li(e,t,n,i){var r=e.display;if(!n&&"true"==_e(t).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var c,l=Xn(e,o,a);if(i&&1==l.xRel&&(c=qe(e.doc,l.line).text).length==l.ch){var u=I(c,c.length,e.options.tabSize)-c.length;l=et(l.line,Math.max(0,Math.round((o-Cn(e.display).left)/ri(e.display))-u))}return l}function ui(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function di(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Et&&Ft(e.doc,t)<r.viewTo&&hi(e);else if(n<=r.viewFrom)Et&&zt(e.doc,n+i)>r.viewFrom?hi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)hi(e);else if(t<=r.viewFrom){var o=fi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):hi(e)}else if(n>=r.viewTo){var a=fi(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):hi(e)}else{var s=fi(e,t,t,-1),c=fi(e,n,n+i,1);s&&c?(r.view=r.view.slice(0,s.index).concat(on(e,s.lineN,c.lineN)).concat(r.view.slice(c.index)),r.viewTo+=i):hi(e)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(r.externalMeasured=null))}function pi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[ui(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==z(a,n)&&a.push(n)}}}function hi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function fi(e,t,n,i){var r,o=ui(e,t),a=e.display.view;if(!Et||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,c=0;c<o;c++)s+=a[c].size;if(s!=t){if(i>0){if(o==a.length-1)return null;r=s+a[o].size-t,o++}else r=s-t;t+=r,n+=r}for(;Ft(e.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function gi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function mi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function vi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var c=s.empty();(c||e.options.showCursorWhenSelecting)&&yi(e,s.head,r),c||wi(e,s,o)}}return i}function yi(e,t,n){var i=Gn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(P("div","","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(P("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function bi(e,t){return e.top-t.top||e.left-t.left}function wi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),a=Cn(e.display),s=a.left,c=Math.max(i.sizerWidth,kn(e)-i.sizer.offsetLeft)-a.right,l="ltr"==r.direction;function u(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?c-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,a,d=qe(r,t),p=d.text.length;function h(n,i){return qn(e,et(t,n),"div",d,i)}function f(t,n,i){var r=Jn(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right";return h("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var g=le(d,r.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(g,n||0,null==i?p:i,(function(e,t,r,d){var m="ltr"==r,v=h(e,m?"left":"right"),y=h(t-1,m?"right":"left"),b=null==n&&0==e,w=null==i&&t==p,x=0==d,E=!g||d==g.length-1;if(y.top-v.top<=3){var _=(l?w:b)&&E,S=(l?b:w)&&x?s:(m?v:y).left,C=_?c:(m?y:v).right;u(S,v.top,C-S,v.bottom)}else{var O,k,T,P;m?(O=l&&b&&x?s:v.left,k=l?c:f(e,r,"before"),T=l?s:f(t,r,"after"),P=l&&w&&E?c:y.right):(O=l?f(e,r,"before"):s,k=!l&&b&&x?c:v.right,T=!l&&w&&E?s:y.left,P=l?f(t,r,"after"):c),u(O,v.top,k-O,v.bottom),v.bottom<y.top&&u(s,v.bottom,null,y.top),u(T,y.top,P-T,y.bottom)}(!o||bi(v,o)<0)&&(o=v),bi(y,o)<0&&(o=y),(!a||bi(v,a)<0)&&(a=v),bi(y,a)<0&&(a=y)})),{start:o,end:a}}var p=t.from(),h=t.to();if(p.line==h.line)d(p.line,p.ch,h.ch);else{var f=qe(r,p.line),g=qe(r,h.line),m=It(f)==It(g),v=d(p.line,p.ch,m?f.text.length+1:null).end,y=d(h.line,m?0:null,h.ch).start;m&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(s,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(s,v.bottom,null,y.top)}n.appendChild(o)}function xi(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ei(e){e.state.focused||(e.display.input.focus(),Si(e))}function _i(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Ci(e))}),100)}function Si(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(fe(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),c&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),xi(e))}function Ci(e,t){e.state.delayingBlurEvent||(e.state.focused&&(fe(e,"blur",e,t),e.state.focused=!1,O(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Oi(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,c=void 0,l=0;if(!r.hidden){if(a&&s<8){var u=r.node.offsetTop+r.node.offsetHeight;c=u-n,n=u}else{var d=r.node.getBoundingClientRect();c=d.bottom-d.top,!o&&r.text.firstChild&&(l=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var p=r.line.height-c;if((p>.005||p<-.005)&&(Ke(r.line,c),ki(r.line),r.rest))for(var h=0;h<r.rest.length;h++)ki(r.rest[h]);if(l>e.display.sizerWidth){var f=Math.ceil(l/ri(e.display));f>e.display.maxLineLength&&(e.display.maxLineLength=f,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function ki(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Ti(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-_n(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=Ze(t,i),a=Ze(t,r);if(n&&n.ensure){var s=n.ensure.from.line,c=n.ensure.to.line;s<o?(o=s,a=Ze(t,$t(qe(t,s))+e.wrapper.clientHeight)):Math.min(c,t.lastLine())>=a&&(o=Ze(t,$t(qe(t,c))-e.wrapper.clientHeight),a=c)}return{from:o,to:Math.max(a,o+1)}}function Pi(e,t){var n=e.display,i=ii(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Tn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Sn(n),c=t.top<i,l=t.bottom>s-i;if(t.top<r)a.scrollTop=c?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(l?s:t.bottom)-o);u!=r&&(a.scrollTop=u)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,p=kn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>p;return h&&(t.right=t.left+p),t.left<10?a.scrollLeft=0:t.left<d?a.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>p+d-3&&(a.scrollLeft=t.right+(h?0:10)-p),a}function ji(e,t){null!=t&&(Di(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ai(e){Di(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Mi(e,t,n){null==t&&null==n||Di(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Di(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ri(e,Yn(e,t.from),Yn(e,t.to),t.margin))}function Ri(e,t,n,i){var r=Pi(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Mi(e,r.scrollLeft,r.scrollTop)}function Ni(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||sr(e,{top:t}),Li(e,t,!0),n&&sr(e),nr(e,100))}function Li(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Bi(e,t,n,i){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,ur(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ii(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Sn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+On(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Fi=function(e,t,n){this.cm=n;var i=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),de(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),de(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Fi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Fi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Fi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Fi.prototype.zeroWidthHack=function(){var e=y&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F},Fi.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}))},Fi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var zi=function(){};function Hi(e,t){t||(t=Ii(e));var n=e.display.barWidth,i=e.display.barHeight;Vi(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Oi(e),Vi(e,Ii(e)),n=e.display.barWidth,i=e.display.barHeight}function Vi(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}zi.prototype.update=function(){return{bottom:0,right:0}},zi.prototype.setScrollLeft=function(){},zi.prototype.setScrollTop=function(){},zi.prototype.clear=function(){};var $i={native:Fi,null:zi};function Ui(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&O(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new $i[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),de(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Bi(e,t):Ni(e,t)}),e),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)}var Wi=0;function qi(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wi},t=e.curOp,an?an.ops.push(t):t.ownsGroup=an={ops:[t],delayedCallbacks:[]}}function Gi(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{an=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Yi(t[n]);for(var i=0;i<t.length;i++)(r=t[i]).updatedDisplay=r.mustUpdate&&or(r.cm,r.update);for(var r,o=0;o<t.length;o++)Ki(t[o]);for(var a=0;a<t.length;a++)Xi(t[a]);for(var s=0;s<t.length;s++)Zi(t[s])}(e)}(n)}}(t)}function Yi(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=On(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=On(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Wt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new rr(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ki(e){var t=e.cm,n=t.display;e.updatedDisplay&&Oi(t),e.barMeasure=Ii(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=jn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+On(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Xi(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Bi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==M();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Hi(t,e.barMeasure),e.updatedDisplay&&lr(t,e.barMeasure),e.selectionChanged&&xi(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Ei(e.cm)}function Zi(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&ar(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Li(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Bi(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ge(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!f){var o=P("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-_n(e.display))+"px;\n                         height: "+(t.bottom-t.top+On(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=Gn(e,t),c=n&&n!=t?Gn(e,n):s,l=Pi(e,r={left:Math.min(s.left,c.left),top:Math.min(s.top,c.top)-i,right:Math.max(s.left,c.left),bottom:Math.max(s.bottom,c.bottom)+i}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(Ni(e,l.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=l.scrollLeft&&(Bi(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return r}(t,st(i,e.scrollToPos.from),st(i,e.scrollToPos.to),e.scrollToPos.margin));var r=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(r)for(var a=0;a<r.length;++a)r[a].lines.length||fe(r[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&fe(o[s],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&fe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Ji(e,t){if(e.curOp)return t();qi(e);try{return t()}finally{Gi(e)}}function Qi(e,t){return function(){if(e.curOp)return t.apply(e,arguments);qi(e);try{return t.apply(e,arguments)}finally{Gi(e)}}}function er(e){return function(){if(this.curOp)return e.apply(this,arguments);qi(this);try{return e.apply(this,arguments)}finally{Gi(this)}}}function tr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);qi(t);try{return e.apply(this,arguments)}finally{Gi(t)}}}function nr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,L(ir,e))}function ir(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=ht(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Ve(t.mode,i.state):null,c=dt(e,o,i,!0);s&&(i.state=s),o.styles=c.styles;var l=o.styleClasses,u=c.classes;u?o.styleClasses=u:l&&(o.styleClasses=null);for(var d=!a||a.length!=o.styles.length||l!=u&&(!l||!u||l.bgClass!=u.bgClass||l.textClass!=u.textClass),p=0;!d&&p<a.length;++p)d=a[p]!=o.styles[p];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&ft(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return nr(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Ji(e,(function(){for(var t=0;t<r.length;t++)pi(e,r[t],"text")}))}}var rr=function(e,t,n){var i=e.display;this.viewport=t,this.visible=Ti(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=kn(e),this.force=n,this.dims=oi(e),this.events=[]};function or(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return hi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gi(e))return!1;dr(e)&&(hi(e),t.dims=oi(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),a=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),Et&&(o=Ft(e.doc,o),a=zt(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=on(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=on(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(ui(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(on(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ui(e,n)))),i.viewTo=n}(e,o,a),n.viewOffset=$t(qe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=gi(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=M();if(!t||!A(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&A(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return l>4&&(n.lineDiv.style.display="none"),function(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return c&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var l=i.view,u=i.viewFrom,d=0;d<l.length;d++){var p=l[d];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;a!=p.node;)a=s(a);var h=r&&null!=t&&t<=u&&p.lineNumber;p.changes&&(z(p.changes,"gutter")>-1&&(h=!1),un(e,p,u,n)),h&&(k(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(Qe(e.options,u)))),a=p.node.nextSibling}else{var f=vn(e,p,u,n);o.insertBefore(f,a)}u+=p.size}for(;a;)a=s(a)}(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=M()&&(e.activeElt.focus(),e.anchorNode&&A(document.body,e.anchorNode)&&A(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),k(n.cursorDiv),k(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,nr(e,400)),n.updateLineNumbers=null,!0}function ar(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=kn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Sn(e.display)-Tn(e),n.top)}),t.visible=Ti(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&or(e,t);i=!1){Oi(e);var r=Ii(e);mi(e),Hi(e,r),lr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function sr(e,t){var n=new rr(e,t);if(or(e,n)){Oi(e),ar(e,n);var i=Ii(e);mi(e),Hi(e,i),lr(e,i),n.finish()}}function cr(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function lr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+On(e)+"px"}function ur(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=ai(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var c=0;c<s.length;c++)s[c].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function dr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Qe(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(P("div",[P("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",cr(e.display),!0}return!1}function pr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:a})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function hr(e){var t=e.gutters,n=e.gutterSpecs;k(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,s=t.appendChild(P("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",cr(e)}function fr(e){hr(e.display),di(e),ur(e)}function gr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=j("div",null,"CodeMirror-code"),o.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=P("div",null,"CodeMirror-cursors"),o.measure=P("div",null,"CodeMirror-measure"),o.lineMeasure=P("div",null,"CodeMirror-measure"),o.lineSpace=j("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=j("div",[o.lineSpace],"CodeMirror-lines");o.mover=P("div",[l],null,"position: relative"),o.sizer=P("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=P("div",null,null,"position: absolute; height: 30px; width: 1px;"),o.gutters=P("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=P("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=P("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),c||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=pr(r.gutters,r.lineNumbers),hr(o),i.init(o)}rr.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},rr.prototype.finish=function(){for(var e=0;e<this.events.length;e++)fe.apply(null,this.events[e])};var mr=0,vr=null;function yr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function br(e){var t=yr(e);return t.x*=vr,t.y*=vr,t}function wr(e,t){var i=yr(t),r=i.x,o=i.y,a=e.display,s=a.scroller,l=s.scrollWidth>s.clientWidth,u=s.scrollHeight>s.clientHeight;if(r&&l||o&&u){if(o&&y&&c)e:for(var p=t.target,h=a.view;p!=s;p=p.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==p){e.display.currentWheelTarget=p;break e}if(r&&!n&&!d&&null!=vr)return o&&u&&Ni(e,Math.max(0,s.scrollTop+o*vr)),Bi(e,Math.max(0,s.scrollLeft+r*vr)),(!o||o&&u)&&be(t),void(a.wheelStartX=null);if(o&&null!=vr){var g=o*vr,m=e.doc.scrollTop,v=m+a.wrapper.clientHeight;g<0?m=Math.max(0,m+g-50):v=Math.min(e.doc.height,v+g+50),sr(e,{top:m,bottom:v})}mr<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=r,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var e=s.scrollLeft-a.wheelStartX,t=s.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(vr=(vr*mr+n)/(mr+1),++mr)}}),200)):(a.wheelDX+=r,a.wheelDY+=o))}}a?vr=-.53:n?vr=15:u?vr=-.7:p&&(vr=-1/3);var xr=function(e,t){this.ranges=e,this.primIndex=t};xr.prototype.primary=function(){return this.ranges[this.primIndex]},xr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!nt(n.anchor,i.anchor)||!nt(n.head,i.head))return!1}return!0},xr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Er(it(this.ranges[t].anchor),it(this.ranges[t].head));return new xr(e,this.primIndex)},xr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},xr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(tt(t,i.from())>=0&&tt(e,i.to())<=0)return n}return-1};var Er=function(e,t){this.anchor=e,this.head=t};function _r(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return tt(e.from(),t.from())})),n=z(t,r);for(var o=1;o<t.length;o++){var a=t[o],s=t[o-1],c=tt(s.to(),a.from());if(i&&!a.empty()?c>0:c>=0){var l=ot(s.from(),a.from()),u=rt(s.to(),a.to()),d=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,t.splice(--o,2,new Er(d?u:l,d?l:u))}}return new xr(t,n)}function Sr(e,t){return new xr([new Er(e,t||e)],0)}function Cr(e){return e.text?et(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Or(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return Cr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Cr(t).ch-t.to.ch),et(n,i)}function kr(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new Er(Or(r.anchor,t),Or(r.head,t)))}return _r(e.cm,n,e.sel.primIndex)}function Tr(e,t,n){return e.line==t.line?et(n.line,e.ch-t.ch+n.ch):et(n.line+(e.line-t.line),e.ch)}function Pr(e){e.doc.mode=Fe(e.options,e.doc.modeOption),jr(e)}function jr(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,nr(e,100),e.state.modeGen++,e.curOp&&di(e)}function Ar(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Mr(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Tt(e),Pt(e,n);var r=i?i(e):1;r!=e.height&&Ke(e,r)}(e,n,r,i),cn(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new qt(l[o],r(o),i));return n}var s=t.from,c=t.to,l=t.text,u=qe(e,s.line),d=qe(e,c.line),p=Y(l),h=r(l.length-1),f=c.line-s.line;if(t.full)e.insert(0,a(0,l.length)),e.remove(l.length,e.size-l.length);else if(Ar(e,t)){var g=a(0,l.length-1);o(d,d.text,h),f&&e.remove(s.line,f),g.length&&e.insert(s.line,g)}else if(u==d)if(1==l.length)o(u,u.text.slice(0,s.ch)+p+u.text.slice(c.ch),h);else{var m=a(1,l.length-1);m.push(new qt(p+u.text.slice(c.ch),h,i)),o(u,u.text.slice(0,s.ch)+l[0],r(0)),e.insert(s.line+1,m)}else if(1==l.length)o(u,u.text.slice(0,s.ch)+l[0]+d.text.slice(c.ch),r(0)),e.remove(s.line+1,f);else{o(u,u.text.slice(0,s.ch)+l[0],r(0)),o(d,p+d.text.slice(c.ch),h);var v=a(1,l.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,v)}cn(e,"change",e,t)}function Dr(e,t,n){!function e(i,r,o){if(i.linked)for(var a=0;a<i.linked.length;++a){var s=i.linked[a];if(s.doc!=r){var c=o&&s.sharedHist;n&&!c||(t(s.doc,c),e(s.doc,i,c))}}}(e,null,!0)}function Rr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ci(e),Pr(e),Nr(e),e.options.lineWrapping||Wt(e),e.options.mode=t.modeOption,di(e)}function Nr(e){("rtl"==e.doc.direction?D:O)(e.display.lineDiv,"CodeMirror-rtl")}function Lr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Br(e,t){var n={from:it(t.from),to:Cr(t),text:Ge(e,t.from,t.to)};return Hr(e,n,t.from.line,t.to.line+1),Dr(e,(function(e){return Hr(e,n,t.from.line,t.to.line+1)}),!0),n}function Ir(e){for(;e.length&&Y(e).ranges;)e.pop()}function Fr(e,t,n,i){var r=e.history;r.undone.length=0;var o,a,s=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ir(e.done),Y(e.done)):e.done.length&&!Y(e.done).ranges?Y(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Y(e.done)):void 0}(r,r.lastOp==i)))a=Y(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,a.to)?a.to=Cr(t):o.changes.push(Br(e,t));else{var c=Y(r.done);for(c&&c.ranges||zr(e.sel,r.done),o={changes:[Br(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,a||fe(e,"historyAdded")}function zr(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hr(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Vr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function $r(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Vr(n[r]));return i}(e,t),i=Ot(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)e:for(var s=0;s<a.length;++s){for(var c=a[s],l=0;l<o.length;++l)if(o[l].marker==c.marker)continue e;o.push(c)}else a&&(n[r]=a)}return n}function Ur(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?xr.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var c=0;c<a.length;++c){var l=a[c],u=void 0;if(s.push({from:l.from,to:l.to,text:l.text}),t)for(var d in l)(u=d.match(/^spans_(\d+)$/))&&z(t,Number(u[1]))>-1&&(Y(s)[d]=l[d],delete l[d])}}}return i}function Wr(e,t,n,i){if(i){var r=e.anchor;if(n){var o=tt(t,r)<0;o!=tt(n,r)<0?(r=t,t=n):o!=tt(t,n)<0&&(t=n)}return new Er(r,t)}return new Er(n||t,t)}function qr(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Zr(e,new xr([Wr(e.sel.primary(),t,n,r)],0),i)}function Gr(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Wr(e.sel.ranges[o],t[o],null,r);Zr(e,_r(e.cm,i,e.sel.primIndex),n)}function Yr(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Zr(e,_r(e.cm,r,e.sel.primIndex),i)}function Kr(e,t,n,i){Zr(e,Sr(t,n),i)}function Xr(e,t,n){var i=e.history.done,r=Y(i);r&&r.ranges?(i[i.length-1]=t,Jr(e,t,n)):Zr(e,t,n)}function Zr(e,t,n){Jr(e,t,n),function(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,Y(r.done),t))?r.done[r.done.length-1]=t:zr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Ir(r.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Jr(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new Er(st(e,t[n].anchor),st(e,t[n].head))},origin:n&&n.origin};return fe(e,"beforeSelectionChange",e,i),e.cm&&fe(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?_r(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);Qr(e,to(e,t,i,!0)),n&&!1===n.scroll||!e.cm||Ai(e.cm)}function Qr(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,me(e.cm)),cn(e,"cursorActivity",e))}function eo(e){Qr(e,to(e,e.sel,null,!1))}function to(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],c=io(e,a.anchor,s&&s.anchor,n,i),l=io(e,a.head,s&&s.head,n,i);(r||c!=a.anchor||l!=a.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new Er(c,l))}return r?_r(e.cm,r,t.primIndex):t}function no(e,t,n,i,r){var o=qe(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],c=s.marker,l="selectLeft"in c?!c.selectLeft:c.inclusiveLeft,u="selectRight"in c?!c.selectRight:c.inclusiveRight;if((null==s.from||(l?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(u?s.to>=t.ch:s.to>t.ch))){if(r&&(fe(c,"beforeCursorEnter"),c.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!c.atomic)continue;if(n){var d=c.find(i<0?1:-1),p=void 0;if((i<0?u:l)&&(d=ro(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(p=tt(d,n))&&(i<0?p<0:p>0))return no(e,d,t,i,r)}var h=c.find(i<0?-1:1);return(i<0?l:u)&&(h=ro(e,h,i,h.line==t.line?o:null)),h?no(e,h,t,i,r):null}}return t}function io(e,t,n,i,r){var o=i||1;return no(e,t,n,o,r)||!r&&no(e,t,n,o,!0)||no(e,t,n,-o,r)||!r&&no(e,t,n,-o,!0)||(e.cantEdit=!0,et(e.first,0))}function ro(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?st(e,et(t.line-1)):null:n>0&&t.ch==(i||qe(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+n)}function oo(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),V)}function ao(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=st(e,t)),n&&(i.to=st(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),fe(e,"beforeChange",e,i),e.cm&&fe(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function so(e,t,n){if(e.cm){if(!e.cm.curOp)return Qi(e.cm,so)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=ao(e,t,!0))){var i=xt&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=z(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var a=i[o],s=a.find(0),c=0;c<r.length;++c){var l=r[c];if(!(tt(l.to,s.from)<0||tt(l.from,s.to)>0)){var u=[c,1],d=tt(l.from,s.from),p=tt(l.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&u.push({from:l.from,to:s.from}),(p>0||!a.inclusiveRight&&!p)&&u.push({from:s.to,to:l.to}),r.splice.apply(r,u),c+=u.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)co(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else co(e,t)}}function co(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var n=kr(e,t);Fr(e,t,n,e.cm?e.cm.curOp.id:NaN),po(e,t,n,Ot(e,t));var i=[];Dr(e,(function(e,n){n||-1!=z(i,e.history)||(mo(e.history,t),i.push(e.history)),po(e,t,null,Ot(e,t))}))}}function lo(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,c="undo"==t?o.undone:o.done,l=0;l<s.length&&(r=s[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=s.pop()).ranges){if(i)return void s.push(r);break}if(zr(r,c),n&&!r.equals(e.sel))return void Zr(e,r,{clearRedo:!1});a=r}var u=[];zr(a,c),c.push({changes:u,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),p=function(n){var i=r.changes[n];if(i.origin=t,d&&!ao(e,i,!1))return s.length=0,{};u.push(Br(e,i));var o=n?kr(e,i):Y(s);po(e,i,o,$r(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Cr(i)});var a=[];Dr(e,(function(e,t){t||-1!=z(a,e.history)||(mo(e.history,i),a.push(e.history)),po(e,i,null,$r(e,i))}))},h=r.changes.length-1;h>=0;--h){var f=p(h);if(f)return f.v}}}}function uo(e,t){if(0!=t&&(e.first+=t,e.sel=new xr(K(e.sel.ranges,(function(e){return new Er(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){di(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)pi(e.cm,i,"gutter")}}function po(e,t,n,i){if(e.cm&&!e.cm.curOp)return Qi(e.cm,po)(e,t,n,i);if(t.to.line<e.first)uo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);uo(e,r),t={from:et(e.first,0),to:et(t.to.line+r,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,qe(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ge(e,t.from,t.to),n||(n=kr(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,a=t.to,s=!1,c=o.line;e.options.lineWrapping||(c=Xe(It(qe(i,o.line))),i.iter(c,a.line+1,(function(e){if(e==r.maxLine)return s=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&me(e),Mr(i,t,n,si(e)),e.options.lineWrapping||(i.iter(c,o.line+t.text.length,(function(e){var t=Ut(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,s=!1)})),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=qe(e,i).stateAfter;if(r&&(!(r instanceof lt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,o.line),nr(e,400);var l=t.text.length-(a.line-o.line)-1;t.full?di(e):o.line!=a.line||1!=t.text.length||Ar(e.doc,t)?di(e,o.line,a.line+1,l):pi(e,o.line,"text");var u=ve(e,"changes"),d=ve(e,"change");if(d||u){var p={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&cn(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,i):Mr(e,t,i),Jr(e,n,V),e.cantEdit&&io(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function ho(e,t,n,i,r){var o;i||(i=n),tt(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),so(e,{from:n,to:i,text:t,origin:r})}function fo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function go(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],a=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)fo(o.ranges[s].anchor,t,n,i),fo(o.ranges[s].head,t,n,i)}else{for(var c=0;c<o.changes.length;++c){var l=o.changes[c];if(n<l.from.line)l.from=et(l.from.line+i,l.from.ch),l.to=et(l.to.line+i,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,r+1),r=0)}}}function mo(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;go(e.done,n,i,r),go(e.undone,n,i,r)}function vo(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=qe(e,at(e,t)):r=Xe(t),null==r?null:(i(o,r)&&e.cm&&pi(e.cm,r,n),o)}function yo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function bo(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}Er.prototype.from=function(){return ot(this.anchor,this.head)},Er.prototype.to=function(){return rt(this.anchor,this.head)},Er.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,Gt(r),cn(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},bo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),a=i.height;if(i.removeInner(e,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var s=[];this.collapse(s),this.children=[new yo(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,s=a;s<r.lines.length;){var c=new yo(r.lines.slice(s,s+=25));r.height-=c.height,this.children.splice(++i,0,c),c.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new bo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=z(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new bo(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e);if(r.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var wo=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function xo(e,t,n){$t(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ji(e,n)}wo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Xe(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=xn(this);Ke(n,Math.max(0,n.height-o)),e&&(Ji(e,(function(){xo(e,n,-o),pi(e,i,"widget")})),cn(e,"lineWidgetCleared",e,this,i))}},wo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=xn(this)-t;r&&(Ht(this.doc,i)||Ke(i,i.height+r),n&&Ji(n,(function(){n.curOp.forceUpdate=!0,xo(n,i,r),cn(n,"lineWidgetChanged",n,e,Xe(i))})))},ye(wo);var Eo=0,_o=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Eo};function So(e,t,n,i,r){if(i&&i.shared)return function(e,t,n,i,r){(i=B(i)).shared=!1;var o=[So(e,t,n,i,r)],a=o[0],s=i.widgetNode;return Dr(e,(function(e){s&&(i.widgetNode=s.cloneNode(!0)),o.push(So(e,st(e,t),st(e,n),i,r));for(var c=0;c<e.linked.length;++c)if(e.linked[c].isParent)return;a=Y(o)})),new Co(o,a)}(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Qi(e.cm,So)(e,t,n,i,r);var o=new _o(e,r),a=tt(t,n);if(i&&B(i,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=j("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Bt(e,t.line,t,n,o)||t.line!=n.line&&Bt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Et=!0}o.addToHistory&&Fr(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,c=t.line,l=e.cm;if(e.iter(c,n.line+1,(function(e){l&&o.collapsed&&!l.options.lineWrapping&&It(e)==l.display.maxLine&&(s=!0),o.collapsed&&c!=t.line&&Ke(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new _t(o,c==t.line?t.ch:null,c==n.line?n.ch:null)),++c})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){Ht(e,t)&&Ke(t,0)})),o.clearOnEnter&&de(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(xt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Eo,o.atomic=!0),l){if(s&&(l.curOp.updateMaxLine=!0),o.collapsed)di(l,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)pi(l,u,"text");o.atomic&&eo(l.doc),cn(l,"markerAdded",l,o)}return o}_o.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&qi(e),ve(this,"clear")){var n=this.find();n&&cn(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=St(a.markedSpans,this);e&&!this.collapsed?pi(e,Xe(a),"text"):e&&(null!=s.to&&(r=Xe(a)),null!=s.from&&(i=Xe(a))),a.markedSpans=Ct(a.markedSpans,s),null==s.from&&this.collapsed&&!Ht(this.doc,a)&&e&&Ke(a,ii(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var l=It(this.lines[c]),u=Ut(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&di(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&eo(e.doc)),e&&cn(e,"markerCleared",e,this,i,r),t&&Gi(e),this.parent&&this.parent.clear()}},_o.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=St(o.markedSpans,this);if(null!=a.from&&(n=et(t?o:Xe(o),a.from),-1==e))return n;if(null!=a.to&&(i=et(t?o:Xe(o),a.to),1==e))return i}return n&&{from:n,to:i}},_o.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Ji(i,(function(){var r=t.line,o=Xe(t.line),a=An(i,o);if(a&&(In(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Ht(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var c=xn(n)-s;c&&Ke(r,r.height+c)}cn(i,"markerChanged",i,e)}))},_o.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=z(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},_o.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ye(_o);var Co=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function Oo(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function ko(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Dr(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==z(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}Co.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();cn(this,"clear")}},Co.prototype.find=function(e,t){return this.primary.find(e,t)},ye(Co);var To=0,Po=function(e,t,n,i,r){if(!(this instanceof Po))return new Po(e,t,n,i,r);null==n&&(n=0),bo.call(this,[new yo([new qt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=et(n,0);this.sel=Sr(o),this.history=new Lr(null),this.id=++To,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Mr(this,{from:o,to:o,text:e}),Zr(this,Sr(o),V)};Po.prototype=Z(bo.prototype,{constructor:Po,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ye(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:tr((function(e){var t=et(this.first,0),n=this.first+this.size-1;so(this,{from:t,to:et(n,qe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Mi(this.cm,0,0),Zr(this,Sr(t),V)})),replaceRange:function(e,t,n,i){ho(this,e,t=st(this,t),n=n?st(this,n):t,i)},getRange:function(e,t,n){var i=Ge(this,st(this,e),st(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Je(this,e))return qe(this,e)},getLineNumber:function(e){return Xe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=qe(this,e)),It(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return st(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:tr((function(e,t,n){Kr(this,st(this,"number"==typeof e?et(e,t||0):e),null,n)})),setSelection:tr((function(e,t,n){Kr(this,st(this,e),st(this,t||e),n)})),extendSelection:tr((function(e,t,n){qr(this,st(this,e),t&&st(this,t),n)})),extendSelections:tr((function(e,t){Gr(this,ct(this,e),t)})),extendSelectionsBy:tr((function(e,t){Gr(this,ct(this,K(this.sel.ranges,e)),t)})),setSelections:tr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new Er(st(this,e[r].anchor),st(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Zr(this,_r(this.cm,i,t),n)}})),addSelection:tr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new Er(st(this,e),st(this,t||e))),Zr(this,_r(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Ge(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Ge(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:tr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var i=[],r=et(e.first,0),o=r,a=0;a<t.length;a++){var s=t[a],c=Tr(s.from,r,o),l=Tr(Cr(s),r,o);if(r=s.to,o=l,"around"==n){var u=e.sel.ranges[a],d=tt(u.head,u.anchor)<0;i[a]=new Er(d?l:c,d?c:l)}else i[a]=new Er(c,c)}return new xr(i,e.sel.primIndex)}(this,i,t),c=i.length-1;c>=0;c--)so(this,i[c]);s?Xr(this,s):this.cm&&Ai(this.cm)})),undo:tr((function(){lo(this,"undo")})),redo:tr((function(){lo(this,"redo")})),undoSelection:tr((function(){lo(this,"undo",!0)})),redoSelection:tr((function(){lo(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Lr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ur(this.history.done),undone:Ur(this.history.undone)}},setHistory:function(e){var t=this.history=new Lr(this.history.maxGeneration);t.done=Ur(e.done.slice(0),null,!0),t.undone=Ur(e.undone.slice(0),null,!0)},setGutterMarker:tr((function(e,t,n){return vo(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&te(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:tr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&vo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Je(this,e))return null;if(t=e,!(e=qe(this,e)))return null}else if(null==(t=Xe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:tr((function(e,t,n){return vo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(S(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:tr((function(e,t,n){return vo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(S(n));if(!o)return!1;var a=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0}))})),addLineWidget:tr((function(e,t,n){return function(e,t,n,i){var r=new wo(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),vo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!Ht(e,t)){var i=$t(t)<e.scrollTop;Ke(t,t.height+xn(r)),i&&ji(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&cn(o,"lineWidgetAdded",o,r,"number"==typeof t?t:Xe(t)),r}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return So(this,st(this,e),st(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return So(this,e=st(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=qe(this,(e=st(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=st(this,e),t=st(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var c=a[s];null!=c.to&&r==e.line&&e.ch>=c.to||null==c.from&&r!=e.line||null!=c.from&&r==t.line&&c.from>=t.ch||n&&!n(c.marker)||i.push(c.marker.parent||c.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),st(this,et(n,t))},indexFromPos:function(e){var t=(e=st(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Po(Ye(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Po(Ye(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),a=e.clipPos(r.to);if(tt(o,a)){var s=So(e,o,a,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,Oo(this)),i},unlinkDoc:function(e){if(e instanceof _a&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),ko(Oo(this));break}if(e.history==this.history){var n=[e.id];Dr(e,(function(e){return n.push(e.id)}),!0),e.history=new Lr(null),e.history.done=Ur(this.history.done,n),e.history.undone=Ur(this.history.undone,n)}},iterLinkedDocs:function(e){Dr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ae(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:tr((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Ji(t=this.cm,(function(){Nr(t),di(t)})))}))}),Po.prototype.eachLine=Po.prototype.iter;var jo=0;function Ao(e){var t=this;if(Mo(t),!ge(t,e)&&!En(t.display,e)){be(e),a&&(jo=+new Date);var n=li(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,c=function(e,i){if(!t.options.allowDropFileTypes||-1!=z(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Qi(t,(function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[i]=e,++s==r){var c={from:n=st(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};so(t.doc,c),Xr(t.doc,Sr(n,Cr(c)))}})),a.readAsText(e)}},l=0;l<r;++l)c(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var u=e.dataTransfer.getData("Text");if(u){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),Jr(t.doc,Sr(n,n)),d)for(var p=0;p<d.length;++p)ho(t.doc,"",d[p].anchor,d[p].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Mo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Do(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Ro=!1;function No(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Lo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Bo=0;Bo<10;Bo++)Lo[Bo+48]=Lo[Bo+96]=String(Bo);for(var Io=65;Io<=90;Io++)Lo[Io]=String.fromCharCode(Io);for(var Fo=1;Fo<=12;Fo++)Lo[Fo+111]=Lo[Fo+63235]="F"+Fo;var zo={};function Ho(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Vo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=K(n.split(" "),Ho),o=0;o<r.length;o++){var a=void 0,s=void 0;o==r.length-1?(s=r.join(" "),a=i):(s=r.slice(0,o+1).join(" "),a="...");var c=t[s];if(c){if(c!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var l in t)e[l]=t[l];return e}function $o(e,t,n,i){var r=(t=Go(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return $o(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var a=$o(e,t.fallthrough[o],n,i);if(a)return a}}}function Uo(e){var t="string"==typeof e?e:Lo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Wo(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function qo(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Lo[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Wo(n,e,t))}function Go(e){return"string"==typeof e?zo[e]:e}function Yo(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&tt(o.from,Y(i).to)<=0;){var a=i.pop();if(tt(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}Ji(e,(function(){for(var t=i.length-1;t>=0;t--)ho(e.doc,"",i[t].from,i[t].to,"+delete");Ai(e)}))}function Ko(e,t,n){var i=re(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Xo(e,t,n){var i=Ko(e,t.ch,n);return null==i?null:new et(t.line,i,n<0?"after":"before")}function Zo(e,t,n,i,r){if(e){var o=le(n,t.doc.direction);if(o){var a,s=r<0?Y(o):o[0],c=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var l=Mn(t,n);a=r<0?n.text.length-1:0;var u=Dn(t,l,a).top;a=oe((function(e){return Dn(t,l,e).top==u}),r<0==(1==s.level)?s.from:s.to-1,a),"before"==c&&(a=Ko(n,a,1))}else a=r<0?s.to:s.from;return new et(i,a,c)}}return new et(i,r<0?n.text.length:0,r<0?"before":"after")}zo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},zo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},zo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},zo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},zo.default=y?zo.macDefault:zo.pcDefault;var Jo={selectAll:oo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),V)},killLine:function(e){return Yo(e,(function(t){if(t.empty()){var n=qe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Yo(e,(function(t){return{from:et(t.from().line,0),to:st(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Yo(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Qo(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ea(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=qe(e.doc,t),i=function(e){for(var t;t=Nt(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=Xe(i)),Zo(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),U)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),U)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ea(e,t.head):i}),U)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=I(e.getLine(o.line),o.ch,i);t.push(G(i-a%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Ji(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=qe(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new et(r.line,r.ch-1)),r.ch>0)r=new et(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),et(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var a=qe(e.doc,r.line-1).text;a&&(r=new et(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),et(r.line-1,a.length-1),r,"+transpose"))}n.push(new Er(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Ji(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Ai(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qo(e,t){var n=qe(e.doc,t),i=It(n);return i!=n&&(t=Xe(i)),Zo(!0,e,i,t,1)}function ea(e,t){var n=Qo(e,t.line),i=qe(e.doc,n.line),r=le(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return et(n.line,a?0:o,n.sticky)}return n}function ta(e,t,n){if("string"==typeof t&&!(t=Jo[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=H}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}var na=new F;function ia(e,t,n,i){var r=e.state.keySeq;if(r){if(Uo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:na.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),ra(e,r+" "+t,n,i))return!0}return ra(e,t,n,i)}function ra(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=$o(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&$o(t,e.options.extraKeys,n,e)||$o(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&cn(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(be(n),xi(e)),!!r}function oa(e,t){var n=qo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ia(e,"Shift-"+n,t,(function(t){return ta(e,t,!0)}))||ia(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ta(e,t)})):ia(e,n,t,(function(t){return ta(e,t)})))}var aa=null;function sa(e){var t=this;if(t.curOp.focus=M(),!ge(t,e)){a&&s<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=oa(t,e);d&&(aa=i?n:null,!i&&88==n&&!De&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(O(t,"CodeMirror-crosshair"),he(document,"keyup",n),he(document,"mouseover",n))}D(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n)}(t)}}function ca(e){16==e.keyCode&&(this.doc.sel.shift=!1),ge(this,e)}function la(e){var t=this;if(!(En(t.display,e)||ge(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(d&&n==aa)return aa=null,void be(e);if(!d||e.which&&!(e.which<10)||!oa(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(e,t,n){return ia(e,"'"+n+"'",t,(function(t){return ta(e,t,!0)}))}(t,e,r)||t.display.input.onKeyPress(e))}}}var ua,da,pa=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ha(e){var t=this,n=t.display;if(!(ge(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,En(n,e))c||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!ma(t,e)){var i=li(t,e),r=Se(e),o=i?function(e,t){var n=+new Date;return da&&da.compare(n,e,t)?(ua=da=null,"triple"):ua&&ua.compare(n,e,t)?(da=new pa(n,e,t),ua=null,"double"):(ua=new pa(n,e,t),da=null,"single")}(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&function(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),ia(e,Wo(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,(function(t){if("string"==typeof t&&(t=Jo[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=H}finally{e.state.suppressEdits=!1}return i}))}(t,r,i,o,e)||(1==r?i?function(e,t,n,i){a?setTimeout(L(Ei,e),0):e.curOp.focus=M();var r,o=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}(e,n,i),l=e.doc.sel;e.options.dragDrop&&ke&&!e.isReadOnly()&&"single"==n&&(r=l.contains(t))>-1&&(tt((r=l.ranges[r]).from(),t)<0||t.xRel>0)&&(tt(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,o=!1,l=Qi(e,(function(t){c&&(r.scroller.draggable=!1),e.state.draggingText=!1,he(r.wrapper.ownerDocument,"mouseup",l),he(r.wrapper.ownerDocument,"mousemove",u),he(r.scroller,"dragstart",d),he(r.scroller,"drop",l),o||(be(t),i.addNew||qr(e.doc,n,null,null,i.extend),c||a&&9==s?setTimeout((function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()}),20):r.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};c&&(r.scroller.draggable=!0),e.state.draggingText=l,l.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop(),de(r.wrapper.ownerDocument,"mouseup",l),de(r.wrapper.ownerDocument,"mousemove",u),de(r.scroller,"dragstart",d),de(r.scroller,"drop",l),_i(e),setTimeout((function(){return r.input.focus()}),20)}(e,i,t,o):function(e,t,n,i){var r=e.display,o=e.doc;be(t);var a,s,c=o.sel,l=c.ranges;if(i.addNew&&!i.extend?(s=o.sel.contains(n),a=s>-1?l[s]:new Er(n,n)):(a=o.sel.primary(),s=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(a=new Er(n,n)),n=li(e,t,!0,!0),s=-1;else{var u=fa(e,n,i.unit);a=i.extend?Wr(a,u.anchor,u.head,i.extend):u}i.addNew?-1==s?(s=l.length,Zr(o,_r(e,l.concat([a]),s),{scroll:!1,origin:"*mouse"})):l.length>1&&l[s].empty()&&"char"==i.unit&&!i.extend?(Zr(o,_r(e,l.slice(0,s).concat(l.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),c=o.sel):Yr(o,s,a,$):(s=0,Zr(o,new xr([a],0),$),c=o.sel);var d=n;function p(t){if(0!=tt(d,t))if(d=t,"rectangle"==i.unit){for(var r=[],l=e.options.tabSize,u=I(qe(o,n.line).text,n.ch,l),p=I(qe(o,t.line).text,t.ch,l),h=Math.min(u,p),f=Math.max(u,p),g=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=m;g++){var v=qe(o,g).text,y=W(v,h,l);h==f?r.push(new Er(et(g,y),et(g,y))):v.length>y&&r.push(new Er(et(g,y),et(g,W(v,f,l))))}r.length||r.push(new Er(n,n)),Zr(o,_r(e,c.ranges.slice(0,s).concat(r),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=a,x=fa(e,t,i.unit),E=w.anchor;tt(x.anchor,E)>0?(b=x.head,E=ot(w.from(),x.anchor)):(b=x.anchor,E=rt(w.to(),x.head));var _=c.ranges.slice(0);_[s]=function(e,t){var n=t.anchor,i=t.head,r=qe(e.doc,n.line);if(0==tt(n,i)&&n.sticky==i.sticky)return t;var o=le(r);if(!o)return t;var a=se(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var c,l=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==l||l==o.length)return t;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=se(o,i.ch,i.sticky),d=u-a||(i.ch-n.ch)*(1==s.level?-1:1);c=u==l-1||u==l?d<0:d>0}var p=o[l+(c?-1:0)],h=c==(1==p.level),f=h?p.from:p.to,g=h?"after":"before";return n.ch==f&&n.sticky==g?t:new Er(new et(n.line,f,g),i)}(e,new Er(st(o,E),b)),Zr(o,_r(e,_,s),$)}}var h=r.wrapper.getBoundingClientRect(),f=0;function g(t){e.state.selectingText=!1,f=1/0,t&&(be(t),r.input.focus()),he(r.wrapper.ownerDocument,"mousemove",m),he(r.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var m=Qi(e,(function(t){0!==t.buttons&&Se(t)?function t(n){var a=++f,s=li(e,n,!0,"rectangle"==i.unit);if(s)if(0!=tt(s,d)){e.curOp.focus=M(),p(s);var c=Ti(r,o);(s.line>=c.to||s.line<c.from)&&setTimeout(Qi(e,(function(){f==a&&t(n)})),150)}else{var l=n.clientY<h.top?-20:n.clientY>h.bottom?20:0;l&&setTimeout(Qi(e,(function(){f==a&&(r.scroller.scrollTop+=l,t(n))})),50)}}(t):g(t)})),v=Qi(e,g);e.state.selectingText=v,de(r.wrapper.ownerDocument,"mousemove",m),de(r.wrapper.ownerDocument,"mouseup",v)}(e,i,t,o)}(t,i,o,e):_e(e)==n.scroller&&be(e):2==r?(i&&qr(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(_?t.display.input.onContextMenu(e):_i(t)))}}function fa(e,t,n){if("char"==n)return new Er(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Er(et(t.line,0),st(e.doc,et(t.line+1,0)));var i=n(e,t);return new Er(i.from,i.to)}function ga(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&be(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!ve(e,n))return xe(t);o-=s.top-a.viewOffset;for(var c=0;c<e.display.gutterSpecs.length;++c){var l=a.gutters.childNodes[c];if(l&&l.getBoundingClientRect().right>=r)return fe(e,n,e,Ze(e.doc,o),e.display.gutterSpecs[c].className,t),xe(t)}}function ma(e,t){return ga(e,t,"gutterClick",!0)}function va(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(e)}pa.prototype.compare=function(e,t,n){return this.time+400>e&&0==tt(t,this.pos)&&n==this.button};var ya={toString:function(){return"CodeMirror.Init"}},ba={},wa={};function xa(e,t,n){if(!t!=!(n&&n!=ya)){var i=e.display.dragFunctions,r=t?de:he;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function Ea(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(O(e.display.wrapper,"CodeMirror-wrap"),Wt(e)),ci(e),di(e),zn(e),setTimeout((function(){return Hi(e)}),100)}function _a(e,t){var n=this;if(!(this instanceof _a))return new _a(e,t);this.options=t=t?B(t):{},B(ba,t,!1);var i=t.value;"string"==typeof i?i=new Po(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new _a.inputStyles[t.inputStyle](this),o=this.display=new gr(e,i,r,t);for(var l in o.wrapper.CodeMirror=this,va(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ui(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),a&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;de(t.scroller,"mousedown",Qi(e,ha)),de(t.scroller,"dblclick",a&&s<11?Qi(e,(function(t){if(!ge(e,t)){var n=li(e,t);if(n&&!ma(e,t)&&!En(e.display,t)){be(t);var i=e.findWordAt(n);qr(e.doc,i.anchor,i.head)}}})):function(t){return ge(e,t)||be(t)}),de(t.scroller,"contextmenu",(function(t){return function(e,t){En(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&ga(e,t,"gutterContextMenu",!1)}(e,t)||ge(e,t,"contextmenu")||_||e.display.input.onContextMenu(t)}(e,t)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}de(t.scroller,"touchstart",(function(r){if(!ge(e,r)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(r)&&!ma(e,r)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),de(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),de(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!En(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var a,s=e.coordsChar(t.activeTouch,"page");a=!i.prev||o(i,i.prev)?new Er(s,s):!i.prev.prev||o(i,i.prev.prev)?e.findWordAt(s):new Er(et(s.line,0),st(e.doc,et(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),be(n)}r()})),de(t.scroller,"touchcancel",r),de(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Ni(e,t.scroller.scrollTop),Bi(e,t.scroller.scrollLeft,!0),fe(e,"scroll",e))})),de(t.scroller,"mousewheel",(function(t){return wr(e,t)})),de(t.scroller,"DOMMouseScroll",(function(t){return wr(e,t)})),de(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ge(e,t)||Ee(t)},over:function(t){ge(e,t)||(function(e,t){var n=li(e,t);if(n){var i=document.createDocumentFragment();yi(e,n,i),e.display.dragCursor||(e.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),T(e.display.dragCursor,i)}}(e,t),Ee(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-jo<100))Ee(t);else if(!ge(e,t)&&!En(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=P("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:Qi(e,Ao),leave:function(t){ge(e,t)||Mo(e)}};var c=t.input.getField();de(c,"keyup",(function(t){return ca.call(e,t)})),de(c,"keydown",Qi(e,sa)),de(c,"keypress",Qi(e,la)),de(c,"focus",(function(t){return Si(e,t)})),de(c,"blur",(function(t){return Ci(e,t)}))}(this),function(){var e;Ro||(de(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Do(No)}),100))})),de(window,"blur",(function(){return Do(Ci)})),Ro=!0)}(),qi(this),this.curOp.forceUpdate=!0,Rr(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout(L(Si,this),20):Ci(this),wa)wa.hasOwnProperty(l)&&wa[l](n,t[l],ya);dr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Sa.length;++u)Sa[u](n);Gi(this),c&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}_a.defaults=ba,_a.optionHandlers=wa;var Sa=[];function Ca(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=ht(e,t).state:n="prev");var a=e.options.tabSize,s=qe(o,t),c=I(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var l,u=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((l=o.mode.indent(r,s.text.slice(u.length),s.text))==H||l>150)){if(!i)return;n="prev"}}else l=0,n="not";"prev"==n?l=t>o.first?I(qe(o,t-1).text,null,a):0:"add"==n?l=c+e.options.indentUnit:"subtract"==n?l=c-e.options.indentUnit:"number"==typeof n&&(l=c+n),l=Math.max(0,l);var d="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(l/a);h;--h)p+=a,d+="\t";if(p<l&&(d+=G(l-p)),d!=u)return ho(o,d,et(t,0),et(t,u.length),"+input"),s.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var g=o.sel.ranges[f];if(g.head.line==t&&g.head.ch<u.length){var m=et(t,u.length);Yr(o,f,new Er(m,m));break}}}_a.defineInitHook=function(e){return Sa.push(e)};var Oa=null;function ka(e){Oa=e}function Ta(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var a=+new Date-200,s="paste"==r||e.state.pasteIncoming>a,c=Ae(t),l=null;if(s&&i.ranges.length>1)if(Oa&&Oa.text.join("\n")==t){if(i.ranges.length%Oa.text.length==0){l=[];for(var u=0;u<Oa.text.length;u++)l.push(o.splitLines(Oa.text[u]))}}else c.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(l=K(c,(function(e){return[e]})));for(var d=e.curOp.updateInput,p=i.ranges.length-1;p>=0;p--){var h=i.ranges[p],f=h.from(),g=h.to();h.empty()&&(n&&n>0?f=et(f.line,f.ch-n):e.state.overwrite&&!s?g=et(g.line,Math.min(qe(o,g.line).text.length,g.ch+Y(c).length)):s&&Oa&&Oa.lineWise&&Oa.text.join("\n")==t&&(f=g=et(f.line,0)));var m={from:f,to:g,text:l?l[p%l.length]:c,origin:r||(s?"paste":e.state.cutIncoming>a?"cut":"+input")};so(e.doc,m),cn(e,"inputRead",e,m)}t&&!s&&ja(e,t),Ai(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Pa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Ji(t,(function(){return Ta(t,n,0,null,"paste")})),!0}function ja(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Ca(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(qe(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Ca(e,r.head.line,"smart"));a&&cn(e,"electricInput",e,r.head.line)}}}function Aa(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:et(r,0),head:et(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ma(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Da(){var e=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=P("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Ma(e),t}function Ra(e,t,n,i,r){var o=t,a=n,s=qe(e,t.line);function c(i){var o,a;if(null==(o=r?function(e,t,n,i){var r=le(t,e.doc.direction);if(!r)return Xo(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=se(r,n.ch,n.sticky),a=r[o];if("ltr"==e.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return Xo(t,n,i);var s,c=function(e,n){return Ko(t,e instanceof et?e.ch:e,n)},l=function(n){return e.options.lineWrapping?(s=s||Mn(e,t),Jn(e,t,s,n)):{begin:0,end:t.text.length}},u=l("before"==n.sticky?c(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var d=1==a.level==i<0,p=c(n,d?1:-1);if(null!=p&&(d?p<=a.to&&p<=u.end:p>=a.from&&p>=u.begin)){var h=d?"before":"after";return new et(n.line,p,h)}}var f=function(e,t,i){for(var o=function(e,t){return t?new et(n.line,c(e,1),"before"):new et(n.line,e,"after")};e>=0&&e<r.length;e+=t){var a=r[e],s=t>0==(1!=a.level),l=s?i.begin:c(i.end,-1);if(a.from<=l&&l<a.to)return o(l,s);if(l=s?a.from:c(a.to,-1),i.begin<=l&&l<i.end)return o(l,s)}},g=f(o+i,i,u);if(g)return g;var m=i>0?u.end:c(u.begin,-1);return null==m||i>0&&m==t.text.length||!(g=f(i>0?0:r.length-1,i,l(m)))?null:g}(e.cm,s,t,n):Xo(s,t,n))){if(i||(a=t.line+n)<e.first||a>=e.first+e.size||(t=new et(a,t.ch,t.sticky),!(s=qe(e,a))))return!1;t=Zo(r,e.cm,s,t.line,n)}else t=o;return!0}if("char"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var l=null,u="group"==i,d=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||c(!p);p=!1){var h=s.text.charAt(t.ch)||"\n",f=ee(h,d)?"w":u&&"\n"==h?"n":!u||/\s/.test(h)?null:"p";if(!u||p||f||(f="s"),l&&l!=f){n<0&&(n=1,c(),t.sticky="after");break}if(f&&(l=f),n>0&&!c(!p))break}var g=io(e,t,o,a,!0);return nt(o,g)&&(g.hitSide=!0),g}function Na(e,t,n,i){var r,o,a=e.doc,s=t.left;if("page"==i){var c=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(c-.5*ii(e.display),3);r=(n>0?t.bottom:t.top)+n*l}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Xn(e,s,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}var La=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ba(e,t){var n=An(e,t.line);if(!n||n.hidden)return null;var i=qe(e.doc,t.line),r=Pn(n,i,t.line),o=le(i,e.doc.direction),a="left";o&&(a=se(o,t.ch)%2?"right":"left");var s=Ln(r.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Ia(e,t){return t&&(e.bad=!0),e}function Fa(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Ia(e.clipPos(et(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return za(o,t,n)}}function za(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!A(i,t))return Ia(et(Xe(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?Y(e.rest):e.line;return Ia(et(Xe(o),o.text.length),r)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var c=e.measure,l=c.maps;function u(t,n,i){for(var r=-1;r<(l?l.length:0);r++)for(var o=r<0?c.map:l[r],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var u=Xe(r<0?e.line:e.rest[r]),d=o[a]+i;return(i<0||s!=t)&&(d=o[a+(i?1:0)]),et(u,d)}}}var d=u(a,s,n);if(d)return Ia(d,r);for(var p=s.nextSibling,h=a?a.nodeValue.length-n:0;p;p=p.nextSibling){if(d=u(p,p.firstChild,0))return Ia(et(d.line,d.ch-h),r);h+=p.textContent.length}for(var f=s.previousSibling,g=n;f;f=f.previousSibling){if(d=u(f,f.firstChild,-1))return Ia(et(d.line,d.ch+g),r);g+=f.textContent.length}}La.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){if(!ge(i,e)){if(i.somethingSelected())ka({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Aa(i);ka({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,V),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var o=Oa.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Da(),s=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),s.value=Oa.text.join("\n");var c=document.activeElement;N(s),setTimeout((function(){i.display.lineSpace.removeChild(a),c.focus(),c==r&&n.showPrimarySelection()}),50)}}Ma(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),de(r,"paste",(function(e){ge(i,e)||Pa(e,i)||s<=11&&setTimeout(Qi(i,(function(){return t.updateFromDOM()})),20)})),de(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),de(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),de(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),de(r,"touchstart",(function(){return n.forceCompositionEnd()})),de(r,"input",(function(){t.composing||t.readFromDOMSoon()})),de(r,"copy",o),de(r,"cut",o)},La.prototype.prepareSelection=function(){var e=vi(this.cm,!1);return e.focus=this.cm.state.focused,e},La.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},La.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},La.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=Fa(t,e.anchorNode,e.anchorOffset),s=Fa(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=tt(ot(a,s),r)||0!=tt(rt(a,s),o)){var c=t.display.view,l=r.line>=t.display.viewFrom&&Ba(t,r)||{node:c[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Ba(t,o);if(!u){var d=c[c.length-1].measure,p=d.maps?d.maps[d.maps.length-1]:d.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(l&&u){var h,f=e.rangeCount&&e.getRangeAt(0);try{h=C(l.node,l.offset,u.offset,u.node)}catch(e){}h&&(!n&&t.state.focused?(e.collapse(l.node,l.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},La.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},La.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},La.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},La.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return A(this.div,t)},La.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},La.prototype.blur=function(){this.div.blur()},La.prototype.getField=function(){return this.div},La.prototype.supportsTouch=function(){return!0},La.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Ji(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},La.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},La.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(m&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Fa(t,e.anchorNode,e.anchorOffset),i=Fa(t,e.focusNode,e.focusOffset);n&&i&&Ji(t,(function(){Zr(t.doc,Sr(n,i),V),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},La.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=et(a.line-1,qe(i.doc,a.line-1).length)),s.ch==qe(i.doc,s.line).text.length&&s.line<i.lastLine()&&(s=et(s.line+1,0)),a.line<r.viewFrom||s.line>r.viewTo-1)return!1;a.line==r.viewFrom||0==(e=ui(i,a.line))?(t=Xe(r.view[0].line),n=r.view[0].node):(t=Xe(r.view[e].line),n=r.view[e-1].node.nextSibling);var c,l,u=ui(i,s.line);if(u==r.view.length-1?(c=r.viewTo-1,l=r.lineDiv.lastChild):(c=Xe(r.view[u+1].line)-1,l=r.view[u+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(function(e,t,n,i,r){var o="",a=!1,s=e.doc.lineSeparator(),c=!1;function l(){a&&(o+=s,c&&(o+=s),a=c=!1)}function u(e){e&&(l(),o+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,p=t.getAttribute("cm-marker");if(p){var h=e.findMarks(et(i,0),et(r+1,0),(m=+p,function(e){return e.id==m}));return void(h.length&&(o=h[0].find(0))&&u(Ge(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&l();for(var g=0;g<t.childNodes.length;g++)d(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(c=!0),f&&(a=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var m}for(;d(t),t!=n;)t=t.nextSibling,c=!1;return o}(i,n,l,t,c)),p=Ge(i.doc,et(t,0),et(c,qe(i.doc,c).text.length));d.length>1&&p.length>1;)if(Y(d)==Y(p))d.pop(),p.pop(),c--;else{if(d[0]!=p[0])break;d.shift(),p.shift(),t++}for(var h=0,f=0,g=d[0],m=p[0],v=Math.min(g.length,m.length);h<v&&g.charCodeAt(h)==m.charCodeAt(h);)++h;for(var y=Y(d),b=Y(p),w=Math.min(y.length-(1==d.length?h:0),b.length-(1==p.length?h:0));f<w&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==d.length&&1==p.length&&t==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)h--,f++;d[d.length-1]=y.slice(0,y.length-f).replace(/^\u200b+/,""),d[0]=d[0].slice(h).replace(/\u200b+$/,"");var x=et(t,h),E=et(c,p.length?Y(p).length-f:0);return d.length>1||d[0]||tt(x,E)?(ho(i.doc,d,x,E,"+input"),!0):void 0},La.prototype.ensurePolled=function(){this.forceCompositionEnd()},La.prototype.reset=function(){this.forceCompositionEnd()},La.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},La.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},La.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Ji(this.cm,(function(){return di(e.cm)}))},La.prototype.setUneditable=function(e){e.contentEditable="false"},La.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Qi(this.cm,Ta)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},La.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},La.prototype.onContextMenu=function(){},La.prototype.resetPosition=function(){},La.prototype.needsContentAttribute=!0;var Ha=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null};Ha.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!ge(i,e)){if(i.somethingSelected())ka({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Aa(i);ka({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,V):(n.prevInput="",r.value=t.text.join("\n"),N(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(r.style.width="0px"),de(r,"input",(function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),de(r,"paste",(function(e){ge(i,e)||Pa(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),de(r,"cut",o),de(r,"copy",o),de(e.scroller,"paste",(function(t){if(!En(e,t)&&!ge(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),de(e.lineSpace,"selectstart",(function(t){En(e,t)||be(t)})),de(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),de(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Ha.prototype.createField=function(e){this.wrapper=Da(),this.textarea=this.wrapper.firstChild},Ha.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=vi(e);if(e.options.moveInputWithCursor){var r=Gn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},Ha.prototype.showSelection=function(e){var t=this.cm.display;T(t.cursorDiv,e.cursors),T(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ha.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&N(this.textarea),a&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Ha.prototype.getField=function(){return this.textarea},Ha.prototype.supportsTouch=function(){return!1},Ha.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||M()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ha.prototype.blur=function(){this.textarea.blur()},Ha.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ha.prototype.receivedFocus=function(){this.slowPoll()},Ha.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Ha.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Ha.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Me(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var c=0,l=Math.min(i.length,r.length);c<l&&i.charCodeAt(c)==r.charCodeAt(c);)++c;return Ji(t,(function(){Ta(t,r.slice(c),i.length-c,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Ha.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ha.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Ha.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=li(n,e),l=i.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Qi(n,Zr)(n.doc,Sr(o),V);var u,p=r.style.cssText,h=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",c&&(u=window.scrollY),i.input.focus(),c&&window.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),a&&s>=9&&m(),_){Ee(e);var g=function(){he(window,"mouseup",g),setTimeout(v,20)};de(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=r.selectionStart){var e=n.somethingSelected(),o=""+(e?r.value:"");r.value="",r.value=o,t.prevInput=e?"":"",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,r.style.cssText=p,a&&s<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),null!=r.selectionStart)){(!a||a&&s<9)&&m();var e=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==t.prevInput?Qi(n,oo)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},Ha.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ha.prototype.setUneditable=function(){},Ha.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=ya&&r(e,t,n)}:r)}e.defineOption=n,e.Init=ya,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Pr(e)}),!0),n("indentUnit",2,Pr,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){jr(e),zn(e),di(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(et(i,o))}i++}));for(var r=n.length-1;r>=0;r--)ho(e.doc,t,n[r],et(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ya&&e.refresh()})),n("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){va(e),fr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=Go(t),r=n!=ya&&Go(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ea,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=pr(t,e.options.lineNumbers),fr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?ai(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Hi(e)}),!0),n("scrollbarStyle","native",(function(e){Ui(e),Hi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=pr(e.options.gutters,t),fr(e)}),!0),n("firstLineNumber",1,fr,!0),n("lineNumberFormatter",(function(e){return e}),fr,!0),n("showCursorWhenSelecting",!1,mi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Ci(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,xa),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mi,!0),n("singleCursorHeightPerLine",!0,mi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,jr,!0),n("addModeClass",!1,jr,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,jr,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(_a),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&Qi(this,t[e])(this,n,r),fe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Go(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:er((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,di(this)})),removeOverlay:er((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void di(this)}})),indentLine:er((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Je(this.doc,e)&&Ca(this,e,t,n)})),indentSelection:er((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ca(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Ai(this));else{var o=r.from(),a=r.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var c=s;c<n;++c)Ca(this,c,e);var l=this.doc.sel.ranges;0==o.ch&&t.length==l.length&&l[i].from().ch>0&&Yr(this.doc,i,new Er(o,l[i].to()),V)}}})),getTokenAt:function(e,t){return yt(this,e,t)},getLineTokens:function(e,t){return yt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=st(this.doc,e);var t,n=pt(this,qe(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}i=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=r[o[t][a]];s&&i.push(s)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var c=0;c<r._global.length;c++){var l=r._global[c];l.pred(o,this)&&-1==z(i,l.val)&&i.push(l.val)}return i},getStateAfter:function(e,t){var n=this.doc;return ht(this,(e=at(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Gn(this,null==e?n.head:"object"==typeof e?st(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return qn(this,st(this.doc,e),t||"page")},coordsChar:function(e,t){return Xn(this,(e=Wn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Wn(this,{top:e,left:0},t||"page").top,Ze(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=qe(this.doc,e)}else i=e;return Un(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-$t(i):0)},defaultTextHeight:function(){return ii(this.display)},defaultCharWidth:function(){return ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o,a,s=this.display,c=(e=Gn(this,st(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==i)c=e.top;else if("above"==i||"near"==i){var u=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(c=e.bottom),l+t.offsetWidth>d&&(l=d-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==r?(l=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&(null!=(a=Pi(o=this,{left:l,top:c,right:l+t.offsetWidth,bottom:c+t.offsetHeight})).scrollTop&&Ni(o,a.scrollTop),null!=a.scrollLeft&&Bi(o,a.scrollLeft))},triggerOnKeyDown:er(sa),triggerOnKeyPress:er(la),triggerOnKeyUp:ca,triggerOnMouseDown:er(ha),execCommand:function(e){if(Jo.hasOwnProperty(e))return Jo[e].call(null,this)},triggerElectric:er((function(e){ja(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=st(this.doc,e),a=0;a<t&&!(o=Ra(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:er((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Ra(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),U)})),deleteH:er((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Yo(this,(function(n){var r=Ra(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var a=st(this.doc,e),s=0;s<t;++s){var c=Gn(this,a,"div");if(null==o?o=c.left:c.left=o,(a=Na(this,c,r,n)).hitSide)break}return a},moveV:er((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(a){if(o)return e<0?a.from():a.to();var s=Gn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),r.push(s.left);var c=Na(n,s,e,t);return"page"==t&&a==i.sel.primary()&&ji(n,qn(n,c,"div").top-s.top),c}),U),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]})),findWordAt:function(e){var t=qe(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),a=ee(o,r)?function(e){return ee(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&a(t.charAt(n-1));)--n;for(;i<t.length&&a(t.charAt(i));)++i}return new Er(et(e.line,n),et(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):O(this.display.cursorDiv,"CodeMirror-overwrite"),fe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==M()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:er((function(e,t){Mi(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-On(this)-this.display.barHeight,width:e.scrollWidth-On(this)-this.display.barWidth,clientHeight:Tn(this),clientWidth:kn(this)}},scrollIntoView:er((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Di(e),e.curOp.scrollToPos=t}(this,e):Ri(this,e.from,e.to,e.margin)})),setSize:er((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Fn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,fe(this,"refresh",this)})),operation:function(e){return Ji(this,e)},startOperation:function(){return qi(this)},endOperation:function(){return Gi(this)},refresh:er((function(){var e=this.display.cachedTextHeight;di(this),this.curOp.forceUpdate=!0,zn(this),Mi(this,this.doc.scrollLeft,this.doc.scrollTop),cr(this.display),(null==e||Math.abs(e-ii(this.display))>.5)&&ci(this),fe(this,"refresh",this)})),swapDoc:er((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Rr(this,e),zn(this),this.display.input.reset(),Mi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,cn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ye(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}(_a);var Va="iter insert remove copy getEditor constructor".split(" ");for(var $a in Po.prototype)Po.prototype.hasOwnProperty($a)&&z(Va,$a)<0&&(_a.prototype[$a]=function(e){return function(){return e.apply(this.doc,arguments)}}(Po.prototype[$a]));return ye(Po),_a.inputStyles={textarea:Ha,contenteditable:La},_a.defineMode=function(e){_a.defaults.mode||"null"==e||(_a.defaults.mode=e),Be.apply(this,arguments)},_a.defineMIME=function(e,t){Le[e]=t},_a.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),_a.defineMIME("text/plain","null"),_a.defineExtension=function(e,t){_a.prototype[e]=t},_a.defineDocExtension=function(e,t){Po.prototype[e]=t},_a.fromTextArea=function(e,t){if((t=t?B(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=M();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=s.getValue()}var r;if(e.form&&(de(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(e){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(he(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var s=_a((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return s},function(e){e.off=he,e.on=de,e.wheelEventPixels=br,e.Doc=Po,e.splitLines=Ae,e.countColumn=I,e.findColumn=W,e.isWordChar=Q,e.Pass=H,e.signal=fe,e.Line=qt,e.changeEnd=Cr,e.scrollbarModel=$i,e.Pos=et,e.cmpPos=tt,e.modes=Ne,e.mimeModes=Le,e.resolveMode=Ie,e.getMode=Fe,e.modeExtensions=ze,e.extendMode=He,e.copyState=Ve,e.startState=Ue,e.innerMode=$e,e.commands=Jo,e.keyMap=zo,e.keyName=qo,e.isModifierKey=Uo,e.lookupKey=$o,e.normalizeKeyMap=Vo,e.StringStream=We,e.SharedTextMarker=Co,e.TextMarker=_o,e.LineWidget=wo,e.e_preventDefault=be,e.e_stopPropagation=we,e.e_stop=Ee,e.addClass=D,e.contains=A,e.rmClass=O,e.keyNames=Lo}(_a),_a.version="5.49.2",_a}()},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),o=n(2),a=n.n(o),s=n(1),c=n.n(s),l=n(0),u=n(3),d=n(19);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var h=c.a.View.extend({events:function(){return this.model.get("events")||{mousedown:"handleClick"}},attributes:function(){return this.model.get("attributes")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config,n=void 0===t?{}:t;this.em=n.em,this.editor=n.editor},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.editor,n=this.em,i=t.Canvas.getFrameEl().getBoundingClientRect(),r=i.left,o=i.top,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{clientX:e.clientX-r,clientY:e.clientY-o});n.trigger("toolbar:run:before"),this.execCommand(s)},execCommand:function(e){var t={event:e},n=this.model.get("command"),i=this.editor;"function"==typeof n&&n(i,null,t),"string"==typeof n&&i.runCommand(n,t)},render:function(){var e=this.editor,t=this.$el,n=this.model,i=n.get("id"),r=n.get("label"),o=e.getConfig("stylePrefix");return t.addClass("".concat(o,"toolbar-item")),i&&t.addClass("".concat(o,"toolbar-item__").concat(i)),r&&t.append(r),this}}),f=d.a.extend({itemView:h,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config={editor:e.editor||"",em:e.em},this.listenTo(this.collection,"reset",this.render)}}),g=c.a.Model.extend({defaults:{command:"",attributes:{}}}),m=c.a.Collection.extend({model:g});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b,w=c.a.$;t.default={init:function(e){Object(l.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),b=1},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(e){var t=this,n=this.em,i=e?"on":"off",r={on:u.t,off:u.s};r[i](window,"resize",this.onFrameUpdated),n[i]("component:toggled",this.onSelect,this),n[i]("change:componentHovered",this.onHovered,this),n[i]("component:resize component:styleUpdate component:input",this.updateGlobalPos,this),n[i]("change:canvasOffset",this.updateAttached,this),n[i]("frame:updated",this.onFrameUpdated,this),n.get("Canvas").getFrames().forEach((function(e){var n,o,a=e.view;a&&(n=a.getWindow(),o=a.getBody(),r[i](o,"mouseover",t.onHover),r[i](o,"mouseleave",t.onOut),r[i](o,"click touchend",t.onClick),r[i](n,"scroll",t.onFrameScroll))}))},onHover:function(e){e.stopPropagation();var t=e.target,n=Object(u.j)(t),i=n&&n._getFrame(),r=w(t),o=r.data("model");if(!o)for(var a=r.parent();!o&&a.length>0;)o=a.data("model"),a=a.parent();if(o&&!o.get("hoverable")){for(var s=o&&o.parent();s&&!s.get("hoverable");)s=s.parent();o=s}this.currentDoc=t.ownerDocument,this.em.setHovered(o),i&&this.em.set("currentFrame",i)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(e,t){var n=this,i={};t&&t.views.forEach((function(e){var r=e.el,o=n.getElementPos(r);i={el:r,pos:o,component:t,view:Object(u.j)(r)},n.updateToolsLocal(i),r.ownerDocument===n.currentDoc&&(n.elHovered=i)}))},onSelect:Object(l.debounce)((function(){var e=this.em,t=e.getSelected(),n=e.get("currentFrame")||{},i=t&&t.getView(n.model),r=i&&i.el,o={};r&&(o={el:r,pos:this.getElementPos(r),component:t,view:Object(u.j)(r)}),this.elSelected=o,this.updateToolsGlobal(),this.updateToolsLocal(o)})),updateGlobalPos:function(){var e=this.getElSelected();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsGlobal())},updateLocalPos:function(){var e=this.getElHovered();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsLocal())},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){var e=this;this.currentDoc=null,this.em.setHovered(0),this.canvas.getFrames().forEach((function(t){var n=t.view,i=n&&n.getToolsEl();i&&e.toggleToolsEl(0,0,{el:i})}))},toggleToolsEl:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.el||this.canvas.getToolsEl(t);return i&&(i.style.opacity=e?1:0),i||{}},showElementOffset:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b&&this.editor.runCommand("show-offset",{el:e,elPos:t,view:n.view,force:1,top:0,left:0})},hideElementOffset:function(e){this.editor.stopCommand("show-offset",{view:e})},showFixedElementOffset:function(e,t){this.editor.runCommand("show-offset",{el:e,elPos:t,state:"Fixed"})},hideFixedElementOffset:function(e,t){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(e){this.canvas.getHighlighter(e).style.opacity=0},onClick:function(e){e.stopPropagation(),e.preventDefault();var t=this.em;if(t.get("_cmpDrag"))return t.set("_cmpDrag");var n=w(e.target),i=n.data("model");if(!i)for(var r=n.parent();!i&&r.length>0;)i=r.data("model"),r=r.parent();if(i)if(i.get("selectable"))this.select(i,e);else{for(var o=i.parent();o&&!o.get("selectable");)o=o.parent();this.select(o,e)}},select:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=t.ctrlKey||t.metaKey,i=t.shiftKey,r=this.editor,o=this.em,a=r.getConfig("multipleSelection");if(n&&a)r.selectToggle(e);else if(i&&a){o.clearSelection(r.Canvas.getWindow());var s,c,u=e.collection,d=u.indexOf(e);if(r.getSelectedAll(),r.getSelectedAll().forEach((function(e){var t=e.collection,n=t.indexOf(e);t===u&&(n<d?s=Object(l.isUndefined)(s)?n:Math.max(s,n):n>d&&(c=Object(l.isUndefined)(c)?n:Math.min(c,n)))})),!Object(l.isUndefined)(s))for(;s!==d;)r.selectAdd(u.at(s)),s++;if(!Object(l.isUndefined)(c))for(;c!==d;)r.selectAdd(u.at(c)),c--;r.selectAdd(e)}else r.select(e,{scroll:{}});this.initResize(e)}},updateBadge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=w(e).data("model");if(i&&i.get("badgable")){var r=this.getBadge(n);if(!n.posOnly){var o=this.canvas.getConfig(),a=i.getIcon(),s=o.pStylePrefix||"",c="".concat(s,"badge"),l=o.customBadgeLabel,u="".concat(a?'<div class="'.concat(c,'__icon">').concat(a,"</div>"):"",'\n        <div class="').concat(c,'__name">').concat(i.getName(),"</div>");r.innerHTML=l?l(i):u}var d="px",p=r.style;p.display="block";var h=r?r.offsetHeight:0,f=0-h,g=n.topOff-h<0?-n.topOff:f,m=n.leftOff<0?-n.leftOff:0;p.top=g+d,p.left=m+d}},showHighlighter:function(e){this.canvas.getHighlighter(e).style.opacity=""},initResize:function(e){var t,n=this.em,i=this.canvas,o=n?n.get("Editor"):"",a=(n?n.get("Config"):"").stylePrefix||"",s="".concat(a,"resizing"),c=!Object(l.isElement)(e)&&Object(u.o)(e)?e:n.getSelected(),d=c.get("resizable"),p=Object(l.isElement)(e)?e:c.getEl(),h={},f=function(e,t,n){var i=n.docs;i&&i.forEach((function(t){var n=t.body,i=n.className||"";n.className=("add"==e?"".concat(i," ").concat(s):i.replace(s,"")).trim()}))};o&&d?(h={onStart:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.el,a=r.config,s=r.resizer,l=a.keyHeight,d=a.keyWidth,p=a.currentUnit,h=a.keepAutoHeight,g=a.keepAutoWidth;f("add",0,r),t=n.get("StyleManager").getModelToStyle(c),i.toggleFramesEvents();var m=getComputedStyle(o),v=t.getStyle(),y=v[d];a.autoWidth=g&&"auto"===y,isNaN(parseFloat(y))&&(y=m[d]);var w=v[l];a.autoHeight=h&&"auto"===w,isNaN(parseFloat(w))&&(w=m[l]),s.startDim.w=parseFloat(y),s.startDim.h=parseFloat(w),b=0,p&&(a.unitHeight=Object(u.i)(w),a.unitWidth=Object(u.i)(y))},onMove:function(){o.trigger("component:resize")},onEnd:function(e,t){f("remove",0,t),o.trigger("component:resize"),i.toggleFramesEvents(1),b=1},updateTarget:function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){var a=o.store,s=o.selectedHandler,c=o.config,l=c.keyHeight,u=c.keyWidth,d=c.autoHeight,p=c.autoWidth,h=c.unitWidth,f=c.unitHeight,g=["tc","bc"].indexOf(s)>=0,m=["cl","cr"].indexOf(s)>=0,v={},b=a?"":1;if(!g){var w=i.getBody().offsetWidth,x=r.w<w?r.w:w;v[u]=p?"auto":"".concat(x).concat(h)}m||(v[l]=d?"auto":"".concat(r.h).concat(f)),t.addStyle(y({},v,{en:b}),{avoidStore:!a});var E="update:component:style",_="".concat(E,":").concat(l," ").concat(E,":").concat(u);n&&n.trigger(_,null,null,{noEmit:1})}}},"object"==r()(d)&&(h=y({},h,{},d)),this.resizer=o.runCommand("resize",{el:p,options:h,force:1})):(o.stopCommand("resize"),this.resizer=null)},updateToolbar:function(e){var t=this.config.em,n=e==t?t.getSelected():e,i=this.canvas.getToolbarEl(),r=i.style;if(n){var o=n.get("toolbar");if(t.get("Config").showToolbar&&o&&o.length){if(r.opacity="",r.display="",!this.toolbar){i.innerHTML="",this.toolbar=new m(o);var a=new f({collection:this.toolbar,editor:this.editor,em:t});i.appendChild(a.render().el)}this.toolbar.reset(o),r.top="-100px",r.left=0}else r.display="none"}else r.opacity=0},updateToolbarPos:function(e){var t=this.canvas.getToolbarEl().style;t.top="".concat(e.top).concat("px"),t.left="".concat(e.left).concat("px"),t.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.canvas.getBadgeEl(e.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateToolsLocal(),this.updateGlobalPos()},isCompSelected:function(e){return e&&"selected"===e.get("status")},updateToolsLocal:function(e){var t=e||this.getElHovered(),n=t.el,i=t.pos,r=t.view,o=t.component;if(n){var a=o.get("hoverable"),s=this.lastHovered!==n,c=s?{}:{posOnly:1};s&&a&&(this.lastHovered=n,this.showHighlighter(r),this.showElementOffset(n,i,{view:r})),this.isCompSelected(o)&&(this.hideHighlighter(r),this.hideElementOffset(r));var l=this.toggleToolsEl(1,r).style,u=this.canvas.canvasRectOffset(n,i),d=u.top,p=u.left;this.updateBadge(n,i,y({},c,{view:r,topOff:d,leftOff:p})),l.top=d+"px",l.left=p+"px",l.width=i.width+"px",l.height=i.height+"px"}else this.lastHovered=0},updateToolsGlobal:function(){var e=this.getElSelected(),t=e.el,n=e.pos,i=e.component;if(!t)return this.toggleToolsEl(),void(this.lastSelected=0);var r=this.canvas;this.lastSelected!==t&&(this.lastSelected=t,this.updateToolbar(i));var o=this.toggleToolsEl(1).style,a=r.getTargetToElementFixed(t,r.getToolbarEl(),{pos:n}),s=a.canvasOffsetTop,c=a.canvasOffsetLeft;o.top=s+"px",o.left=c+"px",o.width=n.width+"px",o.height=n.height+"px",this.updateToolbarPos({top:a.top,left:a.left})},updateAttached:Object(l.debounce)((function(){this.updateToolsGlobal()})),getElementPos:function(e){return this.canvas.getCanvasView().getElementPos(e)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(e){e&&e.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(e){this.editor=e&&e.get("Editor"),this.enable()},stop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.em,r=this.editor;this.stopSelectComponent(),!n.preserveSelected&&i.setSelected(null),this.onOut(),this.toggleToolsEl(),r&&r.stopCommand("resize"),this.editor=0}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(2),r=n.n(i),o=n(14),a=n.n(o),s=n(15),c=n.n(s),l=n(0),u=n(3);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a()(this,e),this.opts={container:null,onStart:null,onDrag:null,onEnd:null,setPosition:null,getPosition:null,guidesStatic:null,guidesTarget:null,snapOffset:5,doc:0,scale:1},Object(l.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(t),this.delta={x:0,y:0},this}return c()(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=p({},this.opts,{},e)}},{key:"toggleDrag",value:function(e){var t=this.getDocumentEl(),n=this.getContainerEl(),i=this.getWindowEl(),r=e?"on":"off",o={on:u.t,off:u.s};o[r](n,"mousemove dragover",this.drag),o[r](t,"mouseup dragend touchend",this.stop),o[r](t,"keydown",this.keyHandle),o[r](i,"scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this.lastScroll,t=this.delta,n=this.getScrollInfo(),i={x:n.x-e.x,y:n.y-e.y};this.move(t.x+i.x,t.y+i.y),this.lastScrollDiff=i}},{key:"start",value:function(e){var t=this.opts,n=t.onStart;this.toggleDrag(1),this.startPointer=this.getPointerPos(e),this.guidesStatic=Object(l.result)(t,"guidesStatic")||[],this.guidesTarget=Object(l.result)(t,"guidesTarget")||[],Object(l.isFunction)(n)&&n(e,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(e)}},{key:"drag",value:function(e){var t=this,n=this.opts,i=this.lastScrollDiff,r=this.globScrollDiff,o=n.onDrag,a=this.startPointer,s=this.getPointerPos(e),c={x:r.x+i.x,y:r.y+i.y};this.globScrollDiff=c;var u={x:s.x-a.x+c.x,y:s.y-a.y+c.y};this.lastScrollDiff={x:0,y:0};var d=this.lockedAxis;"x"===(d=e.shiftKey?!d&&this.detectAxisLock(u.x,u.y):null)?u.x=a.x:"y"===d&&(u.y=a.y);var h=function(i){["x","y"].forEach((function(e){return i[e]=i[e]*Object(l.result)(n,"scale")})),t.delta=i,t.move(i.x,i.y),Object(l.isFunction)(o)&&o(e,t)},f=p({},u);if(this.currentPointer=s,this.lockedAxis=d,this.lastScroll=this.getScrollInfo(),h(u),this.guidesTarget.length){var g=this.snapGuides(f),m=g.newDelta,v=g.trgX,y=g.trgY;(v||y)&&h(m)}0===e.which&&this.stop(e)}},{key:"snapGuides",value:function(e){var t=this,n=e,i=this.trgX,r=this.trgY;return this.guidesTarget.forEach((function(n){n.x&&t.trgX||n.y&&t.trgY||(n.active=0,t.guidesStatic.forEach((function(o){if(!(n.y&&o.x||n.x&&o.y)){var a=n.y&&o.y,s=a?"y":"x",c=n[s],u=o[s],d=e[s],p=a?r:i;if(t.isPointIn(c,u)&&Object(l.isUndefined)(p)){var h=d-(c-u);t.setGuideLock(n,h)}}})))})),i=this.trgX,r=this.trgY,["x","y"].forEach((function(i){var r=i.toUpperCase(),o=t["trg".concat(r)];o&&!t.isPointIn(e[i],o.lock)&&(t.setGuideLock(o,null),o=null),o&&!Object(l.isUndefined)(o.lock)&&(n[i]=o.lock)})),{newDelta:n,trgX:this.trgX,trgY:this.trgY}}},{key:"isPointIn",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.offset,r=i||this.opts.snapOffset;return e>=t&&e<=t+r||e<=t&&e>=t-r}},{key:"setGuideLock",value:function(e,t){var n=Object(l.isUndefined)(e.x)?"Y":"X",i="trg".concat(n);return null!==t?(e.active=1,e.lock=t,this[i]=e):(delete e.active,delete e.lock,delete this[i]),e}},{key:"stop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.delta,i=t.cancel,r=i?0:n.x,o=i?0:n.y;this.toggleDrag(),this.lockedAxis=null,this.move(r,o,1);var a=this.opts.onEnd;Object(l.isFunction)(a)&&a(e,this,{cancelled:i})}},{key:"keyHandle",value:function(e){Object(u.m)(e)&&this.stop(e,{cancel:1})}},{key:"move",value:function(e,t,n){var i=this.el,r=this.opts,o=this.startPosition;if(o){var a=r.setPosition,s=o.x+e,c=o.y+t;this.position={x:s,y:c,end:n},Object(l.isFunction)(a)&&a(this.position),i&&(i.style.left="".concat(s,"px"),i.style.top="".concat(c,"px"))}}},{key:"getContainerEl",value:function(){var e=this.opts.container;return e?[e]:this.getDocumentEl()}},{key:"getWindowEl",value:function(){return this.getContainerEl().map((function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow}))}},{key:"getDocumentEl",value:function(e){var t=this.opts.doc;if(e=e||this.el,!this.docs){var n=[document];e&&n.push(e.ownerDocument),t&&n.push(t),this.docs=n}return this.docs}},{key:"getPointerPos",value:function(e){var t=this.opts.getPointerPosition,n=Object(u.h)(e);return t?t(e):{x:n.clientX,y:n.clientY}}},{key:"getStartPosition",value:function(){var e=this.el,t=this.opts.getPosition,n={x:0,y:0};return Object(l.isFunction)(t)?n=t():e&&(n={x:parseFloat(e.style.left),y:parseFloat(e.style.top)}),n}},{key:"getScrollInfo",value:function(){var e=this.opts.doc,t=e&&e.body;return{y:t?t.scrollTop:0,x:t?t.scrollLeft:0}}},{key:"detectAxisLock",value:function(e,t){var n=e,i=t,r=Math.abs(n),o=Math.abs(i);return i>=r||i<=-r?"x":n>o||n<-o?"y":void 0}}]),e}()},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=r.a.$;t.a=r.a.View.extend({events:{change:"handleChange"},template:function(){return'<span class="'.concat(this.holderClass(),'"></span>')},inputClass:function(){return"".concat(this.ppfx,"field")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ppfx||"";this.opts=e,this.ppfx=t,this.em=e.target||{},this.listenTo(this.model,"change:value",this.handleModelChange)},elementUpdated:function(){this.model.trigger("el:change")},setValue:function(e){var t=this.model,n=e||t.get("defaults"),i=this.getInputEl();i&&(i.value=n)},handleModelChange:function(e,t,n){this.setValue(t,n)},handleChange:function(e){e.stopPropagation();var t=this.getInputEl().value;this.model.set({value:t},{fromInput:1}),this.elementUpdated()},getInputEl:function(){if(!this.inputEl){var e=this.model,t=e.get("placeholder")||e.get("defaults")||"";this.inputEl=o('<input type="text" placeholder="'.concat(t,'">'))}return this.inputEl.get(0)},render:function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this}})},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),o=n(7);t.default=r.a.View.extend({initialize:function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix||"",this.target=e.target||{},this.propTarget=e.propTarget||{},this.onChange=e.onChange,this.onInputRender=e.onInputRender||{},this.customValue=e.customValue||{},this.properties=[];var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.render)},addTo:function(e,t,n){this.add(e,null,n)},add:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t||this.el,r=new e.typeView({model:e,name:e.get("name"),id:this.pfx+e.get("property"),target:this.target,propTarget:this.propTarget,onChange:this.onChange,onInputRender:this.onInputRender,config:this.config});"composite"!=e.get("type")&&(r.customValue=this.customValue),r.render();var a=r.el;this.properties.push(r),r.updateVisibility(),Object(o.b)(i,a,n.at)},render:function(){var e=this,t=this.$el;this.clearItems();var n=document.createDocumentFragment();return this.collection.each((function(t){return e.add(t,n)})),t.empty(),t.append(n),t.attr("class","".concat(this.pfx,"properties")),this},remove:function(){r.a.View.prototype.remove.apply(this,arguments),this.clearItems()},clearItems:function(){this.properties.forEach((function(e){return e.remove()})),this.properties=[]}})},function(e,t,n){"use strict";var i=n(0),r=n(1),o=n.n(r);t.a=o.a.View.extend({itemView:"",itemsView:"",itemType:"type",autoAdd:0,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.config=t||e.config||{},this.autoAdd&&this.listenTo(this.collection,"add",this.addTo),this.items=[],this.init()},init:function(){},addTo:function(e){this.add(e)},itemViewNotFound:function(e){var t=this.config,n=this.ns,i=t.em,r="".concat(n?"[".concat(n,"]: "):"","'").concat(e,"' type not found");i&&i.logWarning(r)},add:function(e,t){var n,r=this.config,o=this.reuseView,a=this.items,s=this.itemsView,c=void 0===s?{}:s,l=t||null,u=this.itemView,d=e.get(this.itemType);c[d]?u=c[d]:!d||c[d]||Object(i.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],d)||this.itemViewNotFound(d),n=e.view&&o?e.view:new u({model:e,config:r},r),a&&a.push(n);var p=n.render().el;l?l.appendChild(p):this.$el.append(p)},render:function(){var e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(t){this.add(t,e)}),this),this.$el.append(e),this.onRender(),this},onRender:function(){},remove:function(){this.clearItems(),o.a.View.prototype.remove.apply(this,arguments)},clearItems:function(){this.items}})},function(e,t,n){"use strict";var i,r=n(8),o=n.n(r),a=n(2),s=n.n(a),c=n(1),l=n.n(c),u=n(0);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=l.a.Collection.extend({initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opt=t,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren),this.config=t.config,this.em=t.em,this.domc=t.domc},resetChildren:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this,r=n.previousModels,o=void 0===r?[]:r;o.forEach((function(e){return t.removeChildren(e,i,n)})),e.each((function(e){return t.onAdd(e)}))},removeChildren:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.domc,o=this.em,a=r?r.allById():{};if(!i.temporary){var s=e.getId(),c=o.get("SelectorManager").getAll(),l=o.get("CssComposer").getAll();delete a[s];var u=l.remove(l.filter((function(e){return e.getSelectors().getFullString()==="#".concat(s)})));if(c.remove(u.map((function(e){return e.getSelectors().at(0)}))),!e.opt.temporary){var d=o.get("Commands"),p=e.get("style-signature"),h={target:e};p&&d.run("core:component-style-clear",h),e.removed(),o.trigger("component:remove",e)}var f=e.components();f.forEach((function(e){return n.removeChildren(e,t,i)}))}var g=e.components(),m=o.get("UndoManager");o.stopListening(g),o.stopListening(e),o.stopListening(e.get("classes")),m.remove(e),m.remove(g)},model:function(e,t){var n,i=t.collection.opt,r=i.em,o=r.get("DomComponents").componentTypes;t.em=r,t.config=i.config,t.componentTypes=o,t.domc=i.domc;for(var a=0;a<o.length;a++)if(o[a].id==e.type){n=o[a].model;break}return n||(n=o[o.length-1].model,r&&e.type&&r.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:t})),new n(e,t)},parseString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,o=this.opt.domc,a=r.get("CssComposer"),s=r.get("Parser").parseHtml(e);return i||(i=n(4).default),i.checkId(s.html,s.css,o.componentsById),s.css&&a&&!t.temporary&&a.addCollection(s.css,p({},t,{extend:1})),s.html},add:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.isString)(e)?e=this.parseString(e,n):Object(u.isArray)(e)&&e.forEach((function(i,r){Object(u.isString)(i)&&(e[r]=t.parseString(i,n))}));var i=Object(u.isArray)(e);return e=(i?e:[e]).filter((function(e){return e})).map((function(e){return t.processDef(e)})),e=i?e:e[0],l.a.Collection.prototype.add.apply(this,[e,n])},processDef:function(e){if(e.cid&&e.ccid)return e;var t=this.em,n=this.config,i=(void 0===n?{}:n).processor,r=e;if(i){var a=i(r=p({},r));a&&(Object(u.each)(r,(function(e,t){return delete r[t]})),Object(u.extend)(r,a))}if(r.$$typeof&&"object"==o()(r.props)){(r=p({},r)).props=p({},r.props);var s=t.get("DomComponents"),c=t.get("Parser").parserHtml;Object(u.each)(r,(function(e,t){Object(u.includes)(["props","type"],t)||delete r[t]}));var l=r.props,d=l.children;delete l.children,delete r.props;var h=c.splitPropsFromAttr(l);r.attributes=h.attrs,d&&(r.components=d),r.type?s.getType(r.type)||(r.tagName=r.type,delete r.type):r.type="textnode",Object(u.extend)(r,h.props)}return r},onAdd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.domc,r=this.em,o=e.getStyle(),a=r&&r.getConfig("avoidInlineStyle");if(i&&i.Component.ensureInList(e),!Object(u.isEmpty)(o)&&!a&&r&&r.get&&r.getConfig("forceClass")&&!n.temporary){var s=e.cid;r.get("CssComposer").setClassRule(s,o),e.setStyle({}),e.addClass(s)}}})},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i);r.a.$,t.default=r.a.View.extend({initialize:function(e){this.config=e||{},this.editorModel=this.em=this.config.em||{},this.pfx=this.config.stylePrefix,this.ppfx=this.config.pStylePrefix,this.hoverClass=this.pfx+"hover",this.badgeClass=this.pfx+"badge",this.plhClass=this.pfx+"placeholder",this.freezClass=this.ppfx+"freezed",this.canvas=this.em.get&&this.em.get("Canvas"),this.em.get&&this.setElement(this.getCanvas()),this.canvas&&(this.$canvas=this.$el,this.canvasTool=this.getCanvasTools()),this.init(this.config)},onFrameScroll:function(e){},getCanvas:function(){return this.canvas.getElement()},getCanvasBody:function(){return this.canvas.getBody()},getCanvasWrapper:function(){return this.canvas.getWrapperEl()},getCanvasTools:function(){return this.canvas.getToolsEl()},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},init:function(e){},callRun:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id;if(e.trigger("run:".concat(n,":before"),t),!t||!t.abort){var i=t.sender||e,r=this.run(e,i,t);return e.trigger("run:".concat(n),r,t),e.trigger("run",n,r,t),r}e.trigger("abort:".concat(n),t)},callStop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id,i=t.sender||e;e.trigger("stop:".concat(n,":before"),t);var r=this.stop(e,i,t);return e.trigger("stop:".concat(n),r,t),e.trigger("stop",n,r,t),r},stopCommand:function(){this.em.get("Commands").stop(this.id)},run:function(e,t){},stop:function(e,t){}})},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(0),a=n(3),s=n(27);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(s.a)().parseStyle;t.a={parseStyle:u,extendStyle:function(e){return l({},this.getStyle(),{},e)},getStyle:function(){return l({},this.get("style")||{})},setStyle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.isString)(t)&&(t=u(t));var i=this.getStyle(),r=l({},t);this.set("style",r,n);var s=Object(a.v)(i,r);return Object(o.keys)(s).forEach((function(t){var n=e.em;e.trigger("change:style:".concat(t)),n&&(n.trigger("styleable:change",e,t),n.trigger("styleable:change:".concat(t),e,t))})),r},addStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof e?e={prop:t}:n=t||{},e=this.extendStyle(e),this.setStyle(e,n)},removeStyle:function(e){var t=this.getStyle();delete t[e],this.setStyle(t)},styleToString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.getStyle();for(var i in n){var r=e.important,a=Object(o.isArray)(r)?r.indexOf(i)>=0:r,s="".concat(n[i]).concat(a?" !important":""),c="__"==i.substr(0,2);s&&!c&&t.push("".concat(i,":").concat(s,";"))}return t.join("")},getSelectors:function(){return this.get("selectors")||this.get("classes")},getSelectorsString:function(){return this.selectorsToString?this.selectorsToString():this.getSelectors().getFullString()}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(1),a=n.n(o),s=n(28),c=n(0),l=n(3);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=a.a.Model.extend({defaults:{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:0,important:0,toRequire:0,requires:null,requiresParent:null},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get("id")||"",i=this.get("name")||"";!this.get("property")&&this.set("property",(i||n).replace(/ /g,"-"));var r=this.get("property");!this.get("id")&&this.set("id",r),!i&&this.set("name",Object(l.c)(r).replace(/-/g," ")),p.callInit(this,e,t)},init:function(){},clearValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set({value:void 0,status:""},e),this},setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.parseValue(e),r=!t;!r&&this.set({value:""},{avoidStore:r,silent:!0}),this.set(i,d({avoidStore:r},n))},setValueFromInput:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setValue(e,t,d({},n,{fromInput:1}))},parseValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={value:e},i="!important";if(Object(c.isString)(e)&&-1!==e.indexOf(i)&&(n.value=e.replace(i,"").trim(),n.important=1),!this.get("functionName")&&!t.complete)return n;var r=[],o="".concat(n.value),a=o.indexOf("(")+1,s=o.lastIndexOf(")"),l=o.substring(0,a-1);if(l&&(n.functionName=l),r.push(a),s>=0&&r.push(s),n.value=String.prototype.substring.apply(o,r),t.numeric){var u=parseFloat(n.value);n.unit=n.value.replace(u,""),n.value=u}return n},splitValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=[],i="(",r=")",o="",a=0;return(e||"").split("").forEach((function(e){e==i?(a++,o+=i):e==r&&a>0?(a--,o+=r):e===t&&0==a?(n.push(o),o=""):o+=e})),""!==o&&n.push(o),n.map((function(e){return e.trim()}))},getDefaultValue:function(){return this.get("defaults")},getFullValue:function(e){var t=this.get("functionName"),n=this.getDefaultValue(),i=Object(c.isUndefined)(e)?this.get("value"):e,r=!Object(c.isUndefined)(i)&&""!==i;return i&&n&&i===n?n:(t&&r&&(i="".concat(t,"(").concat(i,")")),r&&this.get("important")&&(i="".concat(i," !important")),i||"")}},{callParentInit:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.prototype.initialize.apply(t,[n,d({},i,{skipInit:1})])},callInit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.skipInit&&e.init(t,n)}}),h=p;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var g=h.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h.prototype.defaults,{detached:0,properties:[],separator:" "}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.callParentInit(h,this,e,t);var i=this.get("properties")||[],r=n(23).default;this.set("properties",new r(i)),this.listenTo(this,"change:value",this.updateValues),h.callInit(this,e,t)},clearValue:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.get("properties").each((function(e){return e.clearValue()})),h.prototype.clearValue.apply(this,arguments)},updateValues:function(){var e=this.getFullValue().split(this.getSplitSeparator());this.get("properties").each((function(t,n){var i=e.length;e[n]||e[n%i+(1!=i&&i%2?1:0)]}))},getSplitSeparator:function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},getDefaultValue:function(e){var t=this.get("defaults");return t&&!e?t:(t="",this.get("properties").each((function(e,n){return t+="".concat(e.getDefaultValue()," ")})),t.trim())},getFullValue:function(){return this.get("detached")?"":this.get("properties").getFullValue()},getPropertyAt:function(e){return this.get("properties").at(e)}}),m=a.a.Model.extend({defaults:{index:"",value:"",values:{},active:!1,preview:!1,properties:[]},initialize:function(){var e=this.get("properties"),t=this.get("value");this.set("properties",e instanceof se?e:new se(e));var n=this.get("properties");if(n.forEach(this.onPropAdd,this),this.listenTo(n,"add",this.onPropAdd),!t){var i="",r=this.get("values");for(var o in r)i+=" "+r[o];this.set("value",i.trim())}},onPropAdd:function(e){var t=this.collection;e.parent=t&&t.property},getPropertyAt:function(e){return this.get("properties").at(e)},getPropertyValue:function(e){var t="";return this.get("properties").each((function(n){n.get("property")==e&&(t=n.getFullValue())})),t},getFullValue:function(){var e=[];return this.get("properties").each((function(t){return e.push(t.getFullValue())})),e.join(" ").trim()}});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=a.a.Collection.extend({model:m,initialize:function(){this.idx=1,this.on("add",this.onAdd),this.on("reset",this.onReset)},onAdd:function(e,t,n){n.noIncrement||e.set("index",this.idx++),n.active&&this.active(this.indexOf(e))},onReset:function(){this.idx=1},getSeparator:function(){var e=this.property;return e?e.get("layerSeparator"):", "},getLayersFromValue:function(e){var t=this,n=[];return e.replace(/\(([\w\s,.]*)\)/g,(function(t){var n=t.replace(/,\s*/g,",");e=e.replace(t,n)})),(e?e.split(this.getSeparator()):[]).forEach((function(e){n.push({properties:t.properties.parseValue(e)})})),n},getLayersFromStyle:function(e){var t=[],n=this.properties;return n.each((function(n){var i=e[n.get("property")];(i?i.split(", "):[]).forEach((function(e,i){e=n.parseValue(e.trim()).value;var r=t[i],o=y({},n.attributes,{},{value:e});r?r.properties.push(o):t[i]={properties:[o]}}))})),t.forEach((function(e){var t=e.properties.map((function(e){return e.property}));n.each((function(n){var i=n.get("property");t.indexOf(i)<0&&e.properties.push(y({},n.attributes))}))})),t},active:function(e){this.each((function(e){return e.set("active",0)}));var t=this.at(e);t&&t.set("active",1)},getFullValue:function(){var e=[];return this.each((function(t){return e.push(t.getFullValue())})),e.join(this.getSeparator())},getPropertyValues:function(e,t){var n=[];return this.each((function(i){var r=i.getPropertyValue(e);r?n.push(r):!Object(c.isUndefined)(t)&&n.push(t)})),n.join(", ")}});function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var x=g.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},g.prototype.defaults,{layers:[],layerSeparator:", ",prepend:0,preview:0}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.callParentInit(g,this,e,t);var n=this.get("layers"),i=new b(n);i.property=this,i.properties=this.get("properties"),this.set("layers",i),g.callInit(this,e,t)},getLayers:function(){return this.get("layers")},getCurrentLayer:function(){return this.getLayers().filter((function(e){return e.get("active")}))[0]},getFullValue:function(){return this.get("detached")?"":this.get("layers").getFullValue()},getValueFromStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getLayers().getLayersFromStyle(e);return new b(t).getFullValue()},clearValue:function(){return this.getLayers().reset(),g.prototype.clearValue.apply(this,arguments)},getValueFromTarget:function(e){var t=this.attributes,n=t.detached,i=t.property,r=t.properties,o=e.getStyle(),a={};return r.forEach((function(e){var t=e.get("property"),n=o[t];n&&(a[t]=n)})),n?Object(c.keys)(a).length?a:"":o[i]},getLayersFromTarget:function(e){}}),E=n(30),_=n.n(E);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=a.a.View.extend({template:function(e){var t=this.pfx;return'\n      <div class="'.concat(t,'label">\n        ').concat(this.templateLabel(e),'\n      </div>\n      <div class="').concat(this.ppfx,'fields">\n        ').concat(this.templateInput(e),"\n      </div>\n    ")},templateLabel:function(e){var t=this.pfx,n=this.em,i=e.parent,r=e.attributes,o=r.icon,a=void 0===o?"":o,s=r.info,c=void 0===s?"":s,l=r.id,u=r.name,d=n&&n.t("styleManager.properties.".concat(l))||u;return'\n      <span class="'.concat(t,"icon ").concat(a,'" title="').concat(c,'">\n        ').concat(d,"\n      </span>\n      ").concat(i?"":'<b class="'.concat(t,'clear" ').concat("data-clear-style",">&Cross;</b>"),"\n    ")},templateInput:function(e){return'\n      <div class="'.concat(this.ppfx,'field">\n        <input placeholder="').concat(e.getDefaultValue(),'"/>\n      </div>\n    ')},events:r()({change:"inputValueChanged"},"click [".concat("data-clear-style","]"),"clear"),initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.bindAll)(this,"targetUpdated"),this.config=t.config||{};var n=this.config.em;this.em=n,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.target=t.target||{},this.propTarget=t.propTarget||{},this.onChange=t.onChange,this.onInputRender=t.onInputRender||{},this.customValue=t.customValue||{};var i=this.model;this.property=i.get("property"),this.input=null;var r=this.pfx;this.inputHolderId="#"+r+"input-holder",this.sector=i.collection&&i.collection.sector,i.view=this,i.get("value")||i.set("value",i.getDefaultValue()),n&&n.on("update:component:style:".concat(this.property),this.targetUpdated);var o=i.get("requires");o&&Object.keys(o).forEach((function(t){n&&n.on("component:styleUpdate:".concat(t),e.targetUpdated)})),this.listenTo(this.propTarget,"update styleManager:update",this.targetUpdated),this.listenTo(i,"destroy remove",this.remove),this.listenTo(i,"change:value",this.modelValueChanged),this.listenTo(i,"targetUpdated",this.targetUpdated),this.listenTo(i,"change:visible",this.updateVisibility),this.listenTo(i,"change:status",this.updateStatus),this.listenTo(i,"change:name change:className change:full",this.render);var a=this.init&&this.init.bind(this);a&&a()},updateStatus:function(){var e=this.model,t=e.get("status"),n=e.parent,i=this.pfx,r=this.ppfx,o=this.config,a="".concat(r,"four-color"),s="".concat(r,"color-warn"),c=this.$el.children(".".concat(i,"label")),l=this.getClearEl(),u=l?l.style:{};switch(c.removeClass("".concat(a," ").concat(s)),u.display="none",t){case"updated":!n&&c.addClass(a),o.clearProperties&&(u.display="inline");break;case"computed":c.addClass(s)}},clear:function(e){var t=this;e&&e.stopPropagation(),this.model.clearValue(),setTimeout((function(){return t.targetUpdated()}))},getClearEl:function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat("data-clear-style","]"))),this.clearEl},getTarget:function(){return this.getTargetModel()},getTargets:function(){return this.propTarget.targets||[this.getTarget()]},getTargetModel:function(){return this.propTarget&&this.propTarget.model},getHelperModel:function(){return this.propTarget&&this.propTarget.helper},inputValueChanged:function(e){e&&e.stopPropagation(),this.model.setValueFromInput(this.getInputValue()),this.elementUpdated()},elementUpdated:function(){this.setStatus("updated")},setStatus:function(e){this.model.set("status",e);var t=this.model.parent;t&&"updated"==e&&t.set("status",e)},emitUpdateTarget:Object(c.debounce)((function(){var e=this.config.em;e&&e.trigger("styleManager:update:target",this.getTarget())})),_getTargetData:function(){var e=this.model,t=this.config,n=this.getTargetValue({ignoreDefault:1}),i=e.getDefaultValue(),r=this.getComputedValue(),o="",a="";return n?(o=n,t.highlightChanged&&(a="updated")):r&&t.showComputed&&r!=i?(o=r,t.highlightComputed&&(a="computed")):(o=i,a=""),{value:o,status:a,targetValue:n,defaultValue:i,computedValue:r}},targetUpdated:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.emitUpdateTarget(),this.checkVisibility()){var i=this.config,r=i.em,o=this.model,a=o.get("property"),s=this._getTargetData(),c=s.status,l=s.value,u=_()(s,["status","value"]),d=C({status:c,value:l},u);return this.setStatus(c),o.setValue(l,0,C({fromTarget:1},n)),r&&(r.trigger("styleManager:change",this,a,l,d),r.trigger("styleManager:change:".concat(a),this,l,d),this._emitUpdate(d)),d}},_emitUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.em,n=this.model;if(t){var i=n.get("property"),r=C({},this._getEventData(),{},e),o=r.id;t.trigger("style:update",r),t.trigger("style:update:".concat(i),r),i!==o&&t.trigger("style:update:".concat(o),r)}},_getEventData:function(){var e=this.model;return{propertyView:this,targets:this.getTargets(),value:e.getFullValue(),property:e,id:e.get("id"),name:e.get("property")}},checkVisibility:function(){var e=1;return this.config.hideNotStylable&&(this.isTargetStylable()&&this.isComponentStylable()?this.show():(this.hide(),e=0),this.sector&&this.sector.trigger("updateVisibility")),e},getTargetValue:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.model,i=this.getTargetModel(),r=this.customValue;if(!i)return e;if((e=i.getStyle()[n.get("property")])||t.ignoreDefault||(e=n.getDefaultValue()),"function"==typeof r&&!t.ignoreCustomValue){var o=n.collection.indexOf(n),a=r(this,o,e);a&&(e=a)}return e},getComputedValue:function(){var e=this.propTarget,t=e.computed||{},n=e.computedDefault||{},i=this.config.avoidComputed||[],r=this.model.get("property"),o=i.indexOf(r)<0,a=t[r],s=n[Object(l.b)(r)];return t&&o&&s!==a&&a||""},getInputValue:function(){var e=this.getInputEl();return e?e.value:""},modelValueChanged:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.model,o=r.getFullValue();i.fromInput||this.setValue(o),i.fromTarget||this.getTargets().forEach((function(e){return n.__updateTarget(e,i)}))},__updateTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,i=this.config.em,r=n.get("property"),o=n.getFullValue(),a=this.onChange;if(e&&this.isTargetStylable(e)&&this.isComponentStylable()){t.fromTarget||(a&&!t.fromParent?a(e,this,t):this.updateTargetStyle(o,null,C({},t,{target:e})));var s=i&&i.getSelected();i&&s&&(!t.noEmit&&i.trigger("component:update",s),i.trigger("component:styleUpdate",s,r),i.trigger("component:styleUpdate:".concat(r),s)),this._emitUpdate()}},updateTargetStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t||this.model.get("property"),r=n.target||this.getTarget(),o=r.getStyle();e?o[i]=e:delete o[i],n.avoidStore?o.__=1:delete o.__,r.setStyle(o,n);var a=this.getHelperModel();a&&a.setStyle(o,n)},isTargetStylable:function(e){var t=e||this.getTarget(),n=this.model,i=n.get("id"),r=n.get("property"),o=n.get("toRequire"),a=t.get("unstylable"),s=t.get("stylable-require"),l=n.get("requires"),u=n.get("requiresParent"),d=this.sector?this.sector.collection:null,p=this.em?this.em.getSelected():null,h=t.get("stylable");if(Object(c.isArray)(h)&&(h=h.indexOf(r)>=0),Object(c.isArray)(a)&&(h=a.indexOf(r)<0),o&&(h=!e||s&&(s.indexOf(i)>=0||s.indexOf(r)>=0)),d&&l){var f=Object.keys(l);d.each((function(e){e.get("properties").each((function(e){if(Object(c.includes)(f,e.id)){var t=l[e.id];h=h&&Object(c.includes)(t,e.get("value"))}}))}))}if(u){var g=p&&p.parent(),m=g&&g.getEl();if(m){var v=window.getComputedStyle(m);Object(c.each)(u,(function(e,t){h=h&&v[t]&&Object(c.includes)(e,v[t])}))}else h=!1}return h},isComponentStylable:function(){var e=this.em,t=e&&e.getSelected();return!t||this.isTargetStylable(t)},setRawValue:function(e){this.setValue(this.model.parseValue(e))},setValue:function(e){var t=this.model,n=Object(c.isUndefined)(e)?t.getDefaultValue():e,i=this.getInputEl();i&&(i.value=n)},getInputEl:function(){return this.input||(this.input=this.el.querySelector("input")),this.input},updateVisibility:function(){this.el.style.display=this.model.get("visible")?"block":"none"},show:function(){this.model.set("visible",1)},hide:function(){this.model.set("visible",0)},cleanValue:function(){this.setValue("")},clearCached:function(){this.clearEl=null,this.input=null,this.$input=null},render:function(){this.clearCached();var e=this.pfx,t=this.model,n=this.el,i=t.get("property"),r=t.get("full"),o=t.get("className")||"",a="".concat(e,"property");n.innerHTML=this.template(t),n.className="".concat(a," ").concat(e).concat(t.get("type")," ").concat(a,"__").concat(i," ").concat(o).trim(),n.className+=r?" ".concat(a,"--full"):"",this.updateStatus();var s=this.onRender&&this.onRender.bind(this);s&&s(),this.setValue(t.get("value"),{fromTarget:1})}});function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=a.a.$,j=O.extend({templateInput:function(){var e=this.pfx;return'\n      <div class="'.concat(e,"field ").concat(e,'composite">\n        <span id="').concat(e,'input-holder"></span>\n      </div>\n    ')},inputValueChanged:function(){if(!this.model.get("detached")){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.prototype.inputValueChanged.apply(this,t)}},clear:function(e){var t=this.properties;t&&t.forEach((function(e){return e.clear()})),O.prototype.clear.apply(this,arguments)},onRender:function(){var e=this.model,t=e.get("properties")||[];if(this.properties=[],t.length&&(this.$input||(this.$input=P('<input type="hidden" value="0">'),this.input=this.$input.get(0)),this.props||(this.props=e.get("properties")),!this.$props)){this.props.each((function(t,n){t&&"composite"==t.get("type")&&(this.props.remove(t),console.warn("Nested composite types not yet allowed.")),t.parent=e}),this);var i=new(0,n(18).default)(this.getPropsConfig());this.$props=i.render().$el,this.properties=i.properties,this.$el.find("#".concat(this.pfx,"input-holder")).append(this.$props)}},getPropsConfig:function(e){var t=this,n=this.model,i={config:T({},this.config,{highlightComputed:0}),collection:this.props,target:this.target,propTarget:this.propTarget,onChange:function(e,t,i){n.set("value",n.getFullValue(),i)},customValue:function(e,n){return t.valueOnIndex(n,e)}};return n.get("detached")&&delete i.onChange,i},valueOnIndex:function(e,t){var n=this.getTargetValue({ignoreDefault:1});return n?n.split(this.model.getSplitSeparator())[e]:t&&t.getTargetValue({ignoreCustomValue:1,ignoreDefault:1})},clearCached:function(){O.prototype.clearCached.apply(this,arguments),this.$input=null,this.props=null,this.$props=null}}),A=n(18),M=a.a.View.extend({events:{click:"active","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"},template:function(e){var t=this.pfx,n=this.ppfx,i=this.em,r="".concat(i&&i.t("styleManager.layer")," ").concat(e.get("index"));return'\n      <div id="'.concat(t,'move" class="').concat(n,'no-touch-actions" data-move-layer>\n        <i class="fa fa-arrows"></i>\n      </div>\n      <div id="').concat(t,'label">').concat(r,'</div>\n      <div id="').concat(t,'preview-box">\n      \t<div id="').concat(t,'preview" data-preview></div>\n      </div>\n      <div id="').concat(t,'close-layer" class="').concat(t,'btn-close" data-close-layer>\n        &Cross;\n      </div>\n      <div id="').concat(t,'inputs" data-properties></div>\n      <div style="clear:both"></div>\n    ')},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;this.stackModel=e.stackModel,this.config=e.config||{},this.em=this.config.em,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.sorter=e.sorter||null,this.propsConfig=e.propsConfig||{},this.customPreview=e.onPreview,this.listenTo(t,"destroy remove",this.remove),this.listenTo(t,"change:active",this.updateVisibility),this.listenTo(t.get("properties"),"change",this.updatePreview),t.view=this,t.set({droppable:0,draggable:1}),this.$el.data("model",t)},initSorter:function(e){this.sorter&&this.sorter.startSort(this.el)},removeItem:function(e){e&&e.stopPropagation(),this.remove()},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.props,i=t.collection,r=this.stackModel;a.a.View.prototype.remove.apply(this,arguments),i&&i.contains(t)&&i.remove(t),r&&r.set&&(r.set({stackIndex:null},{silent:!0}),!e.fromTarget&&r.trigger("updateValue")),n&&n.remove()},onPreview:function(e){var t=this.stackModel,n=t&&t.get("detached"),i=e.split(" "),r=[],o={};return this.model.get("properties").each((function(e,t){var a=e.get("property"),s=n?e.getFullValue():i[t]||"";if(s&&"integer"==e.get("type")){var c=parseInt(s,10),l=s.replace(c,"");s=(c=(c=(c=isNaN(c)?0:c)>3?3:c)<-3?-3:c)+l}r.push(s),o[a]=s})),n?o:r.join(" ")},updatePreview:function(){var e=this.stackModel,t=this.customPreview,n=this.getPreviewEl(),i=this.model.getFullValue(),r=t?t(i):this.onPreview(i);if(r&&e&&n){var o=n.style;if(Object(c.isString)(r))o[e.get("property")]=r;else{var a=[];Object(c.each)(r,(function(e,t){return a.push("".concat(t,":").concat(e))})),n.setAttribute("style",a.join(";"))}}},getPropertiesWrapper:function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},getPreviewEl:function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},active:function(){var e=this.model,t=e.collection;t.active(t.indexOf(e))},updateVisibility:function(){var e=this.pfx,t=this.getPropertiesWrapper(),n=this.model.get("active");t.style.display=n?"":"none",this.$el[n?"addClass":"removeClass"]("".concat(e,"active"))},render:function(){var e=this.propsConfig,t=this.model,n=this.el,i=this.pfx,r=t.get("preview"),o=new A.default({collection:t.get("properties"),config:this.config,target:e.target,customValue:e.customValue,propTarget:e.propTarget,onChange:e.onChange}),a=o.render().el;return n.innerHTML=this.template(t),n.className="".concat(i,"layer").concat(r?"":" ".concat(i,"no-preview")),this.props=o,this.getPropertiesWrapper().appendChild(a),this.updateVisibility(),this.updatePreview(),this}}),D=a.a.View.extend({initialize:function(e){this.config=e.config||{},this.stackModel=e.stackModel,this.preview=e.preview,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.propsConfig=e.propsConfig;var t=this.pfx,n=this.ppfx,i=this.collection;this.className="".concat(t,"layers ").concat(n,"field"),this.listenTo(i,"add",this.addTo),this.listenTo(i,"deselectAll",this.deselectAll),this.listenTo(i,"reset",this.reset),this.items=[];var r=this.config.em||"",o=r?r.get("Utils"):"";this.sorter=o?new o.Sorter({container:this.el,ignoreViewChildren:1,containerSel:".".concat(t,"layers"),itemSel:".".concat(t,"layer"),pfx:this.config.pStylePrefix}):"",i.view=this,this.$el.data("model",i),this.$el.data("collection",i)},addTo:function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},addToCollection:function(e,t,n){var i=t||null,r=this.stackModel,o=this.config,a=this.sorter,s=this.propsConfig;void 0!==this.preview&&e.set("preview",this.preview);var c=new M({model:e,config:o,sorter:a,stackModel:r,propsConfig:s}),l=c.render().el;if(this.items.push(c),i)i.appendChild(l);else if(void 0!==n){var u="before";this.$el.children().length==n&&(n--,u="after"),n<0?this.$el.append(l):this.$el.children().eq(n)[u](l)}else this.$el.append(l);return l},deselectAll:function(){this.$el.find("."+this.pfx+"layer").removeClass(this.pfx+"active")},reset:function(e,t){this.clearItems(t),this.render()},render:function(){var e=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){this.addToCollection(t,e)}),this),this.$el.append(e),this.$el.attr("class",this.className),this.sorter&&(this.sorter.plh=null),this},remove:function(){this.clearItems(),a.a.View.prototype.remove.apply(this,arguments)},clearItems:function(e){this.items.forEach((function(t){return t.remove(e)})),this.items=[]}});function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var N=new(n(29).a),L=j.extend({templateInput:function(){var e=this.pfx;return this.ppfx,'\n      <div class="'.concat(e,"field ").concat(e,'stack">\n        <button type="button" id="').concat(e,'add" data-add-layer>+</button>\n        <div data-layers-wrapper></div>\n      </div>\n    ')},init:function(){var e=this.model;this.pfx,e.set("stackIndex",null),this.events["click [data-add-layer]"]="addLayer",this.listenTo(e,"change:stackIndex",this.indexChanged),this.listenTo(e,"updateValue",this.inputValueChanged),this.delegateEvents();var t=this.getPropsConfig();this.layers=new D({collection:this.getLayers(),stackModel:e,preview:e.get("preview"),config:this.config,propsConfig:t});var i=n(18).default;this.propsView=new i({target:this.target,collection:e.get("properties"),stackModel:e,config:this.config,onChange:t.onChange,propTarget:t.propTarget})},targetUpdated:function(){var e,t=this;if(this.model.get("detached"))e=this._getTargetData(),this.setStatus(e.status),this.checkVisibility();else{for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e=j.prototype.targetUpdated.apply(this,i)}setTimeout((function(){return t.refreshLayers(e)}))},getLayers:function(){return this.model.get("layers")},indexChanged:function(e){var t=this.model;this.getLayers().active(t.get("stackIndex"))},addLayer:function(){var e=this.model,t=this.getLayers(),n=e.get("prepend"),i=e.get("properties").deepClone();i.each((function(e){return e.set("value","")}));var o=t.add({properties:i},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({active:1},n&&{at:0}));this.inputValueChanged({up:1}),e.set("stackIndex",t.indexOf(o))},inputValueChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;e.up&&this.elementUpdated(),t.get("detached")?t.get("properties").each((function(e){return e.trigger("change:value")})):t.set("value",this.getLayerValues())},setValue:function(){},getLayerValues:function(){return this.getLayers().getFullValue()},_getClassRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.em,n=e.skipAdd,i=void 0===n?1:n,r=t.getSelected(),o=t.get("StyleManager").getModelToStyle(r,{skipAdd:i,useClasses:1});return o!==r&&o},_getParentTarget:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.em,r=this.model,o=r.get("property"),a=n.isValid||function(e){return e.getStyle()[o]},s=i.get("CssComposer").getAll().filter((function(t){return t.selectorsToString()===e.getSelectorsString()})),c=s.reduce((function(e,t){return e[t.getAtRule()]=t,e}),{}),l=N.sortMediaObject(c),u=l.map((function(e){return e.value})),d=u.indexOf(e),p=u.splice(0,d),h=p.length-1;h>-1;h--){var f=p[h];if(a(f)){t=f;break}}return t},refreshLayers:function(){var e,t,n,i,r,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=[],l=this.model,u=this.em,d=this.getLayers(),p=l.get("detached"),h=l.get("property"),f=this.getTarget(),g=this.getComputedValue(),m=u.getSelected(),v={fromTarget:1};if(p){t=a.targetValue||{};var y=function(e){var t=l.get("properties").at(0).get("property");return e&&!Object(c.isUndefined)(e.getStyle()[t])};if(!Object(c.keys)(t).length&&g&&m){var b={isValid:function(e){return y(e)}};(i=this._getParentTarget(f,b))?t=i.getStyle():(n=this._getClassRule(),i=!(r=y(n)&&n.getStyle())&&this._getParentTarget(this._getClassRule({skipAdd:0}),b),o=y(i)&&i.getStyle(),t=r||o||{})}e=t,s=d.getLayersFromStyle(t)}else{var w=this.getTargetValue({ignoreDefault:1}),x=w;!x&&g&&((i=this._getParentTarget(f))?x=i.getStyle()[h]:(o=(i=!(r=(n=this._getClassRule())&&n.getStyle()[h])&&this._getParentTarget(this._getClassRule({skipAdd:0})))&&i.getStyle()[h],x=r||o||g)),e=x=x==l.getDefaultValue()?"":x,s=d.getLayersFromValue(x)}var E=l.getLayersFromTarget(f,{resultValue:e,layersObj:s})||s;d.reset(null,v),d.add(E,v),l.set({stackIndex:null},{silent:!0})},getTargetValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=t.attributes.detached,i=this.getTarget(),r=j.prototype.getTargetValue.call(this,e);return Object(c.isUndefined)(r)&&!n?r=t.getValueFromStyle(i.getStyle()):n&&(r=t.getValueFromTarget(i)),r},getPropsConfig:function(){var e=this,t=e.model;return{target:e.target,propTarget:e.propTarget,onChange:function(n,i,r){var o=i.model;if(t.get("detached")){var a=o.get("property"),s=o.getDefaultValue(),c=e.getLayers().getPropertyValues(a,s);i.updateTargetStyle(c,null,r)}else if("updated"==t.get("status")){var l=t.getFullValue();t.set("value",l,r),!l&&i.updateTargetStyle(l,null,r)}}}},onRender:function(){var e=this.el,t=this.layers,n=this.propsView,i=e.querySelector("[data-layers-wrapper]");n.render(),i.appendChild(t.render().el)}}),B=a.a.$,I=O.extend({templateInput:function(){var e=this.pfx,t=this.em;return'\n    <div class="'.concat(e,"field ").concat(e,"file\">\n      <div id='").concat(e,"input-holder'>\n        <div class=\"").concat(e,'btn-c">\n          <button class="').concat(e,'btn" id="').concat(e,'images" type="button">\n            ').concat(t.t("styleManager.fileButton"),'\n          </button>\n        </div>\n        <div style="clear:both;"></div>\n      </div>\n      <div id="').concat(e,'preview-box">\n        <div id="').concat(e,'preview-file"></div>\n        <div id="').concat(e,'close">&Cross;</div>\n      </div>\n    </div>\n    ')},init:function(){var e=this.em;this.modal=e.get("Modal"),this.am=e.get("AssetManager"),this.events["click #"+this.pfx+"close"]="removeFile",this.events["click #"+this.pfx+"images"]="openAssetManager",this.delegateEvents()},onRender:function(){if(!this.$input){var e=this.model.getDefaultValue();this.$input=B('<input placeholder="'.concat(e,'">'))}this.$preview||(this.$preview=this.$el.find("#"+this.pfx+"preview-file")),this.$previewBox||(this.$previewBox=this.$el.find("#"+this.pfx+"preview-box")),this.setValue(this.componentValue,0)},clearCached:function(){O.prototype.clearCached.apply(this,arguments),this.$preview=null,this.$previewBox=null},setValue:function(e,t){O.prototype.setValue.apply(this,arguments),this.setPreviewView(e&&e!=this.model.getDefaultValue()),this.setPreview(e)},setPreviewView:function(e){var t=this.$previewBox;t&&t[e?"addClass":"removeClass"]("".concat(this.pfx,"show")),t&&t.css({display:e?"block":"none"})},spreadUrl:function(e){this.model.set("value",e),this.setPreviewView(1)},setPreview:function(e){var t=this.$preview;e=e&&e.indexOf("url(")<0?"url(".concat(e,")"):e,t&&t.css("background-image",e)},cleanValue:function(){this.setPreviewView(0),this.model.set({value:""},{silent:!0})},removeFile:function(){this.model.set("value",this.model.getDefaultValue());for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.prototype.cleanValue.apply(this,t),this.setPreviewView(0)},openAssetManager:function(e){var t=this,n=this.em,i=this.modal,r=n?n.get("Editor"):"";r&&r.runCommand("open-assets",{types:["image"],accept:"image/*",target:this.getTargetModel(),onClick:function(){},onDblClick:function(){},onSelect:function(e){i.close();var n=Object(c.isString)(e)?e:e.get("src");t.spreadUrl(n)}})}}),F=a.a.$,z=O.extend({templateInput:function(){return""},init:function(){var e=this.model;this.listenTo(e,"change:unit",this.modelValueChanged),this.listenTo(e,"el:change",this.elementUpdated),this.listenTo(e,"change:units",this.render)},setValue:function(e){var t=this.model.parseValue(e);e="".concat(t.value).concat(t.unit),this.inputInst.setValue(e,{silent:1})},onRender:function(){var e=this.ppfx;if(!this.input){var t=this.model.input;t.ppfx=e,t.render(),this.el.querySelector(".".concat(e,"fields")).appendChild(t.el),this.$input=t.inputEl,this.unit=t.unitEl,this.$unit=F(this.unit),this.input=this.$input.get(0),this.inputInst=t}},clearCached:function(){O.prototype.clearCached.apply(this,arguments),this.unit=null,this.$unit=null}}),H=n(37);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=z.extend({setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=$({},t,{silent:1}),this.inputInst.setValue(e,t)},onRender:function(){if(!this.input){var e=this.ppfx,t=new H.a({target:this.target,model:this.model,ppfx:e}).render();this.el.querySelector(".".concat(e,"fields")).appendChild(t.el),this.$input=t.inputEl,this.$color=t.colorEl,this.input=this.$input.get(0),this.inputInst=t}}}),W=n(6),q=n.n(W);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Y=h.extend({defaults:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h.prototype.defaults,{options:[],full:1})},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.onOptionChange)},onOptionChange:function(){this.set("list",this.get("options"))},getOptions:function(){var e=this.attributes,t=e.options,n=e.list;return t&&t.length?t:n},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.set("options",e),this},addOption:function(e){if(e){var t=this.getOptions();this.setOptions([].concat(q()(t),[e]))}return this}});function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var X=Y.extend({defaults:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y.prototype.defaults(),{full:0})}}),Z=(a.a.$,O.extend({templateInput:function(){var e=this.pfx,t=this.ppfx;return'\n      <div class="'.concat(t,"field ").concat(t,'select">\n        <span id="').concat(e,'input-holder"></span>\n        <div class="').concat(t,'sel-arrow">\n          <div class="').concat(t,'d-s-arrow"></div>\n        </div>\n      </div>\n    ')},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.prototype.initialize.apply(this,t),this.listenTo(this.model,"change:options",this.updateOptions)},updateOptions:function(){this.input=null,this.onRender()},onRender:function(){var e=this.pfx,t=this.model.getOptions();if(!this.input){var n="";t.forEach((function(e){var t=e.name||e.value,i=e.style?e.style.replace(/"/g,"&quot;"):"",r=i?'style="'.concat(i,'"'):"",o=e.value.replace(/"/g,"&quot;");n+='<option value="'.concat(o,'" ').concat(r,">").concat(t,"</option>")}));var i=this.el.querySelector("#".concat(e,"input-holder"));i.innerHTML="<select>".concat(n,"</select>"),this.input=i.firstChild}}})),J=O.extend({templateInput:function(){this.pfx;var e=this.ppfx;return'\n      <div class="'.concat(e,"field ").concat(e,'field-radio">\n      </div>\n    ')},onRender:function(){var e=this.pfx,t=this.ppfx,n="".concat(t,"radio-item-label"),i=this.model,r=i.get("property"),o=i.get("list")||i.get("options")||[],a=i.cid,s="".concat(e,"radio ").concat(e,"radio-").concat(r);if(!this.input&&o&&o.length){var c="";o.forEach((function(i){var o=i.className?"".concat(i.className," ").concat(e,"icon ").concat(n):"",l="".concat(r,"-").concat(i.value,"-").concat(a),u=i.name||i.value,d=i.title?'title="'.concat(i.title,'"'):"";c+='\n            <div class="'.concat(t,'radio-item">\n              <input type="radio" class="').concat(s,'" id="').concat(l,'" name="').concat(r,"-").concat(a,'" value="').concat(i.value,'"/>\n              <label class="').concat(o||n,'" ').concat(d,' for="').concat(l,'">').concat(o?"":u,"</label>\n            </div>\n          ")}));var l=this.el.querySelector(".".concat(t,"field"));l.innerHTML='<div class="'.concat(t,'radio-items">').concat(c,"</div>"),this.input=l.firstChild}},getInputValue:function(){var e=this.getCheckedEl();return e?e.value:""},getCheckedEl:function(){var e=this.getInputEl();return e?e.querySelector("input:checked"):""},setValue:function(e){var t=this.model,n=e||t.get("value")||t.getDefaultValue(),i=this.getInputEl(),r=i?i.querySelector('[value="'.concat(n,'"]')):"";if(r)r.checked=!0;else{var o=this.getCheckedEl();o&&(o.checked=!1)}}}),Q=n(31);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var te=h.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h.prototype.defaults,{units:[],unit:"",step:1,min:"",max:""}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.callParentInit(h,this,e,t);var n=this.get("unit"),i=this.get("units");this.input=new Q.a({model:this}),i.length&&!n&&this.set("unit",i[0]),h.callInit(this,e,t)},clearValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set({value:void 0,unit:void 0},e),this},parseValue:function(e){var t=h.prototype.parseValue.apply(this,arguments),n=this.input.validateInputValue(t.value,{deepCheck:1}),i=n.value,r=n.unit;return t.value=i,t.unit=r,t},getFullValue:function(){var e=this.get("value"),t=this.get("unit");return e=Object(c.isUndefined)(e)?"":e,t=!Object(c.isUndefined)(t)&&e?t:"",e="".concat(e).concat(t),h.prototype.getFullValue.apply(this,[e])}});function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ie=te.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},te.prototype.defaults,{showInput:1})});function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var oe=z.extend({events:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},z.prototype.events,{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},templateInput:function(e){var t=this.ppfx;return'\n      <div class="'.concat(t,"field ").concat(t,'field-range">\n        <input type="range"\n          min="').concat(e.get("min"),'"\n          max="').concat(e.get("max"),'"\n          step="').concat(e.get("step"),'"/>\n      </div>\n    ')},getSliderEl:function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},inputValueChanged:function(){var e=this.model,t=e.get("step");this.getInputEl().value=this.getSliderEl().value;var n=this.getInputValue()-t;e.set("value",n,{avoidStore:1}).set("value",n+t),this.elementUpdated()},inputValueChangedSoft:function(){this.getInputEl().value=this.getSliderEl().value,this.model.set("value",this.getInputValue(),{avoidStore:1}),this.elementUpdated()},setValue:function(e){var t=this.model.parseValue(e);this.getSliderEl().value=parseFloat(t.value),z.prototype.setValue.apply(this,arguments)},onRender:function(){z.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},clearCached:function(){z.prototype.clearCached.apply(this,arguments),this.slider=null}});function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var se=t.default=a.a.Collection.extend(s.a).extend({types:[{id:"stack",model:x,view:L,isType:function(e){if(e&&"stack"==e.type)return e}},{id:"composite",model:g,view:j,isType:function(e){if(e&&"composite"==e.type)return e}},{id:"file",model:h,view:I,isType:function(e){if(e&&"file"==e.type)return e}},{id:"color",model:h,view:U,isType:function(e){if(e&&"color"==e.type)return e}},{id:"select",model:X,view:Z,isType:function(e){if(e&&"select"==e.type)return e}},{id:"radio",model:Y,view:J,isType:function(e){if(e&&"radio"==e.type)return e}},{id:"slider",model:ie,view:oe,isType:function(e){if(e&&"slider"==e.type)return e}},{id:"integer",model:te,view:z,isType:function(e){if(e&&"integer"==e.type)return e}},{id:"base",model:h,view:O,isType:function(e){return e.type="base",e}}],deepClone:function(){var e=this.clone();return e.reset(e.map((function(e){var t=e.clone();return t.typeView=e.typeView,t}))),e},parseValue:function(e){var t=this,n=[];return e.split(" ").forEach((function(e,i){var o=t.at(i);o&&n.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.attributes,{},{value:e}))})),n},getFullValue:function(){var e="";return this.each((function(t){return e+="".concat(t.getFullValue()," ")})),e.trim()}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i).a.$;t.default={startSelectPosition:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isPointed=!1;var r=this.editorModel.get("Utils"),o=e.ownerDocument.body;r&&!this.sorter&&(this.sorter=new r.Sorter({container:o,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:t,wmargin:1,nested:1,em:this.editorModel,canvasRelative:1,scale:function(){return n.em.getZoomDecimal()}})),i.onStart&&(this.sorter.onStart=i.onStart),e&&this.sorter.startSort(e,{container:o})},getOffsetDim:function(){var e=this.offset(this.canvas.getFrameEl()),t=this.offset(this.canvas.getElement());return{top:e.top-t.top,left:e.left-t.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex="after"==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&"after"==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?r(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?r(this.cDim[this.posIndex][5]).parent():r(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(e,t,n){var i=e||0,r=t||"before",o=n.length,a=0!==o&&"after"==r&&i==o;return 0!==o&&(!a&&!n[i][4]||n[i-1]&&!n[i-1][4]||a&&!n[i-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},function(e,t,n){"use strict";var i=n(39);window.Promise=window.Promise||i.a,t.a="function"==typeof fetch?fetch.bind():function(e,t){return new i.a((function(n,r){var o=new XMLHttpRequest;for(var a in o.open(t.method||"get",e),o.withCredentials="include"==t.credentials,t.headers||{})o.setRequestHeader(a,t.headers[a]);o.onload=function(e){return n({status:o.status,statusText:o.statusText,text:function(){return i.a.resolve(o.responseText)}})},o.onerror=r,o.upload&&t.onProgress&&(o.upload.onprogress=t.onProgress),t.body?o.send(t.body):o.send()}))}},function(e,t,n){"use strict";var i=n(8),r=n.n(i),o=n(0);t.a=function(e){var t=e;return{compTypes:"",modelAttrStart:"data-gjs-",splitPropsFromAttr:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},i={};return Object(o.each)(t,(function(t,r){if(0===r.indexOf(e.modelAttrStart)){var a=r.replace("data-gjs-",""),s=t.length,c=t&&Object(o.isString)(t),l=c&&t.substr(0,1),u=c&&t.substr(s-1);t="false"!==(t="true"===t||t)&&t;try{t="{"==l&&"}"==u||"["==l&&"]"==u?JSON.parse(t):t}catch(e){}n[a]=t}else i[r]=t})),{props:n,attrs:i}},parseStyle:function(e){for(var t={},n=e.split(";"),i=0,r=n.length;i<r;i++){var o=n[i].trim();if(o){var a=o.split(":");t[a[0].trim()]=a.slice(1).join(":").trim()}}return t},parseClass:function(e){for(var t=[],n=e.split(" "),i=0,r=n.length;i<r;i++){var o=n[i].trim();o&&t.push(o)}return t},parseNode:function(n){for(var i=[],o=n.childNodes,a=0,s=o.length;a<s;a++){var c=o[a],l=c.attributes||[],u=l.length,d=i[i.length-1],p=c.childNodes.length,h=this.compTypes,f={};if(h){var g="",m=c.getAttribute&&c.getAttribute("".concat("data-gjs-","type"));if(m)f={type:m};else{for(var v=0;v<h.length;v++){var y=h[v];if(g=y.model.isComponent(c)){"object"!==r()(g)&&(g={type:y.id});break}}f=g}}f.tagName||(f.tagName=c.tagName?c.tagName.toLowerCase():""),u&&(f.attributes={});for(var b=0;b<u;b++){var w=l[b].nodeName,x=l[b].nodeValue;if("style"==w)f.style=this.parseStyle(x);else if("class"==w)f.classes=this.parseClass(x);else{if("contenteditable"==w)continue;if(0===w.indexOf("data-gjs-")){var E=w.replace("data-gjs-",""),_=x.length,S=x&&x.substr(0,1),C=x&&x.substr(_-1);x="false"!==(x="true"===x||x)&&x;try{x="{"==S&&"}"==C||"["==S&&"]"==C?JSON.parse(x):x}catch(e){}f[E]=x}else f.attributes[w]=x}}if(p&&!f.components){var O=c.childNodes[0];1===p&&3===O.nodeType?(!f.type&&(f.type="text"),f.content=O.nodeValue):f.components=this.parseNode(c)}if("textnode"==f.type){if(d&&"textnode"==d.type){d.content+=f.content;continue}if(!e.keepEmptyTextNodes){var k=c.nodeValue;if(" "!=k&&!k.trim())continue}}var T=f.components;if(!f.type&&T){for(var P=1,j=0,A=0;A<T.length;A++){var M=T[A],D=M.type;if(["text","textnode"].indexOf(D)<0&&t.textTags.indexOf(M.tagName)<0){P=0;break}"textnode"==D&&(j=1)}P&&j&&(f.type="text")}(f.tagName||"textnode"==f.type)&&i.push(f)}return i},parse:function(e,n){var i=t.em&&t.em.get("Config")||{},r={html:"",css:""},o=document.createElement("div");o.innerHTML=e;var a=o.querySelectorAll("script"),s=a.length;if(!i.allowScripts)for(;s--;)a[s].parentNode.removeChild(a[s]);if(n){for(var c="",l=o.querySelectorAll("style"),u=l.length;u--;)c=l[u].innerHTML+c,l[u].parentNode.removeChild(l[u]);c&&(r.css=n.parse(c))}var d=this.parseNode(o);return 1==d.length&&(d=d[0]),r.html=d,r}}}},function(e,t,n){"use strict";var i=n(0),r=n(1),o=n.n(r),a=o.a.Model,s=o.a.View;t.a={types:[],initialize:function(e,t){var n=this;this.model=function(){var e,t,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r&&r.type){var a=n.getBaseType();e=(i=n.getType(r.type))?i.model:a.model,t=i?i.view:a.view}else{var s=n.recognizeType(r);e=(i=s.type).model,t=i.view,r=s.attributes}var c=new e(r,o);return c.typeView=t,c};var i=this.init&&this.init.bind(this);i&&i()},recognizeType:function(e){for(var t=this.getTypes(),n=0;n<t.length;n++){var i=t[n],r=i.isType(e);if(r="boolean"==typeof r&&r?{type:i.id}:r)return{type:i,attributes:r}}return{type:this.getBaseType(),attributes:e}},getBaseType:function(){var e=this.getTypes();return e[e.length-1]},getTypes:function(){return this.types},getType:function(e){for(var t=this.getTypes(),n=0;n<t.length;n++){var i=t[n];if(i.id===e)return i}},addType:function(e,t){var n=this.getType(e),r=this.getBaseType(),o=n?n.model:r.model,c=n?n.view:r.view,l=t.model,u=t.view,d=t.isType;l=l instanceof a||Object(i.isFunction)(l)?l:o.extend(l||{}),u=u instanceof s||Object(i.isFunction)(u)?u:c.extend(u||{}),n?(n.model=l,n.view=u,n.isType=d||n.isType):(t.id=e,t.model=l,t.view=u,t.isType=d||function(t){if(t&&t.type==e)return!0},this.getTypes().unshift(t))}}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(0),a=Number.MAX_VALUE;t.a=r.a.Model.extend({initialize:function(){this.compCls=[],this.ids=[]},buildFromModel:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="",r=this.em,o=r&&r.getConfig("avoidInlineStyle"),a=e.styleToString(),s=e.get("classes"),c=n.wrapperIsBody,l=e.get("wrapper");if(this.ids.push("#".concat(e.getId())),s.each((function(e){return t.compCls.push(e.getFullName())})),!o&&a){var u="#".concat(e.getId());i="".concat(u=c&&l?"body":u,"{").concat(a,"}")}var d=e.components();return d.each((function(e){return i+=t.buildFromModel(e,n)})),i},build:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.cssc,r=n.em||"";this.em=r,this.compCls=[],this.ids=[];var a=this.buildFromModel(e,n),s=Object(o.isUndefined)(n.clearStyles)&&r?r.getConfig("clearStyles"):n.clearStyles;if(i){var c=i.getAll(),l={},u=[];c.each((function(e){var i=e.getAtRule();if(i){var r=l[i];r?r.push(e):l[i]=[e]}else a+=t.buildFromRule(e,u,n)})),this.sortMediaObject(l).forEach((function(e){var i="",r=e.key;e.value.forEach((function(e){var o=t.buildFromRule(e,u,n);e.get("singleAtRule")?a+="".concat(r,"{").concat(o,"}"):i+=o})),i&&(a+="".concat(r,"{").concat(i,"}"))})),r&&s&&c.remove(u)}return a},buildFromRule:function(e,t){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="",a=e.selectorsToString({skipAdd:1}),s=e.get("selectorsAdd"),c=e.get("singleAtRule");if(e.get("selectors").each((function(e){var t=e.getFullName();(i.compCls.indexOf(t)>=0||i.ids.indexOf(t)>=0||r.keepUnusedStyles)&&(n=1)})),a&&n||s||c){var l=e.getDeclaration();l&&(o+=l)}else t.push(e);return o},getQueryLength:function(e){var t=/(-?\d*\.?\d+)\w{0,}/.exec(e);return t?parseFloat(t[1]):a},sortMediaObject:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];return Object(o.each)(t,(function(e,t){return n.push({key:t,value:e})})),n.sort((function(t,n){var i=[t.key,n.key].every((function(e){return-1!==e.indexOf("min-width")})),r=i?t.key:n.key,o=i?n.key:t.key;return e.getQueryLength(r)-e.getQueryLength(o)}))}})},function(e,t,n){var i=n(79);e.exports=function(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(0),a=n(3),s=n(17);r.a.$,t.a=s.a.extend({events:{"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement"},template:function(){var e=this.ppfx;return'\n      <span class="'.concat(e,'input-holder"></span>\n      <span class="').concat(e,'field-units"></span>\n      <div class="').concat(e,'field-arrows" data-arrows>\n        <div class="').concat(e,'field-arrow-u" data-arrow-up></div>\n        <div class="').concat(e,'field-arrow-d" data-arrow-down></div>\n      </div>\n    ')},inputClass:function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},initialize:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],s.a.prototype.initialize.apply(this,arguments),Object(o.bindAll)(this,"moveIncrement","upIncrement"),this.doc=document,this.listenTo(this.model,"change:unit",this.handleModelChange)},setValue:function(e,t){var n=t||{},i=this.validateInputValue(e,{deepCheck:1}),r={value:i.value};(i.unit||i.force)&&(r.unit=i.unit),this.model.set(r,n),n.silent&&this.handleModelChange()},handleChange:function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},handleUnitChange:function(e){e.stopPropagation();var t=this.getUnitEl().value;this.model.set("unit",t),this.elementUpdated()},elementUpdated:function(){this.model.trigger("el:change")},handleModelChange:function(){var e=this.model;this.getInputEl().value=e.get("value");var t=this.getUnitEl();t&&(t.value=e.get("unit")||"")},getUnitEl:function(){if(!this.unitEl){var e=this.model,t=e.get("units")||[];if(t.length){var n=[];t.forEach((function(t){var i=t==e.get("unit")?"selected":"";n.push("<option ".concat(i,">").concat(t,"</option>"))}));var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},upArrowClick:function(){var e=this.model,t=e.get("step"),n=parseInt(e.get("value"),10);n=this.normalizeValue(n+t);var i=this.validateInputValue(n);e.set("value",i.value),this.elementUpdated()},downArrowClick:function(){var e=this.model,t=e.get("step"),n=parseInt(e.get("value"),10),i=this.normalizeValue(n-t),r=this.validateInputValue(i);e.set("value",r.value),this.elementUpdated()},downIncrement:function(e){e.preventDefault(),this.moved=0;var t=this.model.get("value");t=this.normalizeValue(t),this.current={y:e.pageY,val:t},Object(a.t)(this.doc,"mousemove",this.moveIncrement),Object(a.t)(this.doc,"mouseup",this.upIncrement)},moveIncrement:function(e){this.moved=1;var t=this.model,n=t.get("step"),i=this.current,r=this.normalizeValue(i.val+(i.y-e.pageY)*n);return this.prValue=this.validateInputValue(r).value,t.set("value",this.prValue,{avoidStore:1}),!1},upIncrement:function(){var e=this.model,t=e.get("step");if(Object(a.s)(this.doc,"mouseup",this.upIncrement),Object(a.s)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-t;e.set("value",n,{avoidStore:1}).set("value",n+t),this.elementUpdated()}},normalizeValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.model,i=n.get("step"),r=0;if(isNaN(e))return t;if(e=parseFloat(e),Math.floor(e)!==e){var o=i.toString().split(".")[1];r=o?o.length:0}return r?parseFloat(e.toFixed(r)):e},validateInputValue:function(e,t){var n=0,i=t||{},r=this.model,a=Object(o.isUndefined)(e)?"":e,s=r.get("units")||[],c=r.get("unit")||s.length&&s[0]||"",l=r.get("max"),u=r.get("min");if(i.deepCheck){var d=r.get("fixedValues")||[];if(a){var p=new RegExp("^"+d.join("|"),"g");if(d.length&&p.test(a))a=a.match(p)[0],c="",n=1;else{var h=a+"";a+="",a=parseFloat(a.replace(",",".")),a=isNaN(a)?"":a;var f=h.replace(a,"");Object(o.indexOf)(s,f)>=0&&(c=f)}}}return Object(o.isUndefined)(l)||""===l||(a=a>l?l:a),Object(o.isUndefined)(u)||""===u||(a=a<u?u:a),{force:n,value:a,unit:c}},render:function(){s.a.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this}})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(33);t.a=r.a.Collection.extend({model:o.a,initialize:function(e,t){var n=this;t&&t.em&&(this.editor=t.em),setTimeout((function(){return n.on("remove",n.onRemove)}))},onRemove:function(e){var t=this.editor;t.stopListening(e),t.get("UndoManager").remove(e)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=this.editor.get("Parser").parseCss(e)),t.em=this.editor,r.a.Collection.prototype.add.apply(this,[e,t])}})},function(e,t,n){"use strict";var i=n(0),r=n(1),o=n.n(r),a=n(22),s=n(11),c=window.CSS;t.a=o.a.Model.extend(a.a).extend({defaults:{selectors:{},selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:0,important:0},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e||{};var n=t.em,i=this.config.selectors||[];if(this.em=n,n){var r=n.get("SelectorManager"),o=[];i.forEach((function(e){o.push(r.add(e))})),i=o}this.set("selectors",new s.a(i))},getAtRule:function(){var e=this.get("atRuleType"),t=this.get("mediaText"),n=e?"@".concat(e):t?"@media":"";return n+(t&&n?" ".concat(t):"")},selectorsToString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.em,i=this.get("state"),r=this.get("wrapper"),o=this.get("selectorsAdd"),a=r&&n&&n.getConfig("wrapperIsBody"),s={escape:function(e){return c&&c.escape?c.escape(e):e}},l=a?"body":this.get("selectors").getFullString(0,s),u=i&&!e.skipState?":".concat(i):"";return l&&t.push("".concat(l).concat(u)),o&&!e.skipAdd&&t.push(o),t.join(", ")},getDeclaration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.selectorsToString(),i=this.styleToString(e),r=this.get("singleAtRule");return(n||r)&&i&&(t=r?i:"".concat(n,"{").concat(i,"}")),t},toCSS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.getAtRule(),i=this.getDeclaration(e);return i&&(t=i),n&&t&&(t="".concat(n,"{").concat(t,"}")),t},toJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.a.Model.prototype.toJSON.apply(this,t);if(this.em.getConfig("avoidDefaults")){var a=this.defaults;Object(i.forEach)(a,(function(e,t){r[t]===e&&delete r[t]})),Object(i.isEmpty)(r.selectors)&&delete r.selectors,Object(i.isEmpty)(r.style)&&delete r.style}return r},compare:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t||"",a=n||"",s=r.selectorsAdd||"",c=r.atRuleType||"";e instanceof Array||e.models||(e=[e]);var l=Object(i.map)(e.models||e,(function(e){return e.get("name")})),u=Object(i.map)(this.get("selectors").models,(function(e){return e.get("name")})),d=!1;if(l.length!==u.length)return d;for(var p=0;p<l.length;p++){for(var h=0,f=0;f<u.length;f++)l[p]===u[f]&&(h=1);if(0===h)return d}return this.get("state")===o&&this.get("mediaText")===a&&this.get("selectorsAdd")===s&&this.get("atRuleType")===c||d}})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(0);t.a=r.a.View.extend({initialize:function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.resetChildren),this.listenTo(t,"remove",this.removeChildren)},removeChildren:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.views.forEach((function(e){if(e){var t=e.childrenView,n=e.scriptContainer;t&&t.stopListening(),n&&n.remove(),e.remove.apply(e)}}));var r=e.components();r.forEach((function(e){return n.removeChildren(e,t,i)}))},addTo:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.config.em,i=this.collection.indexOf(e);if(this.addToCollection(e,null,i),n&&!t.temporary){var r=function e(t){n.trigger("component:add",t),t.components().forEach((function(t){return e(t)}))};r(e)}},addToCollection:function(e,t,i){this.compView||(this.compView=n(5).default);for(var r=this.config,a=this.opts,s=this.em,c=t||null,l=r.frameView,u=void 0===l?{}:l,d=u.model&&e.getView(u.model),p=a.componentTypes||s&&s.get("DomComponents").getTypes(),h=e.get("type"),f=this.compView,g=0;g<p.length;g++)if(p[g].id==h){f=p[g].view;break}var m=(d||new f({model:e,config:r,componentTypes:p})).render().el;if(c)c.appendChild(m);else{var v=this.parentEl,y=v.childNodes;if(Object(o.isUndefined)(i))v.appendChild(m);else{var b=y.length==i;b&&i--,b||!y.length?v.appendChild(m):v.insertBefore(m,y[i])}}return m},resetChildren:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.previousModels,r=void 0===i?[]:i;this.parentEl.innerHTML="",r.forEach((function(e){return t.removeChildren(e,t.collection)})),e.each((function(e){return t.addToCollection(e)}))},render:function(e){var t=this,n=this.el,i=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each((function(e){return t.addToCollection(e,i)})),n.innerHTML="",n.appendChild(i),this}})},function(e,t,n){"use strict";var i,r=n(0),o=n(3),a=n(1),s=n.n(a),c=n(5),l=n(4),u=s.a.$;t.a=s.a.View.extend({events:{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","click [data-toggle-open]":"toggleOpening","dblclick [data-name]":"handleEdit","focusout [data-name]":"handleEditEnd"},template:function(e){var t=this.pfx,n=this.ppfx,i=this.config,r=this.clsNoEdit,o=i.hidable,a=this.countChildren(e),s=a?"":this.clsNoChild,c="".concat(this.clsTitle," ").concat(s),l="".concat(this.clsTitleC," ").concat(n,"one-bg"),u="".concat(this.clsCaret," fa fa-chevron-right"),d="".concat(this.inputNameCls," ").concat(r," ").concat(n,"no-app"),p=this.level+1,h="".concat(30+10*p,"px"),f=e.getName(),g=e.getIcon(),m="".concat(t,"layer");return"\n      ".concat(o?'<i class="'.concat(t,"layer-vis fa fa-eye ").concat(this.isVisible()?"":"fa-eye-slash",'" data-toggle-visible></i>'):"",'\n      <div class="').concat(l,'">\n        <div class="').concat(c,'" style="padding-left: ').concat(h,'" data-toggle-select>\n          <div class="').concat(t,'layer-title-inn">\n            <i class="').concat(u,'" data-toggle-open></i>\n            ').concat(g?'<span class="'.concat(m,'__icon">').concat(g,"</span>"):"",'\n            <span class="').concat(d,'" data-name>').concat(f,'</span>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(this.clsCount,'" data-count>').concat(a||"",'</div>\n      <div class="').concat(this.clsMove,'" data-toggle-move>\n        <i class="fa fa-arrows"></i>\n      </div>\n      <div class="').concat(this.clsChildren,'"></div>')},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=e,this.level=e.level,this.config=e.config,this.em=e.config.em,this.ppfx=this.em.get("Config").stylePrefix,this.sorter=e.sorter||"",this.pfx=this.config.stylePrefix,this.parentView=e.parentView;var t=this.pfx,n=this.ppfx,i=this.model,r=i.get("components"),o=i.get("type")||"default";i.set("open",!1),this.listenTo(r,"remove add reset",this.checkChildren),this.listenTo(i,"change:status",this.updateStatus),this.listenTo(i,"change:open",this.updateOpening),this.listenTo(i,"change:layerable",this.updateLayerable),this.listenTo(i,"change:style:display",this.updateVisibility),this.className="".concat(t,"layer ").concat(t,"layer__t-").concat(o," no-select ").concat(n,"two-color"),this.inputNameCls="".concat(n,"layer-name"),this.clsTitleC="".concat(t,"layer-title-c"),this.clsTitle="".concat(t,"layer-title"),this.clsCaret="".concat(t,"layer-caret"),this.clsCount="".concat(t,"layer-count"),this.clsMove="".concat(t,"layer-move"),this.clsChildren="".concat(t,"layer-children"),this.clsNoChild="".concat(t,"layer-no-chld"),this.clsEdit="".concat(this.inputNameCls,"--edit"),this.clsNoEdit="".concat(this.inputNameCls,"--no-edit"),this.$el.data("model",i),this.$el.data("collection",r),i.viewLayer=this},getVisibilityEl:function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},updateVisibility:function(){var e=this.pfx,t=this.model,n="".concat(e,"layer-hidden"),i="none"==t.getStyle().display?"addClass":"removeClass";this.$el[i](n),this.getVisibilityEl()[i]("fa-eye-slash")},toggleVisibility:function(e){e&&e.stopPropagation();var t=this.model,n=t.get("__prev-display"),i=t.getStyle(),r=i.display;"none"==r?(delete i.display,n&&(i.display=n,t.unset("__prev-display"))):(r&&t.set("__prev-display",r),i.display="none"),t.setStyle(i)},handleEdit:function(e){e&&e.stopPropagation();var t=this.em,n=this.$el,i=this.clsNoEdit,r=this.clsEdit,o=this.getInputName();o.contentEditable=!0,o.focus(),t&&t.setEditing(1),n.find(".".concat(this.inputNameCls)).removeClass(i).addClass(r)},handleEditEnd:function(e){e&&e.stopPropagation();var t=this.em,n=this.$el,i=this.clsNoEdit,r=this.clsEdit,o=this.getInputName(),a=o.textContent;o.scrollLeft=0,o.contentEditable=!1,this.model.set({"custom-name":a}),t&&t.setEditing(0),n.find(".".concat(this.inputNameCls)).addClass(i).removeClass(r)},getInputName:function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},updateOpening:function(){var e=this.opt.opened||{},t=this.model;t.get("open")?(this.$el.addClass("open"),this.getCaret().addClass("fa-chevron-down"),e[t.cid]=t):(this.$el.removeClass("open"),this.getCaret().removeClass("fa-chevron-down"),delete e[t.cid])},toggleOpening:function(e){e.stopPropagation(),this.model.get("components").length&&this.model.set("open",!this.model.get("open"))},handleSelect:function(e){e.stopPropagation();var t=this.em,n=this.config;if(t){var i=this.model;t.setSelected(i,{fromLayers:1});var r=n.scrollCanvas;r&&i.views.forEach((function(e){return e.scrollIntoView(r)}))}},handleHover:function(e){e.stopPropagation();var t=this.em,n=this.config,i=this.model;t&&n.showHover&&t.setHovered(i,{fromLayers:1})},startSort:function(e){e.stopPropagation();var t=this.em,n=this.sorter;e.button&&0!==e.button||n&&(n.onStart=function(e){return t.trigger("".concat(l.eventDrag,":start"),e)},n.onMoveClb=function(e){return t.trigger(l.eventDrag,e)},n.startSort(e.target))},freeze:function(){this.$el.addClass(this.pfx+"opac50"),this.model.set("open",0)},unfreeze:function(){this.$el.removeClass(this.pfx+"opac50")},updateStatus:function(e){c.default.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover}])},isVisible:function(){var e=this.model.get("style").display;if(!e||"none"!=e)return 1},checkChildren:function(){var e=this.model,t=this.clsNoChild,n=this.countChildren(e),i=this.$el.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),r=this.cnt;r||(r=this.$el.children("[data-count]").get(0),this.cnt=r),i[n?"removeClass":"addClass"](t),r&&(r.innerHTML=n||""),!n&&e.set("open",0)},countChildren:function(e){var t=0;return e.get("components").each((function(e){var n=this.opt.isCountable,i=this.config.hideTextnode;n&&!n(e,i)||t++}),this),t},getCaret:function(){return this.caret&&this.caret.length||(this.pfx,this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},setRoot:function(e){e=Object(r.isString)(e)?this.em.getWrapper().find(e)[0]:e;var t=Object(o.g)(e,u);t&&(this.stopListening(),this.model=t,this.initialize(this.opt),this.render())},updateLayerable:function(){(this.parentView||this).render()},render:function(){var e=this.model,t=this.config,o=this.pfx,a=this.ppfx,s=this.opt.isCountable,c=s&&!s(e,t.hideTextnode),l=this.isVisible(),u=this.$el.empty(),d=this.level+1;Object(r.isUndefined)(i)&&(i=n(87).default);var p=new i({collection:e.get("components"),config:this.config,sorter:this.sorter,opened:this.opt.opened,parentView:this,parent:e,level:d}).render().$el;return this.config.showWrapper||1!==d?(u.html(this.template(e)),u.find(".".concat(this.clsChildren)).append(p)):u.append(p),e.get("draggable")&&this.config.sortable||u.children(".".concat(this.clsMove)).remove(),!l&&(this.className+=" ".concat(o,"hide")),c&&(this.className+=" ".concat(a,"hidden")),u.attr("class",this.className),this.updateOpening(),this.updateStatus(),this.updateVisibility(),this}})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=r.a.View.extend({tagName:"style",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e.config||{};var t=this.model,n="change:style change:state change:mediaText";this.listenTo(t,n,this.render),this.listenTo(t,"destroy remove",this.remove),this.listenTo(t.get("selectors"),"change",this.render)},render:function(){var e=this.model.get("important");return this.el.innerHTML=this.model.toCSS({important:e}),this}}),a=o.extend({_createElement:function(e){return document.createTextNode("")},render:function(){var e=this.model,t=e.get("important");return this.el.textContent=e.getDeclaration({important:t}),this}}),s=r.a.$,c=function(e,t){return"".concat(e).concat(t?"-".concat(parseFloat(t)):"")};t.a=r.a.View.extend({initialize:function(e){var t=e.config||{};this.atRules={},this.config=t,this.em=t.em,this.pfx=t.stylePrefix||"",this.className=this.pfx+"rules";var n=this.collection;this.listenTo(n,"add",this.addTo),this.listenTo(n,"reset",this.render)},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){if(this.renderStarted){var n,i,r=t||null,s={model:e,config:this.config};if("keyframes"===e.get("atRuleType")){var l=e.getAtRule(),u=this.atRules[l];if(!u){var d=document.createElement("style");u=document.createTextNode(""),d.appendChild(document.createTextNode("".concat(l,"{"))),d.appendChild(u),d.appendChild(document.createTextNode("}")),this.atRules[l]=u,n=d}i=new a(s),u.appendData(i.render().el.textContent)}else n=(i=new o(s)).render().el;var p=this.className,h=e.get("mediaText"),f=c(p),g=f;if(h&&(g=c(p,this.getMediaWidth(h))),n){var m,v=r||this.el;try{m=v.querySelector("#".concat(g))}catch(e){}m||(m=v.querySelector("#".concat(f))),m.appendChild(n)}return n}},getMediaWidth:function(e){return e&&e.replace("(".concat(this.em.getConfig("mediaCondition"),": "),"").replace(")","")},render:function(){var e=this;this.renderStarted=1,this.atRules={};var t=this.em,n=this.$el,i=this.className,r=this.collection,o=document.createDocumentFragment();n.empty();var a=t.get("DeviceManager").getAll().pluck("priority");return a.every((function(e){return e}))&&a.unshift(0),a.forEach((function(e){return s('<div id="'.concat(c(i,e),'"></div>')).appendTo(o)})),r.each((function(t){return e.addToCollection(t,o)})),n.append(o),n.attr("class",i),this}})},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(1),a=n.n(o),s=n(0),c=n(8),l=n.n(c),u=n(17);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var p=a.a.$;!function(e,t){var n={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var e="";if(r)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function c(t,n,i,r){for(var a=[],s=0;s<t.length;s++){var c=t[s];if(c){var l=C(c),u=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=C.equals(n,c)?" sp-thumb-active":"";var d=l.toString(r.preferredFormat||"rgb"),p=o?"background-color:"+l.toRgbString():"filter:"+l.toFilter();a.push('<span title="'+d+'" data-color="'+l.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+p+';"></span></span>')}else a.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",r.noColorSelectedText)).html())}return"<div class='sp-cf "+i+"'>"+a.join("")+"</div>"}function u(l,u){var d,m,v=function(t,i){var r=e.extend({},n,t);return r.callbacks={move:h(r.move,i),change:h(r.change,i),show:h(r.show,i),hide:h(r.hide,i),beforeShow:h(r.beforeShow,i)},r}(u,l),y=v.flat,b=v.showSelectionPalette,w=v.localStorageKey,x=v.theme,E=v.callbacks,_=(d=Ve,function(){var e=this,t=arguments,n=function(){m=null,d.apply(e,t)};m||(m=setTimeout(n,10))}),S=!1,O=!1,k=0,T=0,P=0,j=0,A=0,M=0,D=0,R=0,N=0,L=0,B=1,I=[],F=[],z={},H=v.selectionPalette.slice(0),V=v.maxSelectionSize,$="sp-dragging",U=null,W=l.ownerDocument,q=(W.body,e(l)),G=!1,Y=e(s,W).addClass(x),K=Y.find(".sp-picker-container"),X=Y.find(".sp-color"),Z=Y.find(".sp-dragger"),J=Y.find(".sp-hue"),Q=Y.find(".sp-slider"),ee=Y.find(".sp-alpha-inner"),te=Y.find(".sp-alpha"),ne=Y.find(".sp-alpha-handle"),ie=Y.find(".sp-input"),re=Y.find(".sp-palette"),oe=Y.find(".sp-initial"),ae=Y.find(".sp-cancel"),se=Y.find(".sp-clear"),ce=Y.find(".sp-choose"),le=Y.find(".sp-palette-toggle"),ue=q.is("input"),de=ue&&"color"===q.attr("type")&&g(),pe=ue&&!y,he=pe?e(a).addClass(x).addClass(v.className).addClass(v.replacerClassName):e([]),fe=pe?he:q,ge=he.find(".sp-preview-inner"),me=v.color||ue&&q.val(),ve=!1,ye=v.preferredFormat,be=!v.showButtons||v.clickoutFiresChange,we=!me,xe=v.allowEmpty&&!de;function Ee(){if(v.showPaletteOnly&&(v.showPalette=!0),le.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),v.palette){I=v.palette.slice(0),F=e.isArray(I[0])?I:[I],z={};for(var t=0;t<F.length;t++)for(var n=0;n<F[t].length;n++){var i=C(F[t][n]).toRgbString();z[i]=!0}}Y.toggleClass("sp-flat",y),Y.toggleClass("sp-input-disabled",!v.showInput),Y.toggleClass("sp-alpha-enabled",v.showAlpha),Y.toggleClass("sp-clear-enabled",xe),Y.toggleClass("sp-buttons-disabled",!v.showButtons),Y.toggleClass("sp-palette-buttons-disabled",!v.togglePaletteOnly),Y.toggleClass("sp-palette-disabled",!v.showPalette),Y.toggleClass("sp-palette-only",v.showPaletteOnly),Y.toggleClass("sp-initial-disabled",!v.showInitial),Y.addClass(v.className).addClass(v.containerClassName),Ve()}function _e(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");t.length>1&&(delete window.localStorage[w],e.each(t,(function(e,t){Se(t)})))}catch(e){}try{H=window.localStorage[w].split(";")}catch(e){}}}function Se(t){if(b){var n=C(t).toRgbString();if(!z[n]&&-1===e.inArray(n,H))for(H.push(n);H.length>V;)H.shift();if(w&&window.localStorage)try{window.localStorage[w]=H.join(";")}catch(e){}}}function Ce(){var t=Be(),n=e.map(F,(function(e,n){return c(e,t,"sp-palette-row sp-palette-row-"+n,v)}));_e(),H&&n.push(c(function(){var e=[];if(v.showPalette)for(var t=0;t<H.length;t++){var n=C(H[t]).toRgbString();z[n]||e.push(H[t])}return e.reverse().slice(0,v.maxSelectionSize)}(),t,"sp-palette-row sp-palette-row-selection",v)),re.html(n.join(""))}function Oe(){if(v.showInitial){var e=ve,t=Be();oe.html(c([e,t],t,"sp-palette-row-initial",v))}}function ke(){(T<=0||k<=0||j<=0)&&Ve(),O=!0,Y.addClass($),U=null,q.trigger("dragstart.spectrum",[Be()])}function Te(){O=!1,Y.removeClass($),q.trigger("dragstop.spectrum",[Be()])}function Pe(){var e=ie.val();if(null!==e&&""!==e||!xe){var t=C(e);t.isValid()?(Le(t),He(!0)):ie.addClass("sp-validation-error")}else Le(null),He(!0)}function je(){S?Re():Ae()}function Ae(){var t=e.Event("beforeShow.spectrum");if(S)Ve();else if(q.trigger("beforeShow.spectrum",[Be()]),!1!==E.beforeShow(Be())&&!t.isDefaultPrevented()){!function(){for(var e=0;e<i.length;e++)i[e]&&i[e].hide()}(),S=!0;var n=e(W);n.bind("keydown.spectrum",Me),n.bind("click.spectrum",De),e(window).bind("resize.spectrum",_),he.addClass("sp-active"),Y.removeClass("sp-hidden"),Ve(),Fe(),ve=Be(),Oe(),E.show(ve),q.trigger("show.spectrum",[ve])}}function Me(e){27===e.keyCode&&Re()}function De(e){2!=e.button&&(O||(be?He(!0):Ne(),Re()))}function Re(){S&&!y&&(S=!1,e(W).unbind("keydown.spectrum",Me),e(W).unbind("click.spectrum",De),e(window).unbind("resize.spectrum",_),he.removeClass("sp-active"),Y.addClass("sp-hidden"),E.hide(Be()),q.trigger("hide.spectrum",[Be()]))}function Ne(){Le(ve,!0)}function Le(e,t){var n,i;C.equals(e,Be())?Fe():(!e&&xe?we=!0:(we=!1,i=(n=C(e)).toHsv(),R=i.h%360/360,N=i.s,L=i.v,B=i.a),Fe(),n&&n.isValid()&&!t&&(ye=v.preferredFormat||n.getFormat()))}function Be(e){return e=e||{},xe&&we?null:C.fromRatio({h:R,s:N,v:L,a:Math.round(100*B)/100},{format:e.format||ye})}function Ie(){Fe(),E.move(Be()),q.trigger("move.spectrum",[Be()])}function Fe(){ie.removeClass("sp-validation-error"),ze();var e=C.fromRatio({h:R,s:1,v:1});X.css("background-color",e.toHexString());var t=ye;B<1&&(0!==B||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=Be({format:t}),i="";if(ge.removeClass("sp-clear-display"),ge.css("background-color","transparent"),!n&&xe)ge.addClass("sp-clear-display");else{var a=n.toHexString(),s=n.toRgbString();if(o||1===n.alpha?ge.css("background-color",s):(ge.css("background-color","transparent"),ge.css("filter",n.toFilter())),v.showAlpha){var c=n.toRgb();c.a=0;var l=C(c).toRgbString(),u="linear-gradient(left, "+l+", "+a+")";r?ee.css("filter",C(l).toFilter({gradientType:1},a)):(ee.css("background","-webkit-"+u),ee.css("background","-moz-"+u),ee.css("background","-ms-"+u),ee.css("background","linear-gradient(to right, "+l+", "+a+")"))}i=n.toString(t)}v.showInput&&ie.val(i),v.showPalette&&Ce(),Oe()}function ze(){var e=N,t=L;if(xe&&we)ne.hide(),Q.hide(),Z.hide();else{ne.show(),Q.show(),Z.show();var n=e*k,i=T-t*T;n=Math.max(-P,Math.min(k-P,n-P)),i=Math.max(-P,Math.min(T-P,i-P)),Z.css({top:i+"px",left:n+"px"});var r=B*A;ne.css({left:r-M/2+"px"});var o=R*j;Q.css({top:o-D+"px"})}}function He(e){var t=Be(),n="",i=!C.equals(t,ve);t&&(n=t.toString(ye),Se(t)),ue&&q.val(n),e&&i&&(E.change(t),q.trigger("change",[t]))}function Ve(){S&&(k=X.width(),T=X.height(),P=Z.height(),J.width(),j=J.height(),D=Q.height(),A=te.width(),M=ne.width(),y||(Y.css("position","absolute"),v.offset?Y.offset(v.offset):Y.offset(function(t,n){var i=t.outerWidth(),r=t.outerHeight(),o=n.outerHeight(),a=t[0].ownerDocument,s=a.documentElement,c=s.clientWidth,l=s.clientHeight,u=c+e(a).scrollLeft(),d=l+e(a).scrollTop(),p=n.offset();return p.top+=o,p.left-=Math.min(p.left,p.left+i>u&&u>i?Math.abs(p.left+i-u):0),p.top-=Math.min(p.top,p.top+r>d&&d>r?Math.abs(r+o-0):0),p}(Y,fe))),ze(),v.showPalette&&Ce(),q.trigger("reflow.spectrum"))}function $e(){Re(),G=!0,q.attr("disabled",!0),fe.addClass("sp-disabled")}!function(){if(r&&Y.find("*:not(input)").attr("unselectable","on"),Ee(),pe&&q.after(he).hide(),xe||se.hide(),y)q.after(Y).hide();else{var t="parent"===v.appendTo?q.parent():e(v.appendTo);1!==t.length&&(t=e("body")),t.append(Y)}function n(t){return t.data&&t.data.ignore?(Le(e(t.target).closest(".sp-thumb-el").data("color")),Ie()):(Le(e(t.target).closest(".sp-thumb-el").data("color")),Ie(),He(!0),v.hideAfterPaletteSelect&&Re()),!1}_e(),fe.bind("click.spectrum touchstart.spectrum",(function(t){G||je(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()})),(q.is(":disabled")||!0===v.disabled)&&$e(),Y.click(p),ie.change(Pe),ie.bind("paste",(function(){setTimeout(Pe,1)})),ie.keydown((function(e){13==e.keyCode&&Pe()})),ae.text(v.cancelText),ae.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),Ne(),Re()})),se.attr("title",v.clearText),se.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),we=!0,Ie(),y&&He(!0)})),ce.text(v.chooseText),ce.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),r&&ie.is(":focus")&&ie.trigger("change"),ie.hasClass("sp-validation-error")||(He(!0),Re())})),le.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),le.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),v.showPaletteOnly=!v.showPaletteOnly,v.showPaletteOnly||y||Y.css("left","-="+(K.outerWidth(!0)+5)),Ee()})),f(te,(function(e,t,n){B=e/A,we=!1,n.shiftKey&&(B=Math.round(10*B)/10),Ie()}),ke,Te),f(J,(function(e,t){R=parseFloat(t/j),we=!1,v.showAlpha||(B=1),Ie()}),ke,Te),f(X,(function(e,t,n){if(n.shiftKey){if(!U){var i=N*k,r=T-L*T,o=Math.abs(e-i)>Math.abs(t-r);U=o?"x":"y"}}else U=null;var a=!U||"y"===U;(!U||"x"===U)&&(N=parseFloat(e/k)),a&&(L=parseFloat((T-t)/T)),we=!1,v.showAlpha||(B=1),Ie()}),ke,Te),me?(Le(me),Fe(),ye=v.preferredFormat||C(me).format,Se(me)):Fe(),y&&Ae();var i=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";re.delegate(".sp-thumb-el",i,n),oe.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},n)}();var Ue={show:Ae,hide:Re,toggle:je,reflow:Ve,option:function(n,i){return n===t?e.extend({},v):i===t?v[n]:(v[n]=i,"preferredFormat"===n&&(ye=v.preferredFormat),void Ee())},enable:function(){G=!1,q.attr("disabled",!1),fe.removeClass("sp-disabled")},disable:$e,offset:function(e){v.offset=e,Ve()},set:function(e){Le(e),He()},get:Be,destroy:function(){q.show(),fe.unbind("click.spectrum touchstart.spectrum"),Y.remove(),he.remove(),i[Ue.id]=null},container:Y};return Ue.id=i.push(Ue)-1,Ue}function d(){}function p(e){e.stopPropagation()}function h(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function f(t,n,i,o){n=n||function(){},i=i||function(){},o=o||function(){};var a=document,s=!1,c={},l=0,u=0,d="ontouchstart"in window,p={};function h(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function f(e){if(s){if(r&&a.documentMode<9&&!e.button)return g();var i=e&&e.touches&&e.touches[0],o=i&&i.pageX||e.pageX,p=i&&i.pageY||e.pageY,f=Math.max(0,Math.min(o-c.left,u)),m=Math.max(0,Math.min(p-c.top,l));d&&h(e),n.apply(t,[f,m,e])}}function g(){s&&(e(a).unbind(p),e(a.body).removeClass("sp-dragging"),setTimeout((function(){o.apply(t,arguments)}),0)),s=!1}p.selectstart=h,p.dragstart=h,p["touchmove mousemove"]=f,p["touchend mouseup"]=g,e(t).bind("touchstart mousedown",(function(n){(n.which?3==n.which:2==n.button)||s||!1!==i.apply(t,arguments)&&(s=!0,l=e(t).height(),u=e(t).width(),c=e(t).offset(),e(a).bind(p),e(a.body).addClass("sp-dragging"),f(n),h(n))}))}function g(){return e.fn.spectrum.inputTypeColorSupport()}var m="spectrum.id";e.fn.spectrum=function(t,n){if("string"==typeof t){var r=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=i[e(this).data(m)];if(n){var a=n[t];if(!a)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?r=n.get():"container"==t?r=n.container:"option"==t?r=n.option.apply(n,o):"destroy"==t?(n.destroy(),e(this).removeData(m)):a.apply(n,o)}})),r}return this.spectrum("destroy").each((function(){var n=u(this,e.extend({},t,e(this).data()));e(this).data(m,n.id)}))},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=f,e.fn.spectrum.defaults=n,e.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var n=e("<input type='color'/>")[0];t._cachedResult="color"===n.type&&""!==n.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!g()&&t.spectrum({preferredFormat:"hex6"})};var v=/^[\s,#]+/,y=/\s+$/,b=0,w=Math,x=w.round,E=w.min,_=w.max,S=w.random,C=function e(t,n){if(n=n||{},(t=t||"")instanceof e)return t;if(!(this instanceof e))return new e(t,n);var i=function(e){var t,n,i,r={r:0,g:0,b:0},o=1,a=!1,s=!1;return"string"==typeof e&&(e=function(e){e=e.replace(v,"").replace(y,"").toLowerCase();var t,n,i=!1;if($[e])e=$[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=ee.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=ee.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ee.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=ee.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ee.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=ee.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ee.hex8.exec(e))?{a:(n=t[1],Y(n)/255),r:Y(t[2]),g:Y(t[3]),b:Y(t[4]),format:i?"name":"hex8"}:(t=ee.hex6.exec(e))?{r:Y(t[1]),g:Y(t[2]),b:Y(t[3]),format:i?"name":"hex"}:!!(t=ee.hex3.exec(e))&&{r:Y(t[1]+""+t[1]),g:Y(t[2]+""+t[2]),b:Y(t[3]+""+t[3]),format:i?"name":"hex"}}(e)),"object"==l()(e)&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=e.r,n=e.g,i=e.b,r={r:255*q(t,255),g:255*q(n,255),b:255*q(i,255)},a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=X(e.s),e.v=X(e.v),r=function(e,t,n){e=6*q(e,360),t=q(t,100),n=q(n,100);var i=w.floor(e),r=e-i,o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),c=i%6;return{r:255*[n,a,o,o,s,n][c],g:255*[s,n,n,a,o,o][c],b:255*[o,o,s,n,n,a][c]}}(e.h,e.s,e.v),a=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=X(e.s),e.l=X(e.l),r=function(e,t,n){var i,r,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=q(e,360),t=q(t,100),n=q(n,100),0===t)i=r=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;i=a(c,s,e+1/3),r=a(c,s,e),o=a(c,s,e-1/3)}return{r:255*i,g:255*r,b:255*o}}(e.h,e.s,e.l),a=!0,s="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=W(o),{ok:a,format:e.format||s,r:E(255,_(r.r,0)),g:E(255,_(r.g,0)),b:E(255,_(r.b,0)),a:o}}(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=x(100*this._a)/100,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=x(this._r)),this._g<1&&(this._g=x(this._g)),this._b<1&&(this._b=x(this._b)),this._ok=i.ok,this._tc_id=b++};function O(e,t,n){e=q(e,255),t=q(t,255),n=q(n,255);var i,r,o=_(e,t,n),a=E(e,t,n),s=(o+a)/2;if(o==a)i=r=0;else{var c=o-a;switch(r=s>.5?c/(2-o-a):c/(o+a),o){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:r,l:s}}function k(e,t,n){e=q(e,255),t=q(t,255),n=q(n,255);var i,r,o=_(e,t,n),a=E(e,t,n),s=o,c=o-a;if(r=0===o?0:c/o,o==a)i=0;else{switch(o){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:r,v:s}}function T(e,t,n,i){var r=[K(x(e).toString(16)),K(x(t).toString(16)),K(x(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function P(e,t,n,i){var r;return[K((r=i,Math.round(255*parseFloat(r)).toString(16))),K(x(e).toString(16)),K(x(t).toString(16)),K(x(n).toString(16))].join("")}function j(e,t){t=0===t?0:t||10;var n=C(e).toHsl();return n.s-=t/100,n.s=G(n.s),C(n)}function A(e,t){t=0===t?0:t||10;var n=C(e).toHsl();return n.s+=t/100,n.s=G(n.s),C(n)}function M(e){return C(e).desaturate(100)}function D(e,t){t=0===t?0:t||10;var n=C(e).toHsl();return n.l+=t/100,n.l=G(n.l),C(n)}function R(e,t){t=0===t?0:t||10;var n=C(e).toRgb();return n.r=_(0,E(255,n.r-x(-t/100*255))),n.g=_(0,E(255,n.g-x(-t/100*255))),n.b=_(0,E(255,n.b-x(-t/100*255))),C(n)}function N(e,t){t=0===t?0:t||10;var n=C(e).toHsl();return n.l-=t/100,n.l=G(n.l),C(n)}function L(e,t){var n=C(e).toHsl(),i=(x(n.h)+t)%360;return n.h=i<0?360+i:i,C(n)}function B(e){var t=C(e).toHsl();return t.h=(t.h+180)%360,C(t)}function I(e){var t=C(e).toHsl(),n=t.h;return[C(e),C({h:(n+120)%360,s:t.s,l:t.l}),C({h:(n+240)%360,s:t.s,l:t.l})]}function F(e){var t=C(e).toHsl(),n=t.h;return[C(e),C({h:(n+90)%360,s:t.s,l:t.l}),C({h:(n+180)%360,s:t.s,l:t.l}),C({h:(n+270)%360,s:t.s,l:t.l})]}function z(e){var t=C(e).toHsl(),n=t.h;return[C(e),C({h:(n+72)%360,s:t.s,l:t.l}),C({h:(n+216)%360,s:t.s,l:t.l})]}function H(e,t,n){t=t||6,n=n||30;var i=C(e).toHsl(),r=360/n,o=[C(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(C(i));return o}function V(e,t){t=t||6;for(var n=C(e).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/t;t--;)a.push(C({h:i,s:r,v:o})),o=(o+s)%1;return a}C.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=W(e),this._roundA=x(100*this._a)/100,this},toHsv:function(){var e=k(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=k(this._r,this._g,this._b),t=x(360*e.h),n=x(100*e.s),i=x(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=O(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=O(this._r,this._g,this._b),t=x(360*e.h),n=x(100*e.s),i=x(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return T(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return P(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:x(this._r),g:x(this._g),b:x(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+x(this._r)+", "+x(this._g)+", "+x(this._b)+")":"rgba("+x(this._r)+", "+x(this._g)+", "+x(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:x(100*q(this._r,255))+"%",g:x(100*q(this._g,255))+"%",b:x(100*q(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+x(100*q(this._r,255))+"%, "+x(100*q(this._g,255))+"%, "+x(100*q(this._b,255))+"%)":"rgba("+x(100*q(this._r,255))+"%, "+x(100*q(this._g,255))+"%, "+x(100*q(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(U[T(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+P(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";return e&&(n=C(e).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(D,arguments)},brighten:function(){return this._applyModification(R,arguments)},darken:function(){return this._applyModification(N,arguments)},desaturate:function(){return this._applyModification(j,arguments)},saturate:function(){return this._applyModification(A,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(L,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(H,arguments)},complement:function(){return this._applyCombination(B,arguments)},monochromatic:function(){return this._applyCombination(V,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(I,arguments)},tetrad:function(){return this._applyCombination(F,arguments)}},C.fromRatio=function(e,t){if("object"==l()(e)){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:X(e[i]));e=n}return C(e,t)},C.equals=function(e,t){return!(!e||!t)&&C(e).toRgbString()==C(t).toRgbString()},C.random=function(){return C.fromRatio({r:S(),g:S(),b:S()})},C.mix=function(e,t,n){n=0===n?0:n||50;var i,r=C(e).toRgb(),o=C(t).toRgb(),a=n/100,s=2*a-1,c=o.a-r.a,l=1-(i=((i=s*c==-1?s:(s+c)/(1+s*c))+1)/2),u={r:o.r*i+r.r*l,g:o.g*i+r.g*l,b:o.b*i+r.b*l,a:o.a*a+r.a*(1-a)};return C(u)},C.readability=function(e,t){var n=C(e),i=C(t),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),c=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:c}},C.isReadable=function(e,t){var n=C.readability(e,t);return n.brightness>125&&n.color>500},C.mostReadable=function(e,t){for(var n=null,i=0,r=!1,o=0;o<t.length;o++){var a=C.readability(e,t[o]),s=a.brightness>125&&a.color>500,c=a.brightness/125*3+a.color/500;(s&&!r||s&&r&&c>i||!s&&!r&&c>i)&&(r=s,i=c,n=C(t[o]))}return n};var $=C.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=C.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}($);function W(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function q(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=E(t,_(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),w.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function G(e){return E(1,_(0,e))}function Y(e){return parseInt(e,16)}function K(e){return 1==e.length?"0"+e:""+e}function X(e){return e<=1&&(e=100*e+"%"),e}var Z,J,Q,ee=(J="[\\s|\\(]+("+(Z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")\\s*\\)?",Q="[\\s|\\(]+("+Z+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")\\s*\\)?",{rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+Q),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+Q),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+Q),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=C,e((function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()}))}(p),t.a=u.a.extend({template:function(){var e=this.ppfx;return'\n      <div class="'.concat(this.holderClass(),'"></div>\n      <div class="').concat(e,'field-colorp">\n        <div class="').concat(e,'field-colorp-c" data-colorp-c>\n          <div class="').concat(e,'checker-bg"></div>\n        </div>\n      </div>\n    ')},inputClass:function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,i=n.get("defaults"),r=Object(s.isUndefined)(e)?Object(s.isUndefined)(i)?"":i:e,o=this.getInputEl(),a=this.getColorEl(),c="none"!=r?r:"";o.value=r,a.get(0).style.backgroundColor=c,(t.fromTarget||t.fromInput&&!t.avoidStore)&&(a.spectrum("set",c),this.noneColor="none"==r)},getColorEl:function(){if(!this.colorEl){var e,t=this.em,n=this,i=this.ppfx,o=this.model,a=p('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),s=a.get(0).style,c=t&&t.config?t.config.el:"",l=t&&t.getConfig&&t.getConfig("colorPicker")||{},u=function(e){return(1==e.getAlpha()?e.toHexString():e.toRgbString()).replace(/ /g,"")},h=0;this.$el.find("[data-colorp-c]").append(a),a.spectrum(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerClassName:"".concat(i,"one-bg ").concat(i,"two-color"),appendTo:c||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"",palette:[]},l,{move:function(e){var t=u(e);s.backgroundColor=t,o.setValueFromInput(t,0)},change:function(e){h=1;var t=u(e);s.backgroundColor=t,o.setValueFromInput(0,0),o.setValueFromInput(t),n.noneColor=0},show:function(t){h=0,e=u(t)},hide:function(t){!h&&e&&(n.noneColor&&(e=""),s.backgroundColor=e,a.spectrum("set",e),o.setValueFromInput(e,0))}})),t&&t.on&&t.on("component:selected",(function(){h=1,a.spectrum("hide")})),this.colorEl=a}return this.colorEl},render:function(){return u.a.prototype.render.call(this),this.getColorEl(),this}})},function(e,t,n){!function(t){var n,i={},r={16:!1,18:!1,17:!1,91:!1},o="all",a={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},c=function(e){return s[e]||e.toUpperCase().charCodeAt(0)},l=[];for(n=1;n<20;n++)s["f"+n]=111+n;function u(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var p={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function h(e){for(n in r)r[n]=e[p[n]]}function f(e,t,n){var r,o;r=m(e),void 0===n&&(n=t,t="all");for(var a=0;a<r.length;a++)o=[],(e=r[a].split("+")).length>1&&(o=v(e),e=[e[e.length-1]]),e=e[0],(e=c(e))in i||(i[e]=[]),i[e].push({shortcut:r[a],scope:t,method:n,key:r[a],mods:o})}for(n in a)f[n]=!1;function g(){return o||"all"}function m(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=a[t[n]];return t}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}y(document,"keydown",(function(e){!function(e){var t,n,o,s,c,d;if(t=e.keyCode,-1==u(l,t)&&l.push(t),93!=t&&224!=t||(t=91),t in r)for(o in r[t]=!0,a)a[o]==t&&(f[o]=!0);else if(h(e),f.filter.call(this,e)&&t in i)for(d=g(),s=0;s<i[t].length;s++)if((n=i[t][s]).scope==d||"all"==n.scope){for(o in c=n.mods.length>0,r)(!r[o]&&u(n.mods,+o)>-1||r[o]&&-1==u(n.mods,+o))&&(c=!1);(0!=n.mods.length||r[16]||r[18]||r[17]||r[91])&&!c||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),y(document,"keyup",(function(e){var t,n=e.keyCode,i=u(l,n);if(i>=0&&l.splice(i,1),93!=n&&224!=n||(n=91),n in r)for(t in r[n]=!1,a)a[t]==n&&(f[t]=!1)})),y(window,"focus",(function(){for(n in r)r[n]=!1;for(n in a)f[n]=!1}));var b=t.key;t.key=f,t.key.setScope=function(e){o=e||"all"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,r;for(t in i)for(n=i[t],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=c(e)),-1!=u(l,e)},t.key.getPressedKeyCodes=function(){return l.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var n,r,o,a,s,l=[];for(n=m(e),a=0;a<n.length;a++){if((r=n[a].split("+")).length>1&&(l=v(r),e=r[r.length-1]),e=c(e),void 0===t&&(t=g()),!i[e])return;for(o=0;o<i[e].length;o++)(s=i[e][o]).scope===t&&d(s.mods,l)&&(i[e][o]={})}},e.exports=f}(this)},function(e,t,n){"use strict";(function(e){var i=n(68),r=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function a(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void u(t.promise,e)}l(t.promise,i)}else(1===e._state?l:u)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void h((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){u(e,t)}var i,r}function u(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(e){if(n)return;n=!0,u(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(a);return c(this,new p(e,t,n)),n},s.prototype.finally=i.a,s.all=function(e){return new s((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function a(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(t){a(e,t)}),n)}i[e]=o,0==--r&&t(i)}catch(e){n(e)}}for(var s=0;s<i.length;s++)a(s,i[s])}))},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,r=e.length;i<r;i++)s.resolve(e[i]).then(t,n)}))},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){r(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=s}).call(this,n(76).setImmediate)},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),o=r.a.Model.extend({defaults:{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1},initialize:function(e){if(this.get("buttons").length){var t=n(40).default;this.set("buttons",new t(this.get("buttons")))}}});t.default=r.a.Collection.extend({model:o,deactivateAllExceptOne:function(e,t){this.forEach((function(n,i){n!==e&&(n.set("active",!1),t&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(e,t))}))},deactivateAll:function(e,t){var n=e||"";this.forEach((function(e){e.get("context")==n&&e!==t&&(e.set("active",!1,{silent:1}),e.trigger("updateActive",{fromCollection:1}))}))},disableAllButtons:function(e){var t=e||"";this.forEach((function(e,n){e.get("context")==t&&e.set("disable",!0)}))},disableAllButtonsExceptOne:function(e,t){this.forEach((function(n,i){n!==e&&(n.set("disable",!0),t&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(e,t))}))}})},function(e,t,n){!function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,n){var i=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var r,o,a=t.indentUnit,s=n.tokenHooks,c=n.documentTypes||{},l=n.mediaTypes||{},u=n.mediaFeatures||{},d=n.mediaValueKeywords||{},p=n.propertyKeywords||{},h=n.nonStandardPropertyKeywords||{},f=n.fontProperties||{},g=n.counterDescriptors||{},m=n.colorKeywords||{},v=n.valueKeywords||{},y=n.allowNested,b=n.lineComment,w=!0===n.supportsAtComponent;function x(e,t){return r=t,e}function E(e,t){var n=e.next();if(s[n]){var i=s[n](e,t);if(!1!==i)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),x("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?x(null,"compare"):'"'==n||"'"==n?(t.tokenize=_(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),x("atom","hash")):"!"==n?(e.match(/^\s*\w*/),x("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),x("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?x(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?x("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?x(null,n):e.match(/[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase())&&(t.tokenize=S),x("variable callee","variable")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),x("property","word")):x(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),x("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?x("variable-2","variable-definition"):x("variable-2","variable")):e.match(/^\w+-/)?x("meta","meta"):void 0}function _(e){return function(t,n){for(var i,r=!1;null!=(i=t.next());){if(i==e&&!r){")"==e&&t.backUp(1);break}r=!r&&"\\"==i}return(i==e||!r&&")"!=e)&&(n.tokenize=null),x("string","string")}}function S(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=_(")"),x(null,"(")}function C(e,t,n){this.type=e,this.indent=t,this.prev=n}function O(e,t,n,i){return e.context=new C(n,t.indentation()+(!1===i?0:a),e.context),n}function k(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function T(e,t,n){return A[n.context.type](e,t,n)}function P(e,t,n,i){for(var r=i||1;r>0;r--)n.context=n.context.prev;return T(e,t,n)}function j(e){var t=e.current().toLowerCase();o=v.hasOwnProperty(t)?"atom":m.hasOwnProperty(t)?"keyword":"variable"}var A={top:function(e,t,n){if("{"==e)return O(n,t,"block");if("}"==e&&n.context.prev)return k(n);if(w&&/@component/i.test(e))return O(n,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return O(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return O(n,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return O(n,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return O(n,t,"interpolation");if(":"==e)return"pseudo";if(y&&"("==e)return O(n,t,"parens")}return n.context.type},block:function(e,t,n){if("word"==e){var i=t.current().toLowerCase();return p.hasOwnProperty(i)?(o="property","maybeprop"):h.hasOwnProperty(i)?(o="string-2","maybeprop"):y?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":y||"hash"!=e&&"qualifier"!=e?A.top(e,t,n):(o="error","block")},maybeprop:function(e,t,n){return":"==e?O(n,t,"prop"):T(e,t,n)},prop:function(e,t,n){if(";"==e)return k(n);if("{"==e&&y)return O(n,t,"propBlock");if("}"==e||"{"==e)return P(e,t,n);if("("==e)return O(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)j(t);else if("interpolation"==e)return O(n,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,n){return"}"==e?k(n):"word"==e?(o="property","maybeprop"):n.context.type},parens:function(e,t,n){return"{"==e||"}"==e?P(e,t,n):")"==e?k(n):"("==e?O(n,t,"parens"):"interpolation"==e?O(n,t,"interpolation"):("word"==e&&j(t),"parens")},pseudo:function(e,t,n){return"meta"==e?"pseudo":"word"==e?(o="variable-3",n.context.type):T(e,t,n)},documentTypes:function(e,t,n){return"word"==e&&c.hasOwnProperty(t.current())?(o="tag",n.context.type):A.atBlock(e,t,n)},atBlock:function(e,t,n){if("("==e)return O(n,t,"atBlock_parens");if("}"==e||";"==e)return P(e,t,n);if("{"==e)return k(n)&&O(n,t,y?"block":"top");if("interpolation"==e)return O(n,t,"interpolation");if("word"==e){var i=t.current().toLowerCase();o="only"==i||"not"==i||"and"==i||"or"==i?"keyword":l.hasOwnProperty(i)?"attribute":u.hasOwnProperty(i)?"property":d.hasOwnProperty(i)?"keyword":p.hasOwnProperty(i)?"property":h.hasOwnProperty(i)?"string-2":v.hasOwnProperty(i)?"atom":m.hasOwnProperty(i)?"keyword":"error"}return n.context.type},atComponentBlock:function(e,t,n){return"}"==e?P(e,t,n):"{"==e?k(n)&&O(n,t,y?"block":"top",!1):("word"==e&&(o="error"),n.context.type)},atBlock_parens:function(e,t,n){return")"==e?k(n):"{"==e||"}"==e?P(e,t,n,2):A.atBlock(e,t,n)},restricted_atBlock_before:function(e,t,n){return"{"==e?O(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(o="variable","restricted_atBlock_before"):T(e,t,n)},restricted_atBlock:function(e,t,n){return"}"==e?(n.stateArg=null,k(n)):"word"==e?(o="@font-face"==n.stateArg&&!f.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!g.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,n){return"word"==e?(o="variable","keyframes"):"{"==e?O(n,t,"top"):T(e,t,n)},at:function(e,t,n){return";"==e?k(n):"{"==e||"}"==e?P(e,t,n):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,n){return"}"==e?k(n):"{"==e||";"==e?P(e,t,n):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:i?"block":"top",stateArg:null,context:new C(i?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||E)(e,t);return n&&"object"==typeof n&&(r=n[1],n=n[0]),o=n,"comment"!=r&&(t.state=A[t.state](r,e,t)),o},indent:function(e,t){var n=e.context,i=t&&t.charAt(0),r=n.indent;return"prop"!=n.type||"}"!=i&&")"!=i||(n=n.prev),n.prev&&("}"!=i||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=i||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=i||"at"!=n.type&&"atBlock"!=n.type)||(r=Math.max(0,n.indent-a)):r=(n=n.prev).indent),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var n=["domain","regexp","url","url-prefix"],i=t(n),r=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(r),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],s=t(a),c=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],l=t(c),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(u),p=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=t(p),f=t(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),g=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),m=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(m),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(y),w=n.concat(r).concat(a).concat(c).concat(u).concat(p).concat(m).concat(y);function x(e,t){for(var n,i=!1;null!=(n=e.next());){if(i&&"/"==n){t.tokenize=null;break}i="*"==n}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:i,mediaTypes:o,mediaFeatures:s,mediaValueKeywords:l,propertyKeywords:d,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:g,colorKeywords:v,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:s,mediaValueKeywords:l,propertyKeywords:d,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:b,fontProperties:f,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:s,mediaValueKeywords:l,propertyKeywords:d,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:b,fontProperties:f,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:i,mediaTypes:o,mediaFeatures:s,propertyKeywords:d,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:g,colorKeywords:v,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css",helperType:"gss"})}(n(12))},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){e.DomComponents.clear(),e.CssComposer.clear()}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(3),o=n(16);t.default={run:function(e){Object(i.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=e,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(e){this.toggleMove(),this.disableDragger()},onKeyUp:function(e){" "===Object(r.f)(e)&&this.editor.stopCommand(this.id)},enableDragger:function(e){this.toggleDragger(1,e)},disableDragger:function(e){this.toggleDragger(0,e)},toggleDragger:function(e,t){var n=this.canvasModel,i=this.em,r=this.dragger,a=e?"add":"remove";this.getCanvas().classList[a]("".concat(this.ppfx,"is__grabbing")),r||(r=new o.a({getPosition:function(){return{x:n.get("x"),y:n.get("y")}},setPosition:function(e){var t=e.x,i=e.y;n.set({x:t,y:i})},onStart:function(e,t){i.trigger("canvas:move:start",t)},onDrag:function(e,t){i.trigger("canvas:move",t)},onEnd:function(e,t){i.trigger("canvas:move:end",t)}}),this.dragger=r),e?r.start(t):r.stop()},toggleMove:function(e){var t=this.ppfx,n=e?"add":"remove",i=e?"on":"off",o={on:r.t,off:r.s},a=this.getCanvas(),s=["".concat(t,"is__grab")];!e&&s.push("".concat(t,"is__grabbing")),s.forEach((function(e){return a.classList[n](e)})),o[i](document,"keyup",this.onKeyUp),o[i](a,"mousedown",this.enableDragger),o[i](document,"mouseup",this.disableDragger)}}},function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(0);t.default={run:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.component||e.getSelectedAll();return a=Object(o.isArray)(a)?r()(a):[a],e.select(null),a.forEach((function(e){if(!e||!e.get("removable"))return n.em.logWarning("The element is not removable",{component:e});e.remove()})),a}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(0),a=n(16);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default={run:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var r=i.target,s=i.event,l=i.mode,u=i.dragger,d=void 0===u?{}:u,p=r.getEl(),h=c({doc:p.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return n.guidesStatic},guidesTarget:function(){return n.guidesTarget}},d);this.setupGuides(),this.opts=i,this.editor=e,this.em=e.getModel(),this.target=r,this.isTran="translate"==l,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var f=this.dragger;return f?f.setOptions(h):(f=new a.a(h),this.dragger=f),s&&f.start(s),this.toggleDrag(1),this.em.trigger("".concat("dmode",":start"),this.getEventOpts()),f},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach((function(e){var t=e.guide;t&&t.parentNode.removeChild(t)})),this.guides=[]},getGuidesContainer:function(){var e=this,t=this.guidesEl;if(!t){var n=this.editor,i=this.em,r=this.opts,a=n.getConfig("stylePrefix"),s=document.createElement("div"),c=document.createElement("div"),l='<div class="'.concat(a,"guide-info__line ").concat(a,'danger-bg">\n        <div class="').concat(a,"guide-info__content ").concat(a,'danger-color"></div>\n      </div>');(t=document.createElement("div")).className="".concat(a,"guides"),s.className="".concat(a,"guide-info ").concat(a,"guide-info__x"),c.className="".concat(a,"guide-info ").concat(a,"guide-info__y"),s.innerHTML=l,c.innerHTML=l,t.appendChild(s),t.appendChild(c),n.Canvas.getGlobalToolsEl().appendChild(t),this.guidesEl=t,this.elGuideInfoX=s,this.elGuideInfoY=c,this.elGuideInfoContentX=s.querySelector(".".concat(a,"guide-info__content")),this.elGuideInfoContentY=c.querySelector(".".concat(a,"guide-info__content")),i.on("canvas:update frame:scroll",Object(o.debounce)((function(){e.updateGuides(),r.debug&&e.guides.forEach((function(t){return e.renderGuide(t)}))}),200))}return t},getGuidesStatic:function(){var e=this,t=[],n=this.target.getEl(),i=n.parentNode,r=void 0===i?{}:i;return Object(o.each)(r.children,(function(i){return t=t.concat(n!==i?e.getElementGuides(i):[])})),t.concat(this.getElementGuides(r))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(e){var t,n,i=this;(e||this.guides).forEach((function(e){var r=e.origin,a=t===r?n:i.getElementPos(r);t=r,n=a,Object(o.each)(i.getGuidePosUpdate(e,a),(function(t,n){return e[n]=t})),e.originRect=a}))},getGuidePosUpdate:function(e,t){var n={},i=t.top,r=t.height,o=t.left,a=t.width;switch(e.type){case"t":n.y=i;break;case"b":n.y=i+r;break;case"l":n.x=o;break;case"r":n.x=o+a;break;case"x":n.x=o+a/2;break;case"y":n.y=i+r/2}return n},renderGuide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.guide||document.createElement("div"),n="px",i=e.active?2:1,r=t.children[0];return t.style="position: absolute; background-color: ".concat(e.active?"green":"red",";"),t.children.length||((r=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",t.appendChild(r)),e.y?(t.style.width="100%",t.style.height="".concat(i).concat(n),t.style.top="".concat(e.y).concat(n),t.style.left=0):(t.style.width="".concat(i).concat(n),t.style.height="100%",t.style.left="".concat(e.x).concat(n),t.style.top="0".concat(n)),!e.guide&&this.guidesContainer.appendChild(t),t},getElementPos:function(e){return this.editor.Canvas.getElementPos(e,{noScroll:1})},getElementGuides:function(e){var t=this,n=this.opts,i=this.getElementPos(e),r=i.top,o=i.height,a=i.left,s=i.width,l=[{type:"t",y:r},{type:"b",y:r+o},{type:"l",x:a},{type:"r",x:a+s},{type:"x",x:a+s/2},{type:"y",y:r+o/2}].map((function(r){return c({},r,{origin:e,originRect:i,guide:n.debug&&t.renderGuide(r)})}));return l.forEach((function(e){return t.guides.push(e)})),l},getTranslate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=0;return(e||"").split(" ").forEach((function(e){var i=e.trim(),r="translate".concat(t.toUpperCase(),"(");0===i.indexOf(r)&&(n=parseFloat(i.replace(r,"")))})),n},setTranslate:function(e,t,n){var i="translate".concat(t.toUpperCase(),"("),r="".concat(i).concat(n,")"),o=(e||"").split(" ").map((function(e){return 0===e.trim().indexOf(i)&&(e=r),e})).join(" ");return o.indexOf(i)<0&&(o+=" ".concat(r)),o},getPosition:function(){var e=this.target,t=this.isTran,n=e.getStyle(),i=n.left,r=n.top,o=n.transform,a=0,s=0;return t?(a=this.getTranslate(o),s=this.getTranslate(o,"y")):(a=parseFloat(i),s=parseFloat(r)),{x:a,y:s}},setPosition:function(e){var t=e.x,n=e.y,i=e.end,r=e.position,a=e.width,s=e.height,c=this.target,l=this.isTran,u=i?"":1,d="".concat(t).concat("px"),p="".concat(n).concat("px");if(l){var h=c.getStyle().transform||"";return h=this.setTranslate(h,"x",d),h=this.setTranslate(h,"y",p),c.addStyle({transform:h,en:u},{avoidStore:!i})}var f={position:r,width:a,height:s},g={left:d,top:p,en:u};Object(o.keys)(f).forEach((function(e){var t=f[e];t&&(g[e]=t)})),c.addStyle(g,{avoidStore:!i})},_getDragData:function(){var e=this.target;return{target:e,parent:e.parent(),index:e.index()}},onStart:function(){var e=this.target,t=this.editor,n=this.isTran,i=this.opts,r=i.center,o=i.onStart,a=t.Canvas,s=e.getStyle();if(o&&o(this._getDragData()),!n&&"absolute"!==s.position){var c=a.offset(e.getEl()),l=c.left,u=c.top,d=c.width,p=c.height;if(r){var h=a.getMouseRelativeCanvas(event);l=h.x,u=h.y}this.setPosition({x:l,y:u,width:"".concat(d,"px"),height:"".concat(p,"px"),position:"absolute"})}},onDrag:function(){var e=this,t=this.guidesTarget,n=this.opts,i=n.onDrag;this.updateGuides(t),n.debug&&t.forEach((function(t){return e.renderGuide(t)})),n.guidesInfo&&this.renderGuideInfo(t.filter((function(e){return e.active}))),i&&i(this._getDragData())},onEnd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.editor,r=this.opts,o=this.id,a=r.onEnd;a&&a(e,n,c({event:e},n,{},this._getDragData())),i.stopCommand(o),this.hideGuidesInfo(),this.em.trigger("".concat("dmode",":end"),this.getEventOpts())},hideGuidesInfo:function(){var e=this;["X","Y"].forEach((function(t){var n=e["elGuideInfo".concat(t)];n&&(n.style.display="none")}))},renderGuideInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.guidesStatic;this.hideGuidesInfo(),t.forEach((function(t){var i=t.origin,r=t.x,a=e.getElementPos(i),s=Object(o.isUndefined)(r)?"y":"x",l="y"===s,u=a[l?"left":"top"],d=a.rect[l?"left":"top"],p=l?u+a.width:u+a.height,h=l?d+a.rect.width:d+a.rect.height,f=e["elGuideInfo".concat(s.toUpperCase())],g=e["elGuideInfoContent".concat(s.toUpperCase())],m=f.style,v=n.filter((function(e){return e.type===t.type})).map((function(e){var t=e.originRect,n=t.left,i=t.width,r=t.top,o=t.height,a=l?n+i:r+o;return{gap:a<u?u-a:(l?n:r)-p,guide:e}})).filter((function(e){return e.gap>0})).sort((function(e,t){return e.gap-t.gap})).map((function(e){return e.guide}))[0];if(v){var y=v.originRect,b=y.left,w=y.width,x=y.top,E=y.height,_=y.rect,S=l?b<a.left:x<a.top,C=l?b:x,O=l?_.left:_.top,k=l?b+w:x+E,T=l?_.left+_.width:_.top+_.height,P=l?t.y:t.x,j=S?k:p,A="".concat(P,"px"),M=S?u-k:C-p,D=S?d-T:O-h;m.display="",m[l?"top":"left"]=A,m[l?"left":"top"]="".concat(j,"px"),m[l?"width":"height"]="".concat(M,"px"),g.innerHTML="".concat(Math.round(D),"px"),e.em.trigger("".concat("dmode",":active"),c({},e.getEventOpts(),{guide:t,guidesStatic:n,matched:v,posFirst:P,posSecond:j,size:M,sizeRaw:D,elGuideInfo:f,elGuideInfoCnt:g}))}}))},toggleDrag:function(e){var t=this.ppfx,n=this.editor,i=e?"add":"remove",r=["".concat(t,"is__grabbing")],o=n.Canvas,a=o.getBody();r.forEach((function(e){return a.classList[i](e)})),o[e?"startAutoscroll":"stopAutoscroll"]()}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.components(),i=n&&n.at(0);i&&t.push(i)})),t.length&&e.select(t)}}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.Canvas.hasFocus()||n.force){var i=[];e.getSelectedAll().forEach((function(e){for(var t=e.parent();t&&!t.get("selectable");)t=t.parent();t&&i.push(t)})),i.length&&e.select(i)}}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.collection,i=n.indexOf(e),r=n.at(i+1);t.push(r||e)})),t.length&&e.select(t)}}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.collection,i=n.indexOf(e),r=n.at(i-1);t.push(r&&i-1>=0?r:e)})),t.length&&e.select(t)}}}},function(e,t,n){"use strict";n.r(t);var i=n(0);t.default={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.target,o=e.DomComponents,a=r.get("type"),s=o.getWrapper().find('[data-gjs-type="'.concat(a,'"]')).length,c=[];if(!s){var l=e.CssComposer.getAll(),u=r.get("style-signature");u=Object(i.isArray)(u)?u:[u],l.forEach((function(e){var t=e.selectorsToString();u.forEach((function(n){n&&t.indexOf(n)>=0&&c.push(e)}))})),l.remove(c)}return c}}},function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i);t.default={run:function(e){var t=e.getModel(),n=r()(e.getSelectedAll());n.length&&t.set("clipboard",n)}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(1),o=n.n(r),a=n(13),s=o.a.$;t.default=Object(i.extend)({},a.default,{init:function(e){Object(i.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(e){e.stopPropagation();var t=s(e.target);t.data("model").get("removable")&&(t.addClass(this.hoverClass),this.attachBadge(t.get(0)))},stopDelete:function(e){e.stopPropagation(),s(e.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(e){e.stopPropagation();var t=s(e.target);t.data("model").get("removable")&&(t.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(e){this.badge.html("Remove "+e.getName())}})},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i).a.$;t.default={run:function(e,t){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2],t&&t.set&&t.set("active",0);var i=e.getConfig(),o=e.Modal,a=i.stylePrefix;if(this.cm=e.CodeManager||null,!this.$editors){var s=this.buildEditor("htmlmixed","hopscotch","HTML"),c=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=s.el,this.cssEditor=c.el;var l=r('<div class="'.concat(a,'export-dl"></div>'));l.append(s.$el).append(c.$el),this.$editors=l}o.open({title:i.textViewCode,content:this.$editors}).getModel().once("change:open",(function(){return e.stopCommand(n.id)})),this.htmlEditor.setContent(e.getHtml()),this.cssEditor.setContent(e.getCss())},stop:function(e){var t=e.Modal;t&&t.close()},buildEditor:function(e,t,n){var i=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var r=this.codeMirror.clone().set({label:n,codeName:e,theme:t,input:i}),o=new this.cm.EditorView({model:r,config:this.cm.getConfig()}).render().$el;return r.init(i),{el:r,$el:o}}}},function(e,t,n){"use strict";n.r(t);var i=n(0);t.default={isEnabled:function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement?1:0},enable:function(e){var t="";return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?(t="webkit",e.webkitRequestFullscreen()):e.mozRequestFullScreen?(t="moz",e.mozRequestFullScreen()):e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Fullscreen not supported"),t},disable:function(){var e=document;this.isEnabled()&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},fsChanged:function(e,t){var n=(e||"")+"fullscreenchange";this.isEnabled()||(this.stop(null,this.sender),document.removeEventListener(n,this.fsChanged))},run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sender=t;var r=n.target,o=Object(i.isElement)(r)?r:document.querySelector(r),a=this.enable(o||e.getContainer());this.fsChanged=this.fsChanged.bind(this,a),document.addEventListener(a+"fullscreenchange",this.fsChanged),e.trigger("change:canvasOffset")},stop:function(e,t){t&&t.set&&t.set("active",!1),this.disable(),e&&e.trigger("change:canvasOffset")}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(1),o=n.n(r),a=n(3),s=n(13),c=n(25),l=o.a.$;t.default=Object(i.extend)({},c.default,s.default,{init:function(e){s.default.init.apply(this,arguments),Object(i.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=e,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.default.enable.apply(this,t),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var i=this.$wrapper;i.css("cursor","move"),i.on("mousedown",this.initSorter),i.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(e){var t=l(e.target).data("model").get("draggable");t&&(this.cacheEl=null,this.startSelectPosition(e.target,this.frameEl.contentDocument),this.sorter.draggable=t,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),Object(a.t)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(e){var t=e.get("draggable");if(t){this.cacheEl=null;var n=e.view.el;this.startSelectPosition(n,this.frameEl.contentDocument),this.sorter.draggable=t,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(a.t)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(e){this.cacheEl=null;var t=e[e.length-1],n=(this.em.get("currentFrame")||{}).model,i=t.getEl(n),r=i.ownerDocument;this.startSelectPosition(i,r,{onStart:this.onStart}),this.sorter.draggable=t.get("draggable"),this.sorter.toMove=e,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(a.t)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){Object(a.s)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),Object(a.s)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(e,t){},rollback:function(e,t){(27==(e.which||e.keyCode)||t)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=l(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=l(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.default.stop.apply(this,t),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var i=this.$wrapper;i.css("cursor","").unbind().removeClass(this.noSelClass)}})},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.Modal,o=e.AssetManager,a=o.getConfig(),s=o.getContainer(),c=i.modalTitle||e.t("assetManager.modalTitle")||"",l=i.types,u=i.accept;if(o.setTarget(i.target),o.onClick(i.onClick),o.onDblClick(i.onDblClick),o.onSelect(i.onSelect),!this.rendered||l){var d=o.getAll().filter((function(e){return 1}));l&&l.length&&(d=d.filter((function(e){return-1!==l.indexOf(e.get("type"))}))),o.render(d),this.rendered=1}if(u){var p=s.querySelector("input#".concat(a.stylePrefix,"uploadFile"));p&&p.setAttribute("accept",u)}return r.open({title:c,content:s}).getModel().once("change:open",(function(){return e.stopCommand(n.id)})),this},stop:function(e){return e.Modal.close(),this}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=e.BlockManager,i=e.Panels;if(!this.blocks){n.render();var r="views-container",o=document.createElement("div"),a=i.getPanel(r)||i.addPanel({id:r});o.appendChild(n.getContainer()),a.set("appendContent",o).trigger("change:appendContent"),this.blocks=o}this.blocks.style.display="block"},stop:function(){var e=this.blocks;e&&(e.style.display="none")}}},function(e,t,n){"use strict";n.r(t);var i=n(1);n.n(i).a.$,t.default={run:function(e){var t=e.LayerManager,n=e.Panels;if(!this.layers){var i="views-container",r=document.createElement("div"),o=n.getPanel(i)||n.addPanel({id:i});r.appendChild(t.render()),o.set("appendContent",r).trigger("change:appendContent"),this.layers=r}this.layers.style.display="block"},stop:function(){var e=this.layers;e&&(e.style.display="none")}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i).a.$;t.default={run:function(e,t){if(this.sender=t,!this.$cn){var n=e.getConfig(),i=e.Panels;this.$cn=r("<div></div>"),this.$cn2=r("<div></div>"),this.$cn.append(this.$cn2);var o=e.DeviceManager;o&&n.showDevices&&i.addPanel({id:"devices-c"}).set("appendContent",o.render()).trigger("change:appendContent");var a=e.SelectorManager;a&&this.$cn2.append(a.render([])),this.$cn2.append(e.StyleManager.render());var s=e.StyleManager.getConfig().stylePrefix;this.$header=r('<div class="'.concat(s,'header">').concat(e.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),i.getPanel("views-container")?this.panel=i.getPanel("views-container"):this.panel=i.addPanel({id:"views-container"}),this.panel.set("appendContent",this.$cn).trigger("change:appendContent"),this.target=e.editor,this.listenTo(this.target,"component:toggled",this.toggleSm)}this.toggleSm()},toggleSm:function(){var e=this.target,t=this.sender;if(!t||!t.get||t.get("active")){var n=e.get("SelectorManager").getConfig().componentFirst,i=e.getSelectedAll().length;1===i||i>1&&n?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show())}},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i).a.$;t.default={run:function(e,t){this.sender=t;var n=e.getModel(),i=e.Config.stylePrefix,o=e.TraitManager;if(!this.$cn){var a=o.getTraitsViewer(),s=o.getConfig();this.$cn=r("<div></div>"),this.$cn2=r("<div></div>"),this.$cn.append(this.$cn2),this.$header=r("<div>").append('<div class="'.concat(s.stylePrefix,'header">').concat(n.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(i,'traits-label">').concat(n.t("traitManager.label"),"</div>")),this.$cn2.append(a.render().el);var c=e.Panels;(c.getPanel("views-container")?c.getPanel("views-container"):c.addPanel({id:"views-container"})).set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=e.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()},toggleTm:function(){var e=this.sender;e&&e.get&&!e.get("active")||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},function(e,t,n){"use strict";n.r(t);var i=n(0);t.default={run:function(e){var t=e.getModel().get("clipboard"),n=e.getSelected();t&&n&&(e.getSelectedAll().forEach((function(n){if(n){var r,o=n.collection,a=o.indexOf(n)+1,s=t.filter((function(e){return e.get("copyable")}));r=Object(i.contains)(t,n)&&n.get("copyable")?o.add(n.clone(),{at:a}):o.add(s.map((function(e){return e.clone()})),{at:a}),(r=Object(i.isArray)(r)?r:[r]).forEach((function(t){return e.trigger("component:paste",t)}))}})),n.emitUpdate())}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r="sw-visibility";t.default={getPanels:function(e){return this.panels||(this.panels=e.Panels.getPanels()),this.panels},tglPointers:function(e,t){var n=e.Canvas.getBody().querySelectorAll(".".concat(this.ppfx,"no-pointer"));Object(i.each)(n,(function(e){return e.style.pointerEvents=t?"":"all"}))},run:function(e,t){var n=this;this.sender=t,this.shouldRunSwVisibility||(this.shouldRunSwVisibility=e.Commands.isActive(r)),this.shouldRunSwVisibility&&e.stopCommand(r),e.getModel().stopDefault();var i=this.getPanels(e),o=e.Canvas.getElement(),a=e.getEl(),s=e.Config.stylePrefix;if(!this.helper){var c=document.createElement("span");c.className="".concat(s,"off-prv fa fa-eye-slash"),a.appendChild(c),c.onclick=function(){return n.stopCommand()},this.helper=c}this.helper.style.display="inline-block",this.tglPointers(e),i.forEach((function(e){return e.set("visible",!1)}));var l=o.style;l.width="100%",l.height="100%",l.top="0",l.left="0",l.padding="0",l.margin="0",e.refresh()},stop:function(e){var t=this.sender,n=void 0===t?{}:t;n.set&&n.set("active",0);var i=this.getPanels(e);this.shouldRunSwVisibility&&(e.runCommand(r),this.shouldRunSwVisibility=!1),e.getModel().runDefault(),i.forEach((function(e){return e.set("visible",!0)})),e.Canvas.getElement().setAttribute("style",""),this.helper&&(this.helper.style.display="none"),e.refresh(),this.tglPointers(e,1)}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t,n){var i=n||{},r=i.el||"",o=e.Canvas,a=this.canvasResizer,s=i.options||{},c=o.getCanvasView();return s.appendTo=o.getResizerEl(),s.prefix=e.getConfig().stylePrefix,s.posFetcher=c.getElementPos.bind(c),s.mousePosFetcher=o.getMouseRelativePos,a&&!i.forceNew||(this.canvasResizer=e.Utils.Resizer.init(s),a=this.canvasResizer),a.setOptions(s),a.blur(),a.focus(r),a},stop:function(){var e=this.canvasResizer;e&&e.blur()}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(1),a=n.n(o),s=n(0),c=n(3);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var u=a.a.$;t.default={getOffsetMethod:function(e){return"get"+(e||"")+"OffsetViewerEl"},run:function(e,t,n){var i=n||{},o=i.state||"",a=e.getConfig(),d=this.em.getZoomDecimal(),p=i.el||"";if(!a.showOffsets||Object(c.p)(p)||!a.showOffsetsSelected&&"Fixed"==o)e.stopCommand(this.id,n);else{var h=e.Canvas,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i.elPos||h.getElementPos(p));Object(s.isUndefined)(i.top)||(f.top=i.top),Object(s.isUndefined)(i.left)||(f.left=i.left);var g=window.getComputedStyle(p),m=this.ppfx,v=o+"State",y=h[this.getOffsetMethod(o)](n.view);y.style.opacity="";var b=this["marginT"+o],w=this["marginB"+o],x=this["marginL"+o],E=this["marginR"+o],_=this["padT"+o],S=this["padB"+o],C=this["padL"+o],O=this["padR"+o];if(y.childNodes.length&&(this[v]="1",b=y.querySelector("[data-offset-m-t]"),w=y.querySelector("[data-offset-m-b]"),x=y.querySelector("[data-offset-m-l]"),E=y.querySelector("[data-offset-m-r]"),_=y.querySelector("[data-offset-p-t]"),S=y.querySelector("[data-offset-p-b]"),C=y.querySelector("[data-offset-p-l]"),O=y.querySelector("[data-offset-p-r]")),!this[v]){var k=o.toLowerCase(),T=k+"margin-v",P=k+"padding-v",j=u('<div class="'.concat(m,'marginName">')).get(0),A=u('<div class="'.concat(m,'paddingName">')).get(0),M=m+P+"-el",D="".concat(m+T+"-el"," ").concat(m+T),R="".concat(M," ").concat(m+P);b=u('<div class="'.concat(D,'-top"></div>')).get(0),w=u('<div class="'.concat(D,'-bottom"></div>')).get(0),x=u('<div class="'.concat(D,'-left"></div>')).get(0),E=u('<div class="'.concat(D,'-right"></div>')).get(0),_=u('<div class="'.concat(R,'-top"></div>')).get(0),S=u('<div class="'.concat(R,'-bottom"></div>')).get(0),C=u('<div class="'.concat(R,'-left"></div>')).get(0),O=u('<div class="'.concat(R,'-right"></div>')).get(0),this["marginT"+o]=b,this["marginB"+o]=w,this["marginL"+o]=x,this["marginR"+o]=E,this["padT"+o]=_,this["padB"+o]=S,this["padL"+o]=C,this["padR"+o]=O,j.appendChild(b),j.appendChild(w),j.appendChild(x),j.appendChild(E),A.appendChild(_),A.appendChild(S),A.appendChild(C),A.appendChild(O),y.appendChild(j),y.appendChild(A),this[v]="1"}var N=parseFloat(g.marginLeft.replace("px",""))*d,L=parseFloat(g.marginRight.replace("px",""))*d,B=parseFloat(g.marginTop.replace("px",""))*d,I=parseFloat(g.marginBottom.replace("px",""))*d,F=b.style,z=w.style,H=x.style,V=E.style,$=_.style,U=S.style,W=C.style,q=O.style,G=parseFloat(f.left),Y=parseFloat(g.width)*d+"px";F.height=B+"px",F.width=Y,F.top=f.top-B+"px",F.left=G+"px",z.height=I+"px",z.width=Y,z.top=f.top+f.height+"px",z.left=G+"px";var K=f.height+B+I+"px",X=f.top-B+"px";H.height=K,H.width=N+"px",H.top=X,H.left=G-N+"px",V.height=K,V.width=L+"px",V.top=X,V.left=G+f.width+"px";var Z=parseFloat(g.paddingTop)*d;$.height=Z+"px";var J=parseFloat(g.paddingBottom)*d;U.height=J+"px";var Q=f.height-J-Z+"px",ee=f.top+Z+"px";W.height=Q,W.width=parseFloat(g.paddingLeft)*d+"px",W.top=ee;var te=parseFloat(g.paddingRight)*d;q.height=Q,q.width=te+"px",q.top=ee}},stop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n||{},r=i.state||"",o=this.getOffsetMethod(r),a=e.Canvas,s=a[o](n.view);s.style.opacity=0}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){this.toggleVis(e)},stop:function(e){this.toggleVis(e,0)},toggleVis:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e.Commands.isActive("preview")){var i=n?"add":"remove";e.Canvas.getFrames().forEach((function(e){e.view.getBody().classList[i]("".concat(t.ppfx,"dashed"))}))}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o={stylePrefix:"",appendTo:"",sortable:1,hidable:1,hideTextnode:1,root:"",showWrapper:1,showHover:1,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:1},a=n(35),s=n(0);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{name:"LayerManager",init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=l({},o,{},t)).stylePrefix=t.pStylePrefix,e=n.em,this},getConfig:function(){return n},onLoad:function(){t=new a.a({level:0,config:n,opened:n.opened||{},model:e.get("DomComponents").getWrapper()}),e&&e.on("component:selected",this.componentChanged),this.componentChanged()},postRender:function(){var e=n.appendTo,t=n.root;t&&this.setRoot(t),e&&(Object(s.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},setRoot:function(e){return t.setRoot(e),this},getRoot:function(){return t.model},getAll:function(){return t},componentChanged:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i.fromLayers){var r=e.get("opened"),o=e.getSelected(),a=n.scrollLayers,s=o&&o.collection?o.collection.parent:null;for(var c in r)r[c].set("open",0);for(;s;)s.set("open",1),r[s.cid]=s,s=s.collection?s.collection.parent:null;if(o&&a){var l=o.viewLayer&&o.viewLayer.el;l&&l.scrollIntoView(a)}}},render:function(){return t.render().el}}}},function(e,t,n){var i,r,o;
/*!
 * Backbone.Undo.js v0.2
 * 
 * Copyright (c)2013 Oliver Sartun
 * Released under the MIT License
 *
 * Documentation and full license available at
 * https://github.com/osartun/Backbone.Undo.js
 */r=[n(0),n(1)],void 0===(o="function"==typeof(i=function(e,t){var n=Array.prototype.slice;function i(e,t,n){return n.length<=4?e.call(t,n[0],n[1],n[2],n[3]):e.apply(t,n)}function r(e,t){return n.call(e,t)}function o(t,n){return null!=t&&(e.isArray(n)||(n=r(arguments,1)),e.all(n,(function(e){return e in t})))}var a,s,c=(a=!1,s=-1,function(){return a||(s++,a=!0,e.defer((function(){a=!1}))),s});function l(){this.registeredObjects=[],this.cidIndexes=[]}function u(t,n,i,r){for(var o,a=0,s=n.length;a<s;a++)if(o=n[a]){if("on"===t){if(!r.objectRegistry.register(o))continue}else if(!r.objectRegistry.unregister(o))continue;e.isFunction(o[t])&&o[t]("all",i,r)}}function d(t,n){var i=n.type,r=n.undoTypes,o=!r[i]||r[i][t];e.isFunction(o)&&o(n.object,n.before,n.after,n.options)}function p(t,i,r,o,a){if(!(r.isCurrentlyUndoRedoing||"undo"===t&&-1===r.pointer||"redo"===t&&r.pointer===r.length-1)){r.isCurrentlyUndoRedoing=!0;var s,c,l="undo"===t;for(a?c=l&&r.pointer===r.length-1||!l&&-1===r.pointer?e.clone(r.models):n.apply(r.models,l?[0,r.pointer]:[r.pointer,r.length-1]):(s=r.at(l?r.pointer:r.pointer+1),c=o?r.where({magicFusionIndex:s.get("magicFusionIndex")}):[s]),r.pointer+=(l?-1:1)*c.length;s=l?c.pop():c.shift();)s[t]();r.isCurrentlyUndoRedoing=!1,i.trigger(t,i)}}function h(e,t,n,r){if(e.track&&!e.isCurrentlyUndoRedoing&&t in r&&function(e,t){var n=e.condition,r=typeof n;return"function"===r?!!i(n,e,t):"boolean"!==r||n}(r[t],n)){var a=i(r[t].on,r[t],n);if(o(a,"object","before","after")){if(a.type=t,a.magicFusionIndex=c(),a.undoTypes=r,e.pointer<e.length-1)for(var s=e.length-e.pointer-1;s--;)e.pop();e.pointer=e.length,e.add(a),e.length>e.maximumStackLength&&(e.shift(),e.pointer--)}}}l.prototype={isRegistered:function(t){return t&&t.cid?this.registeredObjects[t.cid]:e.contains(this.registeredObjects,t)},register:function(e){return!this.isRegistered(e)&&(e&&e.cid?(this.registeredObjects[e.cid]=e,this.cidIndexes.push(e.cid)):this.registeredObjects.push(e),!0)},unregister:function(t){if(this.isRegistered(t)){if(t&&t.cid)delete this.registeredObjects[t.cid],this.cidIndexes.splice(e.indexOf(this.cidIndexes,t.cid),1);else{var n=e.indexOf(this.registeredObjects,t);this.registeredObjects.splice(n,1)}return!0}return!1},get:function(){return e.map(this.cidIndexes,(function(e){return this.registeredObjects[e]}),this).concat(this.registeredObjects)}};var f={add:{undo:function(e,t,n,i){e.remove(n,i)},redo:function(e,t,n,i){i.index&&(i.at=i.index),e.add(n,i)},on:function(t,n,i){return{object:n,before:void 0,after:t,options:e.clone(i)}}},remove:{undo:function(e,t,n,i){"index"in i&&(i.at=i.index),e.add(t,i)},redo:function(e,t,n,i){e.remove(t,i)},on:function(t,n,i){return{object:n,before:t,after:void 0,options:e.clone(i)}}},change:{undo:function(t,n,i,r){e.isEmpty(n)?e.each(e.keys(i),t.unset,t):(t.set(n),r&&r.unsetData&&r.unsetData.before&&r.unsetData.before.length&&e.each(r.unsetData.before,t.unset,t))},redo:function(t,n,i,r){e.isEmpty(i)?e.each(e.keys(n),t.unset,t):(t.set(i),r&&r.unsetData&&r.unsetData.after&&r.unsetData.after.length&&e.each(r.unsetData.after,t.unset,t))},on:function(t,n){var i=t.changedAttributes(),r=e.keys(i),o=e.pick(t.previousAttributes(),r),a=e.keys(o),s=(n||(n={})).unsetData={after:[],before:[]};return r.length!=a.length&&(r.length>a.length?e.each(r,(function(e){e in o||s.before.push(e)}),this):e.each(a,(function(e){e in i||s.after.push(e)}))),{object:t,before:o,after:i,options:e.clone(n)}}},reset:{undo:function(e,t,n){e.reset(t)},redo:function(e,t,n){e.reset(n)},on:function(t,n){return{object:t,before:n.previousModels,after:e.clone(t.models)}}}};function g(){}function m(t,n,i,r){if("object"==typeof n)return e.each(n,(function(e,n){2===t?m(t,e,i,r):m(t,n,e,i)}));switch(t){case 0:o(i,"undo","redo","on")&&e.all(e.pick(i,"undo","redo","on"),e.isFunction)&&(r[n]=i);break;case 1:r[n]&&e.isObject(i)&&(r[n]=e.extend({},r[n],i));break;case 2:delete r[n]}return this}g.prototype=f;var v=t.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(e){d("undo",this.attributes)},redo:function(e){d("redo",this.attributes)}}),y=t.Collection.extend({model:v,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(e){this.maximumStackLength=e}}),b=t.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(t){this.stack=new y,this.objectRegistry=new l,this.undoTypes=new g,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",(function(e,t){this.stack.setMaxLength(t)}),this),t&&t.track&&this.startTracking(),t&&t.register&&(e.isArray(t.register)||e.isArguments(t.register)?i(this.register,this,t.register):this.register(t.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(e){h(this.stack,e,r(arguments,1),this.undoTypes)},register:function(){u("on",arguments,this._addToStack,this)},unregister:function(){u("off",arguments,this._addToStack,this)},unregisterAll:function(){i(this.unregister,this,this.objectRegistry.get())},undo:function(e){p("undo",this,this.stack,e)},undoAll:function(){p("undo",this,this.stack,!1,!0)},redo:function(e){p("redo",this,this.stack,e)},redoAll:function(){p("redo",this,this.stack,!1,!0)},isAvailable:function(e){var t=this.stack,n=t.length;switch(e){case"undo":return n>0&&t.pointer>-1;case"redo":return n>0&&t.pointer<n-1;default:return!1}},merge:function(t){for(var n,i=e.isArray(t)?t:r(arguments);n=i.pop();)n instanceof b&&n.stack instanceof y&&(n.stack=this.stack)},addUndoType:function(e,t){m(0,e,t,this.undoTypes)},changeUndoType:function(e,t){m(1,e,t,this.undoTypes)},removeUndoType:function(e){m(2,e,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return e.extend(b,{defaults:function(t){e.extend(b.prototype.defaults,t)},addUndoType:function(e,t){m(0,e,t,f)},changeUndoType:function(e,t){m(1,e,t,f)},removeUndoType:function(e){m(2,e,void 0,f)}}),t.UndoManager=b})?i.apply(t,r):i)||(e.exports=o)},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){var i=n(84),r=n(85),o=n(86);e.exports=function(e,t){return i(e)||r(e,t)||o()}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),o=n(2),a=n.n(o),s=n(0),c=n(38),l=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={},i={defaults:{"core:undo":{keys:"+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete"}}};return{keymaster:l.a,name:"Keymaps",getConfig:function(){return t},init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=d({},i,{},n),e=t.em,this.em=e,this},onLoad:function(){var e=t.defaults;for(var n in e){var i=e[n];this.add(n,i.keys,i.handler)}},add:function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this.em,c=a.get("Commands"),u=a.getEditor(),d=a.get("Canvas"),p={id:e,keys:t,handler:i},h=n[e];return h&&this.remove(e),n[e]=p,l()(t,(function(t,n){var l={event:t,h:n};if(i=Object(s.isString)(i)?c.get(i):i,o.prevent&&d.getCanvasView().preventDefault(t),!a.isEditing()&&!u.Canvas.isInputFocused()||o.force){"object"==r()(i)?i.run(u,0,l):i(u,0,l);var p=[e,n.shortcut,t];a.trigger.apply(a,["keymap:emit"].concat(p)),a.trigger.apply(a,["keymap:emit:".concat(e)].concat(p))}})),a.trigger("keymap:add",p),p},get:function(e){return n[e]},getAll:function(){return n},remove:function(e){var t=this.em,i=this.get(e);if(i)return delete n[e],l.a.unbind(i.keys),t&&t.trigger("keymap:remove",i),i},removeAll:function(){var e=this;return Object.keys(n).forEach((function(t){return e.remove(t)})),this}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(67),a=n.n(o);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,i,r={maximumStackLength:500};return{name:"UndoManager",init:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=c({},o,{},r),e=n.em,this.em=e,(t=new a.a(c({track:!0,register:[]},n))).changeUndoType("change",{condition:!1}),t.changeUndoType("add",{on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.avoidStore)return{object:t,before:void 0,after:e,options:c({},n)}}}),t.changeUndoType("remove",{on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.avoidStore)return{object:t,before:e,after:void 0,options:c({},n)}}});var s={on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i&&(i=e.previousAttributes()),!n.avoidStore){var r={object:e,before:i,after:e.toJSON()};return i=null,r}},undo:function(e,t,n,i){e.set(t)},redo:function(e,t,n,i){e.set(n)}},l=["style","attributes","content","src"];return l.forEach((function(e){return t.addUndoType("change:".concat(e),s)})),t.on("undo redo",(function(){return e.trigger("component:toggled change:canvasOffset")})),["undo","redo"].forEach((function(n){return t.on(n,(function(){return e.trigger(n)}))})),this},getConfig:function(){return n},add:function(e){return t.register(e),this},remove:function(e){return t.unregister(e),this},removeAll:function(){return t.unregisterAll(),this},start:function(){return t.startTracking(),this},stop:function(){return t.stopTracking(),this},undo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!e.isEditing()&&t.undo(n),this},undoAll:function(){return t.undoAll(),this},redo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!e.isEditing()&&t.redo(n),this},redoAll:function(){return t.redoAll(),this},hasUndo:function(){return t.isAvailable("undo")},hasRedo:function(){return t.isAvailable("redo")},getStack:function(){return t.stack},getStackGroup:function(){var e=[],t=[];return this.getStack().forEach((function(n){var i=n.get("magicFusionIndex");t.indexOf(i)<0&&(t.push(i),e.push(n))})),e},getPointer:function(){return this.getStack().pointer},clear:function(){return t.clear(),this},getInstance:function(){return t}}}},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(77),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(24))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,a,s,c=1,l={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(f,0,e)},p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[c]=r,i(c),c++},p.clearImmediate=h}function h(e){delete l[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(24),n(78))},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}},function(e,t,n){!function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},n={};function i(e,t){var i=e.match(function(e){return n[e]||(n[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(t));return i?/^\s*(.*?)\s*$/.exec(i[2])[1]:""}function r(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var n in e)for(var i=t[n]||(t[n]=[]),r=e[n],o=r.length-1;o>=0;o--)i.unshift(r[o])}e.defineMode("htmlmixed",(function(n,a){var s=e.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:a.multilineTagIndentFactor,multilineTagIndentPastTag:a.multilineTagIndentPastTag}),c={},l=a&&a.tags,u=a&&a.scriptTypes;if(o(t,c),l&&o(l,c),u)for(var d=u.length-1;d>=0;d--)c.script.unshift(["type",u[d].matches,u[d].mode]);function p(t,o){var a,l=s.token(t,o.htmlState),u=/\btag\b/.test(l);if(u&&!/[<>\s\/]/.test(t.current())&&(a=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&c.hasOwnProperty(a))o.inTag=a+" ";else if(o.inTag&&u&&/>$/.test(t.current())){var d=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var h=">"==t.current()&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!r[0]||r[1].test(i(t,r[0])))return r[2]}}(c[d[1]],d[2]),f=e.getMode(n,h),g=r(d[1],!0),m=r(d[1],!1);o.token=function(e,t){return e.match(g,!1)?(t.token=p,t.localState=t.localMode=null,null):function(e,t,n){var i=e.current(),r=i.search(t);return r>-1?e.backUp(i.length-r):i.match(/<\/?$/)&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}(e,m,t.localMode.token(e,t.localState))},o.localMode=f,o.localState=e.startState(f,s.indent(o.htmlState,"",""))}else o.inTag&&(o.inTag+=t.current(),t.eol()&&(o.inTag+=" "));return l}return{startState:function(){return{token:p,inTag:null,localMode:null,localState:null,htmlState:e.startState(s)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,i){return!t.localMode||/^\s*<\//.test(n)?s.indent(t.htmlState,n,i):t.localMode.indent?t.localMode.indent(t.localState,n,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}(n(12),n(81),n(82),n(41))},function(e,t,n){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(i,r){var o,a,s=i.indentUnit,c={},l=r.htmlMode?t:n;for(var u in l)c[u]=l[u];for(var u in r)c[u]=r[u];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();return"<"==i?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(h("atom","]]>")):null:e.match("--")?n(h("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(function e(t){return function(n,i){for(var r;null!=(r=n.next());){if("<"==r)return i.tokenize=e(t+1),i.tokenize(n,i);if(">"==r){if(1==t){i.tokenize=d;break}return i.tokenize=e(t-1),i.tokenize(n,i)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=h("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=p,"tag bracket"):"&"==i?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function p(e,t){var n,i,r=e.next();if(">"==r||"/"==r&&e.eat(">"))return t.tokenize=d,o=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return o="equals",null;if("<"==r){t.tokenize=d,t.state=v,t.tagName=t.tagStart=null;var a=t.tokenize(e,t);return a?a+" tag error":"tag error"}return/[\'\"]/.test(r)?(t.tokenize=(n=r,(i=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=p;break}return"string"}).isInAttribute=!0,i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=d;break}n.next()}return e}}function f(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(c.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!c.contextGrabbers.hasOwnProperty(n)||!c.contextGrabbers[n].hasOwnProperty(t))return;g(e)}}function v(e,t,n){return"openTag"==e?(n.tagStart=t.column(),y):"closeTag"==e?b:v}function y(e,t,n){return"word"==e?(n.tagName=t.current(),a="tag",E):c.allowMissingTagName&&"endTag"==e?(a="tag bracket",E(e,0,n)):(a="error",y)}function b(e,t,n){if("word"==e){var i=t.current();return n.context&&n.context.tagName!=i&&c.implicitlyClosed.hasOwnProperty(n.context.tagName)&&g(n),n.context&&n.context.tagName==i||!1===c.matchClosing?(a="tag",w):(a="tag error",x)}return c.allowMissingTagName&&"endTag"==e?(a="tag bracket",w(e,0,n)):(a="error",x)}function w(e,t,n){return"endTag"!=e?(a="error",w):(g(n),v)}function x(e,t,n){return a="error",w(e,0,n)}function E(e,t,n){if("word"==e)return a="attribute",_;if("endTag"==e||"selfcloseTag"==e){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||c.autoSelfClosers.hasOwnProperty(i)?m(n,i):(m(n,i),n.context=new f(n,i,r==n.indented)),v}return a="error",E}function _(e,t,n){return"equals"==e?S:(c.allowMissing||(a="error"),E(e,0,n))}function S(e,t,n){return"string"==e?C:"word"==e&&c.allowUnquoted?(a="string",E):(a="error",E(e,0,n))}function C(e,t,n){return"string"==e?C:E(e,0,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:v,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(a=null,t.state=t.state(o||n,e,t),a&&(n="error"==a?n+" error":a)),n},indent:function(t,n,i){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+s;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=p&&t.tokenize!=d)return i?i.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==c.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+s*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!c.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(o)for(;r;){var a=c.contextGrabbers[r.tagName];if(!a||!a.hasOwnProperty(o[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+s:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=E)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)n.tagName&&t.push(n.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(12))},function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var i,r,o=t.indentUnit,a=n.statementIndent,s=n.jsonld,c=n.json||s,l=n.typescript,u=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("keyword d"),o=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),p=/[+\-*&%=<>!?|~^@]/,h=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function f(e,t,n){return i=e,r=n,t}function g(e,t){var n,i=e.next();if('"'==i||"'"==i)return t.tokenize=(n=i,function(e,t){var i,r=!1;if(s&&"@"==e.peek()&&e.match(h))return t.tokenize=g,f("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=n||r);)r=!r&&"\\"==i;return r||(t.tokenize=g),f("string","string")}),t.tokenize(e,t);if("."==i&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return f("number","number");if("."==i&&e.match(".."))return f("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return f(i);if("="==i&&e.eat(">"))return f("=>","operator");if("0"==i&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return f("number","number");if(/\d/.test(i))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),f("number","number");if("/"==i)return e.eat("*")?(t.tokenize=m,m(e,t)):e.eat("/")?(e.skipToEnd(),f("comment","comment")):Ge(e,t,1)?(function(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),f("regexp","string-2")):(e.eat("="),f("operator","operator",e.current()));if("`"==i)return t.tokenize=v,v(e,t);if("#"==i)return e.skipToEnd(),f("error","error");if("<"==i&&e.match("!--")||"-"==i&&e.match("->"))return e.skipToEnd(),f("comment","comment");if(p.test(i))return">"==i&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=i&&"="!=i||e.eat("="):/[<>*+\-]/.test(i)&&(e.eat(i),">"==i&&e.eat(i))),f("operator","operator",e.current());if(u.test(i)){e.eatWhile(u);var r=e.current();if("."!=t.lastType){if(d.propertyIsEnumerable(r)){var o=d[r];return f(o.type,o.style,r)}if("async"==r&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return f("async","keyword",r)}return f("variable","variable",r)}}function m(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=g;break}i="*"==n}return f("comment","comment")}function v(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}i=!i&&"\\"==n}return f("quasi","string-2",e.current())}function y(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(l){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var r=0,o=!1,a=n-1;a>=0;--a){var s=e.string.charAt(a),c="([{}])".indexOf(s);if(c>=0&&c<3){if(!r){++a;break}if(0==--r){"("==s&&(o=!0);break}}else if(c>=3&&c<6)++r;else if(u.test(s))o=!0;else if(/["'\/`]/.test(s))for(;;--a){if(0==a)return;if(e.string.charAt(a-1)==s&&"\\"!=e.string.charAt(a-2)){a--;break}}else if(o&&!r){++a;break}}o&&!r&&(t.fatArrowAt=a)}}var b={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function x(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}var E={state:null,column:null,marked:null,cc:null};function _(){for(var e=arguments.length-1;e>=0;e--)E.cc.push(arguments[e])}function S(){return _.apply(null,arguments),!0}function C(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function O(e){var t=E.state;if(E.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=function e(t,n){if(n){if(n.block){var i=e(t,n.prev);return i?i==n.prev?n:new T(i,n.vars,!0):null}return C(t,n.vars)?n:new T(n.prev,new P(t,n.vars),!1)}return null}(e,t.context);if(null!=i)return void(t.context=i)}else if(!C(e,t.localVars))return void(t.localVars=new P(e,t.localVars));n.globalVars&&!C(e,t.globalVars)&&(t.globalVars=new P(e,t.globalVars))}function k(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function T(e,t,n){this.prev=e,this.vars=t,this.block=n}function P(e,t){this.name=e,this.next=t}var j=new P("this",new P("arguments",null));function A(){E.state.context=new T(E.state.context,E.state.localVars,!1),E.state.localVars=j}function M(){E.state.context=new T(E.state.context,E.state.localVars,!0),E.state.localVars=null}function D(){E.state.localVars=E.state.context.vars,E.state.context=E.state.context.prev}function R(e,t){var n=function(){var n=E.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new w(i,E.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function N(){var e=E.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function L(e){return function t(n){return n==e?S():";"==e||"}"==n||")"==n||"]"==n?_():S(t)}}function B(e,t){return"var"==e?S(R("vardef",t),ye,L(";"),N):"keyword a"==e?S(R("form"),H,B,N):"keyword b"==e?S(R("form"),B,N):"keyword d"==e?E.stream.match(/^\s*$/,!1)?S():S(R("stat"),$,L(";"),N):"debugger"==e?S(L(";")):"{"==e?S(R("}"),M,oe,N,D):";"==e?S():"if"==e?("else"==E.state.lexical.info&&E.state.cc[E.state.cc.length-1]==N&&E.state.cc.pop()(),S(R("form"),H,B,N,Se)):"function"==e?S(Te):"for"==e?S(R("form"),Ce,B,N):"class"==e||l&&"interface"==t?(E.marked="keyword",S(R("form","class"==e?e:t),De,N)):"variable"==e?l&&"declare"==t?(E.marked="keyword",S(B)):l&&("module"==t||"enum"==t||"type"==t)&&E.stream.match(/^\s*\w/,!1)?(E.marked="keyword","enum"==t?S(We):"type"==t?S(je,L("operator"),ue,L(";")):S(R("form"),be,L("{"),R("}"),oe,N,N)):l&&"namespace"==t?(E.marked="keyword",S(R("form"),F,B,N)):l&&"abstract"==t?(E.marked="keyword",S(B)):S(R("stat"),J):"switch"==e?S(R("form"),H,L("{"),R("}","switch"),M,oe,N,N,D):"case"==e?S(F,L(":")):"default"==e?S(L(":")):"catch"==e?S(R("form"),A,I,B,N,D):"export"==e?S(R("stat"),Be,N):"import"==e?S(R("stat"),Fe,N):"async"==e?S(B):"@"==t?S(F,B):_(R("stat"),F,L(";"),N)}function I(e){if("("==e)return S(Ae,L(")"))}function F(e,t){return V(e,t,!1)}function z(e,t){return V(e,t,!0)}function H(e){return"("!=e?_():S(R(")"),F,L(")"),N)}function V(e,t,n){if(E.state.fatArrowAt==E.stream.start){var i=n?K:Y;if("("==e)return S(A,R(")"),ie(Ae,")"),N,L("=>"),i,D);if("variable"==e)return _(A,be,L("=>"),i,D)}var r=n?W:U;return b.hasOwnProperty(e)?S(r):"function"==e?S(Te,r):"class"==e||l&&"interface"==t?(E.marked="keyword",S(R("form"),Me,N)):"keyword c"==e||"async"==e?S(n?z:F):"("==e?S(R(")"),$,L(")"),N,r):"operator"==e||"spread"==e?S(n?z:F):"["==e?S(R("]"),Ue,N,r):"{"==e?re(ee,"}",null,r):"quasi"==e?_(q,r):"new"==e?S(function(e){return function(t){return"."==t?S(e?Z:X):"variable"==t&&l?S(ge,e?W:U):_(e?z:F)}}(n)):"import"==e?S(F):S()}function $(e){return e.match(/[;\}\)\],]/)?_():_(F)}function U(e,t){return","==e?S(F):W(e,t,!1)}function W(e,t,n){var i=0==n?U:W,r=0==n?F:z;return"=>"==e?S(A,n?K:Y,D):"operator"==e?/\+\+|--/.test(t)||l&&"!"==t?S(i):l&&"<"==t&&E.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?S(R(">"),ie(ue,">"),N,i):"?"==t?S(F,L(":"),r):S(r):"quasi"==e?_(q,i):";"!=e?"("==e?re(z,")","call",i):"."==e?S(Q,i):"["==e?S(R("]"),$,L("]"),N,i):l&&"as"==t?(E.marked="keyword",S(ue,i)):"regexp"==e?(E.state.lastType=E.marked="operator",E.stream.backUp(E.stream.pos-E.stream.start-1),S(r)):void 0:void 0}function q(e,t){return"quasi"!=e?_():"${"!=t.slice(t.length-2)?S(q):S(F,G)}function G(e){if("}"==e)return E.marked="string-2",E.state.tokenize=v,S(q)}function Y(e){return y(E.stream,E.state),_("{"==e?B:F)}function K(e){return y(E.stream,E.state),_("{"==e?B:z)}function X(e,t){if("target"==t)return E.marked="keyword",S(U)}function Z(e,t){if("target"==t)return E.marked="keyword",S(W)}function J(e){return":"==e?S(N,B):_(U,L(";"),N)}function Q(e){if("variable"==e)return E.marked="property",S()}function ee(e,t){return"async"==e?(E.marked="property",S(ee)):"variable"==e||"keyword"==E.style?(E.marked="property","get"==t||"set"==t?S(te):(l&&E.state.fatArrowAt==E.stream.start&&(n=E.stream.match(/^\s*:\s*/,!1))&&(E.state.fatArrowAt=E.stream.pos+n[0].length),S(ne))):"number"==e||"string"==e?(E.marked=s?"property":E.style+" property",S(ne)):"jsonld-keyword"==e?S(ne):l&&k(t)?(E.marked="keyword",S(ee)):"["==e?S(F,ae,L("]"),ne):"spread"==e?S(z,ne):"*"==t?(E.marked="keyword",S(ee)):":"==e?_(ne):void 0;var n}function te(e){return"variable"!=e?_(ne):(E.marked="property",S(Te))}function ne(e){return":"==e?S(z):"("==e?_(Te):void 0}function ie(e,t,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var a=E.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),S((function(n,i){return n==t||i==t?_():_(e)}),i)}return r==t||o==t?S():n&&n.indexOf(";")>-1?_(e):S(L(t))}return function(n,r){return n==t||r==t?S():_(e,i)}}function re(e,t,n){for(var i=3;i<arguments.length;i++)E.cc.push(arguments[i]);return S(R(t,n),ie(e,t),N)}function oe(e){return"}"==e?S():_(B,oe)}function ae(e,t){if(l){if(":"==e)return S(ue);if("?"==t)return S(ae)}}function se(e,t){if(l&&(":"==e||"in"==t))return S(ue)}function ce(e){if(l&&":"==e)return E.stream.match(/^\s*\w+\s+is\b/,!1)?S(F,le,ue):S(ue)}function le(e,t){if("is"==t)return E.marked="keyword",S()}function ue(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(E.marked="keyword",S("typeof"==t?z:ue)):"variable"==e||"void"==t?(E.marked="type",S(fe)):"|"==t||"&"==t?S(ue):"string"==e||"number"==e||"atom"==e?S(fe):"["==e?S(R("]"),ie(ue,"]",","),N,fe):"{"==e?S(R("}"),ie(pe,"}",",;"),N,fe):"("==e?S(ie(he,")"),de,fe):"<"==e?S(ie(ue,">"),ue):void 0}function de(e){if("=>"==e)return S(ue)}function pe(e,t){return"variable"==e||"keyword"==E.style?(E.marked="property",S(pe)):"?"==t||"number"==e||"string"==e?S(pe):":"==e?S(ue):"["==e?S(L("variable"),se,L("]"),pe):"("==e?_(Pe,pe):void 0}function he(e,t){return"variable"==e&&E.stream.match(/^\s*[?:]/,!1)||"?"==t?S(he):":"==e?S(ue):"spread"==e?S(he):_(ue)}function fe(e,t){return"<"==t?S(R(">"),ie(ue,">"),N,fe):"|"==t||"."==e||"&"==t?S(ue):"["==e?S(ue,L("]"),fe):"extends"==t||"implements"==t?(E.marked="keyword",S(ue)):"?"==t?S(ue,L(":"),ue):void 0}function ge(e,t){if("<"==t)return S(R(">"),ie(ue,">"),N,fe)}function me(){return _(ue,ve)}function ve(e,t){if("="==t)return S(ue)}function ye(e,t){return"enum"==t?(E.marked="keyword",S(We)):_(be,ae,Ee,_e)}function be(e,t){return l&&k(t)?(E.marked="keyword",S(be)):"variable"==e?(O(t),S()):"spread"==e?S(be):"["==e?re(xe,"]"):"{"==e?re(we,"}"):void 0}function we(e,t){return"variable"!=e||E.stream.match(/^\s*:/,!1)?("variable"==e&&(E.marked="property"),"spread"==e?S(be):"}"==e?_():"["==e?S(F,L("]"),L(":"),we):S(L(":"),be,Ee)):(O(t),S(Ee))}function xe(){return _(be,Ee)}function Ee(e,t){if("="==t)return S(z)}function _e(e){if(","==e)return S(ye)}function Se(e,t){if("keyword b"==e&&"else"==t)return S(R("form","else"),B,N)}function Ce(e,t){return"await"==t?S(Ce):"("==e?S(R(")"),Oe,N):void 0}function Oe(e){return"var"==e?S(ye,ke):"variable"==e?S(ke):_(ke)}function ke(e,t){return")"==e?S():";"==e?S(ke):"in"==t||"of"==t?(E.marked="keyword",S(F,ke)):_(F,ke)}function Te(e,t){return"*"==t?(E.marked="keyword",S(Te)):"variable"==e?(O(t),S(Te)):"("==e?S(A,R(")"),ie(Ae,")"),N,ce,B,D):l&&"<"==t?S(R(">"),ie(me,">"),N,Te):void 0}function Pe(e,t){return"*"==t?(E.marked="keyword",S(Pe)):"variable"==e?(O(t),S(Pe)):"("==e?S(A,R(")"),ie(Ae,")"),N,ce,D):l&&"<"==t?S(R(">"),ie(me,">"),N,Pe):void 0}function je(e,t){return"keyword"==e||"variable"==e?(E.marked="type",S(je)):"<"==t?S(R(">"),ie(me,">"),N):void 0}function Ae(e,t){return"@"==t&&S(F,Ae),"spread"==e?S(Ae):l&&k(t)?(E.marked="keyword",S(Ae)):l&&"this"==e?S(ae,Ee):_(be,ae,Ee)}function Me(e,t){return"variable"==e?De(e,t):Re(e,t)}function De(e,t){if("variable"==e)return O(t),S(Re)}function Re(e,t){return"<"==t?S(R(">"),ie(me,">"),N,Re):"extends"==t||"implements"==t||l&&","==e?("implements"==t&&(E.marked="keyword"),S(l?ue:F,Re)):"{"==e?S(R("}"),Ne,N):void 0}function Ne(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||l&&k(t))&&E.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(E.marked="keyword",S(Ne)):"variable"==e||"keyword"==E.style?(E.marked="property",S(l?Le:Te,Ne)):"number"==e||"string"==e?S(l?Le:Te,Ne):"["==e?S(F,ae,L("]"),l?Le:Te,Ne):"*"==t?(E.marked="keyword",S(Ne)):l&&"("==e?_(Pe,Ne):";"==e||","==e?S(Ne):"}"==e?S():"@"==t?S(F,Ne):void 0}function Le(e,t){if("?"==t)return S(Le);if(":"==e)return S(ue,Ee);if("="==t)return S(z);var n=E.state.lexical.prev;return _(n&&"interface"==n.info?Pe:Te)}function Be(e,t){return"*"==t?(E.marked="keyword",S($e,L(";"))):"default"==t?(E.marked="keyword",S(F,L(";"))):"{"==e?S(ie(Ie,"}"),$e,L(";")):_(B)}function Ie(e,t){return"as"==t?(E.marked="keyword",S(L("variable"))):"variable"==e?_(z,Ie):void 0}function Fe(e){return"string"==e?S():"("==e?_(F):_(ze,He,$e)}function ze(e,t){return"{"==e?re(ze,"}"):("variable"==e&&O(t),"*"==t&&(E.marked="keyword"),S(Ve))}function He(e){if(","==e)return S(ze,He)}function Ve(e,t){if("as"==t)return E.marked="keyword",S(ze)}function $e(e,t){if("from"==t)return E.marked="keyword",S(F)}function Ue(e){return"]"==e?S():_(ie(z,"]"))}function We(){return _(R("form"),be,L("{"),R("}"),ie(qe,"}"),N,N)}function qe(){return _(be,Ee)}function Ge(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return D.lex=!0,N.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new w((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new T(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),y(e,t)),t.tokenize!=m&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==i?n:(t.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",function(e,t,n,i,r){var o=e.cc;for(E.state=e,E.stream=r,E.marked=null,E.cc=o,E.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():c?F:B)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return E.marked?E.marked:"variable"==n&&x(e,i)?"variable-2":t}}(t,n,i,r,e))},indent:function(t,i){if(t.tokenize==m)return e.Pass;if(t.tokenize!=g)return 0;var r,s=i&&i.charAt(0),c=t.lexical;if(!/^\s*else\b/.test(i))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==N)c=c.prev;else if(u!=Se)break}for(;("stat"==c.type||"form"==c.type)&&("}"==s||(r=t.cc[t.cc.length-1])&&(r==U||r==W)&&!/^[,\.=+\-*:?[\(]/.test(i));)c=c.prev;a&&")"==c.type&&"stat"==c.prev.type&&(c=c.prev);var d=c.type,h=s==d;return"vardef"==d?c.indented+("operator"==t.lastType||","==t.lastType?c.info.length+1:0):"form"==d&&"{"==s?c.indented:"form"==d?c.indented+o:"stat"==d?c.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||p.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,i)?a||o:0):"switch"!=c.info||h||0==n.doubleIndentSwitch?c.align?c.column+(h?0:1):c.indented+(h?0:o):c.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:s,jsonMode:c,expressionAllowed:Ge,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=F&&t!=z||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(12))},function(e,t,n){!function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,i){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):(";"!=t||!i.lexical||")"!=i.lexical.type)&&/^[;{}]$/.test(t)&&!/^;/.test(n)}});var t=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(e,n,i,r){var o=!1;return"html"==this.configuration&&(o=!!r.context&&t.test(r.context.tagName)),!o&&("tag"==e&&/>$/.test(n)&&r.context||/^</.test(i))}}),e.defineExtension("commentRange",(function(t,n,i){var r=this,o=e.innerMode(r.getMode(),r.getTokenAt(n).state).mode;r.operation((function(){if(t)r.replaceRange(o.commentEnd,i),r.replaceRange(o.commentStart,n),n.line==i.line&&n.ch==i.ch&&r.setCursor(n.line,n.ch+o.commentStart.length);else{var e=r.getRange(n,i),a=e.indexOf(o.commentStart),s=e.lastIndexOf(o.commentEnd);a>-1&&s>-1&&s>a&&(e=e.substr(0,a)+e.substring(a+o.commentStart.length,s)+e.substr(s+o.commentEnd.length)),r.replaceRange(e,n,i)}}))})),e.defineExtension("autoIndentRange",(function(e,t){var n=this;this.operation((function(){for(var i=e.line;i<=t.line;i++)n.indentLine(i,"smart")}))})),e.defineExtension("autoFormatRange",(function(t,n){var i=this,r=i.getMode(),o=i.getRange(t,n).split("\n"),a=e.copyState(r,i.getTokenAt(t).state),s=i.getOption("tabSize"),c="",l=0,u=0===t.ch;function d(){c+="\n",u=!0,++l}for(var p=0;p<o.length;++p){for(var h=new e.StringStream(o[p],s);!h.eol();){var f=e.innerMode(r,a),g=r.token(h,a),m=h.current();h.start=h.pos,u&&!/\S/.test(m)||(c+=m,u=!1),!u&&f.mode.newlineAfterToken&&f.mode.newlineAfterToken(g,m,h.string.slice(h.pos)||o[p+1]||"",f.state)&&d()}!h.pos&&r.blankLine&&r.blankLine(a),!u&&p<o.length-1&&d()}i.operation((function(){i.replaceRange(c,t,n);for(var e=t.line+1,r=t.line+l;e<=r;++e)i.indentLine(e,"smart");i.setSelection(t,i.getCursor(!1))}))}))}(n(12))},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),o=n(35),a=n(4);t.default=r.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=e;var t=e.config||{};this.level=e.level,this.config=t,this.preview=e.preview,this.ppfx=t.pStylePrefix||"",this.pfx=t.stylePrefix||"",this.parent=e.parent,this.parentView=e.parentView;var n=this.pfx,i=this.ppfx,r=this.parent,o=this.collection;this.listenTo(o,"add",this.addTo),this.listenTo(o,"reset resetNavigator",this.render),this.listenTo(o,"remove",this.removeChildren),this.className="".concat(n,"layers");var s=t.em;if(t.sortable&&!this.opt.sorter){var c=s.get("Utils");this.opt.sorter=new c.Sorter({container:t.sortContainer||this.el,containerSel:".".concat(this.className),itemSel:".".concat(n,"layer"),ignoreViewChildren:1,onEndMove:function(e,t,n){var i=t.getSourceModel();s.setSelected(i,{forceChange:1}),s.trigger("".concat(a.eventDrag,":end"),n)},avoidSelectOnEnd:1,nested:1,ppfx:i,pfx:n})}this.sorter=this.opt.sorter||"",this.$el.data("collection",o),r&&this.$el.data("model",r)},removeChildren:function(e){var t=e.viewLayer;t&&(t.remove(),e.viewLayer=0)},addTo:function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},addToCollection:function(e,t,n){var i=this.level,r=this.parentView,a=t||null,s=new(0,o.a)({level:i,model:e,parentView:r,config:this.config,sorter:this.sorter,isCountable:this.isCountable,opened:this.opt.opened}).render().el;if(a)a.appendChild(s);else if(void 0!==n){var c="before";this.$el.children().length==n&&(n--,c="after"),n<0?this.$el.append(s):this.$el.children().eq(n)[c](s)}else this.$el.append(s);return s},isCountable:function(e,t){var n=e.get("type"),i=e.get("tagName");return!(("textnode"==n||"br"==i)&&t||!e.get("layerable"))},render:function(){var e=this,t=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each((function(n){return e.addToCollection(n,t)})),n.appendChild(t),n.className=this.className,this}})},function(e,t,n){var i={"./CanvasClear":42,"./CanvasClear.js":42,"./CanvasMove":43,"./CanvasMove.js":43,"./CommandAbstract":21,"./CommandAbstract.js":21,"./ComponentDelete":44,"./ComponentDelete.js":44,"./ComponentDrag":45,"./ComponentDrag.js":45,"./ComponentEnter":46,"./ComponentEnter.js":46,"./ComponentExit":47,"./ComponentExit.js":47,"./ComponentNext":48,"./ComponentNext.js":48,"./ComponentPrev":49,"./ComponentPrev.js":49,"./ComponentStyleClear":50,"./ComponentStyleClear.js":50,"./CopyComponent":51,"./CopyComponent.js":51,"./DeleteComponent":52,"./DeleteComponent.js":52,"./ExportTemplate":53,"./ExportTemplate.js":53,"./Fullscreen":54,"./Fullscreen.js":54,"./MoveComponent":55,"./MoveComponent.js":55,"./OpenAssets":56,"./OpenAssets.js":56,"./OpenBlocks":57,"./OpenBlocks.js":57,"./OpenLayers":58,"./OpenLayers.js":58,"./OpenStyleManager":59,"./OpenStyleManager.js":59,"./OpenTraitManager":60,"./OpenTraitManager.js":60,"./PasteComponent":61,"./PasteComponent.js":61,"./Preview":62,"./Preview.js":62,"./Resize":63,"./Resize.js":63,"./SelectComponent":13,"./SelectComponent.js":13,"./SelectPosition":25,"./SelectPosition.js":25,"./ShowOffset":64,"./ShowOffset.js":64,"./SwitchVisibility":65,"./SwitchVisibility.js":65};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=88},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),o=n(2),a=n.n(o),s=n(1),c=n.n(s),l=n(0),u={stylePrefix:"comp-",wrapperId:"wrapper",wrapperName:"Body",wrapper:{removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]},components:[],draggableComponents:1,storeWrapper:0,processor:0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]},d=n(4),p=n(20),h=n(5),f=n(34);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var m=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{type:"cell",tagName:"td",draggable:["tr"]})},{isComponent:function(e){var t="",n=e.tagName;return"TD"!=n&&"TH"!=n||(t={type:"cell",tagName:n.toLowerCase()}),t}}),v=h.default.extend({});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var b=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{tagName:"tr",draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},{isComponent:function(e){return"TR"==e.tagName&&!0}}),w=h.default.extend({});function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var E=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{type:"table",tagName:"table",droppable:["tbody","thead","tfoot"]}),initialize:function(e,t){d.default.prototype.initialize.apply(this,arguments);var n=this.get("components");!n.length&&n.add({type:"tbody"})}},{isComponent:function(e){var t="";return"TABLE"==e.tagName&&(t={type:"table"}),t}}),_=h.default.extend({events:{}});function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var C=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{type:"tbody",tagName:"tbody",draggable:["table"],droppable:["tr"],columns:1,rows:1}),initialize:function(e,t){d.default.prototype.initialize.apply(this,arguments);var n=this.get("components"),i=this.get("columns"),r=this.get("rows");if(!n.length){for(var o=[];r--;){for(var a=[],s=i;s--;)a.push({type:"cell",classes:["cell"]});o.push({type:"row",classes:["row"],components:a})}n.add(o)}}},{isComponent:function(e){var t="";return"TBODY"==e.tagName&&(t={type:"tbody"}),t}});function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var k=C.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},C.prototype.defaults,{type:"thead",tagName:"thead"})},{isComponent:function(e){var t="";return"THEAD"==e.tagName&&(t={type:"thead"}),t}}),T=h.default.extend({}),P=h.default.extend({});function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var A=C.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},C.prototype.defaults,{type:"tfoot",tagName:"tfoot"})},{isComponent:function(e){var t="";return"TFOOT"==e.tagName&&(t={type:"tfoot"}),t}}),M=h.default.extend({});function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var R='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',N=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{type:"image",tagName:"img",void:1,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(R,'>\n        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>\n      </svg>'),fallback:"<svg ".concat(R,'>\n        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>\n      </svg>'),file:""}),initialize:function(e,t){d.default.prototype.initialize.apply(this,arguments);var n=this.get("attributes");n.src&&this.set("src",n.src)},initToolbar:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d.default.prototype.initToolbar.apply(this,t);var i=this.em;if(i){var r=i.get("Commands"),o="image-editor";if(r.has(o)){for(var a=!1,s=this.get("toolbar"),c=0;c<s.length;c++)if("image-editor"===s[c].command){a=!0;break}a||(s.push({attributes:{class:"fa fa-pencil"},command:o}),this.set("toolbar",s))}}},getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=d.default.prototype.getAttrToHTML.apply(this,t),r=this.getSrcResult();return r&&(i.src=r),i},getSrcResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get(e.fallback?"fallback":"src")||"",n=t;return t&&"<svg"===t.substr(0,4)&&(n="data:image/svg+xml;base64,".concat(window.btoa(t))),n},isDefaultSrc:function(){return this.get("src")===Object(l.result)(this,"defaults").src},parseUri:function(e){var t=document.createElement("a");t.href=e;for(var n={},i=t.search.substring(1).split("&"),r=0;r<i.length;r++){var o=i[r].split("="),a=decodeURIComponent(o[0]);a&&(n[a]=decodeURIComponent(o[1]))}return{hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,search:t.search,hash:t.hash,port:t.port,query:n}}},{isComponent:function(e){var t="";return"IMG"==e.tagName&&(t={type:"image"}),t}});function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var B=N.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N.prototype.defaults,{type:"map",src:"",void:0,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:d.default.prototype.defaults.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]}),initialize:function(e,t){this.get("src")?this.parseFromSrc():this.updateSrc(),N.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},updateSrc:function(){this.set("src",this.getMapUrl())},getMapUrl:function(){var e=this.get("address"),t=this.get("zoom"),n=this.get("mapType");return e=e?"&q="+e:"",t=t?"&z="+t:"",n=n?"&t="+n:"",this.get("mapUrl")+"?"+e+t+n+"&output=embed"},parseFromSrc:function(){var e=this.parseUri(this.get("src")).query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)}},{isComponent:function(e){var t="";return"IFRAME"==e.tagName&&/maps\.google\.com/.test(e.src)&&(t={type:"map",src:e.src}),t}}),I=h.default.extend({tagName:"img",events:{dblclick:"onActive",click:"initResize",error:"onError",dragstart:"noDrag"},initialize:function(e){var t=this.model;h.default.prototype.initialize.apply(this,arguments),this.listenTo(t,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image");var n=this.config;n.modal&&(this.modal=n.modal),n.am&&(this.am=n.am),this.fetchFile()},fetchFile:function(){if(!this.modelOpt.temporary){var e=this.model,t=e.get("file");t&&(this.em.get("AssetManager").FileUploader().uploadFile({dataTransfer:{files:[t]}},(function(t){var n=t&&t.data&&t.data[0],i=n&&(Object(l.isString)(n)?n:n.src);i&&e.set({src:i})})),e.set("file",""))}},updateSrc:function(){var e=this.model,t=this.classEmpty,n=this.$el,i=e.getSrcResult(),r=i&&!e.isDefaultSrc();e.addAttributes({src:i}),n[r?"removeClass":"addClass"](t)},onActive:function(e){e&&e.stopPropagation();var t=this.opts.config.em,n=t?t.get("Editor"):"";n&&this.model.get("editable")&&n.runCommand("open-assets",{target:this.model,types:["image"],accept:"image/*",onSelect:function(){n.Modal.close(),n.AssetManager.setTarget(null)}})},onError:function(){var e=this.model.getSrcResult({fallback:1});e&&(this.el.src=e)},noDrag:function(e){return e.preventDefault(),!1},render:function(){this.renderAttributes(),this.updateSrc();var e=this.$el,t=this.model,n=e.attr("class")||"";return!t.get("src")&&e.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this}}),F=I.extend({tagName:"div",events:{},initialize:function(e){I.prototype.initialize.apply(this,arguments),this.classEmpty=this.ppfx+"plh-map"},updateSrc:function(){this.getIframe().src=this.model.get("src")},getIframe:function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder=0,e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return I.prototype.render.apply(this,t),this.updateClasses(),this.el.appendChild(this.getIframe()),this}});function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var H=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{type:"text",droppable:!1,editable:!0}),toHTML:function(){return this.trigger("sync:content",{silent:1}),d.default.prototype.toHTML.apply(this,arguments)}});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var $=H.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H.prototype.defaults,{type:"link",tagName:"a",traits:["title","href","target"]}),getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=H.prototype.getAttrToHTML.apply(this,t);return delete i.onmousedown,i}},{isComponent:function(e){var t;if("A"==e.tagName){t={type:"link",editable:0};var n=e.childNodes,i=n.length;i||delete t.editable;for(var r=0;r<i;r++){var o=n[r];if(3==o.nodeType&&""!=o.textContent.trim()){delete t.editable;break}}}return t}}),U=n(3);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=h.default.prototype,Y=h.default.extend({events:{dblclick:"onActive",input:"onInput"},initialize:function(e){G.initialize.apply(this,arguments),this.disableEditing=this.disableEditing.bind(this);var t=this.model,n=this.em;this.listenTo(t,"focus",this.onActive),this.listenTo(t,"change:content",this.updateContentText),this.listenTo(t,"sync:content",this.syncContent),this.rte=n&&n.get("RichTextEditor")},updateContentText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.fromDisable&&this.disableEditing()},onActive:function(e){if(!this.rteEnabled&&this.model.get("editable")){e&&e.stopPropagation&&e.stopPropagation();var t=this.rte,n=this.em;if(t)try{this.activeRte=t.enable(this,this.activeRte)}catch(e){n.logError(e)}this.toggleEvents(1)}},onDisable:function(){this.disableEditing()},disableEditing:function(){var e=this.model,t=this.rte,n=this.activeRte,i=this.em,r=e.get("editable");if(t&&r){try{t.disable(this,n)}catch(e){i.logError(e)}this.syncContent()}this.toggleEvents()},getContent:function(){var e=(this.rte||{}).activeRte;return e&&"function"==typeof e.getContent?e.getContent():this.getChildrenContainer().innerHTML},syncContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.rte,i=this.rteEnabled;if(i||e.force){var r=this.getContent(),o=t.components(),a=q({fromDisable:1},e);if(o.length&&o.reset(null,e),t.set("content","",a),n.customRte)t.set("content",r,a);else{var s=function t(n){var i=!!n.get("textable"),r=!["text","default",""].some((function(e){return n.is(e)}))||i;n.set(q({_innertext:!r,editable:r&&n.get("editable"),selectable:r,hoverable:r,removable:i,draggable:i,highlightable:0,copyable:i},!i&&{toolbar:""}),e),n.get("components").each((function(e){return t(e)}))};!e.silent&&t.trigger("change:content",t,"",a),o.add(r,e),o.each((function(e){return s(e)})),o.trigger("resetNavigator")}}},getModelsFromEl:function(e){for(var t=[],n=(e||this.el).childNodes,i=0;i<n.length;i++){var r=n[i],o=r.__cashData&&r.__cashData.model;o&&(o.components=this.getModelsFromEl(r),o.get("content")&&(o.attributes.content=r.textContent),t.push(o))}return t},onInput:function(){var e=this.em,t=["".concat("component",":update"),"".concat("component",":input")].join(" ");e&&e.trigger(t,this.model)},disablePropagation:function(e){e.stopPropagation()},toggleEvents:function(e){var t=this.em,n={on:U.t,off:U.s},i=e?"on":"off";t.setEditing(e),this.rteEnabled=!!e;var r=[this.el.ownerDocument,document];if(n.off(r,"mousedown",this.disableEditing),n[i](r,"mousedown",this.disableEditing),t[i]("toolbar:run:before",this.disableEditing),this.$el.off("mousedown",this.disablePropagation),this.$el[i]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var o=this.el;o;)o.draggable=!e,(o=o.parentNode)&&"BODY"==o.tagName&&(o=0)}}),K=Y.extend({render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Y.prototype.render.apply(this,t),this.el.addEventListener("click",this.prevDef,!0),this}});function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Z=H.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},H.prototype.defaults,{tagName:"label",traits:["id","title","for"]})},{isComponent:function(e){if("LABEL"==e.tagName)return{type:"label"}}}),J=K.extend({tagName:"span"});function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ee="yt",te="vi",ne="ytnc",ie=N.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},N.prototype.defaults,{type:"video",tagName:"video",videoId:"",void:0,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"},toolbar:d.default.prototype.defaults.toolbar}),initialize:function(e,t){var n=[],i=this.get("provider");switch(i){case ee:case ne:n=this.getYoutubeTraits();break;case te:n=this.getVimeoTraits();break;default:n=this.getSourceTraits()}this.get("src")&&this.parseFromSrc(),this.set("traits",n),N.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc)},initToolbar:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d.default.prototype.initToolbar.apply(this,t)},parseFromSrc:function(){var e=this.get("provider"),t=this.parseUri(this.get("src")),n=t.query;switch(e){case ee:case ne:case te:var i=t.pathname.split("/").pop();this.set("videoId",i),n.autoplay&&this.set("autoplay",1),n.loop&&this.set("loop",1),0===parseInt(n.controls)&&this.set("controls",0),n.color&&this.set("color",n.color),"0"===n.rel&&this.set("rel",0),"1"===n.modestbranding&&this.set("modestbranding",1)}},updateSrc:function(){switch(this.get("provider")){case ee:this.set("src",this.getYoutubeSrc());break;case ne:this.set("src",this.getYoutubeNoCookieSrc());break;case te:this.set("src",this.getVimeoSrc())}},getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=N.prototype.getAttrToHTML.apply(this,t),r=this.get("provider");switch(r){case ee:case ne:case te:break;default:this.get("loop")&&(i.loop="loop"),this.get("autoplay")&&(i.autoplay="autoplay"),this.get("controls")&&(i.controls="controls")}return i},updateTraits:function(){var e=this.get("provider"),t=this.getSourceTraits();switch(e){case ee:case ne:this.set("tagName","iframe"),t=this.getYoutubeTraits();break;case te:this.set("tagName","iframe"),t=this.getVimeoTraits();break;default:this.set("tagName","video")}this.loadTraits(t),this.em.trigger("component:toggled")},getProviderTrait:function(){return{type:"select",label:"Provider",name:"provider",changeProp:1,options:[{value:"so",name:"HTML5 Source"},{value:ee,name:"Youtube"},{value:ne,name:"Youtube (no cookie)"},{value:te,name:"Vimeo"}]}},getSourceTraits:function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:1},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getYoutubeTraits:function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:1},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:1}]},getVimeoTraits:function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:1},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait()]},getAutoplayTrait:function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:1}},getLoopTrait:function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:1}},getControlsTrait:function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:1}},getYoutubeSrc:function(){var e=this.get("videoId"),t=this.get("ytUrl");return t+=e+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("controls")?"":"&controls=0&showinfo=0",t+=this.get("loop")?"&loop=1&playlist=".concat(e):"",(t+=this.get("rel")?"":"&rel=0")+(this.get("modestbranding")?"&modestbranding=1":"")},getYoutubeNoCookieSrc:function(){var e=this.getYoutubeSrc();return e.replace(this.get("ytUrl"),this.get("ytncUrl"))},getVimeoSrc:function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("loop")?"&loop=1":"",(e+=this.get("controls")?"":"&title=0&portrait=0&badge=0")+(this.get("color")?"&color="+this.get("color"):"")}},{isComponent:function(e){var t="",n=/youtube\.com\/embed/.test(e.src),i=/youtube-nocookie\.com\/embed/.test(e.src),r=/player\.vimeo\.com\/video/.test(e.src),o=n||i||r;return("VIDEO"==e.tagName||"IFRAME"==e.tagName&&o)&&(t={type:"video"},e.src&&(t.src=e.src),o&&(n?t.provider=ee:i?t.provider=ne:r&&(t.provider=te))),t}}),re=I.extend({tagName:"div",events:{},initialize:function(e){h.default.prototype.initialize.apply(this,arguments);var t=this.model,n=["loop","autoplay","controls","color","rel","modestbranding","poster"],i=n.map((function(e){return"change:".concat(e)})).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,i,this.updateVideo)},updateProvider:function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},updateSrc:function(){var e=this.model,t=this.videoEl;if(t){var n=e.get("provider"),i=e.get("src");switch(n){case"yt":i=e.getYoutubeSrc();break;case"ytnc":i=e.getYoutubeNoCookieSrc();break;case"vi":i=e.getVimeoSrc()}t.src=i}},updateVideo:function(){var e=this.model.get("provider"),t=this.videoEl,n=this.model;switch(e){case"yt":case"ytnc":case"vi":this.model.trigger("change:videoId");break;default:t.loop=n.get("loop"),t.autoplay=n.get("autoplay"),t.controls=n.get("controls"),t.poster=n.get("poster")}},renderByProvider:function(e){var t;switch(e){case"yt":t=this.renderYoutube();break;case"ytnc":t=this.renderYoutubeNoCookie();break;case"vi":t=this.renderVimeo();break;default:t=this.renderSource()}return this.videoEl=t,t},renderSource:function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},renderYoutube:function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},renderYoutubeNoCookie:function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},renderVimeo:function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},initVideoEl:function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];I.prototype.render.apply(this,t),this.updateClasses();var i=this.model.get("provider");return this.el.appendChild(this.renderByProvider(i)),this.updateVideo(),this}});function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ae=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{type:"script",droppable:!1,draggable:!1,layerable:!1})},{isComponent:function(e){if("SCRIPT"==e.tagName){var t={type:"script"};return e.src&&(t.src=e.src,t.onload=e.onload),t}}}),se=I.extend({tagName:"script",events:{},render:function(){var e=this.model,t=e.get("src"),n=this.em,i=n&&n.get("scriptCount")?n.get("scriptCount"):0,r="";if(t){var o=e.get("onload"),a="script"+i,s="script"+(i+1);r="var "+a+" = document.createElement('script');\n"+a+".onload = function(){\n"+(o?o+"();\n":"")+"typeof "+s+"Start == 'function' && "+s+"Start();\n};\n"+a+".src = '"+t+"';\nfunction "+a+"Start() { document.body.appendChild("+a+"); };\n"+(i?"":a+"Start();"),n&&n.set("scriptCount",i+1)}else r=e.get("content");return this.el.innerHTML=r,this}});function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var le=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{resizable:{ratioDefault:1},highlightable:0}),getName:function(){var e=this.get("tagName"),t=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),t||e}},{isComponent:function(e){if(SVGElement&&e instanceof SVGElement)return{tagName:e.tagName,type:"svg"}}});function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var de=le.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},le.prototype.defaults,{selectable:!1,hoverable:!1,layerable:!1})},{isComponent:function(e){if(le.isComponent(e)&&"svg"!==e.tagName.toLowerCase())return{tagName:e.tagName,type:"svg-in"}}}),pe=h.default.extend({_createElement:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}});function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var fe=d.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.default.prototype.defaults,{droppable:!1,layerable:!1,editable:!0}),toHTML:function(){return this.get("content").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{isComponent:function(e){var t="";return 3===e.nodeType&&(t={type:"textnode",content:e.textContent}),t}});function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var me=fe.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},fe.prototype.defaults),toHTML:function(){return"\x3c!--".concat(this.get("content"),"--\x3e")}},{isComponent:function(e){if(8==e.nodeType)return{tagName:"NULL",type:"comment",content:e.textContent}}}),ve=c.a.View.extend({initialize:function(){var e=this.$el,t=this.model;e.data("model",t),t.view=this},_createElement:function(){return document.createTextNode(this.model.get("content"))}}),ye=ve.extend({_createElement:function(){return document.createComment(this.model.get("content"))}}),be=d.default.extend({},{isComponent:function(){return!1}});function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,i={},o={},a=[{id:"cell",model:m,view:v},{id:"row",model:b,view:w},{id:"table",model:E,view:_},{id:"thead",model:k,view:T},{id:"tbody",model:C,view:P},{id:"tfoot",model:A,view:M},{id:"map",model:B,view:F},{id:"link",model:$,view:K},{id:"label",model:Z,view:J},{id:"video",model:ie,view:re},{id:"image",model:N,view:I},{id:"script",model:ae,view:se},{id:"svg-in",model:de,view:pe},{id:"svg",model:le,view:pe},{id:"comment",model:me,view:ye},{id:"textnode",model:fe,view:ve},{id:"text",model:H,view:Y},{id:"wrapper",model:be,view:h.default},{id:"default",model:d.default,view:h.default}];return{Component:d.default,Components:p.a,ComponentsView:f.a,componentTypes:a,componentsById:o,name:"DomComponents",getConfig:function(){return i},storageKey:function(){var e=[],t=i.stm&&i.stm.getConfig()||{};return t.storeHtml&&e.push("html"),t.storeComponents&&e.push("components"),e},init:function(r){var o=this;for(var s in e=(i=r||{}).em,this.em=e,e&&(i.components=e.config.components||i.components),u)s in i||(i[s]=u[s]);var c=i.pStylePrefix;if(c&&(i.stylePrefix=c+i.stylePrefix),e){i.modal=e.get("Modal")||"",i.am=e.get("AssetManager")||"",e.get("Parser").compTypes=a,e.on("change:componentHovered",this.componentHovered,this);var l=e.get("selected");e.listenTo(l,"add",(function(e,t,n){return o.selectAdd(e,n)})),e.listenTo(l,"remove",(function(e,t,n){return o.selectRemove(e,n)}))}var p=i.components,f=xe({},i.wrapper);return f["custom-name"]=i.wrapperName,f.wrapper=1,f.type="wrapper",p&&p.constructor===Object&&p.wrapper&&(f=xe({},p),p=p.components||[],f.components=[],e&&(e.config.components=p,i.components=p)),(t=new d.default(f,{em:e,config:i,componentTypes:a,domc:this})).set({attributes:{id:"wrapper"}}),n=new h.default({model:t,config:i,componentTypes:a}),this},onLoad:function(){this.setComponents(i.components)},postLoad:function(e){this.handleChanges(this.getWrapper(),null,{avoidStore:1})},handleChanges:function(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.components(),a=e.get("UndoManager"),s=e.handleUpdates.bind(e),c=this.handleChanges.bind(this),l=this.handleChangesColl.bind(this),u=this.handleRemoves.bind(this);a&&a.add(t),a&&o&&a.add(o);var d="change:style change:content change:attributes change:src";[[t,d,s],[t,"change:components",l],[o,"add",c],[o,"remove",u],[t.get("classes"),"add remove",s]].forEach((function(t){e.stopListening(t[0],t[1],t[2]),e.listenTo(t[0],t[1],t[2])})),!r.avoidStore&&s("","",r),o.each((function(e){return i.handleChanges(e,n,r)}))},handleChangesColl:function(t,n){var i=e.get("UndoManager");if(i&&n instanceof c.a.Collection){var r=this.handleChanges.bind(this),o=this.handleRemoves.bind(this);i.add(n),[[n,"add",r],[n,"remove",o]].forEach((function(t){e.stopListening(t[0],t[1],t[2]),e.listenTo(t[0],t[1],t[2])}))}},handleRemoves:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!i.avoidStore&&e.handleUpdates(t,n,i)},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.em,n="";!e&&i.stm&&(e=i.em.getCacheLoad());var r=e,o=r.components,a=r.html;if(o)if(Object(l.isObject)(o)||Object(l.isArray)(o))n=o;else try{n=JSON.parse(o)}catch(e){t&&t.logError(e)}else a&&(n=a);var s=n&&n.constructor===Object;return(n&&n.length||s)&&(this.clear(),s?this.getWrapper().set(n):this.getComponents().add(n)),n},store:function(e){if(i.stm){var t={},n=this.storageKey();if(n.indexOf("html")>=0&&(t.html=i.em.getHtml()),n.indexOf("components")>=0){this.em;var r=i.storeWrapper?this.getWrapper():this.getComponents();t.components=JSON.stringify(r)}return e||i.stm.store(t),t}},getComponent:function(){return t},getWrapper:function(){return this.getComponent()},getComponents:function(){return this.getWrapper().get("components")},addComponent:function(e){return this.getComponents().add(e)},render:function(){return n.render().el},clear:function(){return this.getComponents().map((function(e){return e})).forEach((function(e){return e.remove()})),this},setComponents:function(e){this.clear().addComponent(e)},addType:function(e,t){var n=this.em,i=t.model,o=void 0===i?{}:i,s=t.view,c=void 0===s?{}:s,u=t.isComponent,d=t.extend,p=t.extendView,h=t.extendFn,f=void 0===h?[]:h,g=t.extendFnView,m=void 0===g?[]:g,v=this.getType(e),y=this.getType(d),b=this.getType(p),w=y||v||this.getType("default"),x=w.model,E=b?b.view:w.view,_=function(e,t,n){return e.reduce((function(e,i){var r=t[i],o=n.prototype[i];return r&&o&&(e[i]=function(){o.bind(this).apply(void 0,arguments),r.bind(this).apply(void 0,arguments)}),e}),{})};"object"===r()(o)&&(t.model=x.extend(xe({},o,{},_(f,o,x),{defaults:xe({},x.prototype.defaults,{},Object(l.result)(o,"defaults")||{})}),{isComponent:!v||y||u?u||function(){return 0}:x.isComponent})),"object"===r()(c)&&(t.view=E.extend(xe({},c,{},_(m,c,E)))),v?(v.model=t.model,v.view=t.view):(t.id=e,a.unshift(t));var S="component:type:".concat(v?"update":"add");return n&&n.trigger(S,v||t),this},getType:function(e){for(var t=a,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},removeType:function(e){var t=a,n=this.getType(e);if(n){var i=t.indexOf(n);return t.splice(i,1),n}},getTypes:function(){return a},selectAdd:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach((function(i){return t.em.trigger(i,e,n)})))},selectRemove:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.em,e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach((function(i){return t.em.trigger(i,e,n)})))},componentHovered:function(){var e=i.em,t=e.get("componentHovered"),n=e.previous("componentHovered");n&&"hovered"==n.get("status")&&n.set({status:"",state:""}),t&&Object(l.isEmpty)(t.get("status"))&&t.set("status","hovered")},allById:function(){return o}}}},function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(2),a=n.n(o),s=n(3),c=n(0),l=n(14),u=n.n(l),d=n(15),p=n.n(d),h=function(){function e(t,n){var i=this;u()(this,e),this.em=t;var r=n||t.get("Canvas").getFrames().map((function(e){return e.get("root").getEl()})),o=Array.isArray(r)?r:[r];return this.el=r,this.counter=0,Object(c.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),o.forEach((function(e){return i.toggleEffects(e,1)})),this}return p()(e,[{key:"toggleEffects",value:function(e,t){var n={on:s.t,off:s.s},i=t?"on":"off";n[i](e,"dragenter",this.handleDragEnter),n[i](e,"dragover",this.handleDragOver),n[i](e,"drop",this.handleDrop),n[i](e,"dragleave",this.handleDragLeave)}},{key:"endDrop",value:function(e,t){var n=this.em,i=this.dragStop;this.counter=0,this.over=0,i&&i(e),n.runDefault({preserveSelected:1}),n.trigger("canvas:dragend",t)}},{key:"handleDragLeave",value:function(e){this.updateCounter(-1,e)}},{key:"updateCounter",value:function(e,t){this.counter+=e,0===this.counter&&this.endDrop(1,t)}},{key:"handleDragEnter",value:function(e){var t=this,n=this.em,i=e.dataTransfer;if(this.updateCounter(1,e),!this.over){this.over=1;var r,o,a=n.get("Utils"),s=n.get("Canvas"),c=s.getBody(),l=n.get("dragContent")||"<br>";if(n.stopDefault(),n.inAbsoluteMode()){var u=n.get("DomComponents").getWrapper(),d=u.append({})[0],p=n.get("Commands").run("core:component-drag",{event:e,guidesInfo:1,center:1,target:d,onEnd:function(e,n,r){if(!r.cancelled){var o=u.append(l)[0],a=d.getStyle(),s=a.left,c=a.top,p=a.position;o.addStyle({left:s,top:c,position:p}),t.handleDragEnd(o,i)}d.remove()}});r=function(t){return p.stop(e,{cancel:t})},o=function(e){return l=e}}else{var h=new a.Sorter({em:n,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:c,placer:s.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(e){return t.handleDragEnd(e,i)},document:s.getFrameEl().contentDocument});h.setDropContent(l),h.startSort(),this.sorter=h,r=function(e){e&&(h.moved=0),h.endMove()},o=function(e){return h.setDropContent(e)}}this.dragStop=r,this.dragContent=o,n.trigger("canvas:dragenter",i,l)}}},{key:"handleDragEnd",value:function(e,t){if(e){var n=this.em;n.set("dragResult",e),n.trigger("canvas:drop",t,e)}}},{key:"handleDragOver",value:function(e){e.preventDefault(),this.em.trigger("canvas:dragover",e)}},{key:"handleDrop",value:function(e){e.preventDefault();var t=this.dragContent,n=e.dataTransfer,i=this.getContentByData(n).content;e.target.style.border="",i&&t&&t(i),this.endDrop(!i,e)}},{key:"getContentByData",value:function(e){var t=this.em,n=e.types,i=e.files||[],r=t.get("dragContent"),o=e.getData("text");if(i.length){o=[];for(var a=0;a<i.length;a++){var s=i[a],l=s.type.split("/")[0];"image"==l&&o.push({type:l,file:s,attributes:{alt:s.name}})}}else if(r)o=r;else if(Object(c.indexOf)(n,"text/html")>=0)o=e.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if(Object(c.indexOf)(n,"text/uri-list")>=0)o={type:"link",attributes:{href:o},content:o};else if(Object(c.indexOf)(n,"text/json")>=0){var u=e.getData("text/json");u&&(o=JSON.parse(u))}var d={content:o};return t.trigger("canvas:dragdata",e,d),d}}]),e}(),f={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:"",autoscrollLimit:50,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]},g=n(1),m=n.n(g),v=n(4),y=n(32);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=m.a.Model.extend({defaults:{wrapper:"",width:null,height:null,head:"",x:0,y:0,root:0,components:0,styles:0,attributes:{}},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.attributes,i=n.root,r=n.styles,o=n.components;this.set("head",[]),this.em=t.em;var a={em:t.em,config:t.em.get("DomComponents").getConfig(),frame:this};!i&&this.set("root",new v.default({type:"wrapper",components:o||[]},a)),(!r||Object(c.isString)(r))&&this.set("styles",new y.a(r,a))},remove:function(){this.view=0;var e=this.collection;return e&&e.remove(this)},getHead:function(){return r()(this.get("head"))},setHead:function(e){return this.set("head",r()(e))},addHeadItem:function(e){var t=this.getHead();t.push(e),this.setHead(t)},getHeadByAttr:function(e,t,n){return this.getHead().filter((function(i){return i.attributes&&i.attributes[e]==t&&(!n||n===i.tag)}))[0]},removeHeadByAttr:function(e,t,n){var i=this.getHead(),r=this.getHeadByAttr(e,t,n),o=i.indexOf(r);o>=0&&(i.splice(o,1),this.setHead(i))},addLink:function(e){!this.getHeadByAttr("href",e,"link")&&this.addHeadItem({tag:"link",attributes:{href:e,rel:"stylesheet"}})},removeLink:function(e){this.removeHeadByAttr("href",e,"link")},addScript:function(e){!this.getHeadByAttr("src",e,"script")&&this.addHeadItem({tag:"script",attributes:{src:e}})},removeScript:function(e){this.removeHeadByAttr("src",e,"script")},_emitUpdated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.em.trigger("frame:updated",w({frame:this},e))}}),E=m.a.Collection.extend({model:x,initialize:function(){Object(c.bindAll)(this,"itemLoaded")},itemLoaded:function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(0))},listenToLoad:function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(1)},listenToLoadItems:function(e){var t=this;this.forEach((function(n){return n[e?"on":"off"]("loaded",t.itemLoaded)}))}}),_=m.a.Model.extend({defaults:{frame:"",frames:"",wrapper:"",rulers:!1,zoom:100,x:0,y:0},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.em,n=e.styles,i=void 0===n?[]:n,r=e.scripts,o=void 0===r?[]:r,a=t&&t.getWrapper(),s=t&&t.getStyle(),c=new x({root:a,styles:s},e);i.forEach((function(e){return c.addLink(e)})),o.forEach((function(e){return c.addScript(e)})),this.em=t,this.set("frame",c),this.set("frames",new E([c],e)),this.listenTo(this,"change:zoom",this.onZoomChange),this.listenTo(t,"change:device",this.updateDevice)},updateDevice:function(){var e=this.em,t=e.getDeviceModel(),n=e.getCurrentFrameModel();if(n&&t){var i=t.attributes,r=i.width,o=i.height;n.set({width:r,height:o})}},onZoomChange:function(){this.get("zoom")<1&&this.set("zoom",1)}}),S=n(19),C=n(36),O=n(5),k=n(7);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=m.a.View.extend({tagName:"iframe",attributes:{allowfullscreen:"allowfullscreen","data-frame-el":!0},initialize:function(e){Object(c.bindAll)(this,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var t=this.model,n=this.el;this.config=P({},e.config||{},{frameView:this}),this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em,this.listenTo(t,"change:head",this.updateHead),t.view=this,Object(s.u)(n,this)},updateHead:function(){var e=this.getHead();Object(k.f)(e),Object(k.c)(e,this.model.getHead())},getEl:function(){return this.el},getWindow:function(){return this.getEl().contentWindow},getDoc:function(){return this.getEl().contentDocument},getHead:function(){return this.getDoc().querySelector("head")},getBody:function(){return this.getDoc().querySelector("body")},getWrapper:function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},getJsContainer:function(){return this.jsContainer||(this.jsContainer=Object(k.e)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},getToolsEl:function(){var e=this.config.frameWrapView;return e&&e.elTools},getGlobalToolsEl:function(){return this.em.get("Canvas").getGlobalToolsEl()},getHighlighter:function(){return this._getTool("[data-hl]")},getBadgeEl:function(){return this._getTool("[data-badge]")},getOffsetViewerEl:function(){return this._getTool("[data-offset]")},getRect:function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},getOffsetRect:function(){var e=this.el,t=this.getBody(),n=t.scrollTop,i=t.scrollLeft,r=e.offsetHeight,o=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:r,width:o,scrollTop:n,scrollLeft:i,scrollBottom:n+r,scrollRight:i+o}},_getTool:function(e){var t=this.getToolsEl();return this[e]||(this[e]=t.querySelector(e)),this[e]},remove:function(){var e=this.root,t=this.model;this._toggleEffects(),m.a.View.prototype.remove.apply(this,arguments),e.remove(),t.remove()},startAutoscroll:function(){var e=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout((function(){e._toggleAutoscrollFx(1),requestAnimationFrame(e.autoscroll)}),0)},autoscroll:function(){if(this.dragging){var e=this.em.get("Canvas"),t=this.getWindow(),n=this.getBody().scrollTop,i=this.lastClientY||0,r=e.getConfig().autoscrollLimit,o=this.getRect().height-r,a=n;i<r&&(a-=r-i),i>o&&(a+=i-o),a!==n&&a>0&&a<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity=0,this.showGlobalTools(),t.scrollTo(0,a)),requestAnimationFrame(this.autoscroll)}},updateClientY:function(e){e.preventDefault(),this.lastClientY=Object(s.h)(e).clientY*this.em.getZoomDecimal()},showGlobalTools:Object(c.debounce)((function(){this.getGlobalToolsEl().style.opacity=""}),50),stopAutoscroll:function(){this.dragging&&this._toggleAutoscrollFx()},_toggleAutoscrollFx:function(e){this.dragging=e;var t=this.getWindow(),n=e?"on":"off",i={on:s.t,off:s.s};i[n](t,"mousemove dragover",this.updateClientY),i[n](t,"mouseup",this.stopAutoscroll)},render:function(){var e=this.el,t=this.$el,n=this.ppfx,i=this.config;return t.attr({class:n+"frame"}),i.scripts.length?this.renderScripts():i.renderContent&&(e.onload=this.renderBody.bind(this)),this},renderScripts:function(){var e=this,t=this.el,n=this.config;t.onload=function(){return function n(i){if(i.length>0){var r=i.shift(),o=Object(k.e)("script",P({type:"text/javascript"},Object(c.isString)(r)?{src:r}:r));o.onerror=o.onload=n.bind(null,i),t.contentDocument.head.appendChild(o)}else e.renderBody()}(r()(n.scripts))}},renderBody:function(){var e=this,t=this.config,n=this.model,i=this.ppfx,r=n.get("root"),o=n.get("styles"),a=t.em,l=this.getDoc(),u=this.getHead(),d=this.getBody(),p=(this.getWindow(),a.get("Config")),h=[];t.styles.forEach((function(e){return h.push(Object(c.isString)(e)?{tag:"link",attributes:{href:e,rel:"stylesheet"}}:{tag:"link",attributes:P({rel:"stylesheet"},e)})})),h.length&&Object(k.c)(u,h),Object(k.a)(d,"<style>\n      ".concat(p.baseCss||"","\n\n      .").concat(i,"dashed *[data-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(i,"selected {\n        outline: 3px solid #3b97e3 !important;\n        outline-offset: -3px;\n      }\n\n      .").concat(i,"selected-parent {\n        outline: 2px solid ").concat("#ffca6f"," !important\n      }\n\n      .").concat(i,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(i,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(i,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(i,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(i,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(i,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(i,"is__grabbing,\n      .").concat(i,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(p.canvasCss||"","\n      ").concat(p.protectedCss||"","\n    </style>")),this.root=new O.default({model:r,config:P({},r.config,{frameView:this})}).render(),Object(k.a)(d,this.root.el),Object(k.a)(d,new C.a({collection:o,config:P({},a.get("CssComposer").getConfig(),{frameView:this})}).render().el),Object(k.a)(d,this.getJsContainer()),Object(s.t)(d,"click",(function(e){return e&&"A"==e.target.tagName&&e.preventDefault()})),Object(s.t)(d,"submit",(function(e){return e&&e.preventDefault()})),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousemove",class:"MouseEvent"},{event:"wheel",class:"WheelEvent"}].forEach((function(t){return t.event.split(" ").forEach((function(n){l.addEventListener(n,(function(n){return e.el.dispatchEvent(Object(k.d)(n,t.class))}))}))})),this._toggleEffects(1),n.trigger("loaded")},_toggleEffects:function(e){(e?s.t:s.s)(this.getWindow(),"".concat(k.g," resize"),this._emitUpdate)},_emitUpdate:function(){this.model._emitUpdated()}}),A=n(16);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=m.a.View.extend({events:{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(c.bindAll)(this,"onScroll","frameLoaded","updateOffset","remove","startDrag");var n=this.model,i=D({},e.config||t,{frameWrapView:this}),r=i.canvasView,o=i.em;this.cv=r,this.config=i,this.em=o,this.canvas=o&&o.get("Canvas"),this.ppfx=i.pStylePrefix||"",this.frame=new j({model:n,config:i}),this.classAnim="".concat(this.ppfx,"frame-wrapper--anim"),this.listenTo(n,"loaded",this.frameLoaded),this.listenTo(n,"change:x change:y",this.updatePos),this.listenTo(n,"change:width change:height",this.updateSize),this.updatePos(),this.setupDragger()},setupDragger:function(){var e,t,n,i=this,r=this.canvas,o=this.model,a=function(e){r.toggleFramesEvents(e)};this.dragger=new A.a({onStart:function(){var r=o.attributes,s=r.x,c=r.y;n=i.em.getZoomMultiplier(),e=s,t=c,a()},onEnd:function(){return a(1)},setPosition:function(i){o.set({x:e+i.x*n,y:t+i.y*n})}})},startDrag:function(e){e&&this.dragger.start(e)},remove:function(){return m.a.View.prototype.remove.apply(this,arguments),this.frame.remove(),this},updateOffset:Object(c.debounce)((function(){var e=this.em,t=this.$el,n=this.frame;e.runDefault({preserveSelected:1}),t.removeClass(this.classAnim),n.model._emitUpdated()})),updatePos:function(e){var t=this.model,n=this.el,i=t.attributes,r=i.x,o=i.y,a=n.style;this.frame.rect=0,a.left=isNaN(r)?r:"".concat(r,"px"),a.top=isNaN(o)?o:"".concat(o,"px"),e&&this.updateOffset()},updateSize:Object(c.debounce)((function(){this.updateDim()})),updateDim:function(){var e=this.em,t=this.el,n=this.$el,i=this.model,r=this.classAnim,o=i.attributes,a=o.width,s=o.height,l=t.style,u=l.width||"",d=l.height||"",p=a||"",h=s||"",f=u==p&&d==h;if(this.frame.rect=0,n.addClass(r),l.width=Object(c.isNumber)(p)?"".concat(p).concat("px"):p,l.height=Object(c.isNumber)(h)?"".concat(h).concat("px"):h,Object(c.isNull)(a)||Object(c.isNull)(s)){var g=D({},a?{}:{width:t.offsetWidth},{},s?{}:{height:t.offsetHeight});i.set(g,{silent:1})}e.stopDefault({preserveSelected:1}),f?this.updateOffset():n.one(k.g,this.updateOffset)},onScroll:function(){var e=this.frame;this.em.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},frameLoaded:function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},render:function(){var e=this.frame,t=this.$el,n=this.ppfx,i=this.cv,r=this.model,o=this.el,a=r.attributes.onRender;e.render(),t.empty().attr({class:"".concat(n,"frame-wrapper")}).append('\n      <div class="'.concat(n,'frame-wrapper__top gjs-two-color" data-frame-top>\n        <div class="').concat(n,'frame-wrapper__name" data-action-move>\n          ').concat(r.get("name")||"",'\n        </div>\n        <div class="').concat(n,'frame-wrapper__top-r">\n          <div class="').concat(n,'frame-wrapper__icon" data-action-remove style="display: none">\n            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(n,'frame-wrapper__right" data-frame-right></div>\n      <div class="').concat(n,'frame-wrapper__left" data-frame-left></div>\n      <div class="').concat(n,'frame-wrapper__bottom" data-frame-bottom></div>\n      ')).append(e.el);var s=Object(k.e)("div",{class:"".concat(n,"tools"),style:"pointer-events:none; opacity: 0"},'\n      <div class="'.concat(n,'highlighter" data-hl></div>\n      <div class="').concat(n,'badge" data-badge></div>\n      <div class="').concat(n,'placeholder">\n        <div class="').concat(n,'placeholder-int"></div>\n      </div>\n      <div class="').concat(n,'ghost"></div>\n      <div class="').concat(n,'toolbar" style="pointer-events:all"></div>\n      <div class="').concat(n,'resizer"></div>\n      <div class="').concat(n,'offset-v" data-offset>\n        <div class="gjs-marginName" data-offset-m>\n          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>\n          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>\n          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>\n          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>\n        </div>\n        <div class="gjs-paddingName" data-offset-m>\n          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>\n          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>\n          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>\n          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class="').concat(n,'offset-fixed-v"></div>\n    '));return this.elTools=s,i.toolsWrapper.appendChild(s),a&&a({el:o,elTop:o.querySelector("[data-frame-top]"),elRight:o.querySelector("[data-frame-right]"),elBottom:o.querySelector("[data-frame-bottom]"),elLeft:o.querySelector("[data-frame-left]"),frame:r,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this}}),N=S.a.extend({itemView:R,autoAdd:1,init:function(){this.listenTo(this.collection,"reset",this.render)},onRender:function(){var e=this.config,t=this.$el,n=e.em;n&&t.attr({class:"".concat(n.getConfig("stylePrefix"),"frames")})}});function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I,F=m.a.$,z=m.a.View.extend({events:{wheel:"onWheel"},template:function(){var e=this.pfx;return'\n      <div class="'.concat(e,'canvas__frames" data-frames></div>\n      <div id="').concat(e,'tools" class="').concat(e,'canvas__tools" data-tools></div>\n    ')},initialize:function(e){Object(c.bindAll)(this,"clearOff","onKeyPress","onCanvasMove"),Object(s.t)(window,"scroll resize",this.clearOff);var t=this.model,n=t.get("frames");this.config=e.config||{},this.em=this.config.em||{},this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.className=this.config.stylePrefix+"canvas";var i=this.em,r=this.config;this.frames=new N({collection:n,config:B({},r,{canvasView:this,renderContent:1})}),this.listenTo(i,"change:canvasOffset",this.clearOff),this.listenTo(i,"component:selected",this.checkSelected),this.listenTo(t,"change:zoom change:x change:y",this.updateFrames),this.listenTo(n,"loaded:all",(function(){return i.trigger("loaded")})),this.toggleListeners(1)},checkSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.scroll,i=this.em.get("currentFrame");n&&e.views.forEach((function(e){e._getFrame()!==i&&e.scrollIntoView(n)}))},remove:function(){m.a.View.prototype.remove.apply(this,arguments),this.toggleListeners()},preventDefault:function(e){e&&(e.preventDefault(),e._parentEvent&&e._parentEvent.preventDefault())},onCanvasMove:function(e){},toggleListeners:function(e){this.el,(e?s.t:s.s)(document,"keypress",this.onKeyPress)},onKeyPress:function(e){var t=this.em;" "===Object(s.f)(e)&&1!==t.getZoomDecimal()&&(this.preventDefault(e),t.get("Editor").runCommand("core:canvas-move"))},onWheel:function(e){if((e.ctrlKey||e.metaKey)&&this.em.getConfig("multiFrames")){this.preventDefault(e);var t=this.model,n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),i=t.get("zoom");t.set("zoom",i+2*n)}},updateFrames:function(e){var t=this.em,n=this.model.attributes,i=n.x,r=n.y,o=this.getZoom(),a={preserveSelected:1},s=o?1/o:1;this.framesArea.style.transform="scale(".concat(o,") translate(").concat(i*s,"px, ").concat(r*s,"px)"),this.clearOff(),t.stopDefault(a),t.trigger("canvas:update",e),I&&clearTimeout(I),I=setTimeout((function(){return t.runDefault(a)}),300)},getZoom:function(){return this.em.getZoomDecimal()},isElInViewport:function(e){var t=Object(s.e)(e),n=Object(s.d)(t),i=this.getFrameOffset(t),r=n.top,o=n.left;return r>=0&&o>=0&&r<=i.height&&o<=i.width},offset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(s.d)(e),i=e.ownerDocument.body,r=t.noScroll;return{top:n.top+(r?0:i.scrollTop),left:n.left+(r?0:i.scrollLeft),width:n.width,height:n.height}},clearOff:function(){this.frmOff=null,this.cvsOff=null},getFrameOffset:function(e){if(!this.frmOff||e){var t=e?e.ownerDocument.defaultView.frameElement:this.frame.el;this.frmOff=this.offset(t)}return this.frmOff},getCanvasOffset:function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},getElementPos:function(e,t){var n=this.getZoom(),i=t||{},r=this.getFrameOffset(e),o=this.getCanvasOffset(),a=this.offset(e,t),s=i.avoidFrameOffset?0:r.top,c=i.avoidFrameOffset?0:r.left;return{top:a.top*n+s-o.top,left:a.left*n+c-o.left,height:a.height*n,width:a.width*n,zoom:n,rect:a}},getElementOffsets:function(e){var t=this;if(!e||Object(s.p)(e))return{};var n={},i=window.getComputedStyle(e);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach((function(e){n[e]=parseFloat(i[e])*t.getZoom()})),n},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.frame.el.contentDocument;if(t){var n=t.body,i=this.getZoom(),r=this.getFrameOffset(),o=this.getCanvasOffset(),a=e.noScroll;return{top:r.top+(a?0:n.scrollTop)*i-o.top,left:r.left+(a?0:n.scrollLeft)*i-o.left,width:o.width,height:o.height}}},updateScript:function(e){var t=e.model,n=t.getId();e.scriptContainer||(e.scriptContainer=F('<div data-id="'.concat(n,'">')),this.getJsContainer().appendChild(e.scriptContainer.get(0))),e.el.id=n,e.scriptContainer.html("");var i=document.createElement("script");i.innerHTML="\n        setTimeout(function() {\n          var item = document.getElementById('".concat(n,"');\n          if (!item) return;\n          (function(){\n            ").concat(t.getScriptString(),";\n          }.bind(item))()\n        }, 1);"),setTimeout((function(){return e.scriptContainer.get(0).appendChild(i)}),0)},getJsContainer:function(e){var t=this.getFrameView(e);return t&&t.getJsContainer()},getFrameView:function(e){return e&&e._getFrame()||this.em.get("currentFrame")},render:function(){var e=this.el,t=this.$el,n=this.ppfx,i=this.model,r=this.em,o=this.frames,a=r.get("CssComposer"),s=i.get("wrapper");t.html(this.template());var c=t.find("[data-frames]");this.framesArea=c.get(0),this.wrapper=s,s&&"function"==typeof s.render&&i.get("frame").set({wrapper:s,root:s.getWrapper(),styles:a.getAll()});var l=t.find("[data-tools]");this.toolsWrapper=l.get(0),l.append('\n      <div class="'.concat(n,"tools ").concat(n,'tools-gl" style="pointer-events:none">\n        <div class="').concat(n,'placeholder">\n          <div class="').concat(n,'placeholder-int"></div>\n        </div>\n      </div>\n      <div id="').concat(n,'tools" style="pointer-events:none">\n        <div class="').concat(n,'badge"></div>\n        <div class="').concat(n,'ghost"></div>\n        <div class="').concat(n,'toolbar" style="pointer-events:all"></div>\n        <div class="').concat(n,'resizer"></div>\n        <div class="').concat(n,'offset-v"></div>\n        <div class="').concat(n,'offset-fixed-v"></div>\n      </div>\n    '));var u=e.querySelector("#".concat(n,"tools"));this.hlEl=e.querySelector(".".concat(n,"highlighter")),this.badgeEl=e.querySelector(".".concat(n,"badge")),this.placerEl=e.querySelector(".".concat(n,"placeholder")),this.ghostEl=e.querySelector(".".concat(n,"ghost")),this.toolbarEl=e.querySelector(".".concat(n,"toolbar")),this.resizerEl=e.querySelector(".".concat(n,"resizer")),this.offsetEl=e.querySelector(".".concat(n,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(n,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(n,"tools-gl")),this.toolsEl=u,this.el.className=this.className;var d=i.get("frames");return d.listenToLoad(),o.render(),r.setCurrentFrame(d.at(0).view),c.append(o.el),this.frame=d.at(0).view,this}});function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.requestAnimationFrame,t.default=function(){var e,t,n={};return{getCanvasView:function(){return t},name:"Canvas",init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=V({},f,{},i,{module:this}),this.em=n.em;var r=n.pStylePrefix;r&&(n.stylePrefix=r+n.stylePrefix),e=new _(i),t=new z({model:e,config:n});var o=n.em.get("DomComponents");return o&&this.setWrapper(o),this.model=e,this.startAutoscroll=this.startAutoscroll.bind(this),this.stopAutoscroll=this.stopAutoscroll.bind(this),this},getConfig:function(){return n},setWrapper:function(t){e.set("wrapper",t)},getElement:function(){return t.el},getFrame:function(t){return t?this.getFrames()[t]:e.get("frame")},getFrameEl:function(){var e=t.frame;return e&&e.el},getFramesEl:function(){return t.framesArea},getWindow:function(){return this.getFrameEl().contentWindow},getDocument:function(){var e=this.getFrameEl();return e&&e.contentDocument},getBody:function(){var e=this.getDocument();return e&&e.body},getWrapperEl:function(){var e=this.getBody();return e&&e.querySelector("#wrapper")},_getCompFrame:function(e){return e&&e._getFrame()},_getLocalEl:function(e,t,n){var i=e,r=this._getCompFrame(t);return r?r[n]():i},getGlobalToolsEl:function(){return t.toolsGlobEl},getToolsEl:function(e){return this._getLocalEl(t.toolsEl,e,"getToolsEl")},getHighlighter:function(e){return this._getLocalEl(t.hlEl,e,"getHighlighter")},getBadgeEl:function(e){return this._getLocalEl(t.badgeEl,e,"getBadgeEl")},getPlacerEl:function(){return t.placerEl},getGhostEl:function(){return t.ghostEl},getToolbarEl:function(){return t.toolbarEl},getResizerEl:function(){return t.resizerEl},getOffsetViewerEl:function(e){return this._getLocalEl(t.offsetEl,e,"getOffsetViewerEl")},getFixedOffsetViewerEl:function(){return t.fixedOffsetEl},render:function(){return t.render().el},getOffset:function(){var e=this.offset(this.getFrameEl()),t=this.offset(this.getElement());return{top:e.top-t.top,left:e.left-t.left}},offset:function(e){return t.offset(e)},setCustomBadgeLabel:function(e){n.customBadgeLabel=e},getElementPos:function(e,n){return t.getElementPos(e,n)},getElementOffsets:function(e){return t.getElementOffsets(e)},getRect:function(){var e=t.getPosition(),n=e.top,i=e.left;return V({},t.getCanvasOffset(),{topScroll:n,leftScroll:i})},getTargetToElementDim:function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r||{},a=t.getPosition();if(a){var s=o.elPos||t.getElementPos(i),c=r.toRight||0,l=o.targetHeight||e.offsetHeight,u=o.targetWidth||e.offsetWidth,d=o.event||null,p=s.top-l,h=s.left;h+=c?s.width:0;var f=(h=c?h-u:h)<a.left?a.left:h,g=p<a.top?a.top:p,m={top:g=g>s.top+s.height?s.top+s.height:g,left:f,elementTop:s.top,elementLeft:s.left,elementWidth:s.width,elementHeight:s.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:a.top,canvasLeft:a.left,canvasWidth:a.width,canvasHeight:a.height};return d&&n.em&&n.em.trigger(d,m),m}},canvasRectOffset:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){var t=e.defaultView;return t&&t.frameElement},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,a=n.em.getZoomDecimal(),s=t?"top":"left",c=e.ownerDocument,l=i.offset?r(c):{},u=l.offsetTop,d=void 0===u?0:u,p=l.offsetLeft,h=void 0===p?0:p,f=c.body||{},g=f.scrollTop,m=void 0===g?0:g,v=f.scrollLeft,y=void 0===v?0:v,b=t?m:y,w=t?d:h;return o[s]-(b-w)*a};return{top:o(e,1,t),left:o(e,0,t)}},getTargetToElementFixed:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.pos||this.getElementPos(e),r=n.canvasOff||this.canvasRectOffset(e,i),o=t.offsetHeight||0,a=t.offsetWidth||0,s=i.left+i.width,c=this.getCanvasView(),l=c.getPosition(),u=c.getFrameOffset(e),d=n.event,p=-o,h=i.width-a;h=i.left<-h?-i.left:h,h=s>l.width?h-(s-l.width):h;var f=i.height+o,g=f<u.height;r.top<o&&(g?p+=f:p=-r.top<i.height?-r.top:i.height);var m={top:p,left:h,canvasOffsetTop:r.top,canvasOffsetLeft:r.left};return d&&this.em.trigger(d,m),m},getMouseRelativePos:function(e,t){var n=0,i=0,r=(t||{}).subWinOffset,o=e.target.ownerDocument,a=o.defaultView||o.parentWindow,s=a.frameElement,c=r?a.pageYOffset:0,l=r?a.pageXOffset:0;if(s){var u=s.getBoundingClientRect();n=u.top||0,i=u.left||0}return{y:e.clientY+n-c,x:e.clientX+i-l}},getMouseRelativeCanvas:function(e,n){var i=this.getZoomDecimal(),r=t.getPosition(n),o=r.top,a=r.left;return{y:e.clientY*i+o,x:e.clientX*i+a}},hasFocus:function(){return this.getDocument().hasFocus()},isInputFocused:function(){var e=this.getDocument(),t=["body"].concat(r()(this.getConfig().notTextable)),n=e&&e.activeElement;return n&&!t.some((function(e){return n.matches(e)}))},scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(s.e)(e),i=n&&Object(s.j)(n);i&&i.scrollIntoView(t)},startAutoscroll:function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.startAutoscroll()},stopAutoscroll:function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.stopAutoscroll()},postRender:function(){Object(s.k)(n.em)&&(this.droppable=new h(n.em))},setZoom:function(t){return e.set("zoom",parseFloat(t)),this},getZoom:function(){return parseFloat(e.get("zoom"))},getZoomDecimal:function(){return this.getZoom()/100},getZoomMultiplier:function(){var e=this.getZoomDecimal();return e?1/e:1},toggleFramesEvents:function(e){this.getFramesEl().style.pointerEvents=e?"":"none"},getFrameWrapperEl:function(){return t.frame.getWrapper()},getFrames:function(){return e.get("frames").map((function(e){return e}))},addFrame:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.get("frames").add(V({},t),V({},n,{em:this.em}))}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(10),a={stylePrefix:"gjs-",components:"",style:"",fromElement:0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"\n    * {\n      box-sizing: border-box;\n    }\n    html, body, [data-gjs-type=wrapper] {\n      min-height: 100%;\n    }\n    body {\n      margin: 0;\n      height: 100%;\n      background-color: #fff\n    }\n    [data-gjs-type=wrapper] {\n      overflow: auto;\n      overflow-x: hidden;\n    }\n\n    * ::-webkit-scrollbar-track {\n      background: rgba(0, 0, 0, 0.1)\n    }\n\n    * ::-webkit-scrollbar-thumb {\n      background: rgba(255, 255, 255, 0.2)\n    }\n\n    * ::-webkit-scrollbar {\n      width: 10px\n    }\n  ",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:1,allowScripts:0,showDevices:1,devicePreviewMode:0,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:0,jsInHtml:!0,nativeDnD:1,multipleSelection:1,exportWrapper:0,wrapperIsBody:1,avoidInlineStyle:1,avoidDefaults:1,clearStyles:0,dragMode:0,cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",el:"",i18n:{},undoManager:{},assetManager:{},canvas:{},layers:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]},styleManager:{sectors:[{name:"General",open:!1,buildProps:["float","display","position","top","right","left","bottom"]},{name:"Flex",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"],properties:[{property:"text-align",list:[{value:"left",className:"fa fa-align-left"},{value:"center",className:"fa fa-align-center"},{value:"right",className:"fa fa-align-right"},{value:"justify",className:"fa fa-align-justify"}]}]},{name:"Decorations",open:!1,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,buildProps:["transition","perspective","transform"]}]},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:0,multiFrames:0},s=n(0),c=n(1),l=n.n(c),u=n(3);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l.a.$=o.default;var h,f,g=[n(103),n(105),n(74),n(75),n(102),n(98),n(101),n(100),n(96),n(99),n(97),n(95),n(104),n(93),n(106),n(92),n(89),n(66),n(90),n(107),n(94)],m=l.a.Collection;!function(e){var t=e.$;if(t&&"jQuery"!==t.prototype.constructor.name){var n=t.fn;n.hide=function(){return this.css("display","none")},n.show=function(){return this.css("display","block")},n.focus=function(){var e=this.get(0);return e&&e.focus(),this},n.bind=function(e,t){return this.on(e,t)},n.unbind=function(e,t){if(Object(s.isObject)(e)){for(var n in e)e.hasOwnProperty(n)&&this.off(n,e[n]);return this}return this.off(e,t)},n.click=function(e){return e?this.on("click",e):this.trigger("click")},n.change=function(e){return e?this.on("change",e):this.trigger("change")},n.keydown=function(e){return e?this.on("keydown",e):this.trigger("keydown")},n.delegate=function(e,t,n,i){return i||(i=n),this.on(t,e,(function(e){e.data=n,i(e)}))},n.scrollLeft=function(){var e=this.get(0),t=(e=9==e.nodeType?e.defaultView:e)instanceof Window?e:null;return t?t.pageXOffset:e.scrollLeft||0},n.scrollTop=function(){var e=this.get(0),t=(e=9==e.nodeType?e.defaultView:e)instanceof Window?e:null;return t?t.pageYOffset:e.scrollTop||0};var i=t.prototype.offset;n.offset=function(e){var t,n;return e&&(t=e.top,n=e.left),void 0!==t&&this.css("top","".concat(t,"px")),void 0!==n&&this.css("left","".concat(n,"px")),i.call(this)},t.map=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n};var r=Array.prototype.indexOf;t.inArray=function(e,t,n){return null==t?-1:r.call(t,e,n)},t.Event=function(e,n){if(!(this instanceof t.Event))return new t.Event(e,n);this.type=e,this.isDefaultPrevented=function(){return!1}}}}({Backbone:l.a,$:l.a.$});var v={debug:console.log,info:console.info,warning:console.warn,error:console.error},y=l.a.Model.extend({defaults:function(){return{editing:0,selected:new m,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=t,this.set("Config",t),this.set("modules",[]),this.set("toLoad",[]),this.set("storables",[]),this.set("selected",new m),this.set("dmode",t.dragMode);var n=t.el,i=t.log,r=!0===i?Object(s.keys)(v):Object(s.isArray)(i)?i:[];Object(s.bindAll)(this,"initBaseColorPicker"),n&&t.fromElement&&(this.config.components=n.innerHTML),this.attrsOrig=n?Object(s.toArray)(n.attributes).reduce((function(e,t){return e[t.nodeName]=t.nodeValue,e}),{}):"",g.forEach((function(t){return e.loadModule(t)})),this.on("change:componentHovered",this.componentHovered,this),this.on("change:changesCount",this.updateChanges,this),r.forEach((function(t){return e.listenLog(t)})),[{from:"change:selectedComponent",to:"component:toggled"}].forEach((function(t){var n=t.from,i=t.to;e.listenTo(e,n,(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.trigger.apply(e,[i].concat(r)),e.logWarning("The event '".concat(n,"' is deprecated, replace it with '").concat(i,"'"))}))}))},getContainer:function(){return this.config.el},listenLog:function(e){this.listenTo(this,"log:".concat(e),v[e])},getConfig:function(e){var t=this.config;return Object(s.isUndefined)(e)?t:t[e]},loadOnStart:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.get("StorageManager");this.get("toLoad").forEach((function(e){e.onLoad()}));var i=function(){e.get("modules").forEach((function(t){return t.postLoad&&t.postLoad(e)})),t&&t()};n&&n.canAutoload()?this.load(i):i()},updateChanges:function(){var e=this,t=this.get("StorageManager"),n=this.get("changesCount");f&&clearTimeout(f),f=setTimeout((function(){return e.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(e){return 1}:null),t.isAutosave()&&n>=t.getStepsBeforeSave()&&this.store()},loadModule:function(e){var t=this.config,n=new(e.default||e),i=n.name.charAt(0).toLowerCase()+n.name.slice(1),r=Object(s.isUndefined)(t[i])?t[n.name]:t[i],o=r||{},a=this.get("StorageManager");if(o.pStylePrefix=t.pStylePrefix||"",Object(s.isUndefined)(r)||r||(o._disable=1),n.storageKey&&n.store&&n.load&&a){o.stm=a;var c="domComponents"==i?"unshift":"push";this.get("storables")[c](n)}return o.em=this,n.init(p({},o)),!n.private&&this.set(n.name,n),n.onLoad&&this.get("toLoad").push(n),this.get("modules").push(n),this},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.destroyed&&(this.initialize(t),this.destroyed=0),this.set("Editor",e)},getEditor:function(){return this.get("Editor")},handleUpdates:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.temporary||(h&&clearInterval(h),h=setTimeout((function(){i.avoidStore||n.set("changesCount",n.get("changesCount")+1,i)}),0))},componentHovered:function(e,t,n){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,n),t&&this.trigger("component:hovered",t,n)},getSelected:function(){return this.get("selected").last()},getSelectedAll:function(){return this.get("selected").models},setSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(s.isArray)(e),r=i?e:[e],a=this.get("selected");i&&this.removeSelected(a.filter((function(e){return!Object(s.contains)(r,e)}))),r.forEach((function(e){var r=Object(u.g)(e,o.default);r&&!r.get("selectable")||(!i&&t.removeSelected(a.filter((function(e){return e!==r}))),t.addSelected(r,n))}))},addSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(u.g)(e,o.default),r=Object(s.isArray)(i)?i:[i];r.forEach((function(e){if(!e||e.get("selectable")){var i=t.get("selected");n.forceChange&&i.remove(e,n),i.push(e,n)}}))},removeSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.get("selected").remove(Object(u.g)(e,o.default),t)},toggleSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(u.g)(e,o.default),r=Object(s.isArray)(i)?i:[i];r.forEach((function(e){t.get("selected").contains(e)?t.removeSelected(e,n):t.addSelected(e,n)}))},setHovered:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(u.g)(e,o.default);n&&!n.get("hoverable")||(t.forceChange&&this.set("componentHovered",""),this.set("componentHovered",n,t))},getHovered:function(){return this.get("componentHovered")},setComponents:function(e){return this.get("DomComponents").setComponents(e)},getComponents:function(){var e=this.get("DomComponents"),t=this.get("CodeManager");if(e&&t){var n=e.getComponents();return t.getCode(n,"json")}},setStyle:function(e){for(var t=this.get("CssComposer").getAll(),n=0,i=t.length;n<i;n++)t.pop();return t.add(e),this},getStyle:function(){return this.get("CssComposer").getAll()},setState:function(e){return this.set("state",e),this},getState:function(){return this.get("state")},getHtml:function(){var e=this.config,t=e.exportWrapper,n=e.wrapperIsBody,i=e.jsInHtml?this.getJs():"",r=this.get("DomComponents").getComponent();return this.get("CodeManager").getCode(r,"html",{exportWrapper:t,wrapperIsBody:n})+(i?"<script>".concat(i,"<\/script>"):"")},getCss:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.config,n=t.wrapperIsBody,i=e.avoidProtected,r=Object(s.isUndefined)(e.keepUnusedStyles)?t.keepUnusedStyles:e.keepUnusedStyles,o=this.get("CssComposer"),a=this.get("DomComponents").getComponent(),c=i?"":t.protectedCss;return c+this.get("CodeManager").getCode(a,"css",{cssc:o,wrapperIsBody:n,keepUnusedStyles:r})},getJs:function(){var e=this.get("DomComponents").getWrapper();return this.get("CodeManager").getCode(e,"js").trim()},store:function(e){var t=this,n=this.get("StorageManager"),i={};if(n)return this.get("storables").forEach((function(e){var t=e.store(1);for(var n in t)i[n]=t[n]})),n.store(i,(function(n){e&&e(n),t.set("changesCount",0),t.trigger("storage:store",i)})),i},load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getCacheLoad(1,(function(n){e.get("storables").forEach((function(e){return e.load(n)})),t&&t(n)}))},getCacheLoad:function(e,t){var n=this;if(this.cacheLoad&&!e)return this.cacheLoad;var i=this.get("StorageManager"),r=[];if(!i)return{};this.get("storables").forEach((function(e){var t=e.storageKey;t=Object(s.isFunction)(t)?t():t,(Object(s.isArray)(t)?t:[t]).forEach((function(e){return r.push(e)}))})),i.load(r,(function(e){n.cacheLoad=e,t&&t(e),setTimeout((function(){return n.trigger("storage:load",e)}))}))},getDeviceModel:function(){var e=this.get("device");return this.get("DeviceManager").get(e)},runDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("Commands").get(this.config.defaultCommand);t&&!this.defaultRunning&&(t.stop(this,this,e),t.run(this,this,e),this.defaultRunning=1)},stopDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("Commands"),n=t.get(this.config.defaultCommand);n&&(n.stop(this,this,e),this.defaultRunning=0)},refreshCanvas:function(){this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset())},clearSelection:function(e){(e||window).getSelection().removeAllRanges()},getCurrentMedia:function(){var e=this.config,t=this.getDeviceModel(),n=e.mediaCondition,i=e.devicePreviewMode,r=t&&t.get("widthMedia");return t&&r&&!i?"(".concat(n,": ").concat(r,")"):""},getWrapper:function(){return this.get("DomComponents").getWrapper()},setCurrentFrame:function(e){return this.set("currentFrame",e)},getCurrentFrame:function(){return this.get("currentFrame")},getCurrentFrameModel:function(){return(this.getCurrentFrame()||{}).model},getDirtyCount:function(){return this.get("changesCount")},getZoomDecimal:function(){return this.get("Canvas").getZoomDecimal()},getZoomMultiplier:function(){return this.get("Canvas").getZoomMultiplier()},setDragMode:function(e){return this.set("dmode",e)},t:function(){var e;return(e=this.get("I18n")).t.apply(e,arguments)},inAbsoluteMode:function(){return"absolute"===this.get("dmode")},destroyAll:function(){var e=this.config,t=this.getEditor(),n=(e.grapesjs||{}).editors,i=void 0===n?[]:n,r=this.attributes,a=r.DomComponents,s=r.CssComposer,c=r.UndoManager,l=r.Panels,u=r.Canvas,d=r.Keymaps,p=r.RichTextEditor;this.stopDefault(),a.clear(),s.clear(),c.clear().removeAll(),l.getPanels().reset(),u.getCanvasView().remove(),d.removeAll(),p.destroy(),this.view.remove(),this.stopListening(),this.clear({silent:!0}),this.destroyed=1,i.splice(i.indexOf(t),1),Object(o.default)(e.el).empty().attr(this.attrsOrig)},setEditing:function(e){return this.set("editing",e),this},isEditing:function(){return!!this.get("editing")},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ns,i=t.level,r=void 0===i?"debug":i;if(this.trigger("log",e,t),r&&this.trigger("log:".concat(r),e,t),n){var o="log-".concat(n);this.trigger(o,e,t),r&&this.trigger("".concat(o,":").concat(r),e,t)}},logInfo:function(e,t){this.log(e,p({},t,{level:"info"}))},logWarning:function(e,t){this.log(e,p({},t,{level:"warning"}))},logError:function(e,t){this.log(e,p({},t,{level:"error"}))},initBaseColorPicker:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getConfig(),i=n.colorPicker,r=void 0===i?{}:i,a=n.el,s=n.stylePrefix;return Object(o.default)(e).spectrum(p({containerClassName:"".concat(s,"one-bg ").concat(s,"two-color"),appendTo:a||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:""},t,{},r))},data:function(e,t,n){if(e["_gjs-data"]||(e["_gjs-data"]={}),Object(s.isUndefined)(n))return e["_gjs-data"][t];e["_gjs-data"][t]=n}}),b=l.a.$,w=l.a.View.extend({initialize:function(){var e=this,t=this.model;t.view=this,this.conf=t.config,this.pn=t.get("Panels"),this.cv=t.get("Canvas"),t.on("loaded",(function(){e.pn.active(),e.pn.disableButtons(),setTimeout((function(){t.runDefault(),t.trigger("load",t.get("Editor"))}))}))},render:function(){this.model;var e=this.$el,t=this.conf,n=t.stylePrefix,i=b(t.el||"body ".concat(t.container));return Object(u.a)(t.cssIcons,{unique:1,prepand:1}),e.empty(),t.width&&i.css("width",t.width),t.height&&i.css("height",t.height),e.append(this.cv.render()),e.append(this.pn.render()),e.attr("class","".concat(n,"editor ").concat(n,"one-bg ").concat(n,"two-color")),i.addClass("".concat(n,"editor-cont")).empty().append(e),this}});function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E({},a,{},e);t.pStylePrefix=t.stylePrefix;var n=new y(t),i=new w({model:n,config:t});return{$:o.default,editor:n,init:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.init(this,E({},t,{},r)),["I18n","Utils","Config","Commands","Keymaps","Modal","Panels","Canvas","Parser","CodeManager","UndoManager","RichTextEditor","DomComponents",["Components","DomComponents"],"LayerManager",["Layers","LayerManager"],"CssComposer",["Css","CssComposer"],"StorageManager",["Storage","StorageManager"],"AssetManager",["Assets","AssetManager"],"BlockManager",["Blocks","BlockManager"],"TraitManager",["Traits","TraitManager"],"SelectorManager",["Selectors","SelectorManager"],"StyleManager",["Styles","StyleManager"],"DeviceManager",["Devices","DeviceManager"]].forEach((function(t){Array.isArray(t)?e[t[0]]=n.get(t[1]):e[t]=n.get(t)})),n.on("loaded",(function(){e.UndoManager.clear(),n.get("modules").forEach((function(e){e.postRender&&e.postRender(i)}))})),this},getConfig:function(e){return n.getConfig(e)},getHtml:function(e){return n.getHtml(e)},getCss:function(e){return n.getCss(e)},getJs:function(){return n.getJs()},getComponents:function(){return n.get("DomComponents").getComponents()},getWrapper:function(){return n.get("DomComponents").getWrapper()},setComponents:function(e){return n.setComponents(e),this},addComponents:function(e,t){return this.getWrapper().append(e,t)},getStyle:function(){return n.get("CssComposer").getAll()},setStyle:function(e){return n.setStyle(e),this},getSelected:function(){return n.getSelected()},getSelectedAll:function(){return n.getSelectedAll()},getSelectedToStyle:function(){var e=n.getSelected();if(e)return this.StyleManager.getModelToStyle(e)},select:function(e,t){return n.setSelected(e,t),this},selectAdd:function(e){return n.addSelected(e),this},selectRemove:function(e){return n.removeSelected(e),this},selectToggle:function(e){return n.toggleSelected(e),this},setDevice:function(e){return n.set("device",e),this},getDevice:function(){return n.get("device")},runCommand:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("Commands").run(e,t)},stopCommand:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("Commands").stop(e,t)},store:function(e){return n.store(e)},load:function(e){return n.load(e)},getContainer:function(){return t.el},getDirtyCount:function(){return n.getDirtyCount()},refresh:function(){n.refreshCanvas()},setCustomRte:function(e){this.RichTextEditor.customRte=e},setCustomParserCss:function(e){return this.Parser.getConfig().parserCss=e,this},setDragMode:function(e){return n.setDragMode(e),this},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.log(e,t),this},t:function(){return n.t.apply(n,arguments)},on:function(e,t){return n.on(e,t),this},once:function(e,t){return n.once(e,t),this},off:function(e,t){return n.off(e,t),this},trigger:function(e){return n.trigger.apply(n,arguments),this},destroy:function(){return n.destroyAll()},getEl:function(){return i.el},getModel:function(){return n},render:function(){return i.render(),i.el}}},S={plugins:[]};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){if(function(){for(var e,t=window.navigator.userAgent,n=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],i=0;i<n.length&&!(e=n[i][1].exec(t));i++);return!!e}()){var e=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),e.apply(document.implementation,[t])}}}();var k=new function(e){var t={};for(var n in S)n in t||(t[n]=S[n]);var i={};return{add:function(e,t){return i[e]?i[e]:(i[e]=t,t)},get:function(e){return i[e]},getAll:function(){return i}}},T=[],P={autorender:1,plugins:[],pluginsOpts:{}};t.default={$:o.default,editors:T,plugins:k,version:"0.16.12",init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container;if(!t)throw new Error("'container' is required");(e=O({},P,{},e,{grapesjs:this})).el=Object(s.isElement)(t)?t:document.querySelector(t);var n=new _(e).init();return e.plugins.forEach((function(t){var i=k.get(t),r=e.pluginsOpts[t]||{};if(!i){var o=window[t];i=o&&o.default?o.default:o}i?i(n,r):Object(s.isFunction)(t)?t(n,r):console.warn("Plugin ".concat(t," not found"))})),n.getModel().loadOnStart(),e.autorender&&n.render(),T.push(n),n}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]},o=n(19),a=n(2),s=n.n(a),c=n(69),l=n.n(c),u=n(1),d=n.n(u),p=n(3);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var f=d.a.$,g=d.a.View.extend({events:{},eventCapture:["change"],appendInput:1,attributes:function(){return this.model.get("attributes")},templateLabel:function(){var e=this.ppfx,t=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(t,'">').concat(t,"</div>")},templateInput:function(){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.config,i=void 0===n?{}:n,r=this.model,o=this.eventCapture,a=r.target,s=r.attributes.type;this.config=i,this.em=i.em,this.pfx=i.stylePrefix||"",this.ppfx=i.pStylePrefix||"",this.target=a;var c=this.ppfx;this.clsField="".concat(c,"field ").concat(c,"field-").concat(s),[["change:value",this.onValueChange],["remove",this.removeView]].forEach((function(t){var n=l()(t,2),i=n[0],o=n[1];r.off(i,o),e.listenTo(r,i,o)})),r.view=this,this.listenTo(r,"change:label",this.render),this.listenTo(r,"change:placeholder",this.rerender),o.forEach((function(t){return e.events[t]="onChange"})),this.delegateEvents(),this.init()},getClbOpts:function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},removeView:function(){this.remove(),this.removed()},init:function(){},removed:function(){},onRender:function(){},onUpdate:function(){},onEvent:function(){},onChange:function(e){var t=this.getInputElem();t&&!Object(i.isUndefined)(t.value)&&this.model.set("value",t.value),this.onEvent(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.getClbOpts(),{event:e}))},getValueForTarget:function(){return this.model.get("value")},setInputValue:function(e){var t=this.getInputElem();t&&(t.value=e)},onValueChange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.fromTarget)this.setInputValue(e.get("value")),this.postUpdate();else{var i=this.getValueForTarget();e.setTargetValue(i,n)}},renderLabel:function(){var e=this.$el,t=this.target,n=this.getLabel(),i=this.templateLabel(t);this.createLabel&&(i=this.createLabel({label:n,component:t,trait:this})||""),e.find("[data-label]").append(i)},getLabel:function(){var e=this.em,t=this.model.attributes,n=t.label,i=t.name;return e.t("traitManager.traits.labels.".concat(i))||Object(p.c)(n||i).replace(/-/g," ")},getComponent:function(){return this.target},getInputEl:function(){if(!this.$input){var e=this.em,t=this.model,n=t,r=t.attributes.name,o=n.get("placeholder")||n.get("default")||"",a=n.get("type")||"text",s=n.get("min"),c=n.get("max"),l=this.getModelValue(),u=f('<input type="'.concat(a,'" placeholder="').concat(o,'">')),d=e.t("traitManager.traits.attributes.".concat(r))||{};u.attr(d),Object(i.isUndefined)(l)||(n.set({value:l},{silent:!0}),u.prop("value",l)),s&&u.prop("min",s),c&&u.prop("max",c),this.$input=u}return this.$input.get(0)},getInputElem:function(){var e=this.input,t=this.$input;return e||t&&t.get&&t.get(0)||this.getElInput()},getModelValue:function(){var e,t=this.model,n=this.target,r=t.get("name");if(t.get("changeProp"))e=n.get(r);else{var o=n.get("attributes");e=t.get("value")||o[r]}return Object(i.isUndefined)(e)?"":e},getElInput:function(){return this.elInput},renderField:function(){var e=this.$el,t=this.appendInput,n=this.model,r=e.find("[data-input]"),o=r[r.length-1],a=n.el;a||(a=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),Object(i.isString)(a)?(o.innerHTML=a,this.elInput=o.firstChild):(t?o.appendChild(a):o.insertBefore(a,o.firstChild),this.elInput=a),n.el=this.elInput},hasLabel:function(){var e=this.model.attributes.label;return!this.noLabel&&!1!==e},rerender:function(){this.model.el=null,this.render()},postUpdate:function(){this.onUpdate(this.getClbOpts())},render:function(){var e=this.$el,t=this.pfx,n=this.ppfx,r=this.model.attributes.type,o=this.hasLabel&&this.hasLabel(),a="".concat(t,"trait");this.$input=null;var s='<div class="'.concat(a,'">\n      ').concat(o?'<div class="'.concat(n,'label-wrp" data-label></div>'):"",'\n      <div class="').concat(n,"field-wrp ").concat(n,"field-wrp--").concat(r,'" data-input>\n        ').concat(this.templateInput?Object(i.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"","\n      </div>\n    </div>");return e.empty().append(s),o&&this.renderLabel(),this.renderField(),this.el.className="".concat(a,"__wrp"),this.postUpdate(),this.onRender(this.getClbOpts()),this}}),m=d.a.$,v=g.extend({init:function(){this.listenTo(this.model,"change:options",this.rerender)},templateInput:function(){var e=this.ppfx,t=this.clsField;return'<div class="'.concat(t,'">\n      <div data-input></div>\n      <div class="').concat(e,'sel-arrow">\n        <div class="').concat(e,'d-s-arrow"></div>\n      </div>\n    </div>')},getInputEl:function(){if(!this.$input){var e=this.model,t=this.em,n=e.get("name"),r=e.get("options")||[],o="<select>";r.forEach((function(e){var r,a,s,c="";Object(i.isString)(e)?(r=e,a=e):(r=e.name||e.label||e.value,a="".concat(Object(i.isUndefined)(e.value)?e.id:e.value).replace(/"/g,"&quot;"),c+=(s=e.style?e.style.replace(/"/g,"&quot;"):"")?' style="'.concat(s,'"'):"");var l=t.t("traitManager.traits.options.".concat(n,".").concat(a))||r;o+='<option value="'.concat(a,'"').concat(c,">").concat(l,"</option>")})),o+="</select>",this.$input=m(o);var a=e.getTargetValue();!Object(i.isUndefined)(a)&&this.$input.val(a)}return this.$input.get(0)}}),y=g.extend({appendInput:0,templateInput:function(){var e=this.ppfx,t=this.clsField;return'<label class="'.concat(t,'" data-input>\n    <i class="').concat(e,'chk-icon"></i>\n  </label>')},onChange:function(){var e=this.getInputElem().checked;this.model.set("value",this.getCheckedValue(e))},getCheckedValue:function(e){var t=e,n=this.model.attributes,r=n.valueTrue,o=n.valueFalse;return t&&!Object(i.isUndefined)(r)&&(t=r),t||Object(i.isUndefined)(o)||(t=o),t},getInputEl:function(){for(var e=!this.$input,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=g.prototype.getInputEl.apply(this,n);if(e){var a,s,c=this.model,l=this.target,u=c.attributes,d=(u.valueTrue,u.valueFalse),p=c.get("name");c.get("changeProp")?s=a=l.get(p):a=!(!(s=l.get("attributes")[p])&&""!==s),Object(i.isUndefined)(d)||s!==d||(a=!1),o.checked=a}return o}}),b=n(31),w=g.extend({getValueForTarget:function(){var e=this.model.attributes,t=e.value,n=e.unit;return t?t+n:""},getInputEl:function(){if(!this.input){var e=this.getModelValue(),t=new b.a({contClass:this.ppfx+"field-int",model:this.model,ppfx:this.ppfx});this.input=t.render(),this.$input=this.input.inputEl,this.$unit=this.input.unitEl,this.model.set("value",e),this.$input.val(e),this.input=t.el}return this.input}}),x=n(37),E=g.extend({templateInput:"",getInputEl:function(){if(!this.input){var e=this.model,t=this.getModelValue(),n=new x.a({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(t,{fromTarget:1}),this.input=n.el}return this.input}}),_=g.extend({events:{"click button":"handleClick"},templateInput:"",handleClick:function(){var e=this.model,t=this.em,n=e.get("command");n&&(Object(i.isString)(n)?t.get("Commands").run(n):n(t.get("Editor"),e))},renderLabel:function(){this.model.get("label")&&g.prototype.renderLabel.apply(this,arguments)},getInputEl:function(){var e=this.model,t=this.ppfx,n=e.props(),i=n.labelButton,r=n.text,o=n.full,a=i||r,s="".concat(t,"btn");return'<button type="button" class="'.concat(s,"-prim").concat(o?" ".concat(s,"--full"):"",'">').concat(a,"</button>")}}),S=o.a.extend({ns:"Traits",itemView:g,reuseView:1,itemsView:{text:g,number:w,select:v,checkbox:y,color:E,button:_},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config||{};this.config=t,this.em=e.editor,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.className=this.pfx+"traits";var n="component:toggled";this.listenTo(this.em,n,this.updatedCollection),this.updatedCollection()},updatedCollection:function(){var e=this.ppfx,t=this.em.getSelected();this.el.className="".concat(this.className," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=t?t.get("traits"):[],this.render()}});t.default=function(){var e,t={};return{TraitsView:S,name:"TraitManager",getConfig:function(){return t},init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=n,Object(i.defaults)(t,r);var o=t.pStylePrefix;return o&&(t.stylePrefix="".concat(o).concat(t.stylePrefix)),e=new S({collection:[],editor:t.em,config:t}),this},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(i.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},getTraitsViewer:function(){return e},addType:function(t,n){var i=e.itemView;e.itemsView[t]=i.extend(n)},getType:function(t){return e.itemsView[t]},render:function(){return e.render().el}}}},function(e,t,n){"use strict";n.r(t);var i={assets:[],noAssets:"",stylePrefix:"am-",upload:0,uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:1,customFetch:"",uploadFile:"",embedAsBase64:1,handleAdd:"",dropzone:0,openAssetsOnDrop:1,dropzoneContent:"",beforeUpload:null,showUrlInput:!0},r=n(1),o=n.n(r),a=n(2),s=n.n(a),c=o.a.Model.extend({idAttribute:"src",defaults:{type:"",src:""},getFilename:function(){return this.get("src").split("/").pop()},getExtension:function(){return this.getFilename().split(".").pop()}});function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var u=c.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c.prototype.defaults,{type:"image",unitDim:"px",height:0,width:0})}),d=n(0),p=o.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.collection=e.collection;var t=e.config||{};this.config=t,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.em=t.em,this.className=this.pfx+"asset",this.listenTo(this.model,"destroy remove",this.remove),this.model.view=this;var n=this.init&&this.init.bind(this);n&&n(e)},template:function(){var e=this.pfx;return'\n      <div class="'.concat(e,'preview-cont">\n        ').concat(this.getPreview(),'\n      </div>\n      <div class="').concat(e,'meta">\n        ').concat(this.getInfo(),'\n      </div>\n      <div class="').concat(e,'close" data-toggle="asset-remove">\n        &Cross;\n      </div>\n    ')},updateTarget:function(e){e&&e.set&&(e.set("attributes",Object(d.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},getPreview:function(){return""},getInfo:function(){return""},render:function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this}}).extend({events:{"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"},getPreview:function(){var e=this.pfx,t=this.model.get("src");return'\n      <div class="'.concat(e,'preview" style="background-image: url(\'').concat(t,'\');"></div>\n      <div class="').concat(e,"preview-bg ").concat(this.ppfx,'checker-bg"></div>\n    ')},getInfo:function(){var e=this.pfx,t=this.model,n=t.get("name"),i=t.get("width"),r=t.get("height"),o=t.get("unitDim"),a=i&&r?"".concat(i,"x").concat(r).concat(o):"";return n=n||t.getFilename(),'\n      <div class="'.concat(e,'name">').concat(n,'</div>\n      <div class="').concat(e,'dimensions">').concat(a,"</div>\n    ")},init:function(e){var t=this.pfx;this.className+=" ".concat(t,"asset-image")},onClick:function(){var e=this.config.onClick,t=this.model;this.collection.trigger("deselectAll"),this.$el.addClass(this.pfx+"highlight"),Object(d.isFunction)(e)?e(t):this.updateTarget(this.collection.target)},onDblClick:function(){var e=this.em,t=this.model,n=this.config.onDblClick;Object(d.isFunction)(n)?n(t):(this.updateTarget(this.collection.target),e&&e.get("Modal").close());var i=this.collection.onSelect;Object(d.isFunction)(i)&&i(t)},onRemove:function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)}}),h=n(28),f=o.a.Collection.extend(h.a).extend({types:[{id:"image",model:u,view:p,isType:function(e){return"string"==typeof e?{type:"image",src:e}:e}}]}),g=n(30),m=n.n(g),v=o.a.View.extend({events:{submit:"handleSubmit"},template:function(e){var t=e.pfx,n=e.ppfx,i=e.em,r=(m()(e,["pfx","ppfx","em"]),"");return this.config.showUrlInput&&(r='\n          <form class="'.concat(t,'add-asset">\n            <div class="').concat(n,"field ").concat(t,'add-field">\n              <input placeholder="').concat(i&&i.t("assetManager.inputPlh"),'"/>\n            </div>\n            <button class="').concat(n,'btn-prim">').concat(i&&i.t("assetManager.addButton"),'</button>\n            <div style="clear:both"></div>\n          </form>\n      ')),'\n    <div class="'.concat(t,'assets-cont">\n      <div class="').concat(t,'assets-header">\n        ').concat(r,'\n      </div>\n      <div class="').concat(t,'assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    ')},initialize:function(e){this.options=e,this.config=e.config,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em;var t=this.collection;this.listenTo(t,"reset",this.renderAssets),this.listenTo(t,"add",this.addToAsset),this.listenTo(t,"remove",this.removedAsset),this.listenTo(t,"deselectAll",this.deselectAll)},handleSubmit:function(e){e.preventDefault();var t=this.getAddInput(),n=t&&t.value.trim(),i=this.config.handleAdd;n&&(t.value="",this.getAssetsEl().scrollTop=0,i?i.bind(this)(n):this.options.globalCollection.add(n,{at:0}))},getAssetsEl:function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},getAddInput:function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},removedAsset:function(e){this.collection.length||this.toggleNoAssets()},addToAsset:function(e){1==this.collection.length&&this.toggleNoAssets(1),this.addAsset(e)},addAsset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t,i=this.collection,r=this.config,o=new e.typeView({model:e,collection:i,config:r}).render().el;if(n)n.appendChild(o);else{var a=this.getAssetsEl();a&&a.insertBefore(o,a.firstChild)}return o},toggleNoAssets:function(e){var t=this.$el.find(".".concat(this.pfx,"assets"));if(e)t.empty();else{var n=this.config.noAssets;n&&t.append(n)}},deselectAll:function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},renderAssets:function(){var e=this,t=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(this.collection.length),this.collection.each((function(n){return e.addAsset(n,t)})),n.append(t)},render:function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this.rendered=1,this}}),y=n(26),b=o.a.View.extend({template:Object(d.template)('\n  <form>\n    <div id="<%= pfx %>title"><%= title %></div>\n    <input type="file" id="<%= uploadId %>" name="file" accept="*/*" <%= disabled ? \'disabled\' : \'\' %> <%= multiUpload ? \'multiple\' : \'\' %>/>\n    <div style="clear:both;"></div>\n  </form>\n  '),events:{},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e;var t=e.config||{};this.config=t,this.em=this.config.em,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.target=this.options.globalCollection||{},this.uploadId=this.pfx+"uploadFile",this.disabled=void 0!==t.disableUpload?t.disableUpload:!t.upload&&!t.embedAsBase64,this.multiUpload=void 0===t.multiUpload||t.multiUpload,this.events["change #"+this.uploadId]="uploadFile";var n=t.uploadFile;n?this.uploadFile=n.bind(this):!t.upload&&t.embedAsBase64&&(this.uploadFile=this.constructor.embedAsBase64),this.delegateEvents()},onUploadStart:function(){var e=this.config.em;e&&e.trigger("asset:upload:start")},onUploadEnd:function(e){var t=this.$el,n=this.config.em;n&&n.trigger("asset:upload:end",e);var i=t.find("input");i&&i.val("")},onUploadError:function(e){var t=this.config.em;console.error(e),this.onUploadEnd(e),t&&t.trigger("asset:upload:error",e)},onUploadResponse:function(e,t){var n,i=this.config.em,r=this.config,o=this.target;try{n="string"==typeof e?JSON.parse(e):e}catch(t){n=e}i&&i.trigger("asset:upload:response",n),r.autoAdd&&o&&o.add(n.data,{at:0}),this.onUploadEnd(e),t&&t(n)},uploadFile:function(e,t){var n=this,i=e.dataTransfer?e.dataTransfer.files:e.target.files,r=this.config,o=r.beforeUpload;if(!1!==(o&&o(i))){var a=new FormData,s=r.params,c=r.customFetch;for(var l in s)a.append(l,s[l]);if(this.multiUpload)for(var u=0;u<i.length;u++)a.append("".concat(r.uploadName,"[]"),i[u]);else i.length&&a.append(r.uploadName,i[0]);this.target;var d=r.upload,p=r.headers;if(void 0===p["X-Requested-With"]&&(p["X-Requested-With"]="XMLHttpRequest"),d){this.onUploadStart();var h={method:"post",credentials:r.credentials||"include",headers:p,body:a};return(c?c(d,h):Object(y.a)(d,h).then((function(e){return 1==(e.status/200|0)?e.text():e.text().then((function(e){return Promise.reject(e)}))}))).then((function(e){return n.onUploadResponse(e,t)})).catch((function(e){return n.onUploadError(e)}))}}},initDrop:function(){var e=this;!this.uploadForm&&(this.uploadForm=this.$el.find("form").get(0),"draggable"in this.uploadForm)&&(this.uploadFile,this.uploadForm.ondragover=function(){return this.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return this.className="",!1},this.uploadForm.ondrop=function(t){this.className="",t.preventDefault(),e.uploadFile(t)})},initDropzone:function(e){var t=this,n=0,i=this.config,r=e.model,o=e.el,a=r.get("Editor"),s=(r.get("Config").el,r.get("Canvas").getBody()),c=this.ppfx,l="".concat(c,"dropzone-active"),u="".concat(c,"dropzone"),d=function(){o.className=o.className.replace(l,"").trim(),n=0},p=function(){return n||(o.className+=" ".concat(l),n=1),!1},h=function(){return d(),!1},f=function(e){if(d(),e.preventDefault(),e.stopPropagation(),t.uploadFile(e),i.openAssetsOnDrop&&a){var n=a.getSelected();a.runCommand("open-assets",{target:n,onSelect:function(){a.Modal.close(),a.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(u,'">').concat(i.dropzoneContent,"</div>")),d(),"draggable"in o&&[o,s].forEach((function(e){e.ondragover=p,e.ondragleave=h,e.ondrop=f}))},render:function(){var e=this.$el,t=this.pfx,n=this.em;return e.html(this.template({title:n&&n.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:t})),this.initDrop(),e.attr("class",t+"file-uploader"),this}},{embedAsBase64:function(e,t){var n=this,i=e.dataTransfer?e.dataTransfer.files:e.target.files,r={data:[]};if(FileReader){var o=[],a=/^(.+)\/(.+)$/,s=!0,c=!1,l=void 0;try{for(var u,d=function(){var e=u.value,t=new Promise((function(t,n){var i=new FileReader;i.addEventListener("load",(function(r){var o,s=e.name,c=a.exec(e.type);if("image"===(o=c?c[1]:e.type)){var l={src:i.result,name:s,type:o,height:0,width:0},u=new Image;u.addEventListener("error",(function(e){n(e)})),u.addEventListener("load",(function(){l.height=u.height,l.width=u.width,t(l)})),u.src=l.src}else t(o?{src:i.result,name:s,type:o}:i.result)})),i.addEventListener("error",(function(e){n(e)})),i.addEventListener("abort",(function(e){n("Aborted")})),i.readAsDataURL(e)}));o.push(t)},p=i[Symbol.iterator]();!(s=(u=p.next()).done);s=!0)d()}catch(e){c=!0,l=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw l}}Promise.all(o).then((function(e){r.data=e,n.onUploadResponse(r,t)}),(function(e){n.onUploadError(e)}))}else this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))}});t.default=function(){var e,t,n,r={};return{name:"AssetManager",storageKey:"assets",getConfig:function(){return r},init:function(o){var a=this;for(var s in r=o||{},i)s in r||(r[s]=i[s]);var c=r.pStylePrefix,l=r.em;c&&(r.stylePrefix=c+r.stylePrefix),e=new f([]);var u={collection:new f([]),globalCollection:e,config:r};return n=new b(u),u.fu=n,t=new v(u),e.listenTo(e,"add",(function(e){a.getAllVisible().add(e),l&&l.trigger("asset:add",e)})),e.listenTo(e,"remove",(function(e){a.getAllVisible().remove(e),l&&l.trigger("asset:remove",e)})),this},add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===n.at&&(n.at=0),e.add(t,n)},get:function(t){return e.where({src:t})[0]},getAll:function(){return e},getAllVisible:function(){return t.collection},remove:function(e){var t=this.get(e);return this.getAll().remove(t),this},store:function(e){var t={},n=JSON.stringify(this.getAll().toJSON());return t[this.storageKey]=n,!e&&r.stm&&r.stm.store(t),t},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.storageKey,n=e[t]||[];if("string"==typeof n)try{n=JSON.parse(e[t])}catch(e){}return n&&n.length&&this.getAll().reset(n),n},getContainer:function(){return t.el},getAssetsEl:function(){return t.el.querySelector("[data-el=assets]")},render:function(e){var n=e||this.getAll().models;return t.rendered||t.render(),t.collection.reset(n),this.getContainer()},addType:function(e,t){this.getAll().addType(e,t)},getType:function(e){return this.getAll().getType(e)},getTypes:function(){return this.getAll().getTypes()},AssetsView:function(){return t},FileUploader:function(){return n},onLoad:function(){this.getAll().reset(r.assets)},postRender:function(e){r.dropzone&&n.initDropzone(e)},setTarget:function(e){t.collection.target=e},onSelect:function(e){t.collection.onSelect=e},onClick:function(e){r.onClick=e},onDblClick:function(e){r.onDblClick=e}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(0),a={appendTo:"",appendOnClick:0,blocks:[]},s=n(1),c=n.n(s),l=c.a.Model.extend({defaults:{id:"",label:"",open:!0,attributes:{}}}),u=c.a.Model.extend({defaults:{activate:0,select:0,resetId:0,label:"",disable:0,media:"",content:"",category:"",attributes:{}},initialize:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.get("category");e&&"string"==typeof e&&new l({id:e,label:e})}}),d=c.a.Collection.extend({model:u}),p=c.a.Collection.extend({model:l}),h=n(3),f=c.a.View.extend({events:{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model;this.em=t.em,this.config=t,this.endDrag=this.endDrag.bind(this),this.ppfx=t.pStylePrefix||"",this.listenTo(n,"destroy remove",this.remove),this.listenTo(n,"change",this.render)},handleClick:function(){var e=this.config,t=this.model,n=this.em;if(e.appendOnClick){var i,r=e.getSorter(),o=t.get("content"),a=n.getSelected();if(r.setDropContent(o),a)if(r.validTarget(a.getEl(),o).valid)i=a;else{var s=a.parent();r.validTarget(s.getEl(),o).valid&&(i=s)}if(!i){var c=n.getWrapper();r.validTarget(c.getEl(),o).valid&&(i=c)}var l=i&&i.append(o)[0];l&&n.setSelected(l,{scroll:1})}},startDrag:function(e){var t=this.config,n=this.em,i=this.model.get("disable");if(0===e.button&&t.getSorter&&!this.el.draggable&&!i){n.refreshCanvas();var r=t.getSorter();r.setDragHelper(this.el,e),r.setDropContent(this.model.get("content")),r.startSort(this.el),Object(h.t)(document,"mouseup",this.endDrag)}},handleDragStart:function(e){var t=this.em,n=this.model,i=n.get("content"),r=Object(o.isObject)(i)?JSON.stringify(i):i;t.set("dragResult"),e.dataTransfer.setData("text",r),t.set("dragContent",i),t.trigger("block:drag:start",n,e)},handleDrag:function(e){this.em.trigger("block:drag",this.model,e)},handleDragEnd:function(){var e=this.em,t=this.model,n=e.get("dragResult");if(n){var i=n.get&&n.get("activeOnRender");(t.get("activate")||i)&&(n.trigger("active"),n.set("activeOnRender",0)),t.get("select")&&e.setSelected(n),t.get("resetId")&&n.onAll((function(e){return e.resetId()}))}e.set({dragResult:null,dragContent:null}),e.trigger("block:drag:stop",n,t)},endDrag:function(e){Object(h.s)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},render:function(){var e=this.em,t=this.el,n=this.ppfx,i=this.model,r=i.get("disable"),o=(i.get("attributes")||{}).class||"",a="".concat(n,"block"),s=e&&e.t("blockManager.labels.".concat(i.id))||i.get("label"),c=i.get("render"),l=i.get("media"),u=r?"".concat(a,"--disable"):"".concat(n,"four-color-h");t.className="".concat(o," ").concat(a," ").concat(n,"one-bg ").concat(u).trim(),t.innerHTML="\n      ".concat(l?'<div class="'.concat(a,'__media">').concat(l,"</div>"):"",'\n      <div class="').concat(a,'-label">').concat(s,"</div>\n    "),t.title=t.textContent.trim(),t.setAttribute("draggable",!(!Object(h.k)(e)||r));var d=c&&c({el:t,model:i,className:a,prefix:n});return d&&(t.innerHTML=d),this}}),g=c.a.View.extend({template:Object(o.template)('\n  <div class="<%= pfx %>title">\n    <i class="<%= pfx %>caret-icon"></i>\n    <%= label %>\n  </div>\n  <div class="<%= pfx %>blocks-c"></div>\n  '),events:{},initialize:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e;var t=e.pStylePrefix||"";this.em=e.em,this.pfx=t,this.caretR="fa fa-caret-right",this.caretD="fa fa-caret-down",this.iconClass="".concat(t,"caret-icon"),this.activeClass="".concat(t,"open"),this.className="".concat(t,"block-category"),this.events["click .".concat(t,"title")]="toggle",this.listenTo(this.model,"change:open",this.updateVisibility),this.delegateEvents()},updateVisibility:function(){this.model.get("open")?this.open():this.close()},open:function(){this.el.className="".concat(this.className," ").concat(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},close:function(){this.el.className=this.className,this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},toggle:function(){var e=this.model;e.set("open",!e.get("open"))},getIconEl:function(){return this.iconEl||(this.iconEl=this.el.querySelector("."+this.iconClass)),this.iconEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector("."+this.pfx+"blocks-c")),this.blocksEl},append:function(e){this.getBlocksEl().appendChild(e)},render:function(){var e=this.em,t=this.el,n=this.$el,i=this.model,r=e.t("blockManager.categories.".concat(i.id))||i.get("label");return t.innerHTML=this.template({pfx:this.pfx,label:r}),t.className=this.className,n.css({order:i.get("order")}),this.updateVisibility(),this}});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=c.a.View.extend({initialize:function(e,t){Object(o.bindAll)(this,"getSorter","onDrag","onDrop"),this.config=t||{},this.categories=e.categories||"",this.renderedCategories=[];var n=this.config.pStylePrefix||"";this.ppfx=n,this.noCatClass="".concat(n,"blocks-no-cat"),this.blockContClass="".concat(n,"blocks-c"),this.catsClass="".concat(n,"block-categories");var i=this.collection;this.listenTo(i,"add",this.addTo),this.listenTo(i,"reset",this.render),this.em=this.config.em,this.tac="test-tac",this.grabbingCls=this.ppfx+"grabbing",this.em&&(this.config.getSorter=this.getSorter,this.canvas=this.em.get("Canvas"))},updateConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=v({},this.config,{},e)},getSorter:function(){if(this.em){if(!this.sorter){var e=this.em.get("Utils"),t=this.canvas;this.sorter=new e.Sorter({container:t.getBody(),placer:t.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:t.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter}},onDrag:function(e){this.em.stopDefault(),this.em.trigger("block:drag:start",e)},onMove:function(e){this.em.trigger("block:drag:move",e)},onDrop:function(e){var t=this.em;t.runDefault(),e&&e.get&&(e.get("activeOnRender")&&(e.trigger("active"),e.set("activeOnRender",0)),t.trigger("block:drag:stop",e))},addTo:function(e){this.add(e)},add:function(e,t){var n=this.config,i=t||null,r=new f({model:e,attributes:e.get("attributes")},n).render().el,a=e.get("category");if(a&&this.categories&&!n.ignoreCategories){Object(o.isString)(a)?a={id:a,label:a}:Object(o.isObject)(a)&&!a.id&&(a.id=a.label);var s=this.categories.add(a),c=s.get("id"),l=this.renderedCategories[c],u=this.getCategoriesEl();return e.set("category",s),!l&&u&&(l=new g({model:s},this.config).render(),this.renderedCategories[c]=l,u.appendChild(l.el)),void(l&&l.append(r))}i?i.appendChild(r):this.append(r)},getCategoriesEl:function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},append:function(e){var t=this.getBlocksEl();t&&t.appendChild(e)},render:function(){var e=this,t=this.ppfx,n=document.createDocumentFragment();this.catsEl=null,this.blocksEl=null,this.renderedCategories=[],this.el.innerHTML='\n      <div class="'.concat(this.catsClass,'"></div>\n      <div class="').concat(this.noCatClass,'">\n        <div class="').concat(this.blockContClass,'"></div>\n      </div>\n    '),this.collection.each((function(t){return e.add(t,n)})),this.append(n);var i="".concat(this.blockContClass,"s ").concat(t,"one-bg ").concat(t,"two-color");return this.$el.addClass(i),this}});function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,i={},r=[];return{name:"BlockManager",init:function(o){var s=(i=o||{}).em;for(var c in a)c in i||(i[c]=a[c]);return e=new d([]),t=new d([]),r=new p,n=new y({collection:t,categories:r},i),e.listenTo(e,"add",(function(e){t.add(e),s&&s.trigger("block:add",e)})),e.listenTo(e,"remove",(function(e){t.remove(e),s&&s.trigger("block:remove",e)})),e.listenTo(e,"reset",(function(e){t.reset(e.models)})),this},getConfig:function(){return i},onLoad:function(){var e=this.getAll();!e.length&&e.reset(i.blocks)},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},add:function(t,n){var i=n||{};return i.id=t,e.add(i)},get:function(t){return e.get(t)},getAll:function(){return e},getAllVisible:function(){return t},remove:function(t){return e.remove(t)},getCategories:function(){return r},getContainer:function(){return n.el},render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e||this.getAll().models;return t.external?new y({collection:new d(o),categories:r},w({},i,{},t)).render().el:(n.rendered||(n.render(),n.rendered=1),n.updateConfig(t),n.collection.reset(o),this.getContainer())}}}},function(e,t,n){"use strict";n.r(t);var i="sw-visibility",r="export-template",o="open-layers",a="open-blocks",s="fullscreen",c="preview",l={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:i,className:"fa fa-square-o",command:i,context:i,attributes:{title:"View components"}},{id:c,className:"fa fa-eye",command:c,context:c,attributes:{title:"Preview"}},{id:s,className:"fa fa-arrows-alt",command:s,context:s,attributes:{title:"Fullscreen"}},{id:r,className:"fa fa-code",command:r,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:"open-sm",className:"fa fa-paint-brush",command:"open-sm",active:!0,togglable:0,attributes:{title:"Open Style Manager"}},{id:"open-tm",className:"fa fa-cog",command:"open-tm",togglable:0,attributes:{title:"Settings"}},{id:o,className:"fa fa-bars",command:o,togglable:0,attributes:{title:"Open Layer Manager"}},{id:a,className:"fa fa-th-large",command:a,togglable:0,attributes:{title:"Open Blocks"}}]}],em:null,delayBtnsShow:300},u=n(1),d=n.n(u),p=n(40),h=d.a.Model.extend({defaults:{id:"",content:"",visible:!0,buttons:[],attributes:{}},initialize:function(e){this.btn=this.get("buttons")||[],this.buttons=new p.default(this.btn),this.set("buttons",this.buttons)}}),f=d.a.Collection.extend({model:h}),g=n(2),m=n.n(g),v=n(0);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}d.a.$;var w=d.a.View.extend({tagName:function(){return this.model.get("tagName")},events:{click:"clicked"},initialize:function(e){var t=this.model.get("className");this.config=e.config||{},this.em=this.config.em||{};var n=this.config.stylePrefix||"",i=this.config.pStylePrefix||"";this.pfx=n,this.ppfx=this.config.pStylePrefix||"",this.id=n+this.model.get("id"),this.activeCls="".concat(n,"active ").concat(i,"four-color"),this.disableCls="".concat(i,"disabled"),this.btnsVisCls="".concat(n,"visible"),this.className=n+"btn"+(t?" "+t:""),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:active updateActive",this.updateActive),this.listenTo(this.model,"checkActive",this.checkActive),this.listenTo(this.model,"change:bntsVis",this.updateBtnsVis),this.listenTo(this.model,"change:attributes",this.updateAttributes),this.listenTo(this.model,"change:className",this.updateClassName),this.listenTo(this.model,"change:disable",this.updateDisable),this.em&&this.em.get&&(this.commands=this.em.get("Commands"))},updateClassName:function(){var e=this.model,t=this.pfx,n=e.get("className"),i=e.get("attributes").class,r="".concat(i||""," ").concat(t,"btn ").concat(n||"");this.$el.attr("class",r.trim())},updateAttributes:function(){var e=this.em,t=this.model,n=this.$el,i=t.get("attributes")||{},r=e&&e.t&&e.t("panels.buttons.titles.".concat(t.id));n.attr(i),r&&n.attr({title:r}),this.updateClassName()},updateBtnsVis:function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},updateActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.commands,i=this.$el,r=this.activeCls,o=e.fromCollection,a=t.get("context"),s=t.get("options"),c=t.get("command"),l={};n&&Object(v.isString)(c)?l=n.get(c)||{}:Object(v.isFunction)(c)?l=n.create({run:c}):null!==c&&Object(v.isObject)(c)&&(l=n.create(c)),t.get("active")?(!o&&t.collection.deactivateAll(a,t),t.set("active",!0,{silent:!0}).trigger("checkActive"),n.runCommand(l,b({},s,{sender:t})),l.noStop&&t.set("active",!1)):(i.removeClass(r),n.stopCommand(l,b({},s,{sender:t,force:1})))},updateDisable:function(){var e=this.disableCls,t=this.model.get("disable");this.$el[t?"addClass":"removeClass"](e)},checkActive:function(){var e=this.model,t=this.$el,n=this.activeCls;e.get("active")?t.addClass(n):t.removeClass(n)},clicked:function(e){this.model.get("bntsVis")||this.model.get("disable")||this.toggleActive()},toggleActive:function(){var e=this.model,t=e.attributes,n=t.active,i=t.togglable;n&&!i||(e.set("active",!n),this.em.get("Commands").get("select-comp"),n?e.get("runDefaultCommand")&&this.em.runDefault():e.get("stopDefaultCommand")&&this.em.stopDefault())},render:function(){var e=this.model.get("label"),t=this.$el;return t.empty(),this.updateAttributes(),e&&t.append(e),this.checkActive(),this.updateDisable(),this}}),x=d.a.View.extend({initialize:function(e){this.opt=e||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||"",this.parentM=this.opt.parentM||null,this.listenTo(this.collection,"add",this.addTo),this.listenTo(this.collection,"reset remove",this.render),this.className=this.pfx+"buttons"},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){var n=t||null,i=new w({model:e,config:this.config,parentM:this.parentM}).render().el;return n?n.appendChild(i):this.$el.append(i),i},render:function(){var e=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){this.addToCollection(t,e)}),this),this.$el.append(e),this.$el.attr("class",Object(v.result)(this,"className")),this}});function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var _=d.a.View.extend({initialize:function(e){var t=e.config||{},n=this.model;this.config=t,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.buttons=n.get("buttons"),this.className=this.pfx+"panel",this.id=this.pfx+n.get("id"),this.listenTo(n,"change:appendContent",this.appendContent),this.listenTo(n,"change:content",this.updateContent),this.listenTo(n,"change:visible",this.toggleVisible),n.view=this},appendContent:function(){this.$el.append(this.model.get("appendContent"))},updateContent:function(){this.$el.html(this.model.get("content"))},toggleVisible:function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},attributes:function(){return this.model.get("attributes")},initResize:function(){var e=this.config.em,t=e?e.get("Editor"):"",n=this.model.get("resizable");if(t&&n){var i,r,o,a=!0===n?[1,1,1,1]:n,s=a.length,c=0;2==s?(i=a[0],o=a[0],r=a[1],c=a[1]):4==s&&(i=a[0],r=a[1],o=a[2],c=a[3]);var l=t.Utils.Resizer.init(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tc:i,cr:r,bc:o,cl:c,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:t.getConfig().stylePrefix,onEnd:function(){e&&e.trigger("change:canvasOffset")},posFetcher:function(e,t){var n=t.target,i=e.style,r=l.getConfig(),o=r.keyWidth,a=r.keyHeight,s=e.getBoundingClientRect(),c="container"==n,u=i[o],d=i[a];return{left:0,top:0,width:u&&!c?parseFloat(u):s.width,height:d&&!c?parseFloat(d):s.height}}},n));l.blur=function(){},l.focus(this.el)}},render:function(){var e=this.$el,t=this.ppfx,n="".concat(this.className," ").concat(this.id," ").concat(t,"one-bg ").concat(t,"two-color");if(e.addClass(n),this.buttons.length){var i=new x({collection:this.buttons,config:this.config});e.append(i.render().el)}return e.append(this.model.get("content")),this}}),S=d.a.View.extend({initialize:function(e){this.opt=e||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||"";var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.render),this.listenTo(t,"remove",this.onRemove),this.className=this.pfx+"panels"},onRemove:function(e){var t=e.view;t&&t.remove()},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){var n=t||null,i=this.config,r=e.get("el"),o=new _({el:r,model:e,config:i}),a=o.render().el,s=e.get("appendTo");return r||(s?document.querySelector(s).appendChild(a):n?n.appendChild(a):this.$el.append(a)),o.initResize(),a},render:function(){var e=this,t=this.$el,n=document.createDocumentFragment();return t.empty(),this.collection.each((function(t){return e.addToCollection(t,n)})),t.append(n),t.attr("class",this.className),this}});t.default=function(){var e,t,n={};return{name:"Panels",init:function(i){for(var r in n=i||{},l)r in n||(n[r]=l[r]);var o=n.pStylePrefix;return o&&(n.stylePrefix=o+n.stylePrefix),e=new f(n.defaults),t=new S({collection:e,config:n}),this},getPanels:function(){return e},getPanelsEl:function(){return t.el},addPanel:function(t){return e.add(t)},removePanel:function(t){return e.remove(t)},getPanel:function(t){var n=e.where({id:t});return n.length?n[0]:null},addButton:function(e,t){var n=this.getPanel(e);return n?n.get("buttons").add(t):null},removeButton:function(e,t){var n=this.getPanel(e);return n&&n.get("buttons").remove(t)},getButton:function(e,t){var n=this.getPanel(e);if(n){var i=n.get("buttons").where({id:t});return i.length?i[0]:null}return null},render:function(){return t.render().el},active:function(){this.getPanels().each((function(e){e.get("buttons").each((function(e){e.get("active")&&e.trigger("updateActive")}))}))},disableButtons:function(){this.getPanels().each((function(e){e.get("buttons").each((function(e){e.get("disable")&&e.trigger("change:disable")}))}))},Panel:h}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(0),a={stylePrefix:"sm-",sectors:[],appendTo:"",hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:0,avoidComputed:["width","height"]},s=n(1),c=n.n(s),l=n(23),u=function(){return{build:function(e){var t=[];"string"==typeof e&&(e=[e]);for(var n=0,i=e.length;n<i;n++){var r={},o=e[n];switch(r.property=o,o){case"border-radius-c":r.property="border-radius"}switch(o){case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"width":case"max-width":case"min-width":case"height":case"max-height":case"min-height":case"flex-basis":r.fixedValues=["initial","inherit","auto"];break;case"font-size":r.fixedValues=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"];break;case"letter-spacing":case"line-height":r.fixedValues=["normal","initial","inherit"]}switch(o){case"float":case"position":case"text-align":r.type="radio";break;case"display":case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":case"align-self":case"font-family":case"font-weight":case"border-style":case"box-shadow-type":case"background-repeat":case"background-position":case"background-attachment":case"background-size":case"transition-property":case"transition-timing-function":case"cursor":case"overflow":case"overflow-x":case"overflow-y":r.type="select";break;case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"letter-spacing":case"line-height":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-h":case"box-shadow-v":case"box-shadow-blur":case"box-shadow-spread":case"transition-duration":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"order":case"flex-grow":case"flex-shrink":case"flex-basis":r.type="integer";break;case"margin":case"padding":case"border-radius":case"border":case"transform":r.type="composite";break;case"color":case"text-shadow-color":case"background-color":case"border-color":case"box-shadow-color":r.type="color";break;case"text-shadow":case"box-shadow":case"background":case"transition":r.type="stack";break;case"background-image":r.type="file"}switch(o){case"float":case"background-color":case"text-shadow":r.defaults="none";break;case"display":r.defaults="block";break;case"flex-direction":r.defaults="row";break;case"flex-wrap":r.defaults="nowrap";break;case"justify-content":r.defaults="flex-start";break;case"align-items":case"align-content":r.defaults="stretch";break;case"align-self":r.defaults="auto";break;case"position":r.defaults="static";break;case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"box-shadow-h":case"box-shadow-v":case"box-shadow-spread":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"order":case"flex-grow":r.defaults=0;break;case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":r.defaults="0px";break;case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"flex-shrink":r.defaults=1;break;case"box-shadow-blur":r.defaults="5px";break;case"top":case"right":case"bottom":case"left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"background-size":case"cursor":case"flex-basis":r.defaults="auto";break;case"font-family":r.defaults="Arial, Helvetica, sans-serif";break;case"font-size":case"border-width":r.defaults="medium";break;case"font-weight":r.defaults="400";break;case"letter-spacing":case"line-height":r.defaults="normal";break;case"color":case"text-shadow-color":case"border-color":case"box-shadow-color":r.defaults="black";break;case"text-align":r.defaults="left";break;case"border-style":r.defaults="solid";break;case"box-shadow-type":r.defaults="";break;case"background-repeat":r.defaults="repeat";break;case"background-position":r.defaults="left top";break;case"background-attachment":r.defaults="scroll";break;case"transition-property":r.defaults="width";break;case"transition-duration":r.defaults="2";break;case"transition-timing-function":r.defaults="ease";break;case"overflow":case"overflow-x":case"overflow-y":r.defaults="visible"}switch(o){case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":r.requires={display:["flex"]};break;case"order":case"flex-basis":case"flex-grow":case"flex-shrink":case"align-self":r.requiresParent={display:["flex"]}}switch(o){case"top":case"bottom":case"margin-top":case"margin-bottom":case"padding-top":case"padding-bottom":case"min-height":case"max-height":case"height":r.units=["px","%","vh"];break;case"right":case"left":case"margin-right":case"margin-left":case"padding-right":case"padding-left":case"min-width":case"max-width":case"width":r.units=["px","%","vw"];break;case"flex-basis":r.units=["px","%","vw","vh"];break;case"text-shadow-v":case"text-shadow-h":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"box-shadow-h":case"box-shadow-v":r.units=["px","%"];break;case"font-size":case"letter-spacing":case"line-height":r.units=["px","em","rem","%"];break;case"border-width":r.units=["px","em"];break;case"box-shadow-blur":case"box-shadow-spread":case"perspective":r.units=["px"];break;case"transition-duration":r.units=["s"];break;case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":r.units=["deg"]}switch(o){case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-blur":case"transition-duration":case"perspective":case"flex-basis":r.min=0}switch(o){case"text-shadow":case"box-shadow":case"background":r.preview=!0}switch(o){case"background":r.detached=!0}switch(o){case"transform-rotate-x":r.functionName="rotateX";break;case"transform-rotate-y":r.functionName="rotateY";break;case"transform-rotate-z":r.functionName="rotateZ";break;case"transform-scale-x":r.functionName="scaleX";break;case"transform-scale-y":r.functionName="scaleY";break;case"transform-scale-z":r.functionName="scaleZ";break;case"background-image":r.functionName="url"}switch(o){case"float":r.list=[{value:"none"},{value:"left"},{value:"right"}];break;case"display":r.list=[{value:"block"},{value:"inline"},{value:"inline-block"},{value:"flex"},{value:"none"}];break;case"flex-direction":r.list=[{value:"row"},{value:"row-reverse"},{value:"column"},{value:"column-reverse"}];break;case"flex-wrap":r.list=[{value:"nowrap"},{value:"wrap"},{value:"wrap-reverse"}];break;case"justify-content":r.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"space-evenly"}];break;case"align-items":r.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"align-content":r.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"stretch"}];break;case"align-self":r.list=[{value:"auto"},{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"position":r.list=[{value:"static"},{value:"relative"},{value:"absolute"},{value:"fixed"}];break;case"font-family":var a=", sans-serif",s=["Arial, Helvetica"+a,"Arial Black, Gadget"+a,"Brush Script MT"+a,"Comic Sans MS, cursive"+a,"Courier New, Courier, monospace","Georgia, serif","Helvetica, serif","Impact, Charcoal"+a,"Lucida Sans Unicode, Lucida Grande"+a,"Tahoma, Geneva"+a,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+a,"Verdana, Geneva"+a];r.list=[];for(var c=0,l=s.length;c<l;c++){var u={};u.value=s[c],u.name=s[c].split(",")[0],r.list.push(u)}break;case"font-weight":r.list=[{value:"100",name:"Thin"},{value:"200",name:"Extra-Light"},{value:"300",name:"Light"},{value:"400",name:"Normal"},{value:"500",name:"Medium"},{value:"600",name:"Semi-Bold"},{value:"700",name:"Bold"},{value:"800",name:"Extra-Bold"},{value:"900",name:"Ultra-Bold"}];break;case"text-align":r.list=[{value:"left"},{value:"center"},{value:"right"},{value:"justify"}];break;case"border-style":r.list=[{value:"none"},{value:"solid"},{value:"dotted"},{value:"dashed"},{value:"double"},{value:"groove"},{value:"ridge"},{value:"inset"},{value:"outset"}];break;case"box-shadow-type":r.list=[{value:"",name:"Outside"},{value:"inset",name:"Inside"}];break;case"background-repeat":r.list=[{value:"repeat"},{value:"repeat-x"},{value:"repeat-y"},{value:"no-repeat"}];break;case"background-position":r.list=[{value:"left top"},{value:"left center"},{value:"left bottom"},{value:"right top"},{value:"right center"},{value:"right bottom"},{value:"center top"},{value:"center center"},{value:"center bottom"}];break;case"background-attachment":r.list=[{value:"scroll"},{value:"fixed"},{value:"local"}];break;case"background-size":r.list=[{value:"auto"},{value:"cover"},{value:"contain"}];break;case"transition-property":r.list=[{value:"all"},{value:"width"},{value:"height"},{value:"background-color"},{value:"transform"},{value:"box-shadow"},{value:"opacity"}];break;case"transition-timing-function":r.list=[{value:"linear"},{value:"ease"},{value:"ease-in"},{value:"ease-out"},{value:"ease-in-out"}];break;case"cursor":r.list=[{value:"auto"},{value:"pointer"},{value:"copy"},{value:"crosshair"},{value:"grab"},{value:"grabbing"},{value:"help"},{value:"move"},{value:"text"}];break;case"overflow":case"overflow-x":case"overflow-y":r.list=[{value:"visible"},{value:"hidden"},{value:"scroll"},{value:"auto"}]}switch(o){case"margin":r.properties=this.build(["margin-top","margin-right","margin-bottom","margin-left"]);break;case"padding":r.properties=this.build(["padding-top","padding-right","padding-bottom","padding-left"]);break;case"text-shadow":r.properties=this.build(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"]);break;case"border":r.properties=this.build(["border-width","border-style","border-color"]);break;case"border-radius":r.properties=this.build(["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]);break;case"box-shadow":r.properties=this.build(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"]);break;case"background":r.properties=this.build(["background-image","background-repeat","background-position","background-attachment","background-size"]);break;case"transition":r.properties=this.build(["transition-property","transition-duration","transition-timing-function"]);break;case"transform":r.properties=this.build(["transform-rotate-x","transform-rotate-y","transform-rotate-z","transform-scale-x","transform-scale-y","transform-scale-z"])}t.push(r)}return t}}},d=c.a.Model.extend({defaults:{id:"",name:"",open:!0,buildProps:"",extendBuilded:1,properties:[]},initialize:function(e){var t,n=e||{},i=this.buildProperties(n.buildProps),r=this.get("name")||"";!this.get("id")&&this.set("id",r.replace(/ /g,"_").toLowerCase()),t=i?this.extendProperties(i):this.get("properties");var o=new l.default(t);o.sector=this,this.set("properties",o)},extendProperties:function(e,t,n){for(var i=e.length,r=t||this.get("properties"),a=this.get("extendBuilded"),s=[],c=0,l=r.length;c<l;c++){for(var u=r[c],d=0,p=0;p<i;p++){var h=e[p];if(u.property!=h.property&&u.id!=h.property);else{var f=u.properties;f&&f.length&&(u.properties=this.extendProperties(h.properties||[],f,1)),e[p]=a?Object(o.extend)(h,u):u,s[p]=e[p],d=1}}d||(e.push(u),s.push(u))}return n?s.filter((function(e){return e})):e},buildProperties:function(e){var t=e||[];if(t.length)return this.propFactory||(this.propFactory=new u),this.propFactory.build(t)}}),p=c.a.Collection.extend({model:d}),h=n(3),f=n(7),g=n(18),m=c.a.View.extend({template:Object(o.template)('\n  <div class="<%= pfx %>title" data-sector-title>\n    <i id="<%= pfx %>caret" class="fa"></i>\n    <%= label %>\n  </div>'),events:{"click [data-sector-title]":"toggle"},initialize:function(e){this.config=e.config||{},this.em=this.config.em,this.pfx=this.config.stylePrefix||"",this.target=e.target||{},this.propTarget=e.propTarget||{},this.caretR="fa-caret-right",this.caretD="fa-caret-down";var t=this.model;this.listenTo(t,"change:open",this.updateOpen),this.listenTo(t,"updateVisibility",this.updateVisibility),this.listenTo(t,"destroy remove",this.remove)},updateVisibility:function(){var e;this.model.get("properties").each((function(t){t.get("visible")&&(e=1)})),this.el.style.display=e?"block":"none"},updateOpen:function(){this.model.get("open")?this.show():this.hide()},show:function(){this.$el.addClass(this.pfx+"open"),this.getPropertiesEl().style.display="",this.$caret.removeClass(this.caretR).addClass(this.caretD)},hide:function(){this.$el.removeClass(this.pfx+"open"),this.getPropertiesEl().style.display="none",this.$caret.removeClass(this.caretD).addClass(this.caretR)},getPropertiesEl:function(){return this.$el.find(".".concat(this.pfx,"properties")).get(0)},toggle:function(e){var t=this.model.get("open")?0:1;this.model.set("open",t)},render:function(){var e=this.pfx,t=this.model,n=this.em,i=this.$el,r=t.attributes,o=r.id,a=r.name,s=n&&n.t("styleManager.sectors.".concat(o))||a;return i.html(this.template({pfx:e,label:s})),this.$caret=i.find("#".concat(e,"caret")),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(o," no-select")),this.updateOpen(),this},renderProperties:function(){var e=this.model.get("properties");if(e){var t=new g.default({collection:e,target:this.target,propTarget:this.propTarget,config:this.config});this.$el.append(t.render().el)}}});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=c.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config||{};this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.target=e.target||{},this.config=t;var n={};Object(o.extend)(n,c.a.Events);var i=document.body,r=document.createElement("el-".concat((new Date).getTime()));i.appendChild(r),n.computedDefault=y({},window.getComputedStyle(r)),i.removeChild(r),this.propTarget=n;var a=this.collection,s="component:toggled component:update:classes change:state change:device frame:resized";this.listenTo(a,"add",this.addTo),this.listenTo(a,"reset",this.render),this.listenTo(this.target,s,this.targetUpdated)},addTo:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.addToCollection(e,null,n)},toggleStateCls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;e.forEach((function(e){var n=e.getEl();n&&n.classList&&n.classList[t?"add":"remove"]("hc-state")}))},targetUpdated:function(e){var t=this.target,n=this.propTarget,i=t.getSelectedAll(),r=t.getSelected(),o=e&&e.toHTML?e:r;if(o&&this.toggleStateCls([o]),r){var a=t.get("Config").devicePreviewMode?"":t.get("state"),s=t.get("SelectorManager").getConfig().componentFirst,c=r.getEl();if(n.helper=null,n.targets=null,c&&Object(h.o)(c)){var l=a?":".concat(a):null;n.computed=window.getComputedStyle(c,l)}r=t.get("StyleManager").getModelToStyle(r),a&&(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.get("CssComposer"),r=i.getAll(),o=i.getClassRule("hc-state");o?(r.remove(o),r.add(o)):o=i.setClassRule("hc-state"),o.set("important",1),o.setStyle(e),n.helper=o}(r.getStyle()),this.toggleStateCls(i,1)),n.model=r,s&&(n.targets=i),n.trigger("update")}},setTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,i=Object(o.isArray)(e)?e:[e],r=t.targetIsClass,a=t.stylable,s=[];i.forEach((function(e){var t=e;if(Object(o.isString)(e)){var i,c=n.get("CssComposer").getAll();r&&(i=c.filter((function(t){return t.get("selectors").getFullString()===e}))[0]),i||(i=c.filter((function(t){return t.get("selectorsAdd")===e}))[0]),i||(i=c.add({selectors:[],selectorsAdd:e})),a&&i.set({stylable:a}),t=i}s.push(t)}));var c=this.propTarget;return c.targets=s,c.trigger("update"),s},addToCollection:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.pfx,r=this.target,o=this.propTarget,a=this.config,s=this.el,c=t||s,l=new m({model:e,id:"".concat(i).concat(e.get("id")),name:e.get("name"),properties:e.get("properties"),target:r,propTarget:o,config:a}).render().el;return Object(f.b)(c,l,n.at),l},render:function(){var e=this,t=document.createDocumentFragment(),n=this.$el,i=this.pfx,r=this.ppfx;return n.empty(),this.collection.each((function(n){return e.addToCollection(n,t)})),n.append(t),n.addClass("".concat(i,"sectors ").concat(r,"one-bg ").concat(r,"two-color")),this}});function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,i={};return{name:"StyleManager",getConfig:function(){return i},init:function(r){var o=(i=x({},a,{},r)).pStylePrefix;return this.em=i.em,o&&(i.stylePrefix=o+i.stylePrefix),e=new l.default,t=new p([],i),n=new b({collection:t,target:i.em,config:i}),this},onLoad:function(){t.add(i.sectors,{silent:!0})},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},addSector:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getSector(e);return r||(n.id=e,r=t.add(n,i)),r},getSector:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.where({id:e})[0];return!i&&n.warn&&this._logNoSector(e),i},removeSector:function(e){return this.getSectors().remove(this.getSector(e,{warn:1}))},getSectors:function(){return t},addProperty:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getSector(e,{warn:1}),r=null;return i&&(r=i.get("properties").add(t,n)),r},getProperty:function(e,t){var n=this.getSector(e,{warn:1}),i=null;return n&&(i=1==(i=n.get("properties").where({property:t})).length?i[0]:i),i},removeProperty:function(e,t){var n=this.getProperties(e);return n&&n.remove(this.getProperty(e,t))},getProperties:function(e){var t=null,n=this.getSector(e,{warn:1});return n&&(t=n.get("properties")),t},getModelToStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.em,r=t.skipAdd,o=e.get("classes"),a=e.getId();if(n){var s,c=n.getConfig(),l=n.get("UndoManager"),u=n.get("CssComposer"),d=n.get("SelectorManager"),p=d?d.getConfig():{},h=c.devicePreviewMode?"":n.get("state"),f=o.getStyleable(),g=f.length,m=!p.componentFirst||t.useClasses,v={state:h};if(l.stop(),g&&m){var y=n.getCurrentMedia();(s=u.get(f,h,y))||r||(s=u.add(f,h,y))}else c.avoidInlineStyle&&(!(s=u.getIdRule(a,v))&&!r&&(s=u.setIdRule(a,{},v)),e.is("wrapper")&&s.set("wrapper",1));s&&(e=s),l.start()}return e},addType:function(t,n){e.addType(t,n)},getType:function(t){return e.getType(t)},getTypes:function(){return e.getTypes()},createType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.model,r=void 0===n?{}:n,o=t.view,a=void 0===o?{}:o,s=this.getType(e);if(s)return new s.view(x({model:new s.model(r),config:i},a))},setTarget:function(e,t){return n.setTarget(e,t)},getEmitter:function(){return n.propTarget},render:function(){return n.render().el},_logNoSector:function(e){var t=this.em;t&&t.logWarning("'".concat(e,"' sector not found"))}}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r={stylePrefix:"cm-",inlineCss:!1},o=n(2),a=n.n(o),s=n(1),c=n.n(s);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=c.a.Model.extend({build:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.get("components");return t.exportWrapper?e.toHTML(u({},t.wrapperIsBody&&{tag:"body"})):this.buildModels(n)},buildModels:function(e){var t="";return e.each((function(e){t+=e.toHTML()})),t}}),p=n(29),h=c.a.Model.extend({build:function(e){var t=e.toJSON();return this.beforeEach(t),Object(i.each)(t,(function(e,n){var i=t[n];if(i instanceof c.a.Model)t[n]=this.build(i);else if(i instanceof c.a.Collection){var r=i;t[n]=[],r.length&&r.each((function(e,i){t[n][i]=this.build(e)}),this)}}),this),t},beforeEach:function(e){delete e.status}}),f=c.a.Model.extend({mapModel:function(e){var t="",n=e.get("script-export")||e.get("script"),r=e.get("type"),o=e.get("components"),a=e.getId();if(n){var s=e.get("attributes");s=Object(i.extend)({},s,{id:a}),e.set("attributes",s,{silent:1});var c=e.getScriptString(n);if(e.get("scriptUpdated"))this.mapJs[r+"-"+a]={ids:[a],code:c};else{var l=this.mapJs[r];l?l.ids.push(a):this.mapJs[r]={ids:[a],code:c}}}return o.each((function(e){t+=this.mapModel(e)}),this),t},build:function(e){this.mapJs={},this.mapModel(e);var t="";for(var n in this.mapJs){var i=this.mapJs[n],r="#"+i.ids.join(", #");t+="\n        var items = document.querySelectorAll('".concat(r,"');\n        for (var i = 0, len = items.length; i < len; i++) {\n          (function(){").concat(i.code,"}.bind(items[i]))();\n        }")}return t}}),g=n(12),m=n.n(g);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}n(80),n(41),n(83);var y=c.a.Model.extend({defaults:{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0},init:function(e){return Object(i.bindAll)(this,"onChange"),this.editor=m.a.fromTextArea(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},onChange:function(){this.trigger("update",this)},getEditor:function(){return this.editor},getElement:function(){return this.element},setElement:function(e){return this.element=e,this},refresh:function(){return this.getEditor().refresh(),this},focus:function(){return this.getEditor().focus(),this},getContent:function(){var e=this.getEditor();return e&&e.getValue()},setContent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.editor;i&&(i.setValue(e),i.autoFormatRange&&(m.a.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),m.a.commands.goDocStart(i)),!n.noRefresh&&setTimeout((function(){return t.refresh()})))}}),b=c.a.View.extend({template:Object(i.template)('\n  <div class="<%= pfx %>editor" id="<%= pfx %><%= codeName %>">\n  \t<div id="<%= pfx %>title"><%= label %></div>\n  \t<div id="<%= pfx %>code"></div>\n  </div>'),initialize:function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},render:function(){var e=this.model.toJSON();return e.pfx=this.pfx,this.$el.html(this.template(e)),this.$el.attr("class",this.pfx+"editor-c"),this.$el.find("#"+this.pfx+"code").append(this.model.get("input")),this}});t.default=function(){var e={},t={},n={},o={},a={};return{getConfig:function(){return e},config:e,EditorView:b,name:"CodeManager",init:function(t){for(var i in e=t||{},r)i in e||(e[i]=r[i]);var o=e.pStylePrefix;return o&&(e.stylePrefix=o+e.stylePrefix),n.html=new d,n.css=new p.a,n.json=new h,n.js=new f,a.CodeMirror=new y,this.loadDefaultGenerators().loadDefaultViewers(),this},addGenerator:function(e,n){return t[e]=n,this},getGenerator:function(e){return t[e]||null},getGenerators:function(){return t},addViewer:function(e,t){return o[e]=t,this},getViewer:function(e){return o[e]||null},getViewers:function(){return o},createViewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.isUndefined)(e.type)?"CodeMirror":e.type,n=this.getViewer(t)&&this.getViewer(t).clone(),r=document.createElement("div"),o=document.createElement("textarea");return r.appendChild(o),n.set(e),n.init(o),n.setElement(r),n},updateViewer:function(e,t){e.setContent(t)},getCode:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.em=e.em;var r=this.getGenerator(n);return r?r.build(t,i):""},loadDefaultGenerators:function(){for(var e in n)this.addGenerator(e,n[e]);return this},loadDefaultViewers:function(){for(var e in a)this.addViewer(e,a[e]);return this}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o={devices:[]},a=n(1),s=n.n(a),c=s.a.Model.extend({idAttribute:"name",defaults:{name:"",width:null,height:"",widthMedia:null,priority:null},initialize:function(){var e=this;null===this.get("widthMedia")&&this.set("widthMedia",this.get("width")),null===this.get("width")&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach((function(t){return e.checkUnit(t)}))},checkUnit:function(e){var t=this.get(e)||"";(parseFloat(t)||0).toString()===t.toString()&&this.set(e,"".concat(t,"px"))}}),l=s.a.Collection.extend({model:c,comparator:function(e,t){var n=Number.MAX_VALUE;return(t.get("priority")||n)-(e.get("priority")||n)},getSorted:function(){return this.sort()}}),u=n(0),d=s.a.View.extend({template:Object(u.template)('\n    <div class="<%= ppfx %>device-label"><%= deviceLabel %></div>\n    <div class="<%= ppfx %>field <%= ppfx %>select">\n      <span id="<%= ppfx %>input-holder">\n        <select class="<%= ppfx %>devices"></select>\n      </span>\n      <div class="<%= ppfx %>sel-arrow">\n        <div class="<%= ppfx %>d-s-arrow"></div>\n      </div>\n    </div>\n    <button style="display:none" class="<%= ppfx %>add-trasp">+</button>'),events:{change:"updateDevice"},initialize:function(e){this.config=e.config||{},this.em=this.config.em,this.ppfx=this.config.pStylePrefix||"",this.events["click ."+this.ppfx+"add-trasp"]=this.startAdd,this.listenTo(this.em,"change:device",this.updateSelect),this.delegateEvents()},startAdd:function(){},updateDevice:function(){var e=this.em;if(e){var t=this.devicesEl,n=t?t.val():"";e.set("device",n)}},updateSelect:function(){var e=this.em,t=this.devicesEl;if(e&&e.getDeviceModel&&t){var n=e.getDeviceModel(),i=n?n.get("name"):"";t.val(i)}},getOptions:function(){var e=this.collection,t=this.em,n="";return e.each((function(e){var i=e.attributes,r=i.name,o=i.id,a=t&&t.t&&t.t("deviceManager.devices.".concat(o))||r;n+='<option value="'.concat(r,'">').concat(a,"</option>")})),n},render:function(){var e=this.em,t=this.ppfx,n=this.$el,i=this.el;return n.html(this.template({ppfx:t,deviceLabel:e&&e.t&&e.t("deviceManager.device")})),this.devicesEl=n.find(".".concat(t,"devices")),this.devicesEl.append(this.getOptions()),i.className="".concat(t,"devices-c"),this}});function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{name:"DeviceManager",init:function(i){var r=this;for(var a in n=i||{},o)a in n||(n[a]=o[a]);return e=new l,(n.devices||[]).forEach((function(e){return r.add(e.id||e.name,e.width,e)})),t=new d({collection:e,config:n}),this},add:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=h({},i,{id:t,name:i.name||t,width:n});return e.add(r)},get:function(t){return e.get(t)},getAll:function(){return e},render:function(){return t.render().el}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o={stylePrefix:"mdl-",title:"",content:"",backdrop:!0},a=n(1),s=n.n(a),c=s.a.Model.extend({defaults:{title:"",content:"",open:!1}}),l=s.a.View.extend({template:function(e){var t=e.pfx,n=e.ppfx,i=e.content,r=e.title;return'<div class="'.concat(t,"dialog ").concat(n,"one-bg ").concat(n,'two-color">\n      <div class="').concat(t,'header">\n        <div class="').concat(t,'title">').concat(r,'</div>\n        <div class="').concat(t,'btn-close" data-close-modal>&Cross;</div>\n      </div>\n      <div class="').concat(t,'content">\n        <div id="').concat(t,'c">').concat(i,'</div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="').concat(t,'collector" style="display: none"></div>')},events:{click:"onClick","click [data-close-modal]":"hide"},initialize:function(e){var t=this.model,n=e.config||{},i=n.stylePrefix||"";this.config=n,this.pfx=i,this.ppfx=n.pStylePrefix||"",this.listenTo(t,"change:open",this.updateOpen),this.listenTo(t,"change:title",this.updateTitle),this.listenTo(t,"change:content",this.updateContent)},onClick:function(e){this.config.backdrop&&e.target===this.el&&this.hide()},getCollector:function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},getContent:function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},getTitle:function(){return this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),this.$title.get(0)},updateContent:function(){var e=this.getContent(),t=e.children(),n=this.getCollector(),i=this.model.get("content");t.length&&n.append(t),e.empty().append(i)},updateTitle:function(){var e=this.getTitle();e&&(e.innerHTML=this.model.get("title"))},updateOpen:function(){this.el.style.display=this.model.get("open")?"":"none"},hide:function(){this.model.set("open",0)},show:function(){this.model.set("open",1)},render:function(){var e=this.$el,t=this.pfx,n=(this.ppfx,this.model.toJSON());return n.pfx=this.pfx,n.ppfx=this.ppfx,e.html(this.template(n)),e.attr("class","".concat(t,"container")),this.updateOpen(),this}});function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={},i=function(e,t){t&&t.trigger("modal:".concat(e?"open":"close"))};return{name:"Modal",getConfig:function(){return n},init:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(n=d({},o,{},r)).em;this.em=a;var s=n.pStylePrefix;return s&&(n.stylePrefix=s+n.stylePrefix),(e=new c(n)).on("change:open",(function(e,t){return i(t,a)})),t=new l({model:e,config:n}),this},postRender:function(e){var t=e.model.getConfig().el||e.el;this.render().appendTo(t)},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),t.show(),this},close:function(){return t.hide(),this},onceClose:function(e){return this.em.once("modal:close",e),this},onceOpen:function(e){return this.em.once("modal:open",e),this},isOpen:function(){return!!e.get("open")},setTitle:function(t){return e.set("title",t),this},getTitle:function(){return e.get("title")},setContent:function(t){return e.set("content"," "),e.set("content",t),this},getContent:function(){return e.get("content")},getContentEl:function(){return t.getContent().get(0)},getModel:function(){return e},render:function(){return t.render().$el}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(0),a=n(3),s={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],escapeName:0,selectedName:0,iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',render:0,componentFirst:0},c=n(9),l=n(11),u=n(6),d=n.n(u),p=n(1),h=n.n(p),f=h.a.View.extend({template:function(){var e=this.pfx,t=this.model,n=this.config,i=t.get("label")||"";return'\n      <span id="'.concat(e,'checkbox" class="').concat(e,'tag-status" data-tag-status></span>\n      <span id="').concat(e,'tag-label" data-tag-name>').concat(i,'</span>\n      <span id="').concat(e,'close" class="').concat(e,'tag-close" data-tag-remove>\n        ').concat(n.iconTagRemove,"\n      </span>\n    ")},events:{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"},initialize:function(e){var t=e.config||{};this.config=t,this.coll=e.coll||null,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.em=t.em,this.listenTo(this.model,"change:active",this.updateStatus)},getInputEl:function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},startEditTag:function(){var e=this.em,t=this.getInputEl();t.contentEditable=!0,t.focus(),e&&e.setEditing(1)},endEditTag:function(){var e=this.model,t=this.getInputEl(),n=t.textContent,i=this.em,r=i&&i.get("SelectorManager");if(t.contentEditable=!1,i&&i.setEditing(0),r){var o=r.escapeName(n);r.get(o)?t.innerText=e.get("label"):e.set({name:o,label:n})}},changeStatus:function(){var e=this.model;e.set("active",!e.get("active"))},removeTag:function(){var e=this.em,t=this.model;(e&&e.getSelectedAll()).forEach((function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)}))},updateStatus:function(){var e=this.model,t=this.$el,n=this.config,i=n.iconTagOn,r=n.iconTagOff,o=t.find("[data-tag-status]");e.get("active")?(o.html(i),t.removeClass("opac50")):(o.html(r),t.addClass("opac50"))},render:function(){var e=this.pfx,t=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(e,"tag ").concat(t,"three-bg")),this.updateStatus(),this}}),g=h.a.View.extend({template:function(e){var t=e.labelInfo,n=e.labelStates,i=e.labelHead,r=e.iconSync,o=e.iconAdd,a=e.pfx,s=e.ppfx;return'\n    <div id="'.concat(a,'up" class="').concat(a,'header">\n      <div id="').concat(a,'label" class="').concat(a,'header-label">').concat(i,'</div>\n      <div id="').concat(a,'status-c" class="').concat(a,'header-status">\n        <span id="').concat(a,'input-c" data-states-c>\n          <div class="').concat(s,"field ").concat(s,'select">\n            <span id="').concat(s,'input-holder">\n              <select id="').concat(a,'states" data-states>\n                <option value="">').concat(n,'</option>\n              </select>\n            </span>\n            <div class="').concat(s,'sel-arrow">\n              <div class="').concat(s,'d-s-arrow"></div>\n            </div>\n          </div>\n        </span>\n      </div>\n    </div>\n    <div id="').concat(a,'tags-field" class="').concat(s,'field">\n      <div id="').concat(a,'tags-c" data-selectors></div>\n      <input id="').concat(a,'new" data-input/>\n      <span id="').concat(a,'add-tag" class="').concat(a,"tags-btn ").concat(a,'tags-btn__add" data-add>\n        ').concat(o,'\n      </span>\n      <span class="').concat(a,"tags-btn ").concat(a,'tags-btn__sync" style="display: none" data-sync-style>\n        ').concat(r,'\n      </span>\n    </div>\n    <div class="').concat(a,'sels-info">\n      <div class="').concat(a,'label-sel">').concat(t,':</div>\n      <div class="').concat(a,'sels" data-selected></div>\n      <div style="clear:both"></div>\n    </div>')},events:{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e.config||{},this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.className=this.pfx+"tags",this.stateInputId=this.pfx+"states",this.stateInputC=this.pfx+"input-c",this.states=this.config.states||[];var t=this.config.em,n=this.getStyleEmitter(),i=this.collection;this.target=this.config.em,this.em=t;var r="component:toggled component:update:classes",o="component:update:classes change:state";this.listenTo(t,r,this.componentChanged),this.listenTo(n,"styleManager:update",this.componentChanged),this.listenTo(t,o,this.__handleStateChange),this.listenTo(t,"styleable:change change:device",this.checkSync),this.listenTo(i,"add",this.addNew),this.listenTo(i,"reset",this.renderClasses),this.listenTo(i,"remove",this.tagRemoved),this.delegateEvents()},syncStyle:function(){var e,t=this.em,n=this.getTarget(),i=t.get("CssComposer"),r=this.getCommonSelectors({opts:{noDisabled:1}}),o=t.get("state"),a=t.getCurrentMedia(),s=[],c=i.get(r,o,a)||i.add(r,o,a);this.getTargets().forEach((function(t){var n=i.getIdRule(t.getId(),{state:o,mediaText:a});e=n.getStyle(),n.setStyle({}),s.push(n)})),e&&c.addStyle(e),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:n,selectors:r,mediaText:a,rule:c,ruleComponents:s,state:o})},getStyleEmitter:function(){var e=this.em,t=e&&e.get("StyleManager");return t&&t.getEmitter()||{}},tagRemoved:function(e){this.updateStateVis()},getStateOptions:function(){var e=this.states,t=this.em,n=[];return e.forEach((function(e){return n.push('<option value="'.concat(e.name,'">').concat(t.t("selectorManager.states.".concat(e.name))||e.label||e.name,"</option>"))})),n.join("")},addNew:function(e){this.addToClasses(e)},startNewTag:function(){this.$addBtn.css({display:"none"}),this.$input.show().focus()},endNewTag:function(){this.$addBtn.css({display:""}),this.$input.hide().val("")},onInputKeyUp:function(e){13===e.keyCode?this.addNewTag(this.$input.val()):27===e.keyCode&&this.endNewTag()},checkStates:function(){var e=this.em.getState(),t=this.getStates();t&&t.val(e)},componentChanged:Object(o.debounce)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targets;this.updateSelection(t)})),updateSelection:function(e){var t=e||this.getTargets(),n=[];return(t=Object(o.isArray)(t)?t:[t])&&t.length&&(n=this.getCommonSelectors({targets:t}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(t),n},getCommonSelectors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targets,n=e.opts,i=void 0===n?{}:n,r=t||this.getTargets(),o=r.map((function(e){return e.getSelectors&&e.getSelectors().getValid(i)})).filter((function(e){return e}));return this._commonSelectors.apply(this,d()(o))},_commonSelectors:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.length?1===n.length?n[0]:2===n.length?n[0].filter((function(e){return n[1].indexOf(e)>=0})):n.slice(1).reduce((function(t,n){return e._commonSelectors(t,n)}),n[0]):[]},checkSync:Object(o.debounce)((function(){var e,t=this.$btnSyncEl,n=this.config,i=this.collection,r=this.getTarget();if(r&&n.componentFirst&&i.length){var a=r.getStyle();e=!Object(o.isEmpty)(a)}t&&t[e?"show":"hide"]()})),getTarget:function(){return this.target.getSelected()},getTargets:function(){return this.target.getSelectedAll()},updateStateVis:function(e){var t=this.em,n=t&&t.getConfig("avoidInlineStyle"),i=this.collection.length||n?"":"none";this.getStatesC().css("display",i),this.updateSelector(e)},__handleStateChange:function(){this.updateSelector(this.getTargets())},updateSelector:function(e){var t=this,n=this.el.querySelector("[data-selected]"),i=[],r=e||this.getTargets();(r=Object(o.isArray)(r)?r:[r]).forEach((function(e){return i.push(t.__getName(e))})),n&&(n.innerHTML=i.join(", ")),this.checkStates()},__getName:function(e){var t,n=this.pfx,i=this.config,r=this.em,a=i.selectedName,s=i.componentFirst;if(Object(o.isString)(e))t='<span class="'.concat(n,'sel-gen">').concat(e,"</span>");else{if(!e||!e.get)return;var c=e.getSelectors().getStyleable(),l=r.get("state"),u=e.getId?'<span class="'.concat(n,'sel-cmp">').concat(e.getName(),'</span><span class="').concat(n,'sel-id">#').concat(e.getId(),"</span>"):"";t=(t=this.collection.getFullString(c))?'<span class="'.concat(n,'sel-rule">').concat(t,"</span>"):e.get("selectorsAdd")||u,t=s&&u?u:t,t+=l?'<span class="'.concat(n,'sel-state">:').concat(l,"</span>"):"",t=a?a({result:t,state:l,target:e}):t}return t&&'<span class="'.concat(n,'sel">').concat(t,"</span>")},stateChanged:function(e){var t=this.em,n=e.target.value;t.set("state",n)},addNewTag:function(e){var t=this,n=this.em;if(e.trim()){if(n){var i=n.get("SelectorManager").add({label:e});this.getTargets().forEach((function(e){e.getSelectors().add(i),t.collection.add(i),t.updateStateVis()}))}this.endNewTag()}},addToClasses:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t,i=this.getClasses(),r=new f({model:e,config:this.config,coll:this.collection}).render().el;return n?n.appendChild(r):i.append(r),r},renderClasses:function(){var e=this,t=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each((function(n){return e.addToClasses(n,t)})),n.append(t)},getClasses:function(){return this.$el.find("[data-selectors]")},getStates:function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},getStatesC:function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},render:function(){var e=this.em,t=this.pfx,n=this.ppfx,i=this.config,r=this.$el,o=this.el,a=i.render,s={iconSync:i.iconSync,iconAdd:i.iconAdd,labelHead:e.t("selectorManager.label"),labelStates:e.t("selectorManager.emptyState"),labelInfo:e.t("selectorManager.selected"),ppfx:n,pfx:t,el:o};r.html(this.template(s));var c=a&&a(s);c&&c!==o&&r.empty().append(c),this.$input=r.find("[data-input]"),this.$addBtn=r.find("[data-add]"),this.$classes=r.find("#"+t+"tags-c"),this.$btnSyncEl=r.find("[data-sync-style]"),this.$input.hide();var l=this.getStates();return l&&l.append(this.getStateOptions()),this.renderClasses(),r.attr("class","".concat(this.className," ").concat(n,"one-bg ").concat(n,"two-color")),this}});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return Object(o.isString)(e)&&"#"==e[0]},b=function(e){return Object(o.isString)(e)&&"."==e[0]};t.default=function(e){var t,n=e||{};return{Selector:c.a,Selectors:l.a,name:"SelectorManager",getConfig:function(){return n},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(n=v({},s,{},e)).em,r=n.pStylePrefix;return this.em=i,r&&(n.stylePrefix=r+n.stylePrefix),this.selectorTags=new g({collection:new l.a([],{em:i,config:n}),config:n}),(t=new l.a(n.selectors)).on("add",(function(e){return i.trigger("selector:add",e)})),t.on("remove",(function(e){return i.trigger("selector:remove",e)})),t.on("change",(function(e){return i.trigger("selector:update",e,e.previousAttributes(),e.changedAttributes())})),i.on("change:state",(function(e,t){return i.trigger("selector:state",t)})),this},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render([]))},select:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e],i=this.em.get("StyleManager").setTarget(n,t),r=i.filter((function(e){return e})).map((function(e){return Object(a.l)(e)||Object(a.n)(e)&&!e.get("selectorsAdd")?e:e.getSelectorsString()}));return this.selectorTags.componentChanged({targets:r}),this},setState:function(e){return this.em.setState(e),this},getState:function(){return this.em.setState()},addSelector:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=v({},i);Object(o.isObject)(e)?r=e:r.name=e,y(r.name)?(r.name=r.name.substr(1),r.type=c.a.TYPE_ID):b(r.name)&&(r.name=r.name.substr(1)),r.label&&!r.name&&(r.name=this.escapeName(r.label));var a=r.name,s=a?this.get(a,r.type):t.where(r)[0];return s||t.add(r,{config:n})},getSelector:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.TYPE_CLASS;return y(e)?(e=e.substr(1),n=c.a.TYPE_ID):b(e)&&(e=e.substr(1)),t.where({name:e,type:n})[0]},add:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.isArray)(e)?e.map((function(e){return t.addSelector(e,n)})):this.addSelector(e,n)},addClass:function(e){var t=this,n=[];return Object(o.isString)(e)&&(e=e.trim().split(" ")),e.forEach((function(e){return n.push(t.addSelector(e))})),n},get:function(e,t){var n=this;if(Object(o.isArray)(e)){var i=[];return e.map((function(e){return n.getSelector(e)})).filter((function(e){return e})).forEach((function(e){return i.indexOf(e)<0&&i.push(e)})),i}return this.getSelector(e,t)},getAll:function(){return t},escapeName:function(e){var t=n.escapeName;return t?t(e):c.a.escapeName(e)},render:function(e){return e?(this.selectorTags=new g({collection:new l.a(e),config:n}),this.selectorTags.render().el):this.selectorTags.render().el}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o={textTags:["br","b","i","u","a","ul","ol"],parserCss:null,parserHtml:null},a=n(0),s={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},c=Object(a.keys)(s),l=["5","6","11","15"],u=["font-face","page","counter-style","viewport"],d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[],n=[],i=e.split(","),r=0,o=i.length;r<o;r++){var a=i[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(a)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(a)){var s=a.split(".").filter(Boolean);n.push(s)}else t.push(a)}return{result:n,add:t}},p=function(e){for(var t=e.style,n={},i=0,r=t.length;i<r;i++){var o=t[i],a=t.getPropertyValue(o),s=t.getPropertyPriority(o);n[o]="".concat(a).concat(s?" !".concat(s):"")}return n},h=function(e){return(e.conditionText||e.media&&e.media.mediaText||e.name||e.selectorText||"").trim()},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={},r=e.length,o=e[r-1],a=o?o.split(/:(.+)/):[],s=a[1],c=n.atRule,l=n.selectorsAdd,d=n.mediaText,p=u.indexOf(c)>=0;return p&&(i.singleAtRule=1),c&&(i.atRuleType=c),l&&(i.selectorsAdd=l),d&&(i.mediaText=d),s&&(e[r-1]=a[0],i.state=s,a.splice(a.length-1,1)),i.selectors=e,i.style=t,i},g=function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t);var n=t.sheet;return document.head.removeChild(t),function e(t){for(var n=[],i=t.cssRules||[],r=0,o=i.length;r<o;r++){var a=i[r],u=a.type.toString(),g=0,m="",v="",y=a.selectorText||a.keyText,b=l.indexOf(u)>=0;if(b)g=1,m=s[u],v=h(a);else if(c.indexOf(u)>=0){var w=e(a);v=h(a);for(var x=0,E=w.length;x<E;x++){var _=w[x];v&&(_.mediaText=v),_.atRuleType=s[u]}n=n.concat(w)}if(y||b){for(var S=p(a),C=d(y),O=C.add,k=void 0,T=0,P=(y=C.result).length;T<P;T++){var j=f(y[T],S,{atRule:s[u]});n.push(j),k=j}if(O.length){var A=O.join(", ");if(k)k.selectorsAdd=A;else{var M={selectors:[],selectorsAdd:A,style:S};g&&(M.singleAtRule=g),m&&(M.atRuleType=m),v&&(M.mediaText=v),n.push(M)}}}}return n}(n)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{parse:function(t){var n=this,i=[],r=e.parserCss,o=e.em,a=void 0===o?{}:o,s=a&&a.get&&a.get("Editor");return(r?r(t,s):g(t)).forEach((function(e){return i=i.concat(n.checkNode(e))})),i},checkNode:function(e){var t=e,n=t.selectors,i=t.style;if(Object(a.isString)(n)){var r=[],o=d(n),s=o.result,c=o.add.join(", "),l={atRule:e.atRule,mediaText:e.params};s.length?s.forEach((function(e){r.push(f(e,i,l))})):r.push(f([],i,l)),c&&(r[r.length-1].selectorsAdd=c),e=r}return e}}},v=n(27);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{compTypes:"",parserCss:null,parserHtml:null,name:"Parser",getConfig:function(){return n},init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=b({},o,{},i)).Parser=this,e=new v.a(n),t=new m(n),this.em=n.em,this.parserCss=t,this.parserHtml=e,this},parseHtml:function(n){var i=this.em,r=this.compTypes;return e.compTypes=i?i.get("DomComponents").getTypes():r,e.parse(n,t)},parseCss:function(e){return t.parse(e)}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o={id:"gjs-",autosave:1,autoload:1,type:"local",stepsBeforeSave:1,storeComponents:1,storeStyles:1,storeHtml:1,storeCss:1,checkLocal:1,params:{},headers:{},urlStore:"",urlLoad:"",beforeSend:function(e,t){},onComplete:function(e,t){},contentTypeJson:!0,credentials:"include",fetchOptions:""},a=n(1),s=n.n(a),c=s.a.Model.extend({defaults:{checkLocal:!0},store:function(e,t){for(var n in this.checkStorageEnvironment(),e)localStorage.setItem(n,e[n]);"function"==typeof t&&t()},load:function(e,t){this.checkStorageEnvironment();for(var n={},i=0,r=e.length;i<r;i++){var o=localStorage.getItem(e[i]);o&&(n[e[i]]=o)}return"function"==typeof t&&t(n),n},remove:function(e){this.checkStorageEnvironment();for(var t=0,n=e.length;t<n;t++)localStorage.removeItem(e[t])},checkStorageEnvironment:function(){this.get("checkLocal")&&!localStorage&&console.warn("Your browser doesn't support localStorage")}}),l=n(26),u=n(0);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=s.a.Model.extend({fetch:l.a,defaults:{urlStore:"",urlLoad:"",params:{},beforeSend:function(){},onComplete:function(){},contentTypeJson:!1,credentials:"include",fetchOptions:""},onStart:function(){this.get("em");var e=this.get("beforeSend");e&&e()},onError:function(e,t){if(t)t(e);else{var n=this.get("em");console.error(e),n&&n.trigger("storage:error",e)}},onResponse:function(e,t){var n=this.get("em"),i=this.get("onComplete"),r=this.get("contentTypeJson")&&e&&"string"==typeof e?JSON.parse(e):e;i&&i(r),t&&t(r),n&&n.trigger("storage:response",r)},store:function(e,t,n){var i={};for(var r in e)i[r]=e[r];this.request(this.get("urlStore"),{body:i},t,n)},load:function(e,t,n){this.request(this.get("urlLoad"),{method:"get"},t,n)},request:function(e){var t,n,i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.get("contentTypeJson"),c=this.get("headers")||{},l=this.get("params"),d="X-Requested-With",h="Content-Type",f=r.body||{};for(var g in l)f[g]=l[g];if(Object(u.isUndefined)(c[d])&&(c[d]="XMLHttpRequest"),Object(u.isUndefined)(c[h])&&s&&(c[h]="application/json; charset=utf-8"),s)n=JSON.stringify(f);else for(var m in n=new FormData,f)n.append(m,f[m]);"post"===(t={method:r.method||"post",credentials:this.get("credentials"),headers:c}).method&&(t.body=n);var v=this.get("fetchOptions")||{},y=Object(u.isFunction)(v)?v(t):t;this.onStart(),this.fetch(e,p({},t,{},y||{})).then((function(e){return 1==(e.status/200|0)?e.text():e.text().then((function(e){return Promise.reject(e)}))})).then((function(e){return i.onResponse(e,o)})).catch((function(e){return i.onError(e,a)}))}});function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},n={},i={};return{name:"StorageManager",init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=g({},o,{},n),e=t.em,t._disable&&(t.type=0),i.remote=new h(t),i.local=new c(t),t.currentStorage=t.type,this.loadDefaultProviders().setCurrent(t.type),this},getConfig:function(){return t},isAutosave:function(){return!!t.autosave},setAutosave:function(e){return t.autosave=!!e,this},getStepsBeforeSave:function(){return t.stepsBeforeSave},setStepsBeforeSave:function(e){return t.stepsBeforeSave=e,this},add:function(e,t){return n[e]=t,this},get:function(e){return n[e]||null},getStorages:function(){return n},getCurrent:function(){return t.currentStorage},setCurrent:function(e){return t.currentStorage=e,this},store:function(e,n){var i=this,r=this.get(this.getCurrent()),o={};for(var a in this.onStart("store",e),e)o[t.id+a]=e[a];return r?r.store(o,(function(e){n&&n(e),i.onEnd("store",e)}),(function(e){i.onError("store",e)})):null},load:function(e,n){var i=this,r=this.get(this.getCurrent()),o=[],a={};"string"==typeof e&&(e=[e]),this.onStart("load",e);for(var s=0,c=e.length;s<c;s++)o.push(t.id+e[s]);r?r.load(o,(function(e){var r=new RegExp("^"+t.id);for(var o in e){var s=o.replace(r,"");a[s]=e[o]}n&&n(a),i.onEnd("load",a)}),(function(e){n&&n(a),i.onError("load",e)})):n&&n(a)},loadDefaultProviders:function(){for(var e in i)this.add(e,i[e]);return this},getCurrentStorage:function(){return this.get(this.getCurrent())},onStart:function(t,n){e&&(e.trigger("storage:start"),t&&e.trigger("".concat("storage:start",":").concat(t),n))},onEnd:function(t,n){e&&(e.trigger("storage:end"),t&&e.trigger("".concat("storage:end",":").concat(t),n))},onError:function(t,n){e&&(e.trigger("storage:error",n),t&&e.trigger("".concat("storage:error",":").concat(t),n),this.onEnd(t,n))},canAutoload:function(){return this.getCurrentStorage()&&this.getConfig().autoload}}}},function(e,t,n){"use strict";n.r(t);var i=n(16),r=n(2),o=n.n(r),a=n(1),s=n.n(a),c=n(0),l=n(3);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=s.a.$,h=s.a.View.extend({initialize:function(e){this.opt=e||{},Object(c.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var t=e||{};this.elT=0,this.elL=0,this.borderOffset=t.borderOffset||10;var n=t.container;this.el="string"==typeof n?document.querySelector(n):n,this.$el=p(this.el),this.containerSel=t.containerSel||"div",this.itemSel=t.itemSel||"div",this.draggable=t.draggable||!0,this.nested=t.nested||0,this.pfx=t.pfx||"",this.ppfx=t.ppfx||"",this.freezeClass=t.freezeClass||this.pfx+"freezed",this.onStart=t.onStart||"",this.onEndMove=t.onEndMove||"",this.direction=t.direction||"v",this.onMoveClb=t.onMove||"",this.relative=t.relative||0,this.ignoreViewChildren=t.ignoreViewChildren||0,this.ignoreModels=t.ignoreModels||0,this.plh=t.placer||"",this.wmargin=t.wmargin||0,this.offTop=t.offsetTop||0,this.offLeft=t.offsetLeft||0,this.document=t.document||document,this.$document=p(this.document),this.dropContent=null,this.em=t.em||"",this.dragHelper=null,this.canvasRelative=t.canvasRelative||0,this.selectOnEnd=!t.avoidSelectOnEnd,this.scale=t.scale,this.activeTextModel=null,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},getScale:function(){return Object(c.result)(this,scale)||1},getContainerEl:function(e){if(e&&(this.el=e),!this.el){var t=this.opt.container;this.el="string"==typeof t?document.querySelector(t):t,this.$el=p(this.el)}return this.el},getDocuments:function(e){var t=this.em,n=e?e.ownerDocument:t&&t.get("Canvas").getBody().ownerDocument,i=[document];return n&&i.push(n),i},updateOffset:function(){var e=this.em.get("canvasOffset")||{};this.offTop=e.top,this.offLeft=e.left},setDropContent:function(e){this.dropModel=null,this.dropContent=e},updateTextViewCursorPosition:function(e){var t=this.em.get("Canvas"),n=t.getDocument(),i=null;if(n.caretRangeFromPoint){var r=Object(l.h)(e);i=n.caretRangeFromPoint(r.clientX,r.clientY)}else e.rangeParent&&(i=n.createRange()).setStart(e.rangeParent,e.rangeOffset);var o=t.getWindow().getSelection();t.getFrameEl().focus(),o.removeAllRanges(),i&&o.addRange(i)},setContentEditable:function(e,t){if(e){var n=e.getEl();n.contentEditable!=t&&(n.contentEditable=t)}},toggleSortCursor:function(e){var t=this.em,n=t&&t.get("Canvas");n&&(e?n.startAutoscroll():n.stopAutoscroll())},setDragHelper:function(e,t){for(var n=t||"",i=e.cloneNode(1),r=e.getBoundingClientRect(),o=getComputedStyle(e),a="",s=0;s<o.length;s++){var c=o[s];a+="".concat(c,":").concat(o.getPropertyValue(c),";")}document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",a),this.dragHelper=i,i.style.width="".concat(r.width,"px"),i.style.height="".concat(r.height,"px"),n&&this.moveDragHelper(n),this.em&&p(this.em.get("Canvas").getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),p(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},moveDragHelper:function(e){var t=e.target.ownerDocument;if(this.dragHelper&&t){var n=e.pageY,i=e.pageX,r=0,o=0,a=(t.defaultView||t.parentWindow).frameElement,s=this.dragHelper.style;if(a){var c=a.getBoundingClientRect();r=c.top+document.documentElement.scrollTop,o=c.left+document.documentElement.scrollLeft,n=e.clientY,i=e.clientX}s.top=n+r+"px",s.left=i+o+"px"}},matches:function(e,t,n){return l.q.call(e,t)},closest:function(e,t){if(e){for(var n=e.parentNode;n&&1===n.nodeType;){if(this.matches(n,t))return n;n=n.parentNode}return null}},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},createPlaceholder:function(){var e=this.pfx,t=document.createElement("div"),n=document.createElement("div");return t.className=e+"placeholder",t.style.display="none",t.style["pointer-events"]="none",n.className=e+"placeholder-int",t.appendChild(n),t},startSort:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.em,r=this.itemSel,o=this.containerSel,a=this.getContainerEl(n.container),s=this.getDocuments(e),c=this.onStart,u=this.plh;this.dropModel=null,this.target=null,this.prevTarget=null,this.moved=0,e&&!this.matches(e,"".concat(r,", ").concat(o))&&(e=this.closest(e,r)),this.eV=e,u||(u=this.createPlaceholder(),a.appendChild(u),this.plh=u),e&&((t=this.getSourceModel(e))&&t.set&&t.set("status","freezed"),this.srcModel=t),Object(l.t)(a,"mousemove dragover",this.onMove),Object(l.t)(s,"mouseup dragend touchend",this.endMove),Object(l.t)(s,"keydown",this.rollback),c&&c({target:t,parent:t&&t.parent(),index:t&&t.index()}),i&&i.clearSelection(),this.toggleSortCursor(1),i&&i.trigger("sorter:drag:start",e,t)},getTargetModel:function(e){var t=e||this.target;return p(t).data("model")},getSourceModel:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.target,r=n.avoidChildren,o=void 0===r?1:r,a=this.em,s=this.eV,c=e||s,l=this.dropModel,u=this.dropContent,h=function(e){return e&&i&&e.opt&&e.opt.avoidChildren&&t.isTextableActive(e,i)};if(u&&a){if(h(l)&&(l=null),!l){var f=a.get("DomComponents").getComponents(),g={avoidChildren:o,avoidStore:1,avoidUpdateStyle:1},m=f.add(u,d({},g,{temporary:1}));if(l=(l=f.remove(m,g))instanceof Array?l[0]:l,this.dropModel=l,h(l))return this.getSourceModel(c,{target:i,avoidChildren:0})}return l}return c&&p(c).data("model")},selectTargetModel:function(e){if(!(e instanceof s.a.Collection)){var t=this.targetModel;t&&t!==this.srcModel&&t.set("status",""),e&&e.set&&(e.set("status","selected-parent"),this.targetModel=e)}},onMove:function(e){var t=e,n=this.em,i=this.onMoveClb,r=this.plh;this.moved=1;var o=r.style.display;o&&"none"!==o||(r.style.display="block");var a=this.offset(this.el);this.elT=this.wmargin?Math.abs(a.top):a.top,this.elL=this.wmargin?Math.abs(a.left):a.left;var s=e.pageY-this.elT+this.el.scrollTop,l=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&n){var u=n.get("Canvas").getMouseRelativeCanvas(e,{noScroll:1});l=u.x,s=u.y}this.rX=l,this.rY=s,this.eventMove=e;var d=this.getSourceModel(),h=this.dimsFromTarget(e.target,l,s),f=this.target,g=f&&this.getTargetModel(f);if(this.selectTargetModel(g),g||(r.style.display="none"),f){this.lastDims=h;var m=this.findPosition(h,l,s);this.isTextableActive(d,g)?(this.activeTextModel=g,this.setContentEditable(g,!0),r.style.display="none",this.lastPos=m,this.updateTextViewCursorPosition(t)):(this.disableTextable(),this.activeTextModel=null,this.lastPos&&this.lastPos.index==m.index&&this.lastPos.method==m.method||(this.movePlaceholder(this.plh,h,m,this.prevTargetDim),this.$plh||(this.$plh=p(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=m)),Object(c.isFunction)(i)&&i({event:e,target:d,parent:g,index:m.index+("after"==m.method?1:0)}),n&&n.trigger("sorter:drag",{target:f,targetModel:g,sourceModel:d,dims:h,pos:m,x:l,y:s})}},isTextableActive:function(e,t){return e&&e.get&&e.get("textable")&&t&&t.is("text")},disableTextable:function(){var e=this.activeTextModel;e&&e.getView().disableEditing()},isInFlow:function(e,t){if(!e)return!1;t=t||document.body;var n=e;return n.offsetHeight,!!this.styleInFlow(n,t)},styleInFlow:function(e,t){if(!Object(l.p)(e)){var n=e.style||{},i=p(e),r=t&&p(t);if(!(n.overflow&&"visible"!==n.overflow||"none"!==i.css("float")||r&&"flex"==r.css("display")&&"column"!==r.css("flex-direction"))){switch(n.position){case"static":case"relative":case"":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}},validTarget:function(e,t){var n=this.getTargetModel(e),i=this.getSourceModel(t,{target:n}),r={valid:!0,src:t=i&&i.view&&i.view.el,srcModel:i,trg:e=n&&n.view&&n.view.el,trgModel:n};if(!t||!e)return r.valid=!1,r;var o=i.get("draggable");o=o instanceof Array?o.join(", "):o,r.dragInfo=o,o=Object(c.isString)(o)?this.matches(e,o):o,r.draggable=o;var a=n.get("droppable");return a=(a=a instanceof s.a.Collection?1:a)instanceof Array?a.join(", "):a,r.dropInfo=a,a=Object(c.isString)(a)?this.matches(t,a):a,a=o&&this.isTextableActive(i,n)?1:a,r.droppable=a,a&&o||(r.valid=!1),r},dimsFromTarget:function(e,t,n){var i=this.em,r=[];if(!e)return r;if(this.matches(e,"".concat(this.itemSel,", ").concat(this.containerSel))||(e=this.closest(e,this.itemSel)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),!e)return r;if(this.prevTarget&&this.prevTarget!=e&&(this.prevTarget=null),!this.prevTarget){this.targetP=this.closest(e,this.containerSel);var o=this.validTarget(e);if(i&&i.trigger("sorter:drag:validation",o),!o.valid&&this.targetP)return this.dimsFromTarget(this.targetP,t,n);this.prevTarget=e,this.prevTargetDim=this.getDim(e),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(e)}if(this.prevTarget==e&&(r=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,t,n)||!this.nested&&!this.cacheDims.length){var a=this.targetP;a&&this.validTarget(a).valid&&(r=this.cacheDimsP,this.target=a)}return this.lastPos=null,r},getTargetFromEl:function(e){var t,n=e,i=this.targetPrev,r=this.em,o=this.containerSel,a=this.itemSel;if(this.matches(n,"".concat(a,", ").concat(o))||(n=this.closest(n,a)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),i&&i!=n&&(this.targetPrev=""),!this.targetPrev){t=this.closest(n,o);var s=this.validTarget(n);if(r&&r.trigger("sorter:drag:validation",s),!s.valid&&t)return this.getTargetFromEl(t);this.targetPrev=n}return this.nearElBorders(n)&&(t=this.closest(n,o))&&this.validTarget(t).valid&&(n=t),n},nearElBorders:function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.body,i=this.getCurrentPos(),r=i.x,o=i.y,a=t.top+n.scrollTop,s=t.left+n.scrollLeft,c=t.width,l=t.height;if(o<a+10||o>a+l-10||r<s+10||r>s+c-10)return 1},getCurrentPos:function(){var e=this.eventMove;return{x:e.pageX||0,y:e.pageY||0}},getDim:function(e){var t,n,i,r,o=this.em;if(this.canvasRelative&&o){var a=o.get("Canvas"),s=a.getElementPos(e,{noScroll:1}),c=a.getElementOffsets(e);t=s.top-c.marginTop,n=s.left-c.marginLeft,i=s.height+c.marginTop+c.marginBottom,r=s.width+c.marginLeft+c.marginRight}else{var l=this.offset(e);t=this.relative?e.offsetTop:l.top-(this.wmargin?-1:1)*this.elT,n=this.relative?e.offsetLeft:l.left-(this.wmargin?-1:1)*this.elL,i=e.offsetHeight,r=e.offsetWidth}return[t,n,i,r]},getChildrenDim:function(e){var t=this,n=[];if(!e)return n;var i=this.getTargetModel(e);if(i&&i.view&&!this.ignoreViewChildren){var r=i.getCurrentView?i.getCurrentView():i.view;e=r.getChildrenContainer()}return Object(c.each)(e.children,(function(i,r){var o=Object(l.g)(i,p),a=o&&o.index?o.index():r;if(Object(l.p)(i)||t.matches(i,t.itemSel)){var s=t.getDim(i),c=t.direction;c="v"==c||"h"!=c&&t.isInFlow(i,e),s.push(c,i,a),n.push(s)}})),n},nearBorders:function(e,t,n){var i=0,r=this.borderOffset,o=t||0,a=n||0,s=e[0],c=e[1],l=e[2],u=e[3];return(s+r>a||a>s+l-r||c+r>o||o>c+u-r)&&(i=1),!!i},findPosition:function(e,t,n){for(var i={index:0,indexEl:0,method:"before"},r=0,o=0,a=0,s=0,c=0,l=0,u=0,d=0,p=0,h=e.length;p<h;p++)if(a=(d=e[p])[1]+d[3],u=d[0]+d[2],c=d[1]+d[3]/2,l=d[0]+d[2]/2,!(o&&d[1]>o||s&&l>=s||r&&a<r))if(i.index=p,i.indexEl=d[6],d[4]){if(n<l){i.method="before";break}i.method="after"}else n<u&&(s=u),t<c?(o=c,i.method="before"):(r=c,i.method="after");return i},movePlaceholder:function(e,t,n,i){var r=0,o=0,a=0,s=0,c="px",l=n.method,u=t[n.index];if(e.classList.remove("vertical"),e.classList.add("horizontal"),u)u[4]?(a=u[3]+c,s="auto",r="before"==l?u[0]-0:u[0]+u[2]-0,o=u[1]):(a="auto",s=u[2]-0+c,r=u[0]+0,o="before"==l?u[1]-0:u[1]+u[3]-0,e.classList.remove("horizontal"),e.classList.add("vertical"));else{if(!this.nested)return void(e.style.display="none");i&&(r=i[0]+5,o=i[1]+5,a=parseInt(i[3])-10+c,s="auto")}e.style.top=r+c,e.style.left=o+c,a&&(e.style.width=a),s&&(e.style.height=s)},endMove:function(e){var t,n=this,i=this.eV,r=[],o=this.getDocuments(),a=this.getContainerEl(),s=this.onEndMove,u=this.target,p=this.lastPos;if(Object(l.s)(a,"mousemove dragover",this.onMove),Object(l.s)(o,"mouseup dragend touchend",this.endMove),Object(l.s)(o,"keydown",this.rollback),this.plh.style.display="none",i&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved){var h=this.toMove;(Object(c.isArray)(h)?h:h?[h]:[i]).forEach((function(e){r.push(n.move(u,e,p))}))}this.plh&&(this.plh.style.display="none");var f=this.dragHelper;if(f&&(f.parentNode.removeChild(f),this.dragHelper=null),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),this.toMove=null,this.eventMove=0,this.dropModel=null,Object(c.isFunction)(s)){var g={target:t,parent:t&&t.parent(),index:t&&t.index()};r.length?r.forEach((function(e){return s(e,n,g)})):s(null,this,d({},g,{cancelled:1}))}},move:function(e,t,n){var i=this.em,r=this.activeTextModel,o=this.dropContent,a=Object(l.e)(t);i&&i.trigger("component:dragEnd:before",e,a,n);var c,u,h,f=[],g=n.indexEl,m=this.validTarget(e,a),v=p(e).data("collection"),y=m.srcModel,b=m.droppable,w=m.draggable,x=m.dropInfo,E=m.dragInfo,_=m.trgModel;b=_ instanceof s.a.Collection?1:b;var S=this.isTextableActive(y,_);if(v&&b&&w){var C={at:g="after"===n.method?g+1:g,noIncrement:1};if(o?(c=o,C.silent=!1,C.avoidUpdateStyle=1):(C.temporary=1,u=v.add({},d({},C)),y.collection&&(c=y.collection.remove(y,{temporary:1}))),S){var O=r.getView();r.trigger("active");var k=O.activeRte,T=y.getEl();delete y.opt.temporary,y.getView().render(),T.setAttribute("data-gjs-textable","true");var P=T.outerHTML;k.insertHTML&&k.insertHTML(P)}else h=v.add(c,C);o?this.dropContent=null:v.remove(u),this.prevTarget=null}else v||f.push("Target collection not found"),b||f.push("Target is not droppable, accepts [".concat(x,"]")),w||f.push("Component not draggable, acceptable by [".concat(E,"]")),console.warn("Invalid target position: "+f.join(", "));return i&&i.trigger("component:dragEnd",v,c,f),i&&i.trigger("sorter:drag:end",{targetCollection:v,modelToDrop:c,warns:f,validResult:m,dst:e,srcEl:a}),h},rollback:function(e){Object(l.s)(this.getDocuments(),"keydown",this.rollback),27==(e.which||e.keyCode)&&(this.moved=0,this.endMove())}}),f=n(14),g=n.n(f),m=n(15),v=n.n(m);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={mousePosFetcher:null,updateTarget:null,ratioDefault:0,posFetcher:null,onStart:null,onMove:null,onEnd:null,onUpdateContainer:function(){},step:1,minDim:32,maxDim:"",unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:1,silentFrames:0,avoidContainerUpdate:0,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:1,tc:1,tr:1,cl:1,cr:1,bl:1,bc:1,br:1},x=function(e,t){var n=t||window,i=e.getBoundingClientRect();return{left:i.left+n.pageXOffset,top:i.top+n.pageYOffset,width:i.width,height:i.height}},E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,e),this.setOptions(t),Object(c.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop"),this}return v()(e,[{key:"getConfig",value:function(){return this.opts}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object(c.defaults)(e,w),this.setup()}},{key:"setup",value:function(){var e=this.opts,t=e.prefix||"",n=e.appendTo||document.body,i=this.container;for(i||((i=document.createElement("div")).className="".concat(t,"resizer-c"),n.appendChild(i),this.container=i);i.firstChild;)i.removeChild(i.firstChild);var r={};for(var o in["tl","tc","tr","cl","cr","bl","bc","br"].forEach((function(t){return r[t]=e[t]?function(e,t){var n=t.prefix||"",i=document.createElement("i");return i.className=n+"resizer-h "+n+"resizer-h-"+e,i.setAttribute("data-"+n+"handler",e),i}(t,e):""})),r){var a=r[o];a&&i.appendChild(a)}this.handlers=r,this.mousePosFetcher=e.mousePosFetcher,this.updateTarget=e.updateTarget,this.posFetcher=e.posFetcher,this.onStart=e.onStart,this.onMove=e.onMove,this.onEnd=e.onEnd,this.onUpdateContainer=e.onUpdateContainer}},{key:"toggleFrames",value:function(e){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");Object(c.each)(t,(function(t){return t.style.pointerEvents=e?"none":""}))}}},{key:"isHandler",value:function(e){var t=this.handlers;for(var n in t)if(t[n]===e)return!0;return!1}},{key:"getFocusedEl",value:function(){return this.el}},{key:"getDocumentEl",value:function(){return[this.el.ownerDocument,document]}},{key:"getElementPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.posFetcher||"";return n?n(e,t):x(e)}},{key:"focus",value:function(e){e&&e===this.el||(this.el=e,this.updateContainer({forceShow:1}),Object(l.t)(this.getDocumentEl(),"mousedown",this.handleMouseDown))}},{key:"blur",value:function(){this.container.style.display="none",this.el&&(Object(l.s)(this.getDocumentEl(),"mousedown",this.handleMouseDown),this.el=null)}},{key:"start",value:function(e){if(0===e.button){e.preventDefault(),e.stopPropagation();var t=this.el,n=this.opts||{},i="data-"+n.prefix+"handler",r=this.getElementPos(t,{target:"el"});this.handlerAttr=e.target.getAttribute(i),this.clickedHandler=e.target,this.startDim={t:r.top,l:r.left,w:r.width,h:r.height},this.rectDim={t:r.top,l:r.left,w:r.width,h:r.height},this.startPos={x:e.clientX,y:e.clientY};var o=this.getDocumentEl();Object(l.t)(o,"mousemove",this.move),Object(l.t)(o,"keydown",this.handleKeyDown),Object(l.t)(o,"mouseup",this.stop),Object(c.isFunction)(this.onStart)&&this.onStart(e,{docs:o,config:n,el:t,resizer:this}),this.toggleFrames(1),this.move(e)}}},{key:"move",value:function(e){var t=this.onMove,n=this.mousePosFetcher,i=n?n(e):{x:e.clientX,y:e.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(0),t&&t(e),0===e.which&&this.stop(e)}},{key:"stop",value:function(e){var t=this.opts,n=this.getDocumentEl();Object(l.s)(n,"mousemove",this.move),Object(l.s)(n,"keydown",this.handleKeyDown),Object(l.s)(n,"mouseup",this.stop),this.updateRect(1),this.toggleFrames(),Object(c.isFunction)(this.onEnd)&&this.onEnd(e,{docs:n,config:t})}},{key:"updateRect",value:function(e){var t=this.el,n=this.opts,i=this.rectDim,r=this.updateTarget,o=this.getSelectedHandler(),a=n.unitHeight,s=n.unitWidth,l=n.keyWidth,u=n.keyHeight;if(Object(c.isFunction)(r))r(t,i,{store:e,selectedHandler:o,resizer:this,config:n});else{var d=t.style;d[l]=i.w+s,d[u]=i.h+a}this.updateContainer()}},{key:"updateContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.opts,n=this.container,i=this.el,r=n.style;!t.avoidContainerUpdate&&i&&e.forceShow&&(r.display="block"),this.onUpdateContainer({el:n,resizer:this,opts:b({},t,{},e)})}},{key:"getSelectedHandler",value:function(){var e=this.handlers;if(this.selectedHandler)for(var t in e)if(e[t]===this.selectedHandler)return t}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&(this.rectDim=this.startDim,this.stop(e))}},{key:"handleMouseDown",value:function(e){var t=e.target;this.isHandler(t)?(this.selectedHandler=t,this.start(e)):t!==this.el&&(this.selectedHandler="",this.blur())}},{key:"calc",value:function(e){var t,n=this.opts||{},i=n.step,r=this.startDim,o=n.minDim,a=n.maxDim,s=e.delta.x,c=e.delta.y,u=r.w,d=r.h,p={t:0,l:0,w:u,h:d};if(e){var h=e.handlerAttr;~h.indexOf("r")&&(t=Object(l.r)(u+s*i,i),t=Math.max(o,t),a&&(t=Math.min(a,t)),p.w=t),~h.indexOf("b")&&(t=Object(l.r)(d+c*i,i),t=Math.max(o,t),a&&(t=Math.min(a,t)),p.h=t),~h.indexOf("l")&&(t=Object(l.r)(u-s*i,i),t=Math.max(o,t),a&&(t=Math.min(a,t)),p.w=t),~h.indexOf("t")&&(t=Object(l.r)(d-c*i,i),t=Math.max(o,t),a&&(t=Math.min(a,t)),p.h=t);var f=n.ratioDefault?!e.keys.shift:e.keys.shift;if(h.indexOf("c")<0&&f){var g=r.w/r.h;p.w/p.h>g?p.h=Math.round(p.w/g):p.w=Math.round(p.h*g)}return~h.indexOf("l")&&(p.l=r.w-p.w),~h.indexOf("t")&&(p.t=r.h-p.h),p}}}]),e}(),_={init:function(e){return new E(e)}};t.default=function(){return{name:"Utils",init:function(){return this},Sorter:h,Resizer:_,Dragger:i.a}}},function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(2),a=n.n(o),s=n(14),c=n.n(s),l=n(15),u=n.n(l),d=n(3);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f="_rte",g=function(e){var t=e.selection().anchorNode,n=t&&t.parentNode,i=t&&t.nextSibling;return n&&"A"==n.nodeName||i&&"A"==i.nodeName},m={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(e){return e.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(e){return e.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(e){return e.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<strike>S</strike>",attributes:{title:"Strike-through"},result:function(e){return e.exec("strikeThrough")}},link:{icon:'<span style="transform:rotate(45deg)">&supdsub;</span>',name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(e,t){return e&&e.selection()&&g(e)?1:0},result:function(e){g(e)?e.exec("unlink"):e.insertHTML('<a class="link" href="">'.concat(e.selection(),"</a>"))}}},v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e);var i=n.el;if(i[f])return i[f];i[f]=this,this.setEl(i),this.updateActiveActions=this.updateActiveActions.bind(this);var r=n.actions||[];r.forEach((function(e,t){"string"==typeof e?e=m[e]:m[e.name]&&(e=h({},m[e.name],{},e)),r[t]=e}));var o=r.length?r:Object.keys(m).map((function(e){return m[e]}));n.classes=h({},{actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},{},n.classes);var a=n.classes,s=n.actionbar;if(this.actionbar=s,this.settings=n,this.classes=a,this.actions=o,!s){var l=n.actionbarContainer;(s=document.createElement("div")).className=a.actionbar,l.appendChild(s),this.actionbar=s,o.forEach((function(e){return t.addAction(e)}))}return n.styleWithCSS&&this.exec("styleWithCSS"),this.syncActions(),this}return u()(e,[{key:"destroy",value:function(){this.el=0,this.doc=0,this.actionbar=0,this.settings={},this.classes={},this.actions=[]}},{key:"setEl",value:function(e){this.el=e,this.doc=e.ownerDocument}},{key:"updateActiveActions",value:function(){var e=this;this.getActions().forEach((function(t){var n=t.btn,i=t.update,r=h({},e.classes),o=r.active,a=r.inactive,s=r.disabled,c=t.state,l=t.name,u=e.doc;if(n.className=n.className.replace(o,"").trim(),n.className=n.className.replace(a,"").trim(),n.className=n.className.replace(s,"").trim(),c)switch(c(e,u)){case 1:n.className+=" ".concat(o);break;case 0:n.className+=" ".concat(a);break;case-1:n.className+=" ".concat(s)}else u.queryCommandSupported(l)&&u.queryCommandState(l)&&(n.className+=" ".concat(o));i&&i(e,t)}))}},{key:"enable",value:function(){return this.enabled||(this.actionbarEl().style.display="",this.el.contentEditable=!0,Object(d.t)(this.el,"mouseup keyup",this.updateActiveActions),this.syncActions(),this.updateActiveActions(),this.el.focus(),this.enabled=1),this}},{key:"disable",value:function(){return this.actionbarEl().style.display="none",this.el.contentEditable=!1,Object(d.s)(this.el,"mouseup keyup",this.updateActiveActions),this.enabled=0,this}},{key:"syncActions",value:function(){var e=this;this.getActions().forEach((function(t){if(e.settings.actionbar&&(!t.state||t.state&&t.state(e,e.doc)>=0)){var n=t.event||"click";t.btn["on".concat(n)]=function(n){t.result(e,t),e.updateActiveActions()}}}))}},{key:"addAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sync,i=document.createElement("span"),r=e.icon,o=e.attributes||{};for(var a in i.className=this.classes.button,e.btn=i,o)i.setAttribute(a,o[a]);"string"==typeof r?i.innerHTML=r:i.appendChild(r),this.actionbarEl().appendChild(i),n&&(this.actions.push(e),this.syncActions())}},{key:"getActions",value:function(){return this.actions}},{key:"selection",value:function(){return this.doc.getSelection()}},{key:"exec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.doc.execCommand(e,!1,t)}},{key:"actionbarEl",value:function(){return this.actionbar}},{key:"insertHTML",value:function(e){var t=this.doc,n=t.getSelection();if(n&&n.rangeCount){var i=t.createElement("div"),r=n.getRangeAt(0);r.deleteContents(),i.innerHTML=e,Array.prototype.slice.call(i.childNodes).forEach((function(e){r.insertNode(e)})),n.removeAllRanges(),n.addRange(r),this.el.focus()}}}]),e}(),y={stylePrefix:"rte-",adjustToolbar:1,actions:["bold","italic","underline","strikethrough","link"]};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,i={},o=function(){var t=e.style;t.top="-1000px",t.left="-1000px",t.display="none"};return{customRte:null,name:"RichTextEditor",getConfig:function(){return i},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(i=w({},y,{},t)).pStylePrefix;return r&&(i.stylePrefix=r+i.stylePrefix),this.pfx=i.stylePrefix,i.actions,(e=document.createElement("div")).className="".concat(r,"rte-toolbar ").concat(r,"one-bg"),n=this.initRte(document.createElement("div")),Object(d.t)(e,"mousedown",(function(e){return e.stopPropagation()})),this},destroy:function(){var t=this.customRte;n&&n.destroy(),t&&t.destroy&&t.destroy(),e=0,n=0,this.actionbar=0,this.actions=0},postRender:function(t){var n=t.model.get("Canvas");e.style.pointerEvents="all",o(),n.getToolsEl().appendChild(e)},initRte:function(t){var o=this.pfx,a=e,s=this.actionbar,c=this.actions||r()(i.actions),l={actionbar:"".concat(o,"actionbar"),button:"".concat(o,"action"),active:"".concat(o,"active"),inactive:"".concat(o,"inactive"),disabled:"".concat(o,"disabled")},u=new v({el:t,classes:l,actions:c,actionbar:s,actionbarContainer:a});return n&&n.setEl(t),u.actionbar&&(this.actionbar=u.actionbar),u.actions&&(this.actions=u.actions),u},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=e,n.addAction(t,{sync:1})},get:function(e){var t;return n.getActions().forEach((function(n){n.name==e&&(t=n)})),t},getAll:function(){return n.getActions()},remove:function(e){var t=this.getAll(),n=this.get(e);if(n){var i=n.btn,r=t.indexOf(n);i.parentNode.removeChild(i),t.splice(r,1)}return n},getToolbarEl:function(){return e},updatePosition:function(){var n=i.em.get("Canvas"),r=e.style,o=n.getTargetToElementFixed(t,e,{event:"rteToolbarPosUpdate"});r.top=o.top+"px",r.left="0px"},enable:function(n,r){t=n.el;var o=i.em.get("Canvas"),a=i.em,s=n.getChildrenContainer(),c=this.customRte;if(o.getElementPos(t),e.style.display="",r=c?c.enable(s,r):this.initRte(s).enable(),a){setTimeout(this.updatePosition.bind(this),0);var l="change:canvasOffset canvasScroll frame:scroll component:update";a.off(l,this.updatePosition,this),a.on(l,this.updatePosition,this),a.trigger("rte:enable",n,r)}return r},disable:function(e,t){var n=i.em,r=this.customRte,a=e.getChildrenContainer();r?r.disable(a,t):t&&t.disable(),o(),n&&n.trigger("rte:disable",e,t)}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(8),a=n.n(o),s=n(0),c={placeholder:"eg. Text here"},l={locale:"en",localeFallback:"en",detectLocale:1,debug:0,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:c,alt:c,title:c,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}}}}};function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){return!Array.isArray(e)&&null!==e&&"object"===a()(e)};t.default=function(){return{name:"I18n",config:l,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=d({},l,{},e,{messages:d({},l.messages,{},e.messages||{})}),this.config.detectLocale&&(this.config.locale=this._localLang()),this.em=e.em,this},getConfig:function(){return this.config},setLocale:function(e){var t=this.em,n=this.config,i={value:e,valuePrev:n.locale};return t&&t.trigger("i18n:locale",i),n.locale=e,this},getLocale:function(){return this.config.locale},getMessages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config.messages;return e&&!n[e]&&this._debug("'".concat(e,"' i18n lang not found"),t),e?n[e]:n},setMessages:function(e){var t=this.em;return this.config.messages=e,t&&t.trigger("i18n:update",e),this},addMessages:function(e){var t=this.em,n=this.config.messages;return t&&t.trigger("i18n:add",e),this.setMessages(function e(){for(var t=d({},arguments.length<=0?void 0:arguments[0]),n=1;n<arguments.length;n++){var i=d({},n<0||arguments.length<=n?void 0:arguments[n]);for(var r in i){var o=t[r],a=i[r];p(o)&&p(a)?t[r]=e(o,a):t[r]=a}}return t}(n,e)),this},t:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config,i=t.params||{},r=t.l||this.getLocale(),o=t.lFlb||n.localeFallback,a=this._getMsg(e,r,t);return a||(a=this._getMsg(e,o,t)),!a&&this._debug("'".concat(e,"' i18n key not found in '").concat(r,"' lang"),t),a&&Object(s.isString)(a)?this._addParams(a,i):a},_localLang:function(){var e=window.navigator||{},t=e.language||e.userLanguage;return t?t.split("-")[0]:"en"},_addParams:function(e,t){var n=new RegExp("{([\\w\\d-]*)}","g");return e.replace(n,(function(e,n){return t[n]||""})).trim()},_getMsg:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getMessages(t,n);if(i){var r=i[e];return!r&&e.indexOf(".")>0&&(r=e.split(".").reduce((function(e,t){if(!Object(s.isUndefined)(e))return e[t]}),i)),r}},_debug:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,i=this.config;(t.debug||i.debug)&&n&&n.logWarning(e)}}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(0),a={stylePrefix:"css-",staticRules:"",rules:[]},s=n(33),c=n(32),l=n(36),u=n(11),d=n(9);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,i={};return{Selectors:u.a,name:"CssComposer",getConfig:function(){return i},storageKey:function(){var e=[],t=i.stm&&i.stm.getConfig()||{};return t.storeCss&&e.push("css"),t.storeStyles&&e.push("styles"),e},init:function(r){for(var o in i=r||{},a)o in i||(i[o]=a[o]);var s=i.pStylePrefix;s&&(i.stylePrefix=s+i.stylePrefix);var u=i.em&&i.em.config.style||"";return i.rules=u||i.rules,e=i.em,t=new c.a([],i),n=new l.a({collection:t,config:i}),this},onLoad:function(){t.add(i.rules)},postLoad:function(e){var t=this,n="add remove",i=this.getAll(),r=e.get("UndoManager");r&&r.add(i),e.stopListening(i,n,this.handleChange),e.listenTo(i,n,this.handleChange),i.each((function(e){return t.handleChange(e,{avoidStore:1})}))},handleChange:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="change:style",r=e.get("UndoManager");r&&r.add(t);var o=e.handleUpdates.bind(e);e.stopListening(t,i,o),e.listenTo(t,i,o),!n.avoidStore&&o("","",n)},load:function(e){var n=e||"";!n&&i.stm&&(n=i.em.getCacheLoad());var r=n.styles||"";if(n.styles)try{r=JSON.parse(n.styles)}catch(e){}else n.css&&(r=i.em.get("Parser").parseCss(n.css));return Object(o.isArray)(r)?r.length&&t.reset(r):r&&t.reset(r),r},store:function(e){if(i.stm){var n={},r=this.storageKey();return r.indexOf("css")>=0&&(n.css=i.em.getCss()),r.indexOf("styles")>=0&&(n.styles=JSON.stringify(t)),e||i.stm.store(n),n}},add:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n||"",c=r||"",l=h({},o),u=this.get(e,a,c,l);return u&&u.config&&!u.config.singleAtRule||(l.state=a,l.mediaText=c,l.selectors="",(u=new s.a(l,i)).get("selectors").add(e),t.add(u)),u},get:function(e,n,i,r){var o=null;return t.each((function(t){o||t.compare(e,n,i,r)&&(o=t)})),o},getAll:function(){return t},clear:function(){return this.getAll().reset(),this},addCollection:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=e instanceof Array?e:[e],o=0,a=r.length;o<a;o++){var s=r[o]||{};if(s.selectors){var c=i.em&&i.em.get("SelectorManager");c||console.warn("Selector Manager not found");for(var l=s.selectors,u=l instanceof Array?l:[l],d=[],p=0,f=u.length;p<f;p++){var g=c.add(u[p]);d.push(g)}var m=this.get(d,s.state,s.mediaText,s),v=this.add(d,s.state,s.mediaText,s),y=!m||!t.avoidUpdateStyle,b=s.style||{};if(y){var w=t.extend?h({},v.get("style"),{},b):b;v.set("style",w)}n.push(v)}}return n},setRule:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.atRuleType,o=i.atRuleParams,a=e.get("Parser").parserCss.checkNode({selectors:t,style:n})[0],s=a.state,c=a.selectorsAdd,l=e.get("SelectorManager"),u=l.add(a.selectors),d=this.add(u,s,o,{selectorsAdd:c,atRule:r});return d.setStyle(n,i),d},getRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.get("SelectorManager"),r=e.get("Parser").parserCss.checkNode({selectors:t})[0],o=i.get(r.selectors),a=r.state,s=r.selectorsAdd,c=n.atRuleType,l=n.atRuleParams;return o&&this.get(o,a,l,{selectorsAdd:s,atRule:c})},setIdRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.state||"",o=i.mediaText||e.getCurrentMedia(),a=e.get("SelectorManager"),s=a.add({name:t,type:d.a.TYPE_ID}),c=this.add(s,r,o);return c.setStyle(n,i),c},getIdRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.state||"",r=n.mediaText||e.getCurrentMedia(),o=e.get("SelectorManager").get(t,d.a.TYPE_ID);return o&&this.get(o,i,r)},setClassRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.state||"",o=i.mediaText||e.getCurrentMedia(),a=e.get("SelectorManager"),s=a.add({name:t,type:d.a.TYPE_CLASS}),c=this.add(s,r,o);return c.setStyle(n,i),c},getClassRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.state||"",r=n.mediaText||e.getCurrentMedia(),o=e.get("SelectorManager").get(t,d.a.TYPE_CLASS);return o&&this.get(o,i,r)},render:function(){return n.render().el}}}},function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(2),a=n.n(o),s=n(0),c=n(21),l={stylePrefix:"com-",defaults:[],strict:1},u=n(4);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},i={},o={},a={},d=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]];return{CommandAbstract:c.default,name:"Commands",init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=p({},l,{},i),e=t.em;var a=t.pStylePrefix;for(var c in a&&(t.stylePrefix=a+t.stylePrefix),t.defaults){var h=t.defaults[c];h.id&&this.add(h.id,h)}return o["tlb-delete"]={run:function(e){return e.runCommand("core:component-delete")}},o["tlb-clone"]={run:function(e){e.runCommand("core:copy"),e.runCommand("core:paste")}},o["tlb-move"]={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getModel(),o=n&&n.event,a=n.target,c=a||e.getSelected(),l=a?[a]:r()(e.getSelectedAll()),d=o&&"dragstart"==o.type,p={preserveSelected:1},h=["absolute","translate"],f=c.get("dmode")||i.get("dmode"),g=function(){return i.stopDefault(p)},m=Object(s.includes)(h,f);if(l.forEach((function(e){return e.trigger("disable")})),!c||!c.get("draggable"))return i.logWarning("The element is not draggable");d?setTimeout(g,0):g();var v=function(e){i.trigger("".concat(u.eventDrag,":start"),e)},y=function(e){i.trigger(u.eventDrag,e)},b=function(t,n,r){i.runDefault(p),l.forEach((function(e){return e.set("status","selected")})),e.select(l),c.emitUpdate(),i.trigger("".concat(u.eventDrag,":end"),r),(m||r.cancelled)&&i.set("_cmpDrag",1)};if(m)e.runCommand("core:component-drag",{guidesInfo:1,mode:f,target:c,onStart:v,onDrag:y,onEnd:b,event:o});else{d&&o.dataTransfer.setDragImage(c.view.el,0,0);var w=e.Commands.get("move-comp");w.onStart=v,w.onDrag=y,w.onEndMoveFromModel=b,w.initSorterFromModels(l)}l.forEach((function(e){return e.set("status","freezed-selected")}))}},o["core:undo"]=function(e){return e.UndoManager.undo()},o["core:redo"]=function(e){return e.UndoManager.redo()},d.forEach((function(t){var i=t[2],r=n(88)("./".concat(t[1])).default,a="core:".concat(t[0]);o[a]=r,i&&(o[i]=r,["run","stop"].forEach((function(t){e.on("".concat(t,":").concat(i),(function(){for(var n,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=e).trigger.apply(n,["".concat(t,":").concat(a)].concat(r))}))})))})),t.em&&(t.model=t.em.get("Canvas")),this.loadDefaultCommands(),this},add:function(e,t){return Object(s.isFunction)(t)&&(t={run:t}),t.stop||(t.noStop=1),delete t.initialize,t.id=e,i[e]=c.default.extend(t),this},get:function(n){var r=i[n];return Object(s.isFunction)(r)?(r=new r(t),i[n]=r):r||e.logWarning("'".concat(n,"' command not found")),r},extend:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get(e);if(n){var i=p({},n.constructor.prototype,{},t);this.add(e,i);var r=d.filter((function(t){return"core:".concat(t[0])===e&&t[2]}))[0];r&&this.add(r[2],i)}return this},has:function(e){return!!i[e]},getAll:function(){return i},run:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.runCommand(this.get(e),t)},stop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.stopCommand(this.get(e),t)},isActive:function(e){return this.getActive().hasOwnProperty(e)},getActive:function(){return a},loadDefaultCommands:function(){for(var e in o)this.add(e,o[e]);return this},runCommand:function(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,s=e.get("Editor");this.isActive(o)&&!r.force&&t.strict||(i=n.callRun(s,r),o&&n.stop&&!n.noStop&&!r.abort&&(a[o]=i))}return i},stopCommand:function(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,s=e.get("Editor");(this.isActive(o)||r.force||!t.strict)&&(o&&delete a[o],i=n.callStop(s,r))}return i},create:function(e){return e.stop||(e.noStop=1),new(c.default.extend(e))(t)}}}}]).default},function(e,t,n){(function(t){var n;n=void 0!==t?t:this,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),i=n.length,r=-1,o="",a=n.charCodeAt(0);++r<i;)0!=(t=n.charCodeAt(r))?o+=t>=1&&t<=31||127==t||0==r&&t>=48&&t<=57||1==r&&t>=48&&t<=57&&45==a?"\\"+t.toString(16)+" ":0==r&&1==i&&45==t||!(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?"\\"+n.charAt(r):n.charAt(r):o+="";return o};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(n)}).call(this,n(36))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t,n){"use strict";var i=n(2);function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var i=n(2),r=n(24),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=n(13)),s),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){c.headers[e]=i.merge(o)})),e.exports=c}).call(this,n(23))},function(e,t,n){"use strict";var i=n(2),r=n(25),o=n(10),a=n(27),s=n(30),c=n(31),l=n(14);e.exports=function(e){return new Promise((function(t,u){var d=e.data,p=e.headers;i.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",g=e.auth.password||"";p.Authorization="Basic "+btoa(f+":"+g)}var m=a(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};r(t,u,i),h=null}},h.onabort=function(){h&&(u(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){u(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(l(t,e,"ECONNABORTED",h)),h=null},i.isStandardBrowserEnv()){var v=n(32),y=(e.withCredentials||c(m))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&i.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),u(e),h=null)})),void 0===d&&(d=null),h.send(d)}))}},function(e,t,n){"use strict";var i=n(26);e.exports=function(e,t,n,r,o){var a=new Error(e);return i(a,t,n,r,o)}},function(e,t,n){"use strict";var i=n(2);e.exports=function(e,t){t=t||{};var n={},r=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),i.forEach(o,(function(r){i.isObject(t[r])?n[r]=i.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:i.isObject(e[r])?n[r]=i.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),i.forEach(a,(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])}));var s=r.concat(o).concat(a),c=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return i.forEach(c,(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])})),n}},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,n){"use strict";var i=/,?([a-z]),?/gi,r=parseFloat,o=Math,a=o.PI,s=o.min,c=o.max,l=o.pow,u=o.abs,d=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,p=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi,h=Array.isArray||function(e){return e instanceof Array};function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function g(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)f(e,n)&&(t[n]=g(e[n]));return t}function m(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function v(e){var t=v.ps=v.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var n in t)f(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])})),t[e]}function y(e,t,n,i){return 1===arguments.length&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function b(){return this.join(",").replace(i,"$1")}function w(e){var t=g(e);return t.toString=b,t}function x(e,t,n,i,r,o,a,s,c){var u=1-c,d=l(u,3),p=l(u,2),h=c*c*c,f=d*t+3*p*c*i+3*u*c*c*o+h*s;return{x:k(d*e+3*p*c*n+3*u*c*c*r+h*a),y:k(f)}}function E(e){var t=R.apply(null,e);return y(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function _(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function S(e,t,n,i,r){return e*(e*(-3*t+9*n-9*i+3*r)+6*t-12*n+6*i)-3*t+3*n}function C(e,t,n,i,r,a,s,c,l){null==l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,f=0;f<12;f++){var g=u*d[f]+u,m=S(g,e,n,r,s),v=S(g,t,i,a,c),y=m*m+v*v;h+=p[f]*o.sqrt(y)}return u*h}function O(e,t,n,i,r,o,a,l){if(!(c(e,n)<s(r,a)||s(e,n)>c(r,a)||c(t,i)<s(o,l)||s(t,i)>c(o,l))){var u=(e*i-t*n)*(o-l)-(t-i)*(r*l-o*a),d=(e-n)*(o-l)-(t-i)*(r-a);if(d){var p=k(((e*i-t*n)*(r-a)-(e-n)*(r*l-o*a))/d),h=k(u/d),f=+p.toFixed(2),g=+h.toFixed(2);if(!(f<+s(e,n).toFixed(2)||f>+c(e,n).toFixed(2)||f<+s(r,a).toFixed(2)||f>+c(r,a).toFixed(2)||g<+s(t,i).toFixed(2)||g>+c(t,i).toFixed(2)||g<+s(o,l).toFixed(2)||g>+c(o,l).toFixed(2)))return{x:p,y:h}}}}function k(e){return Math.round(1e11*e)/1e11}function T(e,t,n){if(!function(e,t){return e=y(e),_(t=y(t),e.x,e.y)||_(t,e.x2,e.y)||_(t,e.x,e.y2)||_(t,e.x2,e.y2)||_(e,t.x,t.y)||_(e,t.x2,t.y)||_(e,t.x,t.y2)||_(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(E(e),E(t)))return n?0:[];for(var i=C.apply(0,e),r=C.apply(0,t),o=j(e)?1:~~(i/5)||1,a=j(t)?1:~~(r/5)||1,s=[],c=[],l={},d=n?0:[],p=0;p<o+1;p++){var h=x.apply(0,e.concat(p/o));s.push({x:h.x,y:h.y,t:p/o})}for(p=0;p<a+1;p++)h=x.apply(0,t.concat(p/a)),c.push({x:h.x,y:h.y,t:p/a});for(p=0;p<o;p++)for(var f=0;f<a;f++){var g,m=s[p],v=s[p+1],b=c[f],w=c[f+1],S=u(v.x-m.x)<.01?"y":"x",k=u(w.x-b.x)<.01?"y":"x",T=O(m.x,m.y,v.x,v.y,b.x,b.y,w.x,w.y);if(T){if(l[g=T.x.toFixed(9)+"#"+T.y.toFixed(9)])continue;l[g]=!0;var P=m.t+u((T[S]-m[S])/(v[S]-m[S]))*(v.t-m.t),A=b.t+u((T[k]-b[k])/(w[k]-b[k]))*(w.t-b.t);P>=0&&P<=1&&A>=0&&A<=1&&(n?d++:d.push({x:T.x,y:T.y,t1:P,t2:A}))}}return d}function P(e){var t=v(e);if(t.abs)return w(t.abs);if(h(e)&&h(e&&e[0])||(e=function(e){if(!e)return null;var t=v(e);if(t.arr)return g(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return h(e)&&h(e[0])&&(i=g(e)),i.length||String(e).replace(d,(function(e,t,r){var o=[],a=t.toLowerCase();for(r.replace(p,(function(e,t){t&&o.push(+t)})),"m"==a&&o.length>2&&(i.push([t].concat(o.splice(0,2))),a="l",t="m"==t?"l":"L");o.length>=n[a]&&(i.push([t].concat(o.splice(0,n[a]))),n[a]););})),i.toString=v.toString,t.arr=g(i),i}(e)),!e||!e.length)return[["M",0,0]];var n,i=[],r=0,o=0,a=0,s=0,c=0;"M"==e[0][0]&&(a=r=+e[0][1],s=o=+e[0][2],c++,i[0]=["M",r,o]);for(var l,u,f=c,m=e.length;f<m;f++){if(i.push(l=[]),(n=(u=e[f])[0])!=n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+r,l[7]=+u[7]+o;break;case"V":l[1]=+u[1]+o;break;case"H":l[1]=+u[1]+r;break;case"M":a=+u[1]+r,s=+u[2]+o;default:for(var y=1,x=u.length;y<x;y++)l[y]=+u[y]+(y%2?r:o)}else for(var E=0,_=u.length;E<_;E++)l[E]=u[E];switch(n=n.toUpperCase(),l[0]){case"Z":r=+a,o=+s;break;case"H":r=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:r=l[l.length-2],o=l[l.length-1]}}return i.toString=b,t.abs=w(i),i}function j(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function A(e,t,n,i){return[e,t,n,i,n,i]}function M(e,t,n,i,r,o){return[1/3*e+2/3*n,1/3*t+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function D(e,t,n,i,r,s,c,l,d,p){var h,g,v=120*a/180,y=a/180*(+r||0),b=[],w=(g=function(e,t,n){return{x:e*o.cos(n)-t*o.sin(n),y:e*o.sin(n)+t*o.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join(""),i=e.cache=e.cache||{},r=e.count=e.count||[];return f(i,n)?(m(r,n),i[n]):(r.length>=1e3&&delete i[r.shift()],r.push(n),i[n]=g.apply(0,t),i[n])});if(p)P=p[0],j=p[1],k=p[2],T=p[3];else{e=(h=w(e,t,-y)).x,t=h.y;var x=(e-(l=(h=w(l,d,-y)).x))/2,E=(t-(d=h.y))/2,_=x*x/(n*n)+E*E/(i*i);_>1&&(n*=_=o.sqrt(_),i*=_);var S=n*n,C=i*i,O=(s==c?-1:1)*o.sqrt(u((S*C-S*E*E-C*x*x)/(S*E*E+C*x*x))),k=O*n*E/i+(e+l)/2,T=O*-i*x/n+(t+d)/2,P=o.asin(((t-T)/i).toFixed(9)),j=o.asin(((d-T)/i).toFixed(9));(P=e<k?a-P:P)<0&&(P=2*a+P),(j=l<k?a-j:j)<0&&(j=2*a+j),c&&P>j&&(P-=2*a),!c&&j>P&&(j-=2*a)}var A=j-P;if(u(A)>v){var M=j,R=l,N=d;j=P+v*(c&&j>P?1:-1),b=D(l=k+n*o.cos(j),d=T+i*o.sin(j),n,i,r,0,c,R,N,[j,M,k,T])}A=j-P;var L=o.cos(P),B=o.sin(P),I=o.cos(j),F=o.sin(j),z=o.tan(A/4),H=4/3*n*z,V=4/3*i*z,$=[e,t],U=[e+H*B,t-V*L],W=[l+H*F,d-V*I],q=[l,d];if(U[0]=2*$[0]-U[0],U[1]=2*$[1]-U[1],p)return[U,W,q].concat(b);for(var G=[],Y=0,K=(b=[U,W,q].concat(b).join().split(",")).length;Y<K;Y++)G[Y]=Y%2?w(b[Y-1],b[Y],y).y:w(b[Y],b[Y+1],y).x;return G}function R(e,t,n,i,r,a,l,d){for(var p,h,f,g,m,v,y,b,w=[],x=[[],[]],E=0;E<2;++E)if(0==E?(h=6*e-12*n+6*r,p=-3*e+9*n-9*r+3*l,f=3*n-3*e):(h=6*t-12*i+6*a,p=-3*t+9*i-9*a+3*d,f=3*i-3*t),u(p)<1e-12){if(u(h)<1e-12)continue;0<(g=-f/h)&&g<1&&w.push(g)}else y=h*h-4*f*p,b=o.sqrt(y),y<0||(0<(m=(-h+b)/(2*p))&&m<1&&w.push(m),0<(v=(-h-b)/(2*p))&&v<1&&w.push(v));for(var _,S=w.length,C=S;S--;)_=1-(g=w[S]),x[0][S]=_*_*_*e+3*_*_*g*n+3*_*g*g*r+g*g*g*l,x[1][S]=_*_*_*t+3*_*_*g*i+3*_*g*g*a+g*g*g*d;return x[0][C]=e,x[1][C]=t,x[0][C+1]=l,x[1][C+1]=d,x[0].length=x[1].length=C+2,{x0:s.apply(0,x[0]),y0:s.apply(0,x[1]),x1:c.apply(0,x[0]),y1:c.apply(0,x[1])}}function N(e){var t=v(e);if(t.curve)return w(t.curve);for(var n=P(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(e,t,n){var i,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(D.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*t.x-t.bx,r=2*t.y-t.by):(i=t.x,r=t.y),e=["C",i,r].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(M(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(M(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(A(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(A(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(A(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(A(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)s[t]="A",e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),d=n.length}},s=[],c="",l="",u=0,d=n.length;u<d;u++){n[u]&&(c=n[u][0]),"C"!=c&&(s[u]=c,u&&(l=s[u-1])),n[u]=o(n[u],i,l),"A"!=s[u]&&"C"==c&&(s[u]="C"),a(n,u);var p=n[u],h=p.length;i.x=p[h-2],i.y=p[h-1],i.bx=r(p[h-4])||i.x,i.by=r(p[h-3])||i.y}return t.curve=w(n),n}e.exports=function(e,t,n){e=N(e),t=N(t);for(var i,r,o,a,s,c,l,u,d,p,h=n?0:[],f=0,g=e.length;f<g;f++){var m=e[f];if("M"==m[0])i=s=m[1],r=c=m[2];else{"C"==m[0]?(d=[i,r].concat(m.slice(1)),i=d[6],r=d[7]):(d=[i,r,i,r,s,c,s,c],i=s,r=c);for(var v=0,y=t.length;v<y;v++){var b=t[v];if("M"==b[0])o=l=b[1],a=u=b[2];else{"C"==b[0]?(p=[o,a].concat(b.slice(1)),o=p[6],a=p[7]):(p=[o,a,o,a,l,u,l,u],o=l,a=u);var w=T(d,p,n);if(n)h+=w;else{for(var x=0,E=w.length;x<E;x++)w[x].segment1=f,w[x].segment2=v,w[x].bez1=d,w[x].bez2=p;h=h.concat(w)}}}}}return h}},function(e,t,n){"use strict";var i=n(2),r=n(9),o=n(19),a=n(15);function s(e){var t=new o(e),n=r(o.prototype.request,t);return i.extend(n,o.prototype,t),i.extend(n,t),n}var c=s(n(12));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(16),c.CancelToken=n(33),c.isCancel=n(11),c.all=function(e){return Promise.all(e)},c.spread=n(34),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var i=n(2),r=n(10),o=n(20),a=n(21),s=n(15);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var i=n(2);function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},function(e,t,n){"use strict";var i=n(2),r=n(22),o=n(11),a=n(12);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=r(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var i=n(2);e.exports=function(e,t,n){return i.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";var i=n(2);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},function(e,t,n){"use strict";var i=n(14);e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var i=n(28),r=n(29);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var i=n(2),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(a[t]&&r.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var i=n(2);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var i=n(2);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var i=n(16);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var i;"undefined"!=typeof self&&self,e.exports=(i=n(7),function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){e.exports=i},function(e,t,n){(function(e){function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(10),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cmdImport="gjs-open-import-webpage",t.cmdDeviceDesktop="set-device-desktop",t.cmdDeviceTablet="set-device-tablet",t.cmdDeviceMobile="set-device-mobile",t.cmdClear="canvas-clear"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(5)),a=i(n(6)),s=i(n(7)),c=i(n(8)),l=i(n(9)),u=i(n(12)),d=i(n(13)),p=i(n(14)),h=i(n(16)),f=i(n(17)),g=i(n(18)),m=i(n(19));t.default=r.default.plugins.add("gjs-preset-webpage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i={blocks:["link-block","quote","text-basic"],modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure to clean the canvas?",showStylesOnChange:1,textGeneral:"General",textLayout:"Layout",textTypography:"Typography",textDecorations:"Decorations",textExtra:"Extra",customStyleManager:[],blocksBasicOpts:{},navbarOpts:{},countdownOpts:{},formsOpts:{},exportOpts:{},aviaryOpts:0,filestackOpts:0};for(var r in i)r in n||(n[r]=i[r]);var v=n.blocksBasicOpts,y=n.navbarOpts,b=n.countdownOpts,w=n.formsOpts,x=n.exportOpts,E=n.aviaryOpts,_=n.filestackOpts;v&&(0,o.default)(e,v),y&&(0,a.default)(e,y),b&&(0,s.default)(e,b),w&&(0,c.default)(e,w),x&&(0,l.default)(e,x),E&&(0,u.default)(e,E),_&&(0,d.default)(e,_),(0,f.default)(e,n),(0,h.default)(e,n),(0,p.default)(e,n),(0,g.default)(e,n),(0,m.default)(e,n)}))},function(e,t,n){/*! grapesjs-blocks-basic - 0.1.7 */
e.exports=function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=r.default.plugins.add("gjs-blocks-basic",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i({blocks:["column1","column2","column3","column3-7","text","link","image","video","map"],flexGrid:0,stylePrefix:"",addBasicStyle:!0,category:"Basic",labelColumn1:"1 Column",labelColumn2:"2 Columns",labelColumn3:"3 Columns",labelColumn37:"2 Columns 3/7",labelText:"Text",labelLink:"Link",labelImage:"Image",labelVideo:"Video",labelMap:"Map"},t);n(2).default(e,r)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e.BlockManager,o=n.blocks,a=n.stylePrefix,s=n.flexGrid,c=n.addBasicStyle,l=a+"row",u=a+"cell",d=s?"\n    ."+l+" {\n      display: flex;\n      justify-content: flex-start;\n      align-items: stretch;\n      flex-wrap: nowrap;\n      padding: 10px;\n    }\n    @media (max-width: 768px) {\n      ."+l+" {\n        flex-wrap: wrap;\n      }\n    }":"\n    ."+l+" {\n      display: table;\n      padding: 10px;\n      width: 100%;\n    }\n    @media (max-width: 768px) {\n      ."+a+"cell, ."+a+"cell30, ."+a+"cell70 {\n        width: 100%;\n        display: block;\n      }\n    }",p=s?"\n    ."+u+" {\n      min-height: 75px;\n      flex-grow: 1;\n      flex-basis: 100%;\n    }":"\n    ."+u+" {\n      width: 8%;\n      display: table-cell;\n      height: 75px;\n    }",h="\n  ."+a+"cell30 {\n    width: 30%;\n  }",f="\n  ."+a+"cell70 {\n    width: 70%;\n  }",g={tl:0,tc:0,tr:0,cl:0,cr:0,bl:0,br:0,minDim:1},m=i({},g,{cr:1,bc:0,currentUnit:1,minDim:1,step:.2});s&&(m.keyWidth="flex-basis");var v={class:l,"data-gjs-droppable":"."+u,"data-gjs-resizable":g,"data-gjs-name":"Row"},y={class:u,"data-gjs-draggable":"."+l,"data-gjs-resizable":m,"data-gjs-name":"Cell"};s&&(y["data-gjs-unstylable"]=["width"],y["data-gjs-stylable-require"]=["flex-basis"]);var b=["."+l,"."+u];e.on("selector:add",(function(e){return b.indexOf(e.getFullName())>=0&&e.set("private",1)}));var w=function(e){var t=[];for(var n in e){var i=e[n],r=i instanceof Array||i instanceof Object;i=r?JSON.stringify(i):i,t.push(n+"="+(r?"'"+i+"'":'"'+i+'"'))}return t.length?" "+t.join(" "):""},x=function(e){return o.indexOf(e)>=0},E=w(v),_=w(y);x("column1")&&r.add("column1",{label:n.labelColumn1,category:n.category,attributes:{class:"gjs-fonts gjs-f-b1"},content:"<div "+E+">\n        <div "+_+"></div>\n      </div>\n      "+(c?"<style>\n          "+d+"\n          "+p+"\n        </style>":"")}),x("column2")&&r.add("column2",{label:n.labelColumn2,attributes:{class:"gjs-fonts gjs-f-b2"},category:n.category,content:"<div "+E+">\n        <div "+_+"></div>\n        <div "+_+"></div>\n      </div>\n      "+(c?"<style>\n          "+d+"\n          "+p+"\n        </style>":"")}),x("column3")&&r.add("column3",{label:n.labelColumn3,category:n.category,attributes:{class:"gjs-fonts gjs-f-b3"},content:"<div "+E+">\n        <div "+_+"></div>\n        <div "+_+"></div>\n        <div "+_+"></div>\n      </div>\n      "+(c?"<style>\n          "+d+"\n          "+p+"\n        </style>":"")}),x("column3-7")&&r.add("column3-7",{label:n.labelColumn37,category:n.category,attributes:{class:"gjs-fonts gjs-f-b37"},content:"<div "+E+">\n        <div "+_+' style="'+(s?"flex-basis":"width")+': 30%;"></div>\n        <div '+_+' style="'+(s?"flex-basis":"width")+': 70%;"></div>\n      </div>\n      '+(c?"<style>\n          "+d+"\n          "+p+"\n          "+h+"\n          "+f+"\n        </style>":"")}),x("text")&&r.add("text",{label:n.labelText,category:n.category,attributes:{class:"gjs-fonts gjs-f-text"},content:{type:"text",content:"Insert your text here",style:{padding:"10px"},activeOnRender:1}}),x("link")&&r.add("link",{label:n.labelLink,category:n.category,attributes:{class:"fa fa-link"},content:{type:"link",content:"Link",style:{color:"#d983a6"}}}),x("image")&&r.add("image",{label:n.labelImage,category:n.category,attributes:{class:"gjs-fonts gjs-f-image"},content:{style:{color:"black"},type:"image",activeOnRender:1}}),x("video")&&r.add("video",{label:n.labelVideo,category:n.category,attributes:{class:"fa fa-youtube-play"},content:{type:"video",src:"img/video2.webm",style:{height:"350px",width:"615px"}}}),x("map")&&r.add("map",{label:n.labelMap,category:n.category,attributes:{class:"fa fa-map-o"},content:{type:"map",style:{height:"350px"}}})}}])}(n(0))},function(e,t,n){/*! grapesjs-navbar - 0.1.5 */
e.exports=function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hNavbarRef="h-navbar",t.navbarRef="navbar",t.navbarItemsRef="navbar-items",t.menuRef="navbar-menu"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2)),o=i(n(3)),a=i(n(4)),s=n(0);t.default=r.default.plugins.add("gjs-navbar",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i={blocks:[s.hNavbarRef],defaultStyle:1,navbarClsPfx:"navbar",labelNavbar:"Navbar",labelNavbarContainer:"Navbar Container",labelMenu:"Navbar Menu",labelMenuLink:"Menu link",labelBurger:"Burger",labelBurgerLine:"Burger Line",labelNavbarBlock:"Navbar",labelNavbarCategory:"Extra",labelHome:"Home",labelAbout:"About",labelContact:"Contact"};for(var r in i)r in n||(n[r]=i[r]);(0,o.default)(e,n),(0,a.default)(e,n)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e.BlockManager,o=n.navbarClsPfx||"navbar",a=n.defaultStyle?"\n  <style>\n    ."+o+"-items-c {\n      display: inline-block;\n      float: right;\n    }\n\n    ."+o+" {\n      background-color: #222;\n      color: #ddd;\n      min-height: 50px;\n      width: 100%;\n    }\n\n    ."+o+"-container {\n      max-width: 950px;\n      margin: 0 auto;\n      width: 95%;\n    }\n\n    ."+o+'-container::after {\n      content: "";\n      clear: both;\n      display: block;\n    }\n\n    .'+o+"-brand {\n      vertical-align: top;\n      display: inline-block;\n      padding: 5px;\n      min-height: 50px;\n      min-width: 50px;\n      color: inherit;\n      text-decoration: none;\n    }\n\n    ."+o+"-menu {\n      padding: 10px 0;\n      display: block;\n      float: right;\n      margin: 0;\n    }\n\n    ."+o+"-menu-link {\n      margin: 0;\n      color: inherit;\n      text-decoration: none;\n      display: inline-block;\n      padding: 10px 15px;\n    }\n\n    ."+o+"-burger {\n      margin: 10px 0;\n      width: 45px;\n      padding: 5px 10px;\n      display: none;\n      float: right;\n      cursor: pointer;\n    }\n\n    ."+o+"-burger-line {\n      padding: 1px;\n      background-color: white;\n      margin: 5px 0;\n    }\n\n    @media (max-width: 768px) {\n      ."+o+"-burger {\n        display: block;\n      }\n\n      ."+o+"-items-c {\n        display: none;\n        width: 100%;\n      }\n\n      ."+o+"-menu {\n        width: 100%;\n      }\n\n      ."+o+"-menu-link {\n        display: block;\n      }\n    }\n  </style>\n  ":"";n.blocks.indexOf(i.hNavbarRef)>=0&&r.add(i.hNavbarRef,{label:'\n        <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n          <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n          <rect class="gjs-block-svg-path" x="15" y="10" width="5" height="1"></rect>\n          <rect class="gjs-block-svg-path" x="15" y="13" width="5" height="1"></rect>\n          <rect class="gjs-block-svg-path" x="15" y="11.5" width="5" height="1"></rect>\n        </svg>\n        <div class="gjs-block-label">'+n.labelNavbarBlock+"</div>",category:n.labelNavbarCategory,content:'\n        <div class="'+o+'" data-gjs-droppable="false" data-gjs-custom-name="'+n.labelNavbar+'" data-gjs="'+i.navbarRef+'">\n          <div class="'+o+'-container" data-gjs-droppable="false" data-gjs-draggable="false"\n            data-gjs-removable="false" data-gjs-copyable="false" data-gjs-highlightable="false"\n            data-gjs-custom-name="'+n.labelNavbarContainer+'">\n\n            <a href="/" class="'+o+'-brand" data-gjs-droppable="true"></a>\n\n            <div class="'+o+'-burger" data-gjs-type="burger-menu">\n              <div class="'+o+'-burger-line" data-gjs-custom-name="'+n.labelBurgerLine+'" data-gjs-droppable="false" data-gjs-draggable="false"></div>\n              <div class="'+o+'-burger-line" data-gjs-custom-name="'+n.labelBurgerLine+'" data-gjs-droppable="false" data-gjs-draggable="false"></div>\n              <div class="'+o+'-burger-line" data-gjs-custom-name="'+n.labelBurgerLine+'" data-gjs-droppable="false" data-gjs-draggable="false"></div>\n            </div>\n\n            <div class="'+o+'-items-c" data-gjs="'+i.navbarItemsRef+'">\n              <nav class="'+o+'-menu" data-gjs="'+i.menuRef+'" data-gjs-custom-name="'+n.labelMenu+'">\n                <a href="#" class="'+o+'-menu-link" data-gjs-custom-name="'+n.labelMenuLink+'" data-gjs-draggable="[data-gjs='+i.menuRef+']">'+n.labelHome+'</a>\n                <a href="#" class="'+o+'-menu-link" data-gjs-custom-name="'+n.labelMenuLink+'" data-gjs-draggable="[data-gjs='+i.menuRef+']">'+n.labelAbout+'</a>\n                <a href="#" class="'+o+'-menu-link" data-gjs-custom-name="'+n.labelMenuLink+'" data-gjs-draggable="[data-gjs='+i.menuRef+']">'+n.labelContact+"</a>\n              </nav>\n            </div>\n\n          </div>\n        </div>\n        "+a+"\n      "})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e.DomComponents,o=r.getType("default"),a=o.model;r.addType("burger-menu",{model:a.extend({defaults:i({},a.prototype.defaults,{"custom-name":n.labelBurger,draggable:!1,droppable:!1,copyable:!1,removable:!1,script:function(){var e,t=0,n=function(){var e,t=document.createElement("void"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),i=function(e){t=1;var n=function(e){var t=window.getComputedStyle(e),n=t.display,i=(t.position,t.visibility,t.height,parseInt(t["max-height"]));if("none"!==n&&"0"!==i)return e.offsetHeight;e.style.height="auto",e.style.display="block",e.style.position="absolute",e.style.visibility="hidden";var r=e.offsetHeight;return e.style.height="",e.style.display="",e.style.position="",e.style.visibility="",r}(e),i=e.style;i.display="block",i.transition="max-height 0.25s ease-in-out",i.overflowY="hidden",""==i["max-height"]&&(i["max-height"]=0),0==parseInt(i["max-height"])?(i["max-height"]="0",setTimeout((function(){i["max-height"]=n+"px"}),10)):i["max-height"]="0"};"gjs-collapse"in this||this.addEventListener("click",(function(r){if(r.preventDefault(),!t){var o=this.closest("[data-gjs=navbar]").querySelector("[data-gjs=navbar-items]");i(o),e||(o.addEventListener(n,(function(){t=0;var e=o.style;0==parseInt(e["max-height"])&&(e.display="",e["max-height"]="")})),e=1)}})),this["gjs-collapse"]=1}})},{isComponent:function(e){if(e.getAttribute&&"burger-menu"==e.getAttribute("data-gjs-type"))return{type:"burger-menu"}}}),view:o.view})}}])}(n(0))},function(e,t,n){/*! grapesjs-component-countdown - 0.1.2 */
e.exports=function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countdownRef="countdown"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2)),o=i(n(3)),a=i(n(4)),s=n(0);t.default=r.default.plugins.add("gjs-component-countdown",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i={blocks:[s.countdownRef],defaultStyle:!0,startTime:"",endText:"EXPIRED",dateInputType:"date",countdownClsPfx:"countdown",labelCountdown:"Countdown",labelCountdownCategory:"Extra",labelDays:"days",labelHours:"hours",labelMinutes:"minutes",labelSeconds:"seconds"};for(var r in i)r in n||(n[r]=i[r]);(0,o.default)(e,n),(0,a.default)(e,n)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e.DomComponents,o=r.getType("default"),a=r.getType("text"),s=o.model,c=o.view,l=(a.model,a.view,n.countdownClsPfx);r.addType("countdown",{model:s.extend({defaults:i({},s.prototype.defaults,{startfrom:n.startTime,endText:n.endText,droppable:!1,traits:[{label:"Start",name:"startfrom",changeProp:1,type:n.dateInputType},{label:"End text",name:"endText",changeProp:1}],script:function(){var e=new Date("{[ startfrom ]}").getTime(),t=this.querySelector("[data-js=countdown]"),n=this.querySelector("[data-js=countdown-endtext]"),i=this.querySelector("[data-js=countdown-day]"),r=this.querySelector("[data-js=countdown-hour]"),o=this.querySelector("[data-js=countdown-minute]"),a=this.querySelector("[data-js=countdown-second]"),s=this.gjs_countdown_interval;s&&s&&clearInterval(s);var c=function(e,t,n,s){i.innerHTML=e<10?"0"+e:e,r.innerHTML=t<10?"0"+t:t,o.innerHTML=n<10?"0"+n:n,a.innerHTML=s<10?"0"+s:s},l=function(){var i=(new Date).getTime(),r=e-i,o=Math.floor(r/864e5),a=Math.floor(r%864e5/36e5),s=Math.floor(r%36e4/6e4),l=Math.floor(r%6e4/1e3);c(o,a,s,l),r<0&&(clearInterval(u),n.innerHTML="{[ endText ]}",t.style.display="none",n.style.display="")};if(e){var u=setInterval(l,1e3);this.gjs_countdown_interval=u,n.style.display="none",t.style.display="",l()}else c(0,0,0,0)}})},{isComponent:function(e){if(e.getAttribute&&"countdown"==e.getAttribute("data-gjs-type"))return{type:"countdown"}}}),view:c.extend({init:function(){this.listenTo(this.model,"change:startfrom change:endText",this.updateScript);var e=this.model.get("components");e.length||(e.reset(),e.add('\n            <span data-js="countdown" class="'+l+'-cont">\n              <div class="'+l+'-block">\n                <div data-js="countdown-day" class="'+l+'-digit"></div>\n                <div class="'+l+'-label">'+n.labelDays+'</div>\n              </div>\n              <div class="'+l+'-block">\n                <div data-js="countdown-hour" class="'+l+'-digit"></div>\n                <div class="'+l+'-label">'+n.labelHours+'</div>\n              </div>\n              <div class="'+l+'-block">\n                <div data-js="countdown-minute" class="'+l+'-digit"></div>\n                <div class="'+l+'-label">'+n.labelMinutes+'</div>\n              </div>\n              <div class="'+l+'-block">\n                <div data-js="countdown-second" class="'+l+'-digit"></div>\n                <div class="'+l+'-label">'+n.labelSeconds+'</div>\n              </div>\n            </span>\n            <span data-js="countdown-endtext" class="'+l+'-endtext"></span>\n          '))}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e.BlockManager,o=n.countdownClsPfx,a=n.defaultStyle?"<style>\n    ."+o+" {\n      text-align: center;\n      font-family: Helvetica, serif;\n    }\n\n    ."+o+"-block {\n      display: inline-block;\n      margin: 0 10px;\n      padding: 10px;\n    }\n\n    ."+o+"-digit {\n      font-size: 5rem;\n    }\n\n    ."+o+"-endtext {\n      font-size: 5rem;\n    }\n\n    ."+o+"-cont,\n    ."+o+"-block {\n      display: inline-block;\n    }\n  </style>":"";n.blocks.indexOf(i.countdownRef)>=0&&r.add(i.countdownRef,{label:n.labelCountdown,category:n.labelCountdownCategory,attributes:{class:"fa fa-clock-o"},content:'\n        <div class="'+o+'" data-gjs-type="countdown"></div>\n        '+a+"\n      "})};var i=n(0)}])}(n(0))},function(e,t,n){/*! grapesjs-plugin-forms - 0.3.5 */
e.exports=function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=i.default.plugins.add("gjs-plugin-forms",(function(e,t){var i=t||{},r=(e.getConfig().stylePrefix,{blocks:["form","input","textarea","select","button","label","checkbox","radio"],labelTraitMethod:"Method",labelTraitAction:"Action",labelTraitState:"State",labelTraitId:"ID",labelTraitFor:"For",labelInputName:"Input",labelTextareaName:"Textarea",labelSelectName:"Select",labelCheckboxName:"Checkbox",labelRadioName:"Radio",labelButtonName:"Button",labelTraitName:"Name",labelTraitPlaceholder:"Placeholder",labelTraitValue:"Value",labelTraitRequired:"Required",labelTraitType:"Type",labelTraitOptions:"Options",labelTraitChecked:"Checked",labelTypeText:"Text",labelTypeEmail:"Email",labelTypePassword:"Password",labelTypeNumber:"Number",labelTypeSubmit:"Submit",labelTypeReset:"Reset",labelTypeButton:"Button",labelNameLabel:"Label",labelForm:"Form",labelSelectOption:"- Select option -",labelOption:"Option",labelStateNormal:"Normal",labelStateSuccess:"Success",labelStateError:"Error"});for(var o in r)o in i||(i[o]=r[o]);n(2).default(e,i),n(3).default(e,i),n(4).default(e,i)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e.DomComponents,o=r.getType("default"),a=r.getType("text"),s=o.model,c=o.view,l=a.model,u=a.view,d={name:"id",label:n.labelTraitId},p={name:"for",label:n.labelTraitFor},h={name:"name",label:n.labelTraitName},f={name:"placeholder",label:n.labelTraitPlaceholder},g={name:"value",label:n.labelTraitValue},m={type:"checkbox",name:"required",label:n.labelTraitRequired},v={label:n.labelTraitChecked,type:"checkbox",name:"checked",changeProp:1};r.addType("form",{model:s.extend({defaults:i({},s.prototype.defaults,{droppable:":not(form)",draggable:":not(form)",traits:[{type:"select",label:n.labelTraitMethod,name:"method",options:[{value:"post",name:"POST"},{value:"get",name:"GET"}]},{label:n.labelTraitAction,name:"action"}]}),init:function(){this.listenTo(this,"change:formState",this.updateFormState)},updateFormState:function(){switch(this.get("formState")){case"success":this.showState("success");break;case"error":this.showState("error");break;default:this.showState("normal")}},showState:function(e){var t,n,i=e||"normal";"success"==i?(t="none",n="block"):"error"==i?(t="block",n="none"):(t="none",n="none");var r=this.getStateModel("success"),o=this.getStateModel("error"),a=r.getStyle(),s=o.getStyle();a.display=n,s.display=t,r.setStyle(a),o.setStyle(s)},getStateModel:function(e){for(var t,n=e||"success",i=this.get("components"),r=0;r<i.length;r++){var o=i.models[r];if(o.get("form-state-type")==n){t=o;break}}if(!t){var a=formMsgSuccess;"error"==n&&(a=formMsgError),t=i.add({"form-state-type":n,type:"text",removable:!1,copyable:!1,draggable:!1,attributes:{"data-form-state":n},content:a})}return t}},{isComponent:function(e){if("FORM"==e.tagName)return{type:"form"}}}),view:c.extend({events:{submit:function(e){e.preventDefault()}}})}),r.addType("input",{model:s.extend({defaults:i({},s.prototype.defaults,{"custom-name":n.labelInputName,tagName:"input",draggable:"form, form *",droppable:!1,traits:[h,f,{label:n.labelTraitType,type:"select",name:"type",options:[{value:"text",name:n.labelTypeText},{value:"email",name:n.labelTypeEmail},{value:"password",name:n.labelTypePassword},{value:"number",name:n.labelTypeNumber}]},m]})},{isComponent:function(e){if("INPUT"==e.tagName)return{type:"input"}}}),view:c});var y=r.getType("input"),b=y.model;r.addType("textarea",{model:y.model.extend({defaults:i({},b.prototype.defaults,{"custom-name":n.labelTextareaName,tagName:"textarea",traits:[h,f,m]})},{isComponent:function(e){if("TEXTAREA"==e.tagName)return{type:"textarea"}}}),view:c}),r.addType("select",{model:s.extend({defaults:i({},b.prototype.defaults,{"custom-name":n.labelSelectName,tagName:"select",traits:[h,{label:n.labelTraitOptions,type:"select-options"},m]})},{isComponent:function(e){if("SELECT"==e.tagName)return{type:"select"}}}),view:o.view.extend({events:{mousedown:"handleClick"},handleClick:function(e){e.preventDefault()}})}),r.addType("checkbox",{model:s.extend({defaults:i({},b.prototype.defaults,{"custom-name":n.labelCheckboxName,copyable:!1,attributes:{type:"checkbox"},traits:[d,h,g,m,v]}),init:function(){this.listenTo(this,"change:checked",this.handleChecked)},handleChecked:function(){var e=this.get("checked"),t=this.get("attributes"),n=this.view;e?t.checked="checked":delete t.checked,n&&(n.el.checked=e),this.set("attributes",i({},t))}},{isComponent:function(e){if("INPUT"==e.tagName&&"checkbox"==e.type)return{type:"checkbox"}}}),view:c.extend({events:{click:"handleClick"},handleClick:function(e){e.preventDefault()}})});var w=r.getType("checkbox");r.addType("radio",{model:w.model.extend({defaults:i({},w.model.prototype.defaults,{"custom-name":n.labelRadioName,attributes:{type:"radio"}})},{isComponent:function(e){if("INPUT"==e.tagName&&"radio"==e.type)return{type:"radio"}}}),view:w.view}),r.addType("button",{model:s.extend({defaults:i({},b.prototype.defaults,{"custom-name":n.labelButtonName,tagName:"button",traits:[{type:"content",label:"Text"},{label:n.labelTraitType,type:"select",name:"type",options:[{value:"submit",name:n.labelTypeSubmit},{value:"reset",name:n.labelTypeReset},{value:"button",name:n.labelTypeButton}]}]})},{isComponent:function(e){if("BUTTON"==e.tagName)return{type:"button"}}}),view:c.extend({events:{click:"handleClick"},init:function(){this.listenTo(this.model,"change:content",this.updateContent)},updateContent:function(){this.el.innerHTML=this.model.get("content")},handleClick:function(e){e.preventDefault()}})}),r.addType("label",{model:l.extend({defaults:i({},l.prototype.defaults,{"custom-name":n.labelNameLabel,tagName:"label",traits:[p]})},{isComponent:function(e){if("LABEL"==e.tagName)return{type:"label"}}}),view:u})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.TraitManager),n=t.getType("text");t.addType("content",{events:{keyup:"onChange"},onValueChange:function(){var e=this.model;e.target.set("content",e.get("value"))},getInputEl:function(){return this.inputEl||(this.inputEl=n.prototype.getInputEl.bind(this)(),this.inputEl.value=this.target.get("content")),this.inputEl}}),t.addType("select-options",{events:{keyup:"onChange"},onValueChange:function(){for(var e=this.model.get("value").trim().split("\n"),t=[],n=0;n<e.length;n++){var i=e[n].split("::"),r={tagName:"option",attributes:{}};i[1]?(r.content=i[1],r.attributes.value=i[0]):(r.content=i[0],r.attributes.value=i[0]),t.push(r)}this.target.get("components").reset(t),this.target.view.render()},getInputEl:function(){if(!this.$input){for(var e=this.model,t=this.target,n=(e.get("name"),""),i=t.get("components"),r=0;r<i.length;r++){var o=i.models[r];n+=(o.get("attributes").value||"")+"::"+o.get("content")+"\n"}this.$input=document.createElement("textarea"),this.$input.value=n}return this.$input}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i=e.BlockManager;n.blocks.indexOf("form")>=0&&i.add("form",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,5.5 C22,5.2 21.5,5 20.75,5 L3.25,5 C2.5,5 2,5.2 2,5.5 L2,8.5 C2,8.8 2.5,9 3.25,9 L20.75,9 C21.5,9 22,8.8 22,8.5 L22,5.5 Z M21,8 L3,8 L3,6 L21,6 L21,8 Z" fill-rule="nonzero"></path>\n        <path class="gjs-block-svg-path" d="M22,10.5 C22,10.2 21.5,10 20.75,10 L3.25,10 C2.5,10 2,10.2 2,10.5 L2,13.5 C2,13.8 2.5,14 3.25,14 L20.75,14 C21.5,14 22,13.8 22,13.5 L22,10.5 Z M21,13 L3,13 L3,11 L21,11 L21,13 Z" fill-rule="nonzero"></path>\n        <rect class="gjs-block-svg-path" x="2" y="15" width="10" height="3" rx="0.5"></rect>\n      </svg>\n      <div class="gjs-block-label">'+n.labelForm+"</div>",category:"Forms",content:'\n        <form class="form">\n          <div class="form-group">\n            <label class="label">Name</label>\n            <input placeholder="Type here your name" class="input"/>\n          </div>\n          <div class="form-group">\n            <label class="label">Email</label>\n            <input type="email" placeholder="Type here your email" class="input"/>\n          </div>\n          <div class="form-group">\n            <label class="label">Gender</label>\n            <input type="checkbox" class="checkbox" value="M">\n            <label class="checkbox-label">M</label>\n            <input type="checkbox" class="checkbox" value="F">\n            <label class="checkbox-label">F</label>\n          </div>\n          <div class="form-group">\n            <label class="label">Message</label>\n            <textarea class="textarea"></textarea>\n          </div>\n          <div class="form-group">\n            <button type="submit" class="button">Send</button>\n          </div>\n        </form>\n      '}),n.blocks.indexOf("input")>=0&&i.add("input",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z"></path>\n        <polygon class="gjs-block-svg-path" points="4 10 5 10 5 14 4 14"></polygon>\n      </svg>\n      <div class="gjs-block-label">'+n.labelInputName+"</div>",category:"Forms",content:'<input class="input"/>'}),n.blocks.indexOf("textarea")>=0&&i.add("textarea",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,7.5 C22,6.6 21.5,6 20.75,6 L3.25,6 C2.5,6 2,6.6 2,7.5 L2,16.5 C2,17.4 2.5,18 3.25,18 L20.75,18 C21.5,18 22,17.4 22,16.5 L22,7.5 Z M21,17 L3,17 L3,7 L21,7 L21,17 Z"></path>\n        <polygon class="gjs-block-svg-path" points="4 8 5 8 5 12 4 12"></polygon>\n        <polygon class="gjs-block-svg-path" points="19 7 20 7 20 17 19 17"></polygon>\n        <polygon class="gjs-block-svg-path" points="20 8 21 8 21 9 20 9"></polygon>\n        <polygon class="gjs-block-svg-path" points="20 15 21 15 21 16 20 16"></polygon>\n      </svg>\n      <div class="gjs-block-label">'+n.labelTextareaName+"</div>",category:"Forms",content:'<textarea class="textarea"></textarea>'}),n.blocks.indexOf("select")>=0&&i.add("select",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n        <polygon class="gjs-block-svg-path" transform="translate(18.500000, 12.000000) scale(1, -1) translate(-18.500000, -12.000000) " points="18.5 11 20 13 17 13"></polygon>\n        <rect class="gjs-block-svg-path" x="4" y="11.5" width="11" height="1"></rect>\n      </svg>\n      <div class="gjs-block-label">'+n.labelSelectName+"</div>",category:"Forms",content:'<select class="select">\n        '+(n.labelSelectOption?'<option value="">'+n.labelSelectOption+"</option>":"")+'\n        <option value="1">'+n.labelOption+" 1</option>\n        </select>"}),n.blocks.indexOf("button")>=0&&i.add("button",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n        <rect class="gjs-block-svg-path" x="4" y="11.5" width="16" height="1"></rect>\n      </svg>\n      <div class="gjs-block-label">'+n.labelButtonName+"</div>",category:"Forms",content:'<button class="button">Send</button>'}),n.blocks.indexOf("label")>=0&&i.add("label",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,11.875 C22,11.35 21.5,11 20.75,11 L3.25,11 C2.5,11 2,11.35 2,11.875 L2,17.125 C2,17.65 2.5,18 3.25,18 L20.75,18 C21.5,18 22,17.65 22,17.125 L22,11.875 Z M21,17 L3,17 L3,12 L21,12 L21,17 Z" fill-rule="nonzero"></path>\n        <rect class="gjs-block-svg-path" x="2" y="5" width="14" height="5" rx="0.5"></rect>\n        <polygon class="gjs-block-svg-path" fill-rule="nonzero" points="4 13 5 13 5 16 4 16"></polygon>\n      </svg>\n      <div class="gjs-block-label">'+n.labelNameLabel+"</div>",category:"Forms",content:'<label class="label">Label</label>'}),n.blocks.indexOf("checkbox")>=0&&i.add("checkbox",{label:n.labelCheckboxName,attributes:{class:"fa fa-check-square"},category:"Forms",content:'<input type="checkbox" class="checkbox"/>'}),n.blocks.indexOf("radio")>=0&&i.add("radio",{label:n.labelRadioName,attributes:{class:"fa fa-dot-circle-o"},category:"Forms",content:'<input type="radio" class="radio"/>'})}}])}(n(0))},function(e,t,n){(function(t,i){/*! grapesjs-plugin-export - 0.1.5 */
!function(t,i){e.exports=i(n(0))}(0,(function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=50)}([function(e,t,n){"use strict";function i(e){return o(e,c.uint8array?new Uint8Array(e.length):new Array(e.length))}function r(e){return e}function o(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function a(e){var n=65536,i=t.getTypeOf(e),r=!0;if("uint8array"===i?r=h.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=h.applyCanBeUsed.nodebuffer),r)for(;n>1;)try{return h.stringifyByChunk(e,i,n)}catch(e){n=Math.floor(n/2)}return h.stringifyByChar(e)}function s(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var c=n(3),l=n(29),u=n(14),d=n(66),p=n(9);t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(e,t,n){var i=[],r=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;r<o;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&1===String.fromCharCode.apply(null,u.allocBuffer(1)).length}catch(e){return!1}}()}};t.applyFromCharCode=a;var f={};f.string={string:r,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:function(e){return o(e,u.allocBuffer(e.length))}},f.array={string:a,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u.newBufferFrom(e)}},f.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return s(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return u.newBufferFrom(e)}},f.nodebuffer={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:r},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var i=t.getTypeOf(n);return f[i][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":c.nodebuffer&&u.isBuffer(e)?"nodebuffer":c.uint8array&&e instanceof Uint8Array?"uint8array":c.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!c[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,i="";for(n=0;n<(e||"").length;n++)i+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return i},t.delay=function(e,t,n){d((function(){e.apply(n||null,t||[])}))},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,r,o,a){return p.Promise.resolve(n).then((function(e){return c.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new p.Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){n(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(n){var s=t.getTypeOf(n);return s?("arraybuffer"===s?n=t.transformTo("uint8array",n):"string"===s&&(a?n=l.decode(n):r&&!0!==o&&(n=i(n))),n):p.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(e,t,n){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=i},function(e,t,n){"use strict";(function(e){function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=l(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(t,n),a=(e=r(e,i)).write(t,n);return a!==i&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(o.isBuffer(t)){var n=0|u(t.length);return 0===(e=r(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */(t.length)?r(e,0):l(e,t);if("Buffer"===t.type&&H(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(s(t),e=r(e,t<0?0:0|u(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t){var n=t.length<0?0:0|u(t.length);e=r(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function u(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function d(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(i)return L(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function h(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function f(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:g(e,t,n,i,r);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,i,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var a,s=1,c=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,c/=2,l/=2,n/=2}if(r){var u=-1;for(a=n;a<c;a++)if(o(e,a)===o(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*s}else-1!==u&&(a-=a-u),u=-1}else for(n+l>c&&(n=c-l),a=n;a>=0;a--){for(var d=!0,p=0;p<l;p++)if(o(e,a+p)!==o(t,p)){d=!1;break}if(d)return a}return-1}function m(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function v(e,t,n,i){return I(L(t,e.length-n),e,n,i)}function y(e,t,n,i){return I(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function b(e,t,n,i){return y(e,t,n,i)}function w(e,t,n,i){return I(B(t),e,n,i)}function x(e,t,n,i){return I(function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?F.fromByteArray(e):F.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return function(e){var t=e.length;if(t<=V)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=V));return n}(i)}function S(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function C(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function O(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=N(e[o]);return r}function k(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,i,r,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function j(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function A(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function M(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,i,r){return r||M(e,0,n,4),z.write(e,t,n,i,23,4),n+4}function R(e,t,n,i,r){return r||M(e,0,n,8),z.write(e,t,n,i,52,8),n+8}function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;a<i;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return F.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}var F=n(54),z=n(55),H=n(24);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return function(e,t,n,i){return s(t),t<=0?r(e,t):void 0!==n?"string"==typeof i?r(e,t).fill(n,i):r(e,t).fill(n):r(e,t)}(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!H(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=o.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},o.byteLength=d,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?_(this,0,e):p.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,i,r){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),c=Math.min(a,s),l=this.slice(i,r),u=e.slice(t,n),d=0;d<c;++d)if(l[d]!==u[d]){a=l[d],s=u[d];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return f(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return f(this,e,t,n,!1)},o.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;o.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var r=t-e;n=new o(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},o.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),z.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),z.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),z.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),z.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):A(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):A(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:L(new o(e,i).toString()),c=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%c]}return this};var $=/[^+\/0-9A-Za-z-_]/g}).call(t,n(10))},function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),t.blob=0===r.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(25).Readable}catch(e){t.nodestream=!1}}).call(t,n(2).Buffer)},function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,a;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,r),r+=o.length;return a}},a={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);l.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",r)}function r(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=i;var s=n(16),c=n(8);c.inherits=n(7);var l=n(26),u=n(17);c.inherits(i,l);for(var d=a(u.prototype),p=0;p<d.length;p++){var h=d[p];i.prototype[h]||(i.prototype[h]=u.prototype[h])}},function(e,t,n){"use strict";function i(){c.call(this,"utf-8 decode"),this.leftOver=null}function r(){c.call(this,"utf-8 encode")}for(var o=n(0),a=n(3),s=n(14),c=n(1),l=new Array(256),u=0;u<256;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;l[254]=l[254]=1,t.utf8encode=function(e){return a.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,i,r,o,s=e.length,c=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=a.uint8array?new Uint8Array(c):new Array(c),o=0,r=0;o<c;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return a.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,r,a=e.length,s=new Array(2*a);for(n=0,t=0;t<a;)if((i=e[t++])<128)s[n++]=i;else if((r=l[i])>4)s[n++]=65533,t+=r-1;else{for(i&=2===r?31:3===r?15:7;r>1&&t<a;)i=i<<6|63&e[t++],r--;r>1?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),o.applyFromCharCode(s)}(e=o.transformTo(a.uint8array?"uint8array":"array",e))},o.inherits(i,c),i.prototype.processChunk=function(e){var n=o.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var i=n;(n=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),n.set(i,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var r=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+l[e[n]]>t?n:t}(n),s=n;r!==n.length&&(a.uint8array?(s=n.subarray(0,r),this.leftOver=n.subarray(r,n.length)):(s=n.slice(0,r),this.leftOver=n.slice(r,n.length))),this.push({data:t.utf8decode(s),meta:e.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=i,o.inherits(r,c),r.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=r},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(t,n(2).Buffer)},function(e,t,n){"use strict";var i;i="undefined"!=typeof Promise?Promise:n(80),e.exports={Promise:i}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function i(){r.call(this)}e.exports=i;var r=n(12).EventEmitter;n(7)(i,r),i.Readable=n(56),i.Writable=n(62),i.Duplex=n(63),i.Transform=n(64),i.PassThrough=n(65),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function i(){l.readable&&l.resume&&l.resume()}function o(){u||(u=!0,e.end())}function a(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){l.removeListener("data",n),e.removeListener("drain",i),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",c),l.removeListener("close",c),e.removeListener("close",c)}var l=this;l.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(l.on("end",o),l.on("close",a));var u=!1;return l.on("error",s),e.on("error",s),l.on("end",c),l.on("close",c),e.on("close",c),e.emit("pipe",l),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,c=0;c<a;c++)l[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(){f&&p&&(f=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!f){var e=r(o);f=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,u,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var p,h=[],f=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||f||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,n){return new t(e,n)},allocBuffer:function(e){return t.alloc?t.alloc(e):new t(e)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(t,n(2).Buffer)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,i,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,i)}));case 4:return t.nextTick((function(){e.call(null,n,i,r)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}:e.exports=t.nextTick}).call(t,n(13))},function(e,t,n){"use strict";(function(t,i){function r(){}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function a(e,t){x=x||n(5),e=e||{},this.objectMode=!!e.objectMode,t instanceof x&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?m(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}(e,n,i,t,r);else{var o=p(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||d(e,n),i?v(u,e,n,o,r):u(e,n,o,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new g(this),this.corkedRequestsFree.next=new g(this)}function s(e){if(x=x||n(5),!(this instanceof s||this instanceof x))return new s(e);this._writableState=new a(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),w.call(this)}function c(e,t,n,i,r){n=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new y(t,n)),t}(t,n,i),y.isBuffer(n)&&(i="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,i,r),c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,a,n,i,r);return s}function l(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function u(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),f(e,t)}function d(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)r[a]=n,n=n.next,a+=1;l(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=o.next,o.next=null}else{for(;n;){var s=n.chunk,c=n.encoding,u=n.callback;if(l(e,t,!1,t.objectMode?1:s.length,s,c,u),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function p(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function h(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function f(e,t){var n=p(t);return n&&(0===t.pendingcb?(h(e,t),t.finished=!0,e.emit("finish")):h(e,t)),n}function g(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var m=n(16),v=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:m,y=n(2).Buffer;s.WritableState=a;var b=n(8);b.inherits=n(7);var w,x,E={deprecate:n(60)};!function(){try{w=n(11)}catch(e){}finally{w||(w=n(12).EventEmitter)}}(),y=n(2).Buffer,b.inherits(s,w),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:E.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),y.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),m(t,n)}(this,n):function(e,t,n,i){var r=!0;if(!y.isBuffer(n)&&"string"!=typeof n&&null!=n&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),m(i,o),r=!1}return r}(this,i,e,n)&&(i.pendingcb++,o=c(this,i,e,t,n)),o},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||d(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,f(e,t),n&&(t.finished?m(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)}}).call(t,n(13),n(58).setImmediate)},function(e,t,n){"use strict";function i(e){this.afterTransform=function(t,n){return function(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!=n&&e.push(n),r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e){if(!(this instanceof r))return new r(e);a.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){o(t,e)})):o(t)}))}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=r;var a=n(5),s=n(8);s.inherits=n(7),s.inherits(r,a),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(32)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";function i(e,t,n,i,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=i,this.compressedContent=r}var r=n(9),o=n(36),a=n(37),s=n(38);a=n(37),i.prototype={getContentWorker:function(){var e=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},i.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},e.exports=i},function(e,t,n){"use strict";var i=n(0),r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(11)},function(e,t,n){"use strict";(function(t){function i(e,t){_=_||n(5),e=e||{},this.objectMode=!!e.objectMode,t instanceof _&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(E||(E=n(27).StringDecoder),this.decoder=new E(e.encoding),this.encoding=e.encoding)}function r(e){if(_=_||n(5),!(this instanceof r))return new r(e);this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),b.call(this)}function o(e,t,n,i,r){var o=function(e,t){var n=null;return y.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,s(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r)a=new Error("stream.unshift() after end event"),e.emit("error",a);else{var c;!t.decoder||r||i||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),r||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&s(e))),function(e,t){t.readingMore||(t.readingMore=!0,m(l,e,t))}(e,t)}else r||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function a(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function s(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(C("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?m(c,e):c(e))}function c(e){C("emit readable"),e.emit("readable"),p(e)}function l(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(C("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function u(e){C("readable nexttick read 0"),e.read(0)}function d(e,t){t.reading||(C("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),p(e),t.flowing&&!t.reading&&e.read(0)}function p(e){var t=e._readableState;if(C("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function h(e,t){var n,i=t.buffer,r=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(a)n=i.shift();else if(!e||e>=r)n=o?i.join(""):1===i.length?i[0]:y.concat(i,r),i.length=0;else if(e<i[0].length)n=(u=i[0]).slice(0,e),i[0]=u.slice(e);else if(e===i[0].length)n=i.shift();else{n=o?"":new y(e);for(var s=0,c=0,l=i.length;c<l&&s<e;c++){var u=i[0],d=Math.min(e-s,u.length);o?n+=u.slice(0,d):u.copy(n,s,0,d),d<u.length?i[0]=u.slice(d):i.shift(),s+=d}}return n}function f(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,m(g,t,e))}function g(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}e.exports=r;var m=n(16),v=n(24),y=n(2).Buffer;r.ReadableState=i;var b,w=(n(12),function(e,t){return e.listeners(t).length});!function(){try{b=n(11)}catch(e){}finally{b||(b=n(12).EventEmitter)}}(),y=n(2).Buffer;var x=n(8);x.inherits=n(7);var E,_,S=n(57),C=void 0;C=S&&S.debuglog?S.debuglog("stream"):function(){},x.inherits(r,b),r.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=new y(e,t),t=""),o(this,n,e,t,!1)},r.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},r.prototype.isPaused=function(){return!1===this._readableState.flowing},r.prototype.setEncoding=function(e){return E||(E=n(27).StringDecoder),this._readableState.decoder=new E(e),this._readableState.encoding=e,this};var O=8388608;r.prototype.read=function(e){C("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?f(this):s(this),null;if(0===(e=a(e,t))&&t.ended)return 0===t.length&&f(this),null;var i,r=t.needReadable;return C("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&C("length less than watermark",r=!0),(t.ended||t.reading)&&C("reading or ended",r=!1),r&&(C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=a(n,t)),null===(i=e>0?h(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&f(this),null!==i&&this.emit("data",i),i},r.prototype._read=function(e){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(e,n){function i(e){C("onunpipe"),e===d&&o()}function r(){C("onend"),e.end()}function o(){C("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",i),d.removeListener("end",r),d.removeListener("end",o),d.removeListener("data",a),y=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){C("ondata"),!1===e.write(t)&&(1!==h.pipesCount||h.pipes[0]!==e||1!==d.listenerCount("data")||y||(C("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++),d.pause())}function s(t){C("onerror",t),u(),e.removeListener("error",s),0===w(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),u()}function l(){C("onfinish"),e.removeListener("close",c),u()}function u(){C("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,C("pipe count=%d opts=%j",h.pipesCount,n);var f=n&&!1===n.end||e===t.stdout||e===t.stderr?o:r;h.endEmitted?m(f):d.once("end",f),e.on("unpipe",i);var g=function(e){return function(){var t=e._readableState;C("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&w(e,"data")&&(t.flowing=!0,p(e))}}(d);e.on("drain",g);var y=!1;return d.on("data",a),e._events&&e._events.error?v(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",c),e.once("finish",l),e.emit("pipe",d),h.flowing||(C("pipe resume"),d.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},r.prototype.on=function(e,t){var n=b.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&s(this):m(u,this))}return n},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var e=this._readableState;return e.flowing||(C("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,m(d,e,t))}(this,e)),this},r.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;for(var r in e.on("end",(function(){if(C("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)})),e.on("data",(function(r){C("wrapped data"),t.decoder&&(r=t.decoder.write(r)),(!t.objectMode||null!=r)&&(t.objectMode||r&&r.length)&&(i.push(r)||(n=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));return function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],(function(t){e.on(t,i.emit.bind(i,t))})),i._read=function(t){C("wrapped _read",t),n&&(n=!1,e.resume())},i},r._fromList=h}).call(t,n(13))},function(e,t,n){"use strict";function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(p.isEncoding===h||!h(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=a,this.end=s,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=l,t=3;break;default:return this.write=u,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(t)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function a(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}var p=n(61).Buffer,h=p.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t},i.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var o=r(t[i]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--i<n?0:(o=r(t[i]))>=0?(o>0&&(e.lastNeed=o-2),o):--i<n?0:(o=r(t[i]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e.exports=i;var r=n(18),o=n(8);o.inherits=n(7),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var i=n(0),r=n(3),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,r,a,s,c,l,u=[],d=0,p=e.length,h=p,f="string"!==i.getTypeOf(e);d<e.length;)h=p-d,f?(t=e[d++],n=d<p?e[d++]:0,r=d<p?e[d++]:0):(t=e.charCodeAt(d++),n=d<p?e.charCodeAt(d++):0,r=d<p?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,c=h>1?(15&n)<<2|r>>6:64,l=h>2?63&r:64,u.push(o.charAt(a)+o.charAt(s)+o.charAt(c)+o.charAt(l));return u.join("")},t.decode=function(e){var t,n,i,a,s,c,l=0,u=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=r.uint8array?new Uint8Array(0|p):new Array(0|p);l<e.length;)t=o.indexOf(e.charAt(l++))<<2|(a=o.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(l++)))>>2,i=(3&s)<<6|(c=o.indexOf(e.charAt(l++))),d[u++]=t,64!==s&&(d[u++]=n),64!==c&&(d[u++]=i);return d}},function(e,t){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(69);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(19),r=n(15).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){"use strict";(function(t){function i(e,t,n){switch(e){case"blob":return a.newBlob(a.transformTo("arraybuffer",t),n);case"base64":return l.encode(t);default:return a.transformTo(e,t)}}function r(e,n){var i,r=0,o=null,a=0;for(i=0;i<n.length;i++)a+=n[i].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),i=0;i<n.length;i++)o.set(n[i],r),r+=n[i].length;return o;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}function o(e,t,n){var i=t;switch(t){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=t,this._mimeType=n,a.checkSupport(i),this._worker=e.pipe(new s(i)),e.lock()}catch(e){this._worker=new c("error"),this._worker.error(e)}}var a=n(0),s=n(82),c=n(1),l=n(29),u=n(3),d=n(9),p=null;if(u.nodestream)try{p=n(83)}catch(e){}o.prototype={accumulate:function(e){return function(e,t){return new d.Promise((function(n,o){var a=[],s=e._internalType,c=e._outputType,l=e._mimeType;e.on("data",(function(e,n){a.push(e),t&&t(n)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var e=i(c,r(s,a),l);n(e)}catch(e){o(e)}a=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){a.delay(t,arguments,n)})),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(a.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=o}).call(t,n(2).Buffer)},function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){"use strict";function i(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}var r=n(0),o=n(1);r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=i},function(e,t,n){"use strict";function i(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}var r=n(0),o=n(1);r.inherits(i,o),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},e.exports=i},function(e,t,n){"use strict";function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var r=n(1),o=n(22);n(0).inherits(i,r),i.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=i},function(e,t,n){"use strict";var i=n(1);t.STORE={magic:"\0\0",compressWorker:function(e){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=n(86)},function(e,t,n){"use strict";e.exports=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(r=r+t[i++]|0)|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}},function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";function i(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var r=n(4),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new r.Buf8(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1,t.string2buf=function(e){var t,n,i,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),a=0,o=0;a<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return i(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,o,a,c=t||e.length,l=new Array(2*c);for(r=0,n=0;n<c;)if((o=e[n++])<128)l[r++]=o;else if((a=s[o])>4)l[r++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<c;)o=o<<6|63&e[n++],a--;a>1?l[r++]=65533:o<65536?l[r++]=o:(o-=65536,l[r++]=55296|o>>10&1023,l[r++]=56320|1023&o)}return i(l,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},function(e,t,n){"use strict";var i=n(0),r=n(3),o=n(47),a=n(100),s=n(101),c=n(49);e.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new s(e):r.uint8array?new c(i.transformTo("uint8array",e)):new o(i.transformTo("array",e)):new a(e)}},function(e,t,n){"use strict";function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}var r=n(48);n(0).inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}var r=n(0);i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=i},function(e,t,n){"use strict";function i(e){r.call(this,e)}var r=n(47);n(0).inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(51)),o=i(n(52)),a=i(n(103));t.default=r.default.plugins.add("gjs-plugin-export",(function(e,t){var n=t||{},i=e.getConfig().stylePrefix,r=document.createElement("BUTTON"),s={addExportBtn:1,btnLabel:"Export to ZIP",preHtml:'<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="./css/style.css"></head><body>',postHtml:"</body><html>",preCss:"",postCss:""};for(var c in s)c in n||(n[c]=s[c]);r.innerHTML=n.btnLabel,r.className=i+"btn-prim",e.Commands.add("gjs-export-zip",{run:function(){var t=new o.default,i=t.folder("css"),r="grapesjs_template_"+Date.now()+".zip";t.file("index.html",n.preHtml+e.getHtml()+n.postHtml),i.file("style.css",n.preCss+e.getCss()+n.postCss),t.generateAsync({type:"blob"}).then((function(e){a.default.saveAs(e,r)}))}}),n.addExportBtn&&e.on("run:export-template",(function(){e.Modal.getContentEl().appendChild(r),r.onclick=function(){e.runCommand("gjs-export-zip")}}))}))},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}i.prototype=n(53),i.prototype.loadAsync=n(98),i.support=n(3),i.defaults=n(35),i.version="3.1.5",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=n(9),e.exports=i},function(e,t,n){"use strict";function i(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var r=n(6),o=n(0),a=n(1),s=n(34),c=n(35),l=n(21),u=n(84),d=n(85),p=n(14),h=n(97),f=function(e,t,n){var i,r=o.getTypeOf(t),s=o.extend(n||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(i=g(e))&&v.call(this,i,!0);var d,f="string"===r&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!f),(t instanceof l&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",r="string"),d=t instanceof l||t instanceof a?t:p.isNode&&p.isStream(t)?new h(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new u(e,d,s);this.files[e]=y},g=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||f.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,i;for(t in this.files)this.files.hasOwnProperty(t)&&(i=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,i))},filter:function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(i)})),t},file:function(e,t,n){if(1===arguments.length){if(i(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null}return e=this.root+e,f.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(i(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=v.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";t=d.generateWorker(this,n,i)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=y},function(e,t,n){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}function o(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(r(i));return o.join("")}t.byteLength=function(e){return 3*e.length/4-i(e)},t.toByteArray=function(e){var t,n,r,o,a,l=e.length;o=i(e),a=new c(3*l/4-o),n=o>0?l-4:l;var u=0;for(t=0;t<n;t+=4)r=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],a[u++]=r>>16&255,a[u++]=r>>8&255,a[u++]=255&r;return 2===o?(r=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,a[u++]=255&r):1===o&&(r=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,a[u++]=r>>8&255,a[u++]=255&r),a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r="",s=[],c=0,l=n-i;c<l;c+=16383)s.push(o(e,c,c+16383>l?l:c+16383));return 1===i?(t=e[n-1],r+=a[t>>2],r+=a[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=a[t>>10],r+=a[t>>4&63],r+=a[t<<2&63],r+="="),s.push(r),s.join("")};for(var a=[],s=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,d=l.length;u<d;++u)a[u]=l[u],s[l.charCodeAt(u)]=u;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?r-1:0,p=n?-1:1,h=e[t+d];for(d+=p,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,i),o-=l}return(h?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*g}},function(e,t,n){var i=function(){try{return n(11)}catch(e){}}();(t=e.exports=n(26)).Stream=i||t,t.Readable=t,t.Writable=n(17),t.Duplex=n(5),t.Transform=n(18),t.PassThrough=n(28)},function(e,t){},function(e,n,r){function o(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;n.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(59),n.setImmediate=t,n.clearImmediate=i},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){delete s[e]}function r(e){if(c)setTimeout(r,0,e);else{var t=s[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var o,a=1,s={},c=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){r(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&r(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){r(e.data)},o=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;o=function(t){var n=l.createElement("script");n.onreadystatechange=function(){r(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(r,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return s[a]=i,o(a),a++},u.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(10),n(13))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(t,n(10))},function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return a(e,t,n)}var o=n(2),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(i(o,t),t.Buffer=r),i(a,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){e.exports=n(17)},function(e,t,n){e.exports=n(5)},function(e,t,n){e.exports=n(18)},function(e,t,n){e.exports=n(28)},function(e,t,n){n(67),e.exports=n(30).setImmediate},function(e,t,n){var i=n(68),r=n(76);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){var i=n(15),r=n(30),o=n(31),a=n(70),s=function(e,t,n){var c,l,u,d=e&s.F,p=e&s.G,h=e&s.S,f=e&s.P,g=e&s.B,m=e&s.W,v=p?r:r[t]||(r[t]={}),y=v.prototype,b=p?i:h?i[t]:(i[t]||{}).prototype;for(c in p&&(n=t),n)(l=!d&&b&&void 0!==b[c])&&c in v||(u=l?b[c]:n[c],v[c]=p&&"function"!=typeof b[c]?n[c]:g&&l?o(u,i):m&&b[c]==u?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):f&&"function"==typeof u?o(Function.call,u):u,f&&((v.virtual||(v.virtual={}))[c]=u,e&s.R&&y&&!y[c]&&a(y,c,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(71),r=n(75);e.exports=n(20)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(72),r=n(73),o=n(74),a=Object.defineProperty;t.f=n(20)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(19);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(20)&&!n(32)((function(){return 7!=Object.defineProperty(n(33)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(19);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i,r,o,a=n(31),s=n(77),c=n(78),l=n(33),u=n(15),d=u.process,p=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,g=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){v.call(e.data)};p&&h||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},h=function(e){delete m[e]},"process"==n(79)(d)?i=function(e){d.nextTick(a(v,e,1))}:f?(o=(r=new f).port2,r.port1.onmessage=y,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):i="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:p,clear:h}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){e.exports=n(15).document&&document.documentElement},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";function i(){}function r(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,e!==i&&c(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){u((function(){var i;try{i=t(n)}catch(t){return d.reject(e,t)}i===e?d.reject(e,new TypeError("Cannot resolve promise with itself")):d.resolve(e,i)}))}function s(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(e,t){function n(t){r||(r=!0,d.reject(e,t))}function i(t){r||(r=!0,d.resolve(e,t))}var r=!1,o=l((function(){t(i,n)}));"error"===o.status&&n(o.value)}function l(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}var u=n(81),d={},p=["REJECTED"],h=["FULFILLED"],f=["PENDING"];e.exports=r,r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){if("function"!=typeof e&&this.state===h||"function"!=typeof t&&this.state===p)return this;var n=new this.constructor(i);return this.state!==f?a(n,this.state===h?e:t,this.outcome):this.queue.push(new o(n,e,t)),n},o.prototype.callFulfilled=function(e){d.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){d.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},d.resolve=function(e,t){var n=l(s,t);if("error"===n.status)return d.reject(e,n.value);var i=n.value;if(i)c(e,i);else{e.state=h,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},d.reject=function(e,t){e.state=p,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},r.resolve=function(e){return e instanceof this?e:d.resolve(new this(i),e)},r.reject=function(e){var t=new this(i);return d.reject(t,e)},r.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,s=-1,c=new this(i);++s<n;)!function(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==n||r||(r=!0,d.resolve(c,o))}),(function(e){r||(r=!0,d.reject(c,e))}))}(e[s],s);return c},r.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,a=new this(i);++o<n;)!function(e){t.resolve(e).then((function(e){r||(r=!0,d.resolve(a,e))}),(function(e){r||(r=!0,d.reject(a,e))}))}(e[o]);return a}},function(e,t,n){"use strict";(function(t){function n(){l=!0;for(var e,t,n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}l=!1}var i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(n),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),i=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var c=new t.MessageChannel;c.port1.onmessage=n,i=function(){c.port2.postMessage(0)}}var l,u=[];e.exports=function(e){1!==u.push(e)||l||i()}}).call(t,n(10))},function(e,t,n){"use strict";function i(e){r.call(this,"ConvertWorker to "+e),this.destType=e}var r=n(1),o=n(0);o.inherits(i,r),i.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}var r=n(25).Readable;n(0).inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},function(e,t,n){"use strict";var i=n(34),r=n(36),o=n(6),a=n(21),s=n(1),c=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};c.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new r(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)c.prototype[l[d]]=u;e.exports=c},function(e,t,n){"use strict";var i=n(39),r=n(96),o=function(e,t){var n=e||t,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r};t.generateWorker=function(e,t,n){var i=new r(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var r=o(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(r,s).withStreamInfo("file",{name:e,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=a}catch(e){i.error(e)}return i}},function(e,t,n){"use strict";function i(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=n(87),a=n(0),s=n(1),c=r?"uint8array":"array";t.magic="\b\0",a.inherits(i,s),i.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(c,e.data),!1)},i.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},i.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},i.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new i("Deflate",e)},t.uncompressWorker=function(){return new i("Inflate",{})}},function(e,t,n){"use strict";var i={};(0,n(4).assign)(i,n(88),n(91),n(44)),e.exports=i},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=a.assign({level:p,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==d)throw new Error(c[n]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=o.deflateSetDictionary(this.strm,r))!==d)throw new Error(c[n]);this._dict_set=!0}}function r(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var o=n(89),a=n(4),s=n(42),c=n(23),l=n(43),u=Object.prototype.toString,d=0,p=-1,h=0,f=8;i.prototype.push=function(e,t){var n,i,r=this.strm,c=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?r.input=s.string2buf(e):"[object ArrayBuffer]"===u.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(c),r.next_out=0,r.avail_out=c),1!==(n=o.deflate(r,i))&&n!==d)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&1!==n);return 4===i?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==i||(this.onEnd(d),r.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=i,t.deflate=r,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,r(e,t)}},function(e,t,n){"use strict";function i(e,t){return e.msg=k[t],t}function r(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(_.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){S._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function u(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,_.arraySet(t,e.input,e.next_in,r,n),1===e.state.wrap?e.adler=C(e.adler,t,r,n):2===e.state.wrap&&(e.adler=O(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function d(e,t){var n,i,r=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-ne?e.strstart-(e.w_size-ne):0,l=e.window,u=e.w_mask,d=e.prev,p=e.strstart+te,h=l[o+a-1],f=l[o+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===f&&l[n+a-1]===h&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<p);if(i=te-(p-o),o=p-te,i>a){if(e.match_start=t,a=i,i>=s)break;h=l[o+a-1],f=l[o+a]}}}while((t=d[t&u])>c&&0!=--r);return a<=e.lookahead?a:e.lookahead}function p(e){var t,n,i,r,o,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ne)){_.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=a?i-a:0}while(--n);t=n=a;do{i=e.prev[--t],e.prev[t]=i>=a?i-a:0}while(--n);r+=a}if(0===e.strm.avail_in)break;if(n=u(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=ee)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ee-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ee)););}while(e.lookahead<ne&&0!==e.strm.avail_in)}function h(e,t){for(var n,i;;){if(e.lookahead<ne){if(p(e),e.lookahead<ne&&t===T)return de;if(0===e.lookahead)break}if(n=0,e.lookahead>=ee&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ne&&(e.match_length=d(e,n)),e.match_length>=ee)if(i=S._tr_tally(e,e.strstart-e.match_start,e.match_length-ee),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ee){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=e.strstart<ee-1?e.strstart:ee-1,t===A?(s(e,!0),0===e.strm.avail_out?he:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:pe}function f(e,t){for(var n,i,r;;){if(e.lookahead<ne){if(p(e),e.lookahead<ne&&t===T)return de;if(0===e.lookahead)break}if(n=0,e.lookahead>=ee&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ee-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ne&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===F||e.match_length===ee&&e.strstart-e.match_start>4096)&&(e.match_length=ee-1)),e.prev_length>=ee&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-ee,i=S._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ee),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ee-1,e.strstart++,i&&(s(e,!1),0===e.strm.avail_out))return de}else if(e.match_available){if((i=S._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return de}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=S._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ee-1?e.strstart:ee-1,t===A?(s(e,!0),0===e.strm.avail_out?he:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:pe}function g(e,t){for(var n,i,r,o,a=e.window;;){if(e.lookahead<=te){if(p(e),e.lookahead<=te&&t===T)return de;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ee&&e.strstart>0&&(i=a[r=e.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){o=e.strstart+te;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);e.match_length=te-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ee?(n=S._tr_tally(e,1,e.match_length-ee),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===A?(s(e,!0),0===e.strm.avail_out?he:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:pe}function m(e,t){for(var n;;){if(0===e.lookahead&&(p(e),0===e.lookahead)){if(t===T)return de;break}if(e.match_length=0,n=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===A?(s(e,!0),0===e.strm.avail_out?he:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:pe}function v(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=W,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*J),this.dyn_dtree=new _.Buf16(2*(2*X+1)),this.bl_tree=new _.Buf16(2*(2*Z+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(Q+1),this.heap=new _.Buf16(2*K+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*K+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=U,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?re:le,e.adler=2===t.wrap?0:1,t.last_flush=T,S._tr_init(t),D):i(e,N)}function w(e){var t=b(e);return t===D&&function(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=E[e.level].max_lazy,e.good_match=E[e.level].good_length,e.nice_match=E[e.level].nice_length,e.max_chain_length=E[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ee-1,e.match_available=0,e.ins_h=0}(e.state),t}function x(e,t,n,r,o,a){if(!e)return N;var s=1;if(t===I&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>q||n!==W||r<8||r>15||t<0||t>9||a<0||a>V)return i(e,N);8===r&&(r=9);var c=new y;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+ee-1)/ee),c.window=new _.Buf8(2*c.w_size),c.head=new _.Buf16(c.hash_size),c.prev=new _.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new _.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,w(e)}var E,_=n(4),S=n(90),C=n(40),O=n(41),k=n(23),T=0,P=1,j=3,A=4,M=5,D=0,R=1,N=-2,L=-3,B=-5,I=-1,F=1,z=2,H=3,V=4,$=0,U=2,W=8,q=9,G=15,Y=8,K=286,X=30,Z=19,J=2*K+1,Q=15,ee=3,te=258,ne=te+ee+1,ie=32,re=42,oe=69,ae=73,se=91,ce=103,le=113,ue=666,de=1,pe=2,he=3,fe=4,ge=3;E=[new v(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(p(e),0===e.lookahead&&t===T)return de;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,s(e,!1),0===e.strm.avail_out))return de;if(e.strstart-e.block_start>=e.w_size-ne&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===A?(s(e,!0),0===e.strm.avail_out?he:fe):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),de)})),new v(4,4,8,4,h),new v(4,5,16,8,h),new v(4,6,32,32,h),new v(4,4,16,16,f),new v(8,16,32,32,f),new v(8,16,128,128,f),new v(8,32,128,256,f),new v(32,128,258,1024,f),new v(32,258,258,4096,f)],t.deflateInit=function(e,t){return x(e,t,W,G,Y,$)},t.deflateInit2=x,t.deflateReset=w,t.deflateResetKeep=b,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?N:(e.state.gzhead=t,D):N},t.deflate=function(e,t){var n,s,u,d;if(!e||!e.state||t>M||t<0)return e?i(e,N):N;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ue&&t!==A)return i(e,0===e.avail_out?B:N);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===re)if(2===s.wrap)e.adler=0,c(s,31),c(s,139),c(s,8),s.gzhead?(c(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),c(s,255&s.gzhead.time),c(s,s.gzhead.time>>8&255),c(s,s.gzhead.time>>16&255),c(s,s.gzhead.time>>24&255),c(s,9===s.level?2:s.strategy>=z||s.level<2?4:0),c(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(c(s,255&s.gzhead.extra.length),c(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=O(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=oe):(c(s,0),c(s,0),c(s,0),c(s,0),c(s,0),c(s,9===s.level?2:s.strategy>=z||s.level<2?4:0),c(s,ge),s.status=le);else{var p=W+(s.w_bits-8<<4)<<8;p|=(s.strategy>=z||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(p|=ie),p+=31-p%31,s.status=le,l(s,p),0!==s.strstart&&(l(s,e.adler>>>16),l(s,65535&e.adler)),e.adler=1}if(s.status===oe)if(s.gzhead.extra){for(u=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>u&&(e.adler=O(e.adler,s.pending_buf,s.pending-u,u)),a(e),u=s.pending,s.pending!==s.pending_buf_size));)c(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>u&&(e.adler=O(e.adler,s.pending_buf,s.pending-u,u)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=ae)}else s.status=ae;if(s.status===ae)if(s.gzhead.name){u=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>u&&(e.adler=O(e.adler,s.pending_buf,s.pending-u,u)),a(e),u=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,c(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>u&&(e.adler=O(e.adler,s.pending_buf,s.pending-u,u)),0===d&&(s.gzindex=0,s.status=se)}else s.status=se;if(s.status===se)if(s.gzhead.comment){u=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>u&&(e.adler=O(e.adler,s.pending_buf,s.pending-u,u)),a(e),u=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,c(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>u&&(e.adler=O(e.adler,s.pending_buf,s.pending-u,u)),0===d&&(s.status=ce)}else s.status=ce;if(s.status===ce&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(c(s,255&e.adler),c(s,e.adler>>8&255),e.adler=0,s.status=le)):s.status=le),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,D}else if(0===e.avail_in&&r(t)<=r(n)&&t!==A)return i(e,B);if(s.status===ue&&0!==e.avail_in)return i(e,B);if(0!==e.avail_in||0!==s.lookahead||t!==T&&s.status!==ue){var h=s.strategy===z?m(s,t):s.strategy===H?g(s,t):E[s.level].func(s,t);if(h!==he&&h!==fe||(s.status=ue),h===de||h===he)return 0===e.avail_out&&(s.last_flush=-1),D;if(h===pe&&(t===P?S._tr_align(s):t!==M&&(S._tr_stored_block(s,0,0,!1),t===j&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,D}return t!==A?D:s.wrap<=0?R:(2===s.wrap?(c(s,255&e.adler),c(s,e.adler>>8&255),c(s,e.adler>>16&255),c(s,e.adler>>24&255),c(s,255&e.total_in),c(s,e.total_in>>8&255),c(s,e.total_in>>16&255),c(s,e.total_in>>24&255)):(l(s,e.adler>>>16),l(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?D:R)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==re&&t!==oe&&t!==ae&&t!==se&&t!==ce&&t!==le&&t!==ue?i(e,N):(e.state=null,t===le?i(e,L):D):N},t.deflateSetDictionary=function(e,t){var n,i,r,a,s,c,l,u,d=t.length;if(!e||!e.state)return N;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==re||n.lookahead)return N;for(1===a&&(e.adler=C(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new _.Buf8(n.w_size),_.arraySet(u,t,d-n.w_size,n.w_size,0),t=u,d=n.w_size),s=e.avail_in,c=e.next_in,l=e.input,e.avail_in=d,e.next_in=0,e.input=t,p(n);n.lookahead>=ee;){i=n.strstart,r=n.lookahead-(ee-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+ee-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=ee-1,p(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ee-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=s,n.wrap=a,D},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function i(e){for(var t=e.length;--t>=0;)e[t]=0}function r(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?Y[e]:Y[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function c(e,t,n){e.bi_valid>L-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>L-e.bi_valid,e.bi_valid+=n-L):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){c(e,n[2*t],n[2*t+1])}function u(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function d(e,t,n){var i,r,o=new Array(N+1),a=0;for(i=1;i<=N;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=u(o[s]++,s))}}function p(e){var t;for(t=0;t<A;t++)e.dyn_ltree[2*t]=0;for(t=0;t<M;t++)e.dyn_dtree[2*t]=0;for(t=0;t<D;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*I]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function h(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function g(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&f(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!f(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function m(e,t,n){var i,r,o,s,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],r=e.pending_buf[e.l_buf+u],u++,0===i?l(e,r,t):(l(e,(o=K[r])+j+1,t),0!==(s=V[o])&&c(e,r-=X[o],s),l(e,o=a(--i),n),0!==(s=$[o])&&c(e,i-=Z[o],s))}while(u<e.last_lit);l(e,I,t)}function v(e,t){var n,i,r,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=R,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=a[2*r+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)g(e,o,n);r=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],g(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,g(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,o,a,s,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(o=0;o<=N;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<R;n++)(o=c[2*c[2*(i=e.heap[n])+1]+1]+1)>f&&(o=f,g++),c[2*i+1]=o,i>l||(e.bl_count[o]++,a=0,i>=h&&(a=p[i-h]),s=c[2*i],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(u[2*i+1]+a)));if(0!==g){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,g-=2}while(g>0);for(o=f;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>l||(c[2*r+1]!==o&&(e.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(e,t),d(o,l,e.bl_count)}function y(e,t,n){var i,r,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=t[2*(i+1)+1],++s<c&&r===a||(s<l?e.bl_tree[2*r]+=s:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*F]++):s<=10?e.bl_tree[2*z]++:e.bl_tree[2*H]++,s=0,o=r,0===a?(c=138,l=3):r===a?(c=6,l=3):(c=7,l=4))}function b(e,t,n){var i,r,o=-1,a=t[1],s=0,u=7,d=4;for(0===a&&(u=138,d=3),i=0;i<=n;i++)if(r=a,a=t[2*(i+1)+1],!(++s<u&&r===a)){if(s<d)do{l(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(l(e,r,e.bl_tree),s--),l(e,F,e.bl_tree),c(e,s-3,2)):s<=10?(l(e,z,e.bl_tree),c(e,s-3,3)):(l(e,H,e.bl_tree),c(e,s-11,7));s=0,o=r,0===a?(u=138,d=3):r===a?(u=6,d=3):(u=7,d=4)}}function w(e,t,n,i){c(e,(O<<1)+(i?1:0),3),function(e,t,n,i){h(e),i&&(s(e,n),s(e,~n)),x.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}var x=n(4),E=4,_=0,S=1,C=2,O=0,k=1,T=2,P=29,j=256,A=j+1+P,M=30,D=19,R=2*A+1,N=15,L=16,B=7,I=256,F=16,z=17,H=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(A+2));i(q);var G=new Array(2*M);i(G);var Y=new Array(512);i(Y);var K=new Array(256);i(K);var X=new Array(P);i(X);var Z=new Array(M);i(Z);var J,Q,ee,te=!1;t._tr_init=function(e){te||(function(){var e,t,n,i,o,a=new Array(N+1);for(n=0,i=0;i<P-1;i++)for(X[i]=n,e=0;e<1<<V[i];e++)K[n++]=i;for(K[n-1]=i,o=0,i=0;i<16;i++)for(Z[i]=o,e=0;e<1<<$[i];e++)Y[o++]=i;for(o>>=7;i<M;i++)for(Z[i]=o<<7,e=0;e<1<<$[i]-7;e++)Y[256+o++]=i;for(t=0;t<=N;t++)a[t]=0;for(e=0;e<=143;)q[2*e+1]=8,e++,a[8]++;for(;e<=255;)q[2*e+1]=9,e++,a[9]++;for(;e<=279;)q[2*e+1]=7,e++,a[7]++;for(;e<=287;)q[2*e+1]=8,e++,a[8]++;for(d(q,A+1,a),e=0;e<M;e++)G[2*e+1]=5,G[2*e]=u(e,5);J=new r(q,V,j+1,A,N),Q=new r(G,$,0,M,N),ee=new r(new Array(0),U,0,D,B)}(),te=!0),e.l_desc=new o(e.dyn_ltree,J),e.d_desc=new o(e.dyn_dtree,Q),e.bl_desc=new o(e.bl_tree,ee),e.bi_buf=0,e.bi_valid=0,p(e)},t._tr_stored_block=w,t._tr_flush_block=function(e,t,n,i){var r,o,a=0;e.level>0?(e.strm.data_type===C&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return _;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return S;for(t=32;t<j;t++)if(0!==e.dyn_ltree[2*t])return S;return _}(e)),v(e,e.l_desc),v(e,e.d_desc),a=function(e){var t;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),v(e,e.bl_desc),t=D-1;t>=3&&0===e.bl_tree[2*W[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?w(e,t,n,i):e.strategy===E||o===r?(c(e,(k<<1)+(i?1:0),3),m(e,q,G)):(c(e,(T<<1)+(i?1:0),3),function(e,t,n,i){var r;for(c(e,t-257,5),c(e,n-1,5),c(e,i-4,4),r=0;r<i;r++)c(e,e.bl_tree[2*W[r]+1],3);b(e,e.dyn_ltree,t-1),b(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),m(e,e.dyn_ltree,e.dyn_dtree)),p(e),i&&h(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(K[n]+j+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){c(e,k<<1,3),l(e,I,q),function(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==c.Z_OK)throw new Error(l[n]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function r(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}var o=n(92),a=n(4),s=n(42),c=n(44),l=n(23),u=n(43),d=n(95),p=Object.prototype.toString;i.prototype.push=function(e,t){var n,i,r,l,u,d,h=this.strm,f=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof e?h.input=s.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new a.Buf8(f),h.next_out=0,h.avail_out=f),(n=o.inflate(h,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&g&&(d="string"==typeof g?s.string2buf(g):"[object ArrayBuffer]"===p.call(g)?new Uint8Array(g):g,n=o.inflateSetDictionary(this.strm,d)),n===c.Z_BUF_ERROR&&!0===m&&(n=c.Z_OK,m=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==c.Z_STREAM_END&&(0!==h.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(r=s.utf8border(h.output,h.next_out),l=h.next_out-r,u=s.buf2string(h.output,r),h.next_out=l,h.avail_out=f-l,l&&a.arraySet(h.output,h.output,r,l,0),this.onData(u)):this.onData(a.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),h.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=i,t.inflate=r,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},t.ungzip=r},function(e,t,n){"use strict";function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new h.Buf32(ue),t.distcode=t.distdyn=new h.Buf32(de),t.sane=1,t.back=-1,S):k}function a(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,o(e)):k}function s(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?k:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,a(e))):k}function c(e,t){var n,i;return e?(i=new r,e.state=i,i.window=null,(n=s(e,t))!==S&&(e.state=null),n):k}function l(e){if(he){var t;for(d=new h.Buf32(512),p=new h.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(v(b,e.lens,0,288,d,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;v(w,e.lens,0,32,p,0,e.work,{bits:5}),he=!1}e.lencode=d,e.lenbits=9,e.distcode=p,e.distbits=5}function u(e,t,n,i){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new h.Buf8(o.wsize)),i>=o.wsize?(h.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),h.arraySet(o.window,t,n-i,r,o.wnext),(i-=r)?(h.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var d,p,h=n(4),f=n(40),g=n(41),m=n(93),v=n(94),y=0,b=1,w=2,x=4,E=5,_=6,S=0,C=1,O=2,k=-2,T=-3,P=-4,j=-5,A=8,M=1,D=2,R=3,N=4,L=5,B=6,I=7,F=8,z=9,H=10,V=11,$=12,U=13,W=14,q=15,G=16,Y=17,K=18,X=19,Z=20,J=21,Q=22,ee=23,te=24,ne=25,ie=26,re=27,oe=28,ae=29,se=30,ce=31,le=32,ue=852,de=592,pe=15,he=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=function(e){return c(e,pe)},t.inflateInit2=c,t.inflate=function(e,t){var n,r,o,a,s,c,d,p,ue,de,pe,he,fe,ge,me,ve,ye,be,we,xe,Ee,_e,Se,Ce,Oe=0,ke=new h.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return k;(n=e.state).mode===$&&(n.mode=U),s=e.next_out,o=e.output,d=e.avail_out,a=e.next_in,r=e.input,c=e.avail_in,p=n.hold,ue=n.bits,de=c,pe=d,_e=S;e:for(;;)switch(n.mode){case M:if(0===n.wrap){n.mode=U;break}for(;ue<16;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(2&n.wrap&&35615===p){n.check=0,ke[0]=255&p,ke[1]=p>>>8&255,n.check=g(n.check,ke,2,0),p=0,ue=0,n.mode=D;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&p)<<8)+(p>>8))%31){e.msg="incorrect header check",n.mode=se;break}if((15&p)!==A){e.msg="unknown compression method",n.mode=se;break}if(ue-=4,Ee=8+(15&(p>>>=4)),0===n.wbits)n.wbits=Ee;else if(Ee>n.wbits){e.msg="invalid window size",n.mode=se;break}n.dmax=1<<Ee,e.adler=n.check=1,n.mode=512&p?H:$,p=0,ue=0;break;case D:for(;ue<16;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(n.flags=p,(255&n.flags)!==A){e.msg="unknown compression method",n.mode=se;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=se;break}n.head&&(n.head.text=p>>8&1),512&n.flags&&(ke[0]=255&p,ke[1]=p>>>8&255,n.check=g(n.check,ke,2,0)),p=0,ue=0,n.mode=R;case R:for(;ue<32;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}n.head&&(n.head.time=p),512&n.flags&&(ke[0]=255&p,ke[1]=p>>>8&255,ke[2]=p>>>16&255,ke[3]=p>>>24&255,n.check=g(n.check,ke,4,0)),p=0,ue=0,n.mode=N;case N:for(;ue<16;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}n.head&&(n.head.xflags=255&p,n.head.os=p>>8),512&n.flags&&(ke[0]=255&p,ke[1]=p>>>8&255,n.check=g(n.check,ke,2,0)),p=0,ue=0,n.mode=L;case L:if(1024&n.flags){for(;ue<16;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}n.length=p,n.head&&(n.head.extra_len=p),512&n.flags&&(ke[0]=255&p,ke[1]=p>>>8&255,n.check=g(n.check,ke,2,0)),p=0,ue=0}else n.head&&(n.head.extra=null);n.mode=B;case B:if(1024&n.flags&&((he=n.length)>c&&(he=c),he&&(n.head&&(Ee=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),h.arraySet(n.head.extra,r,a,he,Ee)),512&n.flags&&(n.check=g(n.check,r,he,a)),c-=he,a+=he,n.length-=he),n.length))break e;n.length=0,n.mode=I;case I:if(2048&n.flags){if(0===c)break e;he=0;do{Ee=r[a+he++],n.head&&Ee&&n.length<65536&&(n.head.name+=String.fromCharCode(Ee))}while(Ee&&he<c);if(512&n.flags&&(n.check=g(n.check,r,he,a)),c-=he,a+=he,Ee)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=F;case F:if(4096&n.flags){if(0===c)break e;he=0;do{Ee=r[a+he++],n.head&&Ee&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ee))}while(Ee&&he<c);if(512&n.flags&&(n.check=g(n.check,r,he,a)),c-=he,a+=he,Ee)break e}else n.head&&(n.head.comment=null);n.mode=z;case z:if(512&n.flags){for(;ue<16;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(p!==(65535&n.check)){e.msg="header crc mismatch",n.mode=se;break}p=0,ue=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=$;break;case H:for(;ue<32;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}e.adler=n.check=i(p),p=0,ue=0,n.mode=V;case V:if(0===n.havedict)return e.next_out=s,e.avail_out=d,e.next_in=a,e.avail_in=c,n.hold=p,n.bits=ue,O;e.adler=n.check=1,n.mode=$;case $:if(t===E||t===_)break e;case U:if(n.last){p>>>=7&ue,ue-=7&ue,n.mode=re;break}for(;ue<3;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}switch(n.last=1&p,ue-=1,3&(p>>>=1)){case 0:n.mode=W;break;case 1:if(l(n),n.mode=Z,t===_){p>>>=2,ue-=2;break e}break;case 2:n.mode=Y;break;case 3:e.msg="invalid block type",n.mode=se}p>>>=2,ue-=2;break;case W:for(p>>>=7&ue,ue-=7&ue;ue<32;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if((65535&p)!=(p>>>16^65535)){e.msg="invalid stored block lengths",n.mode=se;break}if(n.length=65535&p,p=0,ue=0,n.mode=q,t===_)break e;case q:n.mode=G;case G:if(he=n.length){if(he>c&&(he=c),he>d&&(he=d),0===he)break e;h.arraySet(o,r,a,he,s),c-=he,a+=he,d-=he,s+=he,n.length-=he;break}n.mode=$;break;case Y:for(;ue<14;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(n.nlen=257+(31&p),p>>>=5,ue-=5,n.ndist=1+(31&p),p>>>=5,ue-=5,n.ncode=4+(15&p),p>>>=4,ue-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=se;break}n.have=0,n.mode=K;case K:for(;n.have<n.ncode;){for(;ue<3;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}n.lens[Te[n.have++]]=7&p,p>>>=3,ue-=3}for(;n.have<19;)n.lens[Te[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},_e=v(y,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,_e){e.msg="invalid code lengths set",n.mode=se;break}n.have=0,n.mode=X;case X:for(;n.have<n.nlen+n.ndist;){for(;ve=(Oe=n.lencode[p&(1<<n.lenbits)-1])>>>16&255,ye=65535&Oe,!((me=Oe>>>24)<=ue);){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(ye<16)p>>>=me,ue-=me,n.lens[n.have++]=ye;else{if(16===ye){for(Ce=me+2;ue<Ce;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(p>>>=me,ue-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=se;break}Ee=n.lens[n.have-1],he=3+(3&p),p>>>=2,ue-=2}else if(17===ye){for(Ce=me+3;ue<Ce;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}ue-=me,Ee=0,he=3+(7&(p>>>=me)),p>>>=3,ue-=3}else{for(Ce=me+7;ue<Ce;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}ue-=me,Ee=0,he=11+(127&(p>>>=me)),p>>>=7,ue-=7}if(n.have+he>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=se;break}for(;he--;)n.lens[n.have++]=Ee}}if(n.mode===se)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=se;break}if(n.lenbits=9,Se={bits:n.lenbits},_e=v(b,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,_e){e.msg="invalid literal/lengths set",n.mode=se;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},_e=v(w,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,_e){e.msg="invalid distances set",n.mode=se;break}if(n.mode=Z,t===_)break e;case Z:n.mode=J;case J:if(c>=6&&d>=258){e.next_out=s,e.avail_out=d,e.next_in=a,e.avail_in=c,n.hold=p,n.bits=ue,m(e,pe),s=e.next_out,o=e.output,d=e.avail_out,a=e.next_in,r=e.input,c=e.avail_in,p=n.hold,ue=n.bits,n.mode===$&&(n.back=-1);break}for(n.back=0;ve=(Oe=n.lencode[p&(1<<n.lenbits)-1])>>>16&255,ye=65535&Oe,!((me=Oe>>>24)<=ue);){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(ve&&0==(240&ve)){for(be=me,we=ve,xe=ye;ve=(Oe=n.lencode[xe+((p&(1<<be+we)-1)>>be)])>>>16&255,ye=65535&Oe,!(be+(me=Oe>>>24)<=ue);){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}p>>>=be,ue-=be,n.back+=be}if(p>>>=me,ue-=me,n.back+=me,n.length=ye,0===ve){n.mode=ie;break}if(32&ve){n.back=-1,n.mode=$;break}if(64&ve){e.msg="invalid literal/length code",n.mode=se;break}n.extra=15&ve,n.mode=Q;case Q:if(n.extra){for(Ce=n.extra;ue<Ce;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,ue-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ee;case ee:for(;ve=(Oe=n.distcode[p&(1<<n.distbits)-1])>>>16&255,ye=65535&Oe,!((me=Oe>>>24)<=ue);){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(0==(240&ve)){for(be=me,we=ve,xe=ye;ve=(Oe=n.distcode[xe+((p&(1<<be+we)-1)>>be)])>>>16&255,ye=65535&Oe,!(be+(me=Oe>>>24)<=ue);){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}p>>>=be,ue-=be,n.back+=be}if(p>>>=me,ue-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=se;break}n.offset=ye,n.extra=15&ve,n.mode=te;case te:if(n.extra){for(Ce=n.extra;ue<Ce;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,ue-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=se;break}n.mode=ne;case ne:if(0===d)break e;if(he=pe-d,n.offset>he){if((he=n.offset-he)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=se;break}he>n.wnext?(he-=n.wnext,fe=n.wsize-he):fe=n.wnext-he,he>n.length&&(he=n.length),ge=n.window}else ge=o,fe=s-n.offset,he=n.length;he>d&&(he=d),d-=he,n.length-=he;do{o[s++]=ge[fe++]}while(--he);0===n.length&&(n.mode=J);break;case ie:if(0===d)break e;o[s++]=n.length,d--,n.mode=J;break;case re:if(n.wrap){for(;ue<32;){if(0===c)break e;c--,p|=r[a++]<<ue,ue+=8}if(pe-=d,e.total_out+=pe,n.total+=pe,pe&&(e.adler=n.check=n.flags?g(n.check,o,pe,s-pe):f(n.check,o,pe,s-pe)),pe=d,(n.flags?p:i(p))!==n.check){e.msg="incorrect data check",n.mode=se;break}p=0,ue=0}n.mode=oe;case oe:if(n.wrap&&n.flags){for(;ue<32;){if(0===c)break e;c--,p+=r[a++]<<ue,ue+=8}if(p!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=se;break}p=0,ue=0}n.mode=ae;case ae:_e=C;break e;case se:_e=T;break e;case ce:return P;case le:default:return k}return e.next_out=s,e.avail_out=d,e.next_in=a,e.avail_in=c,n.hold=p,n.bits=ue,(n.wsize||pe!==e.avail_out&&n.mode<se&&(n.mode<re||t!==x))&&u(e,e.output,e.next_out,pe-e.avail_out)?(n.mode=ce,P):(de-=e.avail_in,pe-=e.avail_out,e.total_in+=de,e.total_out+=pe,n.total+=pe,n.wrap&&pe&&(e.adler=n.check=n.flags?g(n.check,o,pe,e.next_out-pe):f(n.check,o,pe,e.next_out-pe)),e.data_type=n.bits+(n.last?64:0)+(n.mode===$?128:0)+(n.mode===Z||n.mode===q?256:0),(0===de&&0===pe||t===x)&&_e===S&&(_e=j),_e)},t.inflateEnd=function(e){if(!e||!e.state)return k;var t=e.state;return t.window&&(t.window=null),e.state=null,S},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?k:(n.head=t,t.done=!1,S):k},t.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==V?k:n.mode===V&&f(1,t,i,0)!==n.check?T:u(e,t,i,i)?(n.mode=ce,P):(n.havedict=1,S):k},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,i,r,o,a,s,c,l,u,d,p,h,f,g,m,v,y,b,w,x,E,_,S,C,O;n=e.state,i=e.next_in,C=e.input,r=i+(e.avail_in-5),o=e.next_out,O=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,p=n.window,h=n.hold,f=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(h+=C[i++]<<f,f+=8,h+=C[i++]<<f,f+=8),b=g[h&v];t:for(;;){if(h>>>=w=b>>>24,f-=w,0==(w=b>>>16&255))O[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(h&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&b,(w&=15)&&(f<w&&(h+=C[i++]<<f,f+=8),x+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=C[i++]<<f,f+=8,h+=C[i++]<<f,f+=8),b=m[h&y];n:for(;;){if(h>>>=w=b>>>24,f-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&b,f<(w&=15)&&(h+=C[i++]<<f,(f+=8)<w&&(h+=C[i++]<<f,f+=8)),(E+=h&(1<<w)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=w,f-=w,E>(w=o-a)){if((w=E-w)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(_=0,S=p,0===d){if(_+=l-w,w<x){x-=w;do{O[o++]=p[_++]}while(--w);_=o-E,S=O}}else if(d<w){if(_+=l+d-w,(w-=d)<x){x-=w;do{O[o++]=p[_++]}while(--w);if(_=0,d<x){x-=w=d;do{O[o++]=p[_++]}while(--w);_=o-E,S=O}}}else if(_+=d-w,w<x){x-=w;do{O[o++]=p[_++]}while(--w);_=o-E,S=O}for(;x>2;)O[o++]=S[_++],O[o++]=S[_++],O[o++]=S[_++],x-=3;x&&(O[o++]=S[_++],x>1&&(O[o++]=S[_++]))}else{_=o-E;do{O[o++]=O[_++],O[o++]=O[_++],O[o++]=O[_++],x-=3}while(x>2);x&&(O[o++]=O[_++],x>1&&(O[o++]=O[_++]))}break}}break}}while(i<r&&o<s);i-=x=f>>3,h&=(1<<(f-=x<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=f}},function(e,t,n){"use strict";var i=n(4),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,c,l,u,d,p){var h,f,g,m,v,y,b,w,x,E=p.bits,_=0,S=0,C=0,O=0,k=0,T=0,P=0,j=0,A=0,M=0,D=null,R=0,N=new i.Buf16(16),L=new i.Buf16(16),B=null,I=0;for(_=0;_<=15;_++)N[_]=0;for(S=0;S<c;S++)N[t[n+S]]++;for(k=E,O=15;O>=1&&0===N[O];O--);if(k>O&&(k=O),0===O)return l[u++]=20971520,l[u++]=20971520,p.bits=1,0;for(C=1;C<O&&0===N[C];C++);for(k<C&&(k=C),j=1,_=1;_<=15;_++)if(j<<=1,(j-=N[_])<0)return-1;if(j>0&&(0===e||1!==O))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+N[_];for(S=0;S<c;S++)0!==t[n+S]&&(d[L[t[n+S]]++]=S);if(0===e?(D=B=d,y=19):1===e?(D=r,R-=257,B=o,I-=257,y=256):(D=a,B=s,y=-1),M=0,S=0,_=C,v=u,T=k,P=0,g=-1,m=(A=1<<k)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){b=_-P,d[S]<y?(w=0,x=d[S]):d[S]>y?(w=B[I+d[S]],x=D[R+d[S]]):(w=96,x=0),h=1<<_-P,C=f=1<<T;do{l[v+(M>>P)+(f-=h)]=b<<24|w<<16|x|0}while(0!==f);for(h=1<<_-1;M&h;)h>>=1;if(0!==h?(M&=h-1,M+=h):M=0,S++,0==--N[_]){if(_===O)break;_=t[n+d[S]]}if(_>k&&(M&m)!==g){for(0===P&&(P=k),v+=C,j=1<<(T=_-P);T+P<O&&!((j-=N[T+P])<=0);)T++,j<<=1;if(A+=1<<T,1===e&&A>852||2===e&&A>592)return 1;l[g=M&m]=k<<24|T<<16|v-u|0}}return 0!==M&&(l[v+M]=_-P<<24|64<<16|0),p.bits=k,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";function i(e,t,n,i){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var r=n(0),o=n(1),a=n(6),s=n(22),c=n(45),l=function(e,t){var n,i="";for(n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i},u=function(e,t,n,i,o,u){var d,p,h=e.file,f=e.compression,g=u!==a.utf8encode,m=r.transformTo("string",u(h.name)),v=r.transformTo("string",a.utf8encode(h.name)),y=h.comment,b=r.transformTo("string",u(y)),w=r.transformTo("string",a.utf8encode(y)),x=v.length!==h.name.length,E=w.length!==y.length,_="",S="",C="",O=h.dir,k=h.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),g||!x&&!E||(P|=2048);var j=0,A=0;O&&(j|=16),"UNIX"===o?(A=798,j|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(h.unixPermissions,O)):(A=20,j|=function(e,t){return 63&(e||0)}(h.dosPermissions)),d=k.getUTCHours(),d<<=6,d|=k.getUTCMinutes(),d<<=5,d|=k.getUTCSeconds()/2,p=k.getUTCFullYear()-1980,p<<=4,p|=k.getUTCMonth()+1,p<<=5,p|=k.getUTCDate(),x&&(S=l(1,1)+l(s(m),4)+v,_+="up"+l(S.length,2)+S),E&&(C=l(1,1)+l(s(b),4)+w,_+="uc"+l(C.length,2)+C);var M="";return M+="\n\0",M+=l(P,2),M+=f.magic,M+=l(d,2),M+=l(p,2),M+=l(T.crc32,4),M+=l(T.compressedSize,4),M+=l(T.uncompressedSize,4),M+=l(m.length,2),M+=l(_.length,2),{fileRecord:c.LOCAL_FILE_HEADER+M+m+_,dirRecord:c.CENTRAL_FILE_HEADER+l(A,2)+M+l(b.length,2)+"\0\0\0\0"+l(j,4)+l(i,4)+m+_+b}},d=function(e){return c.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};r.inherits(i,o),i.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-i-1))/n:100}}))},i.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=u(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},i.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=u(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:d(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},i.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var a=r.transformTo("string",o(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(n,4)+l(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},i.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},i.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},i.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},i.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=i},function(e,t,n){"use strict";function i(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}var r=n(0),o=n(1);r.inherits(i,o),i.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=i},function(e,t,n){"use strict";function i(e){return new o.Promise((function(t,n){var i=e.decompressed.getContentWorker().pipe(new c);i.on("error",(function(e){n(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}var r=n(0),o=n(9),a=n(6),s=(r=n(0),n(99)),c=n(38),l=n(14);e.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new s(t);return n.load(e),n})).then((function(e){var n=[o.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(i(r[a]));return o.Promise.all(n)})).then((function(e){for(var i=e.shift(),r=i.files,o=0;o<r.length;o++){var a=r[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},function(e,t,n){"use strict";function i(e){this.files=[],this.loadOptions=e}var r=n(46),o=n(0),a=n(45),s=n(102),c=(n(6),n(3));i.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=c.uint8array?"uint8array":"array",n=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=t-n;if(i>0)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=i},function(e,t,n){"use strict";function i(e){r.call(this,e)}var r=n(48);n(0).inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";function i(e){r.call(this,e)}var r=n(49);n(0).inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";function i(e,t){this.options=e,this.loadOptions=t}var r=n(46),o=n(0),a=n(21),s=n(22),c=n(6),l=n(39),u=n(3);i.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,i,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<r;)t=e.readInt(2),n=e.readInt(2),i=e.readData(n),this.extraFields[t]={id:t,length:n,value:i}},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var r=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:c.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:c.utf8decode(t.readData(e.length-5))}return null}},e.exports=i},function(e,t,n){var i,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},l=function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){s(e)}}},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},d=function(t,s,d){d||(t=u(t));var p,h=this,f="application/octet-stream"===t.type,g=function(){l(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,r)return p=n().createObjectURL(t),void setTimeout((function(){i.href=p,i.download=s,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(i),g(),c(p),h.readyState=h.DONE}));!function(){if((a||f&&o)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,g()},i.readAsDataURL(t),void(h.readyState=h.INIT)}p||(p=n().createObjectURL(t)),f?e.location.href=p:e.open(p,"_blank")||(e.location.href=p),h.readyState=h.DONE,g(),c(p)}()},p=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t,n){return new d(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=r:null!==n(104)&&null!==n(105)&&void 0!==(i=function(){return r}.call(t,n,t,e))&&(e.exports=i)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})}])}))}).call(t,n(1).setImmediate,n(1).clearImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){delete s[e]}function r(e){if(c)setTimeout(r,0,e);else{var t=s[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var o,a=1,s={},c=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){r(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&r(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){r(e.data)},o=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;o=function(t){var n=l.createElement("script");n.onreadystatechange=function(){r(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(r,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return s[a]=i,o(a),a++},u.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(11))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(){f&&p&&(f=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!f){var e=r(o);f=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,u,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var p,h=[],f=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||f||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){/*! grapesjs-aviary - 0.1.2 */
e.exports=function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=i.default.plugins.add("gjs-aviary",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i=e.getModel(),r=void 0,o={key:"1",onApply:null,getFilename:null,closeOnApply:!0,config:{}};for(var a in o)a in n||(n[a]=o[a]);var s=n.config;s.apiKey=n.key,s.onSave=function(e,t){r.set("src",t);var i=("function"==typeof n.getFilename?n.getFilename:u)(r);("function"==typeof n.onApply?n.onApply:d)(t,i,r),n.closeOnApply&&c.close()};var c=new Aviary.Feather(s),l=e.Commands,u=function(e){var t=e.get("src").split("/").pop();return Date.now()+"_"+t.slice(-15)},d=function(t,n){e.AssetManager.add({src:t,name:n})},p=document.createElement("img");l.add("image-editor",{run:function(e,t,n){var o=(n||{}).model||e.getSelected();r=o,p.src=o.get("src"),c.launch({image:p}),i.trigger("gjs-aviary:launch",o,c)}})}))},function(t,n){t.exports=e}])}(n(0))},function(e,t,n){/*! grapesjs-plugin-filestack - 0.1.1 */
e.exports=function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=i.default.plugins.add("gjs-plugin-filestack",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,i=e.getConfig(),r=i.stylePrefix||"",o=void 0,a={key:"",btnEl:"",btnText:"Add images",filestackOpts:{accept:"image/*",maxFiles:10},onComplete:function(e,t){}};for(var s in a)s in n||(n[s]=a[s]);if(!filestack)throw new Error("Filestack instance not found");if(!n.key)throw new Error("Filestack's API key not found");var c=filestack.init(n.key);e.on("run:open-assets",(function(){var t=e.Modal.getContentEl(),i=t.querySelector("."+r+"am-file-uploader"),a=t.querySelector("."+r+"am-assets-header"),s=t.querySelector("."+r+"am-assets-cont");i&&(i.style.display="none"),a&&(a.style.display="none"),s.style.width="100%",o||((o=n.btnEl)||((o=document.createElement("button")).className=r+"btn-prim "+r+"btn-filestack",o.innerHTML=n.btnText),o.onclick=function(){c.pick(n.filestackOpts).then((function(e){var t=e.filesUploaded,i=t instanceof Array?t:[t],r=l(i);n.onComplete(i,r)}))}),s.insertBefore(o,a)}));var l=function(t){var n=t.map((function(e){return e.src=e.url,e}));return e.AssetManager.add(n)}}))},function(t,n){t.exports=e}])}(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(15)),r=n(3);t.default=function(e,t){var n=e.Commands,o=t.textCleanCanvas;n.add(r.cmdImport,(0,i.default)(e,t)),n.add(r.cmdDeviceDesktop,(function(e){return e.setDevice("Desktop")})),n.add(r.cmdDeviceTablet,(function(e){return e.setDevice("Tablet")})),n.add(r.cmdDeviceMobile,(function(e){return e.setDevice("Mobile portrait")})),n.add(r.cmdClear,(function(e){return confirm(o)&&e.runCommand("core:canvas-clear")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e,t){var n=e.getConfig("stylePrefix"),r=e.Modal,o=e.CodeManager.getViewer("CodeMirror").clone(),a=document.createElement("div"),s=t.modalImportLabel,c=t.modalImportContent,l=o.editor,u=document.createElement("button");return u.type="button",u.innerHTML=t.modalImportButton,u.className=n+"btn-prim "+n+"btn-import",u.onclick=function(t){e.setComponents(l.getValue().trim()),r.close()},o.set(i({codeName:"htmlmixed",theme:"hopscotch",readOnly:0},t.importViewerOptions)),{run:function(e){var i=this;if(!l){var d=document.createElement("textarea");if(s){var p=document.createElement("div");p.className=n+"import-label",p.innerHTML=s,a.appendChild(p)}a.appendChild(d),a.appendChild(u),o.init(d),l=o.editor}r.setTitle(t.modalImportTitle),r.setContent(a);var h="function"==typeof c?c(e):c;o.setContent(h||""),r.open().getModel().once("change:open",(function(){return e.stopCommand(i.id)})),l.refresh()},stop:function(){r.close()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.BlockManager,i=function(e){return t.blocks.indexOf(e)>=0};i("link-block")&&n.add("link-block",{category:"Basic",label:"Link Block",attributes:{class:"fa fa-link"},content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),i("quote")&&n.add("quote",{label:"Quote",category:"Basic",attributes:{class:"fa fa-quote-right"},content:'<blockquote class="quote">\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit\n      </blockquote>'}),i("text-basic")&&n.add("text-basic",{category:"Basic",label:"Text section",attributes:{class:"gjs-fonts gjs-f-h1p"},content:'<section class="bdg-sect">\n      <h1 class="heading">Insert title here</h1>\n      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n      </section>'})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.DomComponents),n=t.getType("default");n.model,n.view}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.default=function(e,t){var n=e.Panels,r=e.getConfig(),o="sw-visibility",a="export-template",s="open-sm",c="open-layers",l="open-blocks",u="fullscreen",d="preview";r.showDevices=0,n.getPanels().reset([{id:"commands",buttons:[{}]},{id:"options",buttons:[{id:o,command:o,context:o,className:"fa fa-square-o"},{id:d,context:d,command:function(e){return e.runCommand(d)},className:"fa fa-eye"},{id:u,command:u,context:u,className:"fa fa-arrows-alt"},{id:a,className:"fa fa-code",command:function(e){return e.runCommand(a)}},{id:"undo",className:"fa fa-undo",command:function(e){return e.runCommand("core:undo")}},{id:"redo",className:"fa fa-repeat",command:function(e){return e.runCommand("core:redo")}},{id:i.cmdImport,className:"fa fa-download",command:function(e){return e.runCommand(i.cmdImport)}},{id:i.cmdClear,className:"fa fa-trash",command:function(e){return e.runCommand(i.cmdClear)}}]},{id:"views",buttons:[{id:s,command:s,active:!0,className:"fa fa-paint-brush"},{id:"open-tm",command:"open-tm",className:"fa fa-cog"},{id:c,command:c,className:"fa fa-bars"},{id:l,command:l,className:"fa fa-th-large"}]}]),n.addPanel({id:"devices-c"}).get("buttons").add([{id:i.cmdDeviceDesktop,command:i.cmdDeviceDesktop,className:"fa fa-desktop",active:1},{id:i.cmdDeviceTablet,command:i.cmdDeviceTablet,className:"fa fa-tablet"},{id:i.cmdDeviceMobile,command:i.cmdDeviceMobile,className:"fa fa-mobile"}]);var p=n.getButton("views",l);e.on("load",(function(){return p&&p.set("active",1)})),t.showStylesOnChange&&e.on("component:selected",(function(){var t=n.getButton("views",s),i=n.getButton("views",c);i&&i.get("active")||!e.getSelected()||t&&t.set("active",1)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.StyleManager,i=t.customStyleManager;n.getSectors().reset(i&&i.length?i:[{name:t.textGeneral,open:!1,buildProps:["float","display","position","top","right","left","bottom"]},{name:t.textLayout,open:!1,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:t.textTypography,open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"],properties:[{property:"text-align",list:[{value:"left",className:"fa fa-align-left"},{value:"center",className:"fa fa-align-center"},{value:"right",className:"fa fa-align-right"},{value:"justify",className:"fa fa-align-justify"}]}]},{name:t.textDecorations,open:!1,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:t.textExtra,open:!1,buildProps:["transition","perspective","transform"]}])}}]))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports.extend=function(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,i)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,n){var o=this.indexOf(e);if(void 0===n){if(-1!==o)return;n=this.length}-1!==o&&this.splice(o,1),this.splice(n,0,e),-1===o&&t.set(e,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},e.exports.isExtended=function(e){return!0===e.__refs_collection}},function(e){e.exports=JSON.parse('{"name":"Dela","uri":"http://sborex.com/dela/schema","prefix":"dela","xml":{"tagAlias":"lowerCase"},"types":[{"name":"View","properties":[{"name":"type","isAttr":true,"type":"String","xml":{"serialize":"xsi:type"}},{"name":"code","isAttr":true,"type":"String","xml":{"serialize":"xsi:type"}},{"name":"content","type":"String","isBody":true}]},{"name":"Resource","properties":[{"name":"type","isAttr":true,"type":"String","xml":{"serialize":"xsi:type"}},{"name":"code","isAttr":true,"type":"String","xml":{"serialize":"xsi:type"}},{"name":"isBinary","isAttr":true,"type":"Boolean","xml":{"serialize":"xsi:type"}},{"name":"content","type":"String","isBody":true}]},{"name":"Bean","properties":[{"name":"code","isAttr":true,"type":"String","xml":{"serialize":"xsi:type"}},{"name":"language","isAttr":true,"type":"String","xml":{"serialize":"xsi:type"}},{"name":"definition","type":"String","isBody":true}]},{"name":"Permittable","extends":["bpmn:UserTask","dela:View"],"properties":[{"name":"permit","isAttr":true,"type":"Expression","xml":{"serialize":"xsi:type"}}]},{"name":"Receivable","extends":["bpmn:MessageEventDefinition","bpmn:SignalEventDefinition","bpmn:ReceiveTask"],"properties":[{"name":"incomingId","isAttr":true,"type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"existingId","isAttr":true,"type":"Expression","xml":{"serialize":"xsi:type"}}]},{"name":"Viewable","extends":["bpmn:Process","bpmn:UserTask"],"properties":[{"name":"view","type":"View","isMany":true}]},{"name":"Resourceable","extends":["bpmn:Process"],"properties":[{"name":"resource","type":"Resource","isMany":true},{"name":"bean","type":"Bean","isMany":true}]},{"name":"Multipliable","extends":["bpmn:Activity"],"properties":[{"name":"expression","type":"String"}]},{"name":"Serviceable","extends":["bpmn:ServiceTask"],"properties":[{"name":"service","type":"String"}]}],"emumerations":[],"associations":[]}')},function(e,t,n){"use strict";(function(e){
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,i=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(n&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var r=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),i))}};function o(e){return e&&"[object Function]"==={}.toString.call(e)}function a(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function s(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function c(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=a(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?e:c(s(e))}function l(e){return e&&e.referenceNode?e.referenceNode:e}var u=n&&!(!window.MSInputMethodContext||!document.documentMode),d=n&&/MSIE 10/.test(navigator.userAgent);function p(e){return 11===e?u:10===e?d:u||d}function h(e){if(!e)return document.documentElement;for(var t=p(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===a(n,"position")?h(n):n:e?e.ownerDocument.documentElement:document.documentElement}function f(e){return null!==e.parentNode?f(e.parentNode):e}function g(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,o=document.createRange();o.setStart(i,0),o.setEnd(r,0);var a,s,c=o.commonAncestorContainer;if(e!==c&&t!==c||i.contains(r))return"BODY"===(s=(a=c).nodeName)||"HTML"!==s&&h(a.firstElementChild)!==a?h(c):c;var l=f(e);return l.host?g(l.host,t):g(e,f(t).host)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var r=e.ownerDocument.documentElement,o=e.ownerDocument.scrollingElement||r;return o[n]}return e[n]}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=m(t,"top"),r=m(t,"left"),o=n?-1:1;return e.top+=i*o,e.bottom+=i*o,e.left+=r*o,e.right+=r*o,e}function y(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+i+"Width"])}function b(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],p(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function w(e){var t=e.body,n=e.documentElement,i=p(10)&&getComputedStyle(n);return{height:b("Height",t,n,i),width:b("Width",t,n,i)}}var x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function C(e){return S({},e,{right:e.left+e.width,bottom:e.top+e.height})}function O(e){var t={};try{if(p(10)){t=e.getBoundingClientRect();var n=m(e,"top"),i=m(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(e){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?w(e.ownerDocument):{},s=o.width||e.clientWidth||r.width,c=o.height||e.clientHeight||r.height,l=e.offsetWidth-s,u=e.offsetHeight-c;if(l||u){var d=a(e);l-=y(d,"x"),u-=y(d,"y"),r.width-=l,r.height-=u}return C(r)}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=p(10),r="HTML"===t.nodeName,o=O(e),s=O(t),l=c(e),u=a(t),d=parseFloat(u.borderTopWidth),h=parseFloat(u.borderLeftWidth);n&&r&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var f=C({top:o.top-s.top-d,left:o.left-s.left-h,width:o.width,height:o.height});if(f.marginTop=0,f.marginLeft=0,!i&&r){var g=parseFloat(u.marginTop),m=parseFloat(u.marginLeft);f.top-=d-g,f.bottom-=d-g,f.left-=h-m,f.right-=h-m,f.marginTop=g,f.marginLeft=m}return(i&&!n?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(f=v(f,t)),f}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=k(e,n),r=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:m(n),s=t?0:m(n,"left"),c={top:a-i.top+i.marginTop,left:s-i.left+i.marginLeft,width:r,height:o};return C(c)}function P(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===a(e,"position"))return!0;var n=s(e);return!!n&&P(n)}function j(e){if(!e||!e.parentElement||p())return document.documentElement;for(var t=e.parentElement;t&&"none"===a(t,"transform");)t=t.parentElement;return t||document.documentElement}function A(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=r?j(e):g(e,l(t));if("viewport"===i)o=T(a,r);else{var u=void 0;"scrollParent"===i?"BODY"===(u=c(s(t))).nodeName&&(u=e.ownerDocument.documentElement):u="window"===i?e.ownerDocument.documentElement:i;var d=k(u,a,r);if("HTML"!==u.nodeName||P(a))o=d;else{var p=w(e.ownerDocument),h=p.height,f=p.width;o.top+=d.top-d.marginTop,o.bottom=h+d.top,o.left+=d.left-d.marginLeft,o.right=f+d.left}}var m="number"==typeof(n=n||0);return o.left+=m?n:n.left||0,o.top+=m?n:n.top||0,o.right-=m?n:n.right||0,o.bottom-=m?n:n.bottom||0,o}function M(e){return e.width*e.height}function D(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=A(n,i,o,r),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},c=Object.keys(s).map((function(e){return S({key:e},s[e],{area:M(s[e])})})).sort((function(e,t){return t.area-e.area})),l=c.filter((function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight})),u=l.length>0?l[0].key:c[0].key,d=e.split("-")[1];return u+(d?"-"+d:"")}function R(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=i?j(t):g(t,l(n));return k(n,r,i)}function N(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function L(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function B(e,t,n){n=n.split("-")[0];var i=N(e),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",c=o?"height":"width",l=o?"width":"height";return r[a]=t[a]+t[c]/2-i[c]/2,r[s]=n===s?t[s]-i[l]:t[L(s)],r}function I(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function F(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var i=I(e,(function(e){return e[t]===n}));return e.indexOf(i)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&o(n)&&(t.offsets.popper=C(t.offsets.popper),t.offsets.reference=C(t.offsets.reference),t=n(t,e))})),t}function z(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=R(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=D(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=B(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=F(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function H(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function V(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],o=r?""+r+n:e;if(void 0!==document.body.style[o])return o}return null}function $(){return this.state.isDestroyed=!0,H(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[V("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function U(e){var t=e.ownerDocument;return t?t.defaultView:window}function W(e,t,n,i){n.updateBound=i,U(e).addEventListener("resize",n.updateBound,{passive:!0});var r=c(e);return function e(t,n,i,r){var o="BODY"===t.nodeName,a=o?t.ownerDocument.defaultView:t;a.addEventListener(n,i,{passive:!0}),o||e(c(a.parentNode),n,i,r),r.push(a)}(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function q(){this.state.eventsEnabled||(this.state=W(this.reference,this.options,this.state,this.scheduleUpdate))}function G(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,U(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Y(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function K(e,t){Object.keys(t).forEach((function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Y(t[n])&&(i="px"),e.style[n]=t[n]+i}))}var X=n&&/Firefox/i.test(navigator.userAgent);function Z(e,t,n){var i=I(e,(function(e){return e.name===t})),r=!!i&&e.some((function(e){return e.name===n&&e.enabled&&e.order<i.order}));if(!r){var o="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}var J=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=J.slice(3);function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Q.indexOf(e),i=Q.slice(n+1).concat(Q.slice(0,n));return t?i.reverse():i}var te="flip",ne="clockwise",ie="counterclockwise";function re(e,t,n,i){var r=[0,0],o=-1!==["right","left"].indexOf(i),a=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=a.indexOf(I(a,(function(e){return-1!==e.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,l=-1!==s?[a.slice(0,s).concat([a[s].split(c)[0]]),[a[s].split(c)[1]].concat(a.slice(s+1))]:[a];return(l=l.map((function(e,i){var r=(1===i?!o:o)?"height":"width",a=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],a=r[2];if(!o)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=i}return C(s)[t]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(e,r,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,i){Y(n)&&(r[t]+=n*("-"===e[i-1]?-1:1))}))})),r}var oe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets,o=r.reference,a=r.popper,s=-1!==["bottom","top"].indexOf(n),c=s?"left":"top",l=s?"width":"height",u={start:_({},c,o[c]),end:_({},c,o[c]+o[l]-a[l])};e.offsets.popper=S({},a,u[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,i=e.placement,r=e.offsets,o=r.popper,a=r.reference,s=i.split("-")[0],c=void 0;return c=Y(+n)?[+n,0]:re(n,o,a,s),"left"===s?(o.top+=c[0],o.left-=c[1]):"right"===s?(o.top+=c[0],o.left+=c[1]):"top"===s?(o.left+=c[0],o.top-=c[1]):"bottom"===s&&(o.left+=c[0],o.top+=c[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||h(e.instance.popper);e.instance.reference===n&&(n=h(n));var i=V("transform"),r=e.instance.popper.style,o=r.top,a=r.left,s=r[i];r.top="",r.left="",r[i]="";var c=A(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);r.top=o,r.left=a,r[i]=s,t.boundaries=c;var l=t.priority,u=e.offsets.popper,d={primary:function(e){var n=u[e];return u[e]<c[e]&&!t.escapeWithReference&&(n=Math.max(u[e],c[e])),_({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=u[n];return u[e]>c[e]&&!t.escapeWithReference&&(i=Math.min(u[n],c[e]-("right"===e?u.width:u.height))),_({},n,i)}};return l.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=S({},u,d[t](e))})),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,r=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(r),s=a?"right":"bottom",c=a?"left":"top",l=a?"width":"height";return n[s]<o(i[c])&&(e.offsets.popper[c]=o(i[c])-n[l]),n[c]>o(i[s])&&(e.offsets.popper[c]=o(i[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!Z(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],o=e.offsets,s=o.popper,c=o.reference,l=-1!==["left","right"].indexOf(r),u=l?"height":"width",d=l?"Top":"Left",p=d.toLowerCase(),h=l?"left":"top",f=l?"bottom":"right",g=N(i)[u];c[f]-g<s[p]&&(e.offsets.popper[p]-=s[p]-(c[f]-g)),c[p]+g>s[f]&&(e.offsets.popper[p]+=c[p]+g-s[f]),e.offsets.popper=C(e.offsets.popper);var m=c[p]+c[u]/2-g/2,v=a(e.instance.popper),y=parseFloat(v["margin"+d]),b=parseFloat(v["border"+d+"Width"]),w=m-e.offsets.popper[p]-y-b;return w=Math.max(Math.min(s[u]-g,w),0),e.arrowElement=i,e.offsets.arrow=(_(n={},p,Math.round(w)),_(n,h,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(H(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=A(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],r=L(i),o=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case te:a=[i,r];break;case ne:a=ee(i);break;case ie:a=ee(i,!0);break;default:a=t.behavior}return a.forEach((function(s,c){if(i!==s||a.length===c+1)return e;i=e.placement.split("-")[0],r=L(i);var l=e.offsets.popper,u=e.offsets.reference,d=Math.floor,p="left"===i&&d(l.right)>d(u.left)||"right"===i&&d(l.left)<d(u.right)||"top"===i&&d(l.bottom)>d(u.top)||"bottom"===i&&d(l.top)<d(u.bottom),h=d(l.left)<d(n.left),f=d(l.right)>d(n.right),g=d(l.top)<d(n.top),m=d(l.bottom)>d(n.bottom),v="left"===i&&h||"right"===i&&f||"top"===i&&g||"bottom"===i&&m,y=-1!==["top","bottom"].indexOf(i),b=!!t.flipVariations&&(y&&"start"===o&&h||y&&"end"===o&&f||!y&&"start"===o&&g||!y&&"end"===o&&m),w=!!t.flipVariationsByContent&&(y&&"start"===o&&f||y&&"end"===o&&h||!y&&"start"===o&&m||!y&&"end"===o&&g),x=b||w;(p||v||x)&&(e.flipped=!0,(p||v)&&(i=a[c+1]),x&&(o=function(e){return"end"===e?"start":"start"===e?"end":e}(o)),e.placement=i+(o?"-"+o:""),e.offsets.popper=S({},e.offsets.popper,B(e.instance.popper,e.offsets.reference,e.placement)),e=F(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,r=i.popper,o=i.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return r[a?"left":"top"]=o[n]-(s?r[a?"width":"height"]:0),e.placement=L(t),e.offsets.popper=C(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!Z(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=I(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,r=e.offsets.popper,o=I(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:t.gpuAcceleration,s=h(e.instance.popper),c=O(s),l={position:r.position},u=function(e,t){var n=e.offsets,i=n.popper,r=n.reference,o=Math.round,a=Math.floor,s=function(e){return e},c=o(r.width),l=o(i.width),u=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),p=t?u||d||c%2==l%2?o:a:s,h=t?o:s;return{left:p(c%2==1&&l%2==1&&!d&&t?i.left-1:i.left),top:h(i.top),bottom:h(i.bottom),right:p(i.right)}}(e,window.devicePixelRatio<2||!X),d="bottom"===n?"top":"bottom",p="right"===i?"left":"right",f=V("transform"),g=void 0,m=void 0;if(m="bottom"===d?"HTML"===s.nodeName?-s.clientHeight+u.bottom:-c.height+u.bottom:u.top,g="right"===p?"HTML"===s.nodeName?-s.clientWidth+u.right:-c.width+u.right:u.left,a&&f)l[f]="translate3d("+g+"px, "+m+"px, 0)",l[d]=0,l[p]=0,l.willChange="transform";else{var v="bottom"===d?-1:1,y="right"===p?-1:1;l[d]=m*v,l[p]=g*y,l.willChange=d+", "+p}var b={"x-placement":e.placement};return e.attributes=S({},b,e.attributes),e.styles=S({},l,e.styles),e.arrowStyles=S({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return K(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&K(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,r){var o=R(r,t,e,n.positionFixed),a=D(n.placement,o,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),K(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},ae=function(){function e(t,n){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};x(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=r(this.update.bind(this)),this.options=S({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(S({},e.Defaults.modifiers,a.modifiers)).forEach((function(t){i.options.modifiers[t]=S({},e.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return S({name:e},i.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&o(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)})),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return E(e,[{key:"update",value:function(){return z.call(this)}},{key:"destroy",value:function(){return $.call(this)}},{key:"enableEventListeners",value:function(){return q.call(this)}},{key:"disableEventListeners",value:function(){return G.call(this)}}]),e}();ae.Utils=("undefined"!=typeof window?window:e).PopperUtils,ae.placements=J,ae.Defaults=oe,t.a=ae}).call(this,n(36))},,function(e,t,n){"use strict";var i=n(37);function r(e,t,n){var r=i.extend(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach((function(i){e.set(i,t.inverse,n)}))}function o(e,t){if(!(this instanceof o))return new o(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}o.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?r(this,t,e):function(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var o=r;r=null,o&&e.unset(o,i,n),r=t,e.set(r,i,n)}}})}(this,t,e)},o.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return i.isExtended(n)||r(this,t,e),n},o.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},o.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},o.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)},e.exports=o},function(e,t,n){"use strict";n.r(t),t.default='<?xml version="1.0" encoding="UTF-8"?>\n<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:dela="http://sborex.com/dela/schema" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_0umh4rs" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="3.4.0">\n  <bpmn:process id="account" name="Customer" processType="None" isClosed="false" isExecutable="false">\n    <bpmn:documentation>Customer record lifecycle and interaction process</bpmn:documentation>\n    <bpmn:sequenceFlow id="SequenceFlow_1n32aoo" sourceRef="StartEvent_0tkd0h7" targetRef="Task_1qb7nkw" />\n    <bpmn:sequenceFlow id="SequenceFlow_17b5ej9" sourceRef="ExclusiveGateway_0w35i3x" targetRef="IntermediateThrowEvent_1po23nv" />\n    <bpmn:intermediateCatchEvent id="IntermediateThrowEvent_1po23nv" name="update">\n      <bpmn:incoming>SequenceFlow_17b5ej9</bpmn:incoming>\n      <bpmn:incoming>SequenceFlow_0vjd48z</bpmn:incoming>\n      <bpmn:outgoing>SequenceFlow_076z9sp</bpmn:outgoing>\n      <bpmn:signalEventDefinition signalRef="a87a9fe68-066a-4907-9f11-6118ad78e49b" />\n    </bpmn:intermediateCatchEvent>\n    <bpmn:sequenceFlow id="SequenceFlow_076z9sp" sourceRef="IntermediateThrowEvent_1po23nv" targetRef="Task_0sud9v5" />\n    <bpmn:sequenceFlow id="SequenceFlow_0vjd48z" sourceRef="Task_0sud9v5" targetRef="IntermediateThrowEvent_1po23nv" />\n    <bpmn:startEvent id="StartEvent_0tkd0h7" name="new">\n      <bpmn:outgoing>SequenceFlow_1n32aoo</bpmn:outgoing>\n      <bpmn:signalEventDefinition signalRef="newCustomer" />\n    </bpmn:startEvent>\n    <bpmn:sequenceFlow id="SequenceFlow_1dsvbp5" sourceRef="ExclusiveGateway_0w35i3x" targetRef="Task_03h46wc" />\n    <bpmn:userTask id="Task_03h46wc" name="test 1" implementation="##unspecified" dela:permit="">\n      <bpmn:incoming>SequenceFlow_1dsvbp5</bpmn:incoming>\n      <bpmn:incoming>SequenceFlow_0lqttxg</bpmn:incoming>\n      <bpmn:outgoing>SequenceFlow_10ql3pz</bpmn:outgoing>\n      <dela:view type="text/html" code="" permit="fedd">@{fmt.label(\'age\')}: &lt;input type="input" name="age"/&gt;</dela:view>\n      <dela:view type="text/html" code="history" permit="fedd">@{fmt.label(\'age\')}: @{step.context.age}</dela:view>\n    </bpmn:userTask>\n    <bpmn:sequenceFlow id="SequenceFlow_10ql3pz" sourceRef="Task_03h46wc" targetRef="Task_1va4whm" />\n    <bpmn:userTask id="Task_1va4whm" name="test 2" implementation="##unspecified" dela:permit="fedd">\n      <bpmn:incoming>SequenceFlow_10ql3pz</bpmn:incoming>\n      <bpmn:outgoing>SequenceFlow_0lqttxg</bpmn:outgoing>\n      <dela:view type="text/html" code="" permit="fedd">@{fmt.label(\'job\')}: &lt;input type="input" name="job"/&gt;</dela:view>\n      <dela:view type="text/html" code="history" permit="fedd">@{fmt.label(\'job\')}: @{step.context.job}</dela:view>\n    </bpmn:userTask>\n    <bpmn:sequenceFlow id="SequenceFlow_0lqttxg" sourceRef="Task_1va4whm" targetRef="Task_03h46wc" />\n    <bpmn:parallelGateway id="ExclusiveGateway_0w35i3x">\n      <bpmn:incoming>SequenceFlow_1ezcvcs</bpmn:incoming>\n      <bpmn:outgoing>SequenceFlow_17b5ej9</bpmn:outgoing>\n      <bpmn:outgoing>SequenceFlow_1dsvbp5</bpmn:outgoing>\n    </bpmn:parallelGateway>\n    <bpmn:sequenceFlow id="SequenceFlow_1ezcvcs" sourceRef="Task_1qb7nkw" targetRef="ExclusiveGateway_0w35i3x" />\n    <bpmn:scriptTask id="Task_1qb7nkw" name="Create Customer" scriptFormat="mvel">\n      <bpmn:incoming>SequenceFlow_1n32aoo</bpmn:incoming>\n      <bpmn:outgoing>SequenceFlow_1ezcvcs</bpmn:outgoing>\n      <bpmn:script>sequence.context.put(\'customer\', result.customer)</bpmn:script>\n    </bpmn:scriptTask>\n    <bpmn:scriptTask id="Task_0sud9v5" name="Append Account" scriptFormat="javascript">\n      <bpmn:incoming>SequenceFlow_076z9sp</bpmn:incoming>\n      <bpmn:outgoing>SequenceFlow_0vjd48z</bpmn:outgoing>\n      <bpmn:script>customer.accounts.addAll(result.customer.accounts);</bpmn:script>\n    </bpmn:scriptTask>\n    <bpmn:textAnnotation id="TextAnnotation_1fuigo5">\n      <bpmn:text>The customer id was not found</bpmn:text>\n    </bpmn:textAnnotation>\n    <bpmn:association id="Association_1nd0srq" sourceRef="StartEvent_0tkd0h7" targetRef="TextAnnotation_1fuigo5" />\n    <bpmn:textAnnotation id="TextAnnotation_0a3lb54">\n      <bpmn:text>Associate the customer data with this process instance</bpmn:text>\n    </bpmn:textAnnotation>\n    <bpmn:association id="Association_1drtpyr" sourceRef="Task_1qb7nkw" targetRef="TextAnnotation_0a3lb54" />\n    <bpmn:textAnnotation id="TextAnnotation_1upifol">\n      <bpmn:text>Question to a customer</bpmn:text>\n    </bpmn:textAnnotation>\n    <bpmn:association id="Association_01y0iy6" sourceRef="Task_03h46wc" targetRef="TextAnnotation_1upifol" />\n    <bpmn:textAnnotation id="TextAnnotation_13w3o9u">\n      <bpmn:text>Another question. Know your customer!</bpmn:text>\n    </bpmn:textAnnotation>\n    <bpmn:association id="Association_18khcnr" sourceRef="Task_1va4whm" targetRef="TextAnnotation_13w3o9u" />\n    <bpmn:textAnnotation id="TextAnnotation_1e9lse7">\n      <bpmn:text>Existing customer, new account</bpmn:text>\n    </bpmn:textAnnotation>\n    <bpmn:association id="Association_1r58zku" sourceRef="IntermediateThrowEvent_1po23nv" targetRef="TextAnnotation_1e9lse7" />\n    <bpmn:textAnnotation id="TextAnnotation_1onv8iv">\n      <bpmn:text>Add account data to the customer record</bpmn:text>\n    </bpmn:textAnnotation>\n    <bpmn:association id="Association_19mmfv3" sourceRef="Task_0sud9v5" targetRef="TextAnnotation_1onv8iv" />\n    <dela:view type="text/html" permit="fedd"><![CDATA[\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">        \n        <title>\n            @{customer.lastName}\n            @{customer.firstName}\n            @{customer.middleName}\n        </title>\n        <link rel="stylesheet" href="res/w3.css"/>\n    </head>\n    <body>\n\n        <div class="w3-sidebar w3-bar-block w3-collapse w3-card w3-animate-right w3-padding" style="width:300px;right:0px">\n            <button onclick="this.parentElement.style.display = \'none\'" class="w3-bar-item w3-button w3-hide-large">Close </button>\n            <div>@includeNamed{\'customer?dialogue\'}</div>\n        </div>\n        <div class="w3-main" style="margin-right:300px">\n            <div class="w3-container w3-bar w3-blue-gray">\n                <span class="w3-bar-item">\n                    @{fmt.label(\'customer\')}\n                </span>\n                <button onclick="for (let bar of document.getElementsByClassName(\'w3-sidebar w3-collapse w3-animate-right\')) {\n                            bar.style.display = \'block\'; }" class="w3-bar-item w3-button w3-hide-large w3-right"></button>\n            </div>\n            <div class="w3-row w3-container">\n                <div class="w3-panel w3-third w3-card-4 w3-xlarge w3-light-blue">\n                    @{customer.lastName}<br/>\n                    @{customer.firstName}<br/>\n                    @{customer.middleName}<br/>\n                    @{fmt.uDate(customer.dateOfBirth,"mn")}\n                </div>\n                <div class="w3-third w3-panel">\n                    \x3c!--search for main address--\x3e\n                    \x3c!--TODO: make a function to search tags--\x3e\n                    @code{mainAddress = null}\n                    @foreach{contact: customer.contacts}\n                        @foreach{type: contact.tags}\n                            @if{type==\'address\'}\n                                @foreach{tag: contact.tags}\n                                    @if{tag==\'main\'}\n                                        @code{mainAddress = contact}\n                                    @end{}\n                                @end{}                            \n                            @end{}\n                        @end{}                            \n                    @end{}\n                    <div class="w3-card">\n                        <div class="w3-container w3-light-gray">\n                            @if{mainAddress==null}\n                                @{fmt.label(\'addresses\')}\n                            @else{}\n                                <span style="font-weight: bolder">\n                                    @foreach{tag: mainAddress.tags}\n                                        @if{tag!=\'main\' && tag!=\'address\'}\n                                            @{fmt.label(\'contact.tag.\'+tag+\'.abbr\')}\n                                        @end{}\n                                    @end{}                            \n                                </span>\n                                @{fmt.noHtml(mainAddress.address)}\n                            @end{}\n                                <button onclick="if(this.parentElement.nextElementSibling.style.display==\'none\'){this.parentElement.nextElementSibling.style.display=\'block\';this.innerHTML=\'&#x25B2;\';}else{this.parentElement.nextElementSibling.style.display=\'none\';this.innerHTML=\'&#x25BC;\';}" class="w3-button w3-right">\n                                    @if{mainAddress!=null}&#x25BC;@else{}&#x25B2;@end{}\n                                </button>\n                        </div>                        \n                        <div class="w3-container w3-responsive" style="display:@if{mainAddress!=null}none@else{}block@end{}">\n                            <table class="w3-table w3-striped w3-small">\n                                <thead>\n                                    <tr>\n                                        <th scope="col">@{fmt.label(\'contact.tag\')}</th>\n                                        <th scope="col">@{fmt.label(\'address\')}</th>\n                                    </tr>\n                                </thead>              \n                                <tbody>\n                                    @foreach{contact: customer.contacts}\n                                        @foreach{type: contact.tags}\n                                            @if{type==\'address\'}\n                                            <tr>\n                                                <th scope="row">\n                                                    @foreach{tag: contact.tags}\n                                                        @if{tag!=\'main\' && tag!=\'address\'}\n                                                            @{fmt.label(\'contact.tag.\'+tag+\'.abbr\')}\n                                                        @end{}\n                                                    @end{}                            \n                                                </th>\n                                                <td>\n                                                    @{fmt.noHtml(contact.address)}\n                                                </td>\n                                            </tr>\n                                            @end{}                                                \n                                        @end{}\n                                    @end{}\n                                </tbody>\n                            </table>\n                        </div>                        \n                    </div>\n                    \x3c!--search for main id--\x3e                \n                    @code{mainIdentifier = null}\n                    @foreach{identifier: customer.identifiers}\n                        @foreach{type: identifier.tags}\n                            @if{type==\'main\'}\n                                @code{mainIdentifier = identifier}\n                            @end{}\n                        @end{}                            \n                    @end{}\n                    <div class="w3-card">\n                        <div class="w3-container w3-light-gray">\n                            @if{mainIdentifier==null}\n                                @{fmt.label(\'person.identifiers\')}\n                            @else{}\n                                <span style="font-weight: bolder">\n                                    @foreach{tag: mainIdentifier.tags}\n                                        @if{tag!=\'main\'}\n                                            @{fmt.label(\'person.identifier.tag.\'+tag)}\n                                        @end{}\n                                    @end{}                            \n                                </span>\n                                @{fmt.noHtml(mainIdentifier.number)}\n                            @end{}\n                                <button onclick="if(this.parentElement.nextElementSibling.style.display==\'none\'){this.parentElement.nextElementSibling.style.display=\'block\';this.innerHTML=\'&#x25B2;\';}else{this.parentElement.nextElementSibling.style.display=\'none\';this.innerHTML=\'&#x25BC;\';}" class="w3-button w3-right">\n                                    @if{mainIdentifier!=null}&#x25BC;@else{}&#x25B2;@end{}\n                                </button>\n                        </div>\n                        <div class="w3-container w3-responsive" style="display:@if{mainIdentifier!=null}none@else{}block@end{}">\n                            <table class="w3-table w3-striped w3-small">\n                                <thead>\n                                    <tr>\n                                        <th scope="col">@{fmt.label(\'person.identifier.tag\')}</th>\n                                        <th scope="col">@{fmt.label(\'person.identifier.number\')}</th>\n                                        <th scope="col">@{fmt.label(\'person.identifier.issuer\')}</th>\n                                        <th scope="col">@{fmt.label(\'person.identifier.validThru\')}</th>\n                                    </tr>\n                                </thead>              \n                                <tbody>\n                                    @foreach{identifier: customer.identifiers}\n                                    <tr>\n                                        <th scope="row">\n                                            @foreach{tag: identifier.tags}\n                                                @if{tag!=\'main\'}\n                                                    @{fmt.label(\'person.identifier.tag.\'+tag+\'.abbr\')}\n                                                @end{}    \n                                            @end{}\n                                        </th>\n                                        <td>@{fmt.noHtml(identifier.number)}</td>\n                                        <td>\n                                            @{fmt.noHtml(identifier.issuer)}\n                                            @if{identifier.containsKey(\'issuedOn\')}\n                                                <br/>@{fmt.label(\'person.identifier.issuedOn\')}: \n                                                @{fmt.uDate(identifier.issuedOn,"mn")}\n                                            @end{}\n                                        </td>\n                                        <td>\n                                            @if{identifier.containsKey(\'validThru\')}\n                                                @{fmt.uDate(identifier.validThru,"mn")}\n                                            @end{}\n                                        </td>\n                                    </tr>\n                                    @end{}\n                                </tbody>\n                            </table>\n                        </div>                        \n                    </div>                        \n                </div>\n                <div class="w3-third w3-panel">\n                        @foreach{contact: customer.contacts}\n                            @foreach{type: contact.tags}\n                                @if{type==\'phone\'}\n                                    <div class="w3-card">\n                                        <div class="w3-container w3-light-gray">\n                                            @{fmt.noHtml(contact.address)}\n                                            <button onclick="if(this.parentElement.nextElementSibling.style.display==\'none\'){this.parentElement.nextElementSibling.style.display=\'block\';this.innerHTML=\'&#x25B2;\';}else{this.parentElement.nextElementSibling.style.display=\'none\';this.innerHTML=\'&#x25BC;\';}" class="w3-button w3-right">\n                                                &#x25BC;\n                                            </button>\n                                        </div>\n                                        <div class="w3-container w3-responsive" style="display:none">\n                                            @foreach{tag: contact.tags}\n                                                @if{tag!=\'phone\'}\n                                                    @{fmt.label(\'contact.tag.\'+tag)}\n                                                @end{}\n                                            @end{}\n                                        </div>\n                                    </div>\n                                @end{}\n                            @end{}\n                        @end{}\n                </div>\n            </div>\n            \n            @foreach{account: customer.accounts}\n                <div class="w3-card">\n                    <div class="w3-container w3-blue-gray">\n                        @{fmt.label(\'account\')}\n                        @{fmt.noHtml(account.id)}\n                        @{fmt.label(\'balance.arrears\')}\n                        @{fmt.number(account.balances.arrears.balance)}\n                        @{fmt.label(\'currency.\'+account.balances.arrears.currency+\'.abbr\')}\n                        <button onclick="if(this.parentElement.nextElementSibling.style.display==\'none\'){this.parentElement.nextElementSibling.style.display=\'block\';this.innerHTML=\'&#x25B2;\';}else{this.parentElement.nextElementSibling.style.display=\'none\';this.innerHTML=\'&#x25BC;\';}" class="w3-button w3-right">\n                            &#x25BC;\n                        </button>\n                    </div>\n                    <div class="w3-container w3-responsive" style="display:none">\n                        <div class="w3-row">\n                            <div class="w3-third">\n                                <table class="w3-panel w3-card w3-table w3-small">\n                                    <tbody>\n                                        <tr>\n                                            <th scope="row" class="w3-right-align">\n                                                @{fmt.label(\'account.identifier\')}\n                                            </th>\n                                            <td>@{fmt.noHtml(account.id)}</td>\n                                        </tr>\n                                        <tr>\n                                            <th scope="row" class="w3-right-align">\n                                                @{fmt.label(\'date\')}\n                                            </th>\n                                            <td>\n                                                @{fmt.uDate(account.dateOpen, "mn")}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <th scope="row" class="w3-right-align">\n                                                @{fmt.label(\'account.product\')}\n                                            </th>\n                                            <td>\n                                                @if{account.product==null}\n                                                    --\n                                                @else{}\n                                                    @{account.product}\n                                                @end{}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <th scope="row" class="w3-right-align">\n                                                @{fmt.label(\'balance.loanAmount\')}\n                                            </th>\n                                            <td>\n                                                @if{account.balances.loanAmount.balance==null}\n                                                    --\n                                                @else{}\n                                                    @{fmt.number(account.balances.loanAmount.balance)}\n                                                    @{fmt.label(\'currency.\'+account.balances.loanAmount.currency+\'.abbr\')}\n                                                @end{}\n                                            </td>\n                                        </tr>\n                                    </tbody>                                        \n                                </table>    \n                            </div>\n                            <div class="w3-panel w3-third w3-card">\n                                \n                                <table class="w3-table w3-small w3-bordered">\n                                    <tbody>\n                                        @foreach{balance: account.balances.entrySet()}\n                                            @if{balance.value.balance!=null}\n                                                <tr>\n                                                    <th scope="row" class="w3-right-align">\n                                                        @{fmt.label(\'balance.\'+balance.key), balance.key}\n                                                    </th>\n                                                    <td class="w3-right-align">\n                                                        @{fmt.number(balance.value.balance)}\n                                                        @{fmt.label(\'currency.\'+balance.value.currency+\'.abbr\')}\n                                                    </td>\n                                                </tr>\n                                            @end{}\n                                        @end{}\n                                    </tbody>                                        \n                                </table>\n\n                            </div>\n                            <div class="w3-panel w3-third w3-card">\n                                \n                                <table class="w3-table w3-small">\n                                    <tbody>\n                                        <tr>\n                                            <th scope="row">\n                                                @{fmt.label(\'account.identifier\')}\n                                            </th>\n                                            <td>@{fmt.noHtml(account.id)}</td>\n                                        </tr>\n                                    </tbody>                                        \n                                </table>\n\n                            </div>\n                            \n                        </div>\n                    </div>\n                </div>\n            @end{}\n        </div>\n    </body>\n</html>\n]]></dela:view>\n    <dela:view type="text/html" code="dialogue" permit="fedd">&lt;script src="/res/dialogue.js"&gt;&lt;/script&gt;\n        \n        @foreach{step: sequence.status}\n            @if{step.item.tagName==\'userTask\'}\n                &lt;form onsubmit="return completeAction(event);" action="@{step.id}" method="post"&gt; \n                   @includeNamed{\'customer/\'+step.item.getAttribute(\'name\')}\n                   &lt;input type="submit"/&gt;\n                &lt;/form&gt;\n            @end{}\n        @end{}\n        \n        @foreach{step: sequence.history}\n            @if{step.item.tagName==\'userTask\'}\n                &lt;div&gt;@includeNamed{\'customer/\'+step.item.getAttribute(\'name\')+\'?history\'}&lt;hr/&gt;&lt;/div&gt;\n            @end{}\n        @end{}</dela:view>\n    <dela:view type="text/html" code="listitem" permit="fedd">@{customer.lastName}\n        @{customer.firstName}\n        @{customer.middleName},\n        @{fmt.uDate(customer.dateOfBirth, "mn")},\n        @{customer.accounts.size()} accounts</dela:view>\n    <dela:bean code="labels" language="mvel">exchangeWebService.formatter.addLabels(\'ru\', [\n\'age\': \'\',\n\'job\': \'\',        \n        \n\'customer\': \'\',\n\'customers\': \'\',\n\'account\': \'\',\n\'accounts\': \'\',\n\'phone\': \'\',\n\'phones\': \'\',\n\n\'date\': \'\',\n\n\n\'person.identifier\': \'\',\n\'person.identifiers\': \'\',\n\'person.identifier.number\': \'\',\n\'person.identifier.issuer\': \' \',\n\'person.identifier.issuedOn\': \' \',\n\'person.identifier.validThru\': \' \',\n\n\n\'account.identifier\': \' \',\n\'account.identifiers\': \' \',\n\'account.product\': \'\',\n\n\n\n\'person.tag\': \'\',\n\'person.tag.individual\': \' \',\n\'person.tag.individual.abbr\': \'.\',\n\n\'person.identifier.tag\': \'\',\n\'person.identifier.tag.main\': \'\',\n\'person.identifier.tag.main.abbr\': \'\',\n\'person.identifier.tag.internalPassport\': \'\',\n\'person.identifier.tag.internalPassport.abbr\': \'\',\n\'person.identifier.tag.internalPassport.short\': \'\',\n\'person.identifier.tag.passport\': \' \',\n\'person.identifier.tag.passport.abbr\': \'.\',\n\'person.identifier.tag.passport.short\': \'\',\n\n\'contact.tag\': \'\',\n\'contact.tag.phone\': \'\',\n\'contact.tag.phone.abbr\': \'\',\n\'contact.tag.address\': \'\',\n\'contact.tag.address.abbr\': \'\',\n\n\'contact.tag.main\': \'\',\n\'contact.tag.main.abbr\': \'\',\n\'contact.tag.registration\': \'\',\n\'contact.tag.registration.abbr\': \'\',\n\n\'contact.tag.home\': \'\',\n\'contact.tag.home.abbr\': \'\',\n\'contact.tag.work\': \'\',\n\'contact.tag.work.abbr\': \'\',\n\n\'contact.tag.mobile\': \'\',\n\'contact.tag.mobile.abbr\': \'\',\n\'contact.tag.landline\': \'\',\n\'contact.tag.landline.abbr\': \'\',\n\n\'currency\': \'\',\n\'currency.RUR\': \' \',\n\'currency.RUR.abbr\': \'\',\n\'currency.EUR\': \'\',\n\'currency.EUR.abbr\': \'\',\n\'currency.USD\': \' \',\n\'currency.USD.abbr\': \'\',\n\n\'addresses\': \'\',\n\'address\': \'\',\n\n\n\'balance.loanAmount\': \' \',\n\'balance.arrears\': \' \',\n\'balance.principalDebt\': \' \',\n\'balance.fee\': \'\',\n\'balance.fine\': \'\',\n\'balance.penalty\': \'\',\n\'balance.outstanding\': \'\'\n        ]);\n        exchangeWebService.formatter.addLabels(\'en\', [\n\'age\': \'Age\',\n\'job\': \'Job\',        \n        \n\'customer\': \'Customer\',\n\'address\': \'Address\',\n\'addresses\': \'Addresses\',\n\'currency.RUR\': \'Russian Ruble\',\n\'currency.RUR.abbr\': \'rub\',\n\'currency.EUR\': \'Euro\',\n\'currency.EUR.abbr\': \'euro\',\n\'currency.USD\': \'US Dollar\',\n\'currency.USD.abbr\': \'dol\',\n\'customers\': \'Customers\',\n\'account\': \'Account\',\n\'accounts\': \'Accounts\',\n\'phone\': \'Phone\',\n\'phones\': \'Phones\',\n\'person.identifier\': \'Identification\',\n\'person.identifiers\': \'Identifications\',\n\'account.identifier\': \'Account Number\',\n\'account.identifiers\': \'Account Numbers\',\n\'person.tag.individual\': \'Individual\',\n\'person.tag.individual.abbr\': \'ind\',\n\'person.tag\': \'Type\',\n\'person.identifier.tag.internalPassport\': \'Internal Passport\',\n\'person.identifier.tag.internalPassport.abbr\': \'int.passp.\',\n\'person.identifier.tag.internalPassport.short\': \'Internal Passport\',\n\'person.identifier.tag.passport\': \'Passport\',\n\'person.identifier.tag.passport.abbr\': \'pass\',\n\'person.identifier.tag.passport.short\': \'Passport\',\n\'contact.tag\': \'Type\',\n\'contact.tag.phone\': \'Phone\',\n\'contact.tag.address\': \'Address\',\n\'contact.tag.main\': \'Default\',\n\'contact.tag.main.abbr\': \'def\',\n\'contact.tag.home\': \'Home\',\n\'contact.tag.home.abbr\': \'h\',\n\'contact.tag.work\': \'Work\',\n\'contact.tag.work.abbr\': \'w\',\n\'contact.tag.mobile\': \'Mobile\',\n\'contact.tag.mobile.abbr\': \'m\',\n\'contact.tag.landline\': \'Landline\',\n\'contact.tag.landline.abbr\': \'l\',\n\'currency\': \'Currency\',\n\'person.identifier.tag\': \'Type\',\n\'person.identifier.tag.main\': \'Main\',\n\'person.identifier.tag.main.abbr\': \'main\',\n\'contact.tag.phone.abbr\': \'ph\',\n\'contact.tag.address.abbr\': \'addr\',\n\'contact.tag.registration\': \'Registration\',\n\'contact.tag.registration.abbr\': \'reg\',\n\'balance.loanAmount\': \'Loan Amount\',\n\'balance.arrears\': \'Arrears\',\n\'balance.principalDebt\': \'Principal Debt\',\n\'balance.fee\': \'Fee\',\n\'balance.fine\': \'Fine\',\n\'balance.penalty\': \'Penalty\',\n\'balance.outstanding\': \'Outstanding\',\n\'date\': \'Date\',\n\'account.product\': \'Product\',\n\'person.identifier.issuedOn\': \'Issued\',\n\'person.identifier.issuer\': \'Issuer\',\n\'person.identifier.number\': \'Number\',\n\'person.identifier.validThru\': \'Valid Thru\'                \n        ])</dela:bean>\n  </bpmn:process>\n  <bpmn:signal id="a87a9fe68-066a-4907-9f11-6118ad78e49b" name="updateCustomer_@{customer.id}" />\n  <bpmn:signal id="newCustomer" name="newCustomer" />\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="account">\n      <bpmndi:BPMNShape id="TextAnnotation_1fuigo5_di" bpmnElement="TextAnnotation_1fuigo5">\n        <dc:Bounds x="40" y="0" width="100" height="41" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="TextAnnotation_0a3lb54_di" bpmnElement="TextAnnotation_0a3lb54">\n        <dc:Bounds x="200" y="-30" width="167" height="43" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="TextAnnotation_1upifol_di" bpmnElement="TextAnnotation_1upifol">\n        <dc:Bounds x="450" y="-30" width="100" height="41" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="TextAnnotation_13w3o9u_di" bpmnElement="TextAnnotation_13w3o9u">\n        <dc:Bounds x="620" y="-30" width="100" height="55" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="TextAnnotation_1e9lse7_di" bpmnElement="TextAnnotation_1e9lse7">\n        <dc:Bounds x="370" y="163" width="100" height="55" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="TextAnnotation_1onv8iv_di" bpmnElement="TextAnnotation_1onv8iv">\n        <dc:Bounds x="390" y="240" width="173" height="35" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id="SequenceFlow_1ezcvcs_di" bpmnElement="SequenceFlow_1ezcvcs">\n        <di:waypoint x="199" y="99" />\n        <di:waypoint x="242" y="99" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_0lqttxg_di" bpmnElement="SequenceFlow_0lqttxg">\n        <di:waypoint x="515" y="111" />\n        <di:waypoint x="442" y="111" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_10ql3pz_di" bpmnElement="SequenceFlow_10ql3pz">\n        <di:waypoint x="442" y="85" />\n        <di:waypoint x="515" y="85" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_1dsvbp5_di" bpmnElement="SequenceFlow_1dsvbp5">\n        <di:waypoint x="292" y="99" />\n        <di:waypoint x="342" y="99" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_0vjd48z_di" bpmnElement="SequenceFlow_0vjd48z">\n        <di:waypoint x="217" y="295" />\n        <di:waypoint x="167" y="295" />\n        <di:waypoint x="167" y="191" />\n        <di:waypoint x="249" y="191" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_076z9sp_di" bpmnElement="SequenceFlow_076z9sp">\n        <di:waypoint x="267" y="209" />\n        <di:waypoint x="267" y="255" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_17b5ej9_di" bpmnElement="SequenceFlow_17b5ej9">\n        <di:waypoint x="267" y="124" />\n        <di:waypoint x="267" y="173" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="SequenceFlow_1n32aoo_di" bpmnElement="SequenceFlow_1n32aoo">\n        <di:waypoint x="40" y="99" />\n        <di:waypoint x="99" y="99" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id="IntermediateCatchEvent_14kc4pm_di" bpmnElement="IntermediateThrowEvent_1po23nv">\n        <dc:Bounds x="249" y="173" width="36" height="36" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x="283" y="163" width="33" height="14" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="StartEvent_1goog8w_di" bpmnElement="StartEvent_0tkd0h7">\n        <dc:Bounds x="4" y="81" width="36" height="36" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x="12" y="124" width="20" height="14" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="UserTask_1jggbzb_di" bpmnElement="Task_03h46wc">\n        <dc:Bounds x="342" y="59" width="100" height="80" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="UserTask_13ng4s0_di" bpmnElement="Task_1va4whm">\n        <dc:Bounds x="515" y="59" width="100" height="80" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="ParallelGateway_1s7iikn_di" bpmnElement="ExclusiveGateway_0w35i3x">\n        <dc:Bounds x="242" y="74" width="50" height="50" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="ScriptTask_1hvd2kk_di" bpmnElement="Task_1qb7nkw">\n        <dc:Bounds x="99" y="59" width="100" height="80" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id="ScriptTask_0sk0gkr_di" bpmnElement="Task_0sud9v5">\n        <dc:Bounds x="217" y="255" width="100" height="80" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id="Association_1nd0srq_di" bpmnElement="Association_1nd0srq">\n        <di:waypoint x="33" y="85" />\n        <di:waypoint x="69" y="41" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="Association_1drtpyr_di" bpmnElement="Association_1drtpyr">\n        <di:waypoint x="184" y="59" />\n        <di:waypoint x="225" y="13" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="Association_01y0iy6_di" bpmnElement="Association_01y0iy6">\n        <di:waypoint x="430" y="59" />\n        <di:waypoint x="475" y="11" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="Association_18khcnr_di" bpmnElement="Association_18khcnr">\n        <di:waypoint x="602" y="59" />\n        <di:waypoint x="633" y="25" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="Association_1r58zku_di" bpmnElement="Association_1r58zku">\n        <di:waypoint x="285" y="189" />\n        <di:waypoint x="370" y="182" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id="Association_19mmfv3_di" bpmnElement="Association_19mmfv3">\n        <di:waypoint x="317" y="284" />\n        <di:waypoint x="390" y="267" />\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>'},,,function(e,t,n){"use strict";n.r(t);var i=n(4),r=n.n(i),o=n(1),a=n.n(o);var s=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return"0";for(var i=Math.log(Math.pow(2,e))/Math.log(n),r=2;i===1/0;r*=2)i=Math.log(Math.pow(2,e/r))/Math.log(n)*r;var o=i-Math.floor(i),a="";for(r=0;r<Math.floor(i);r++){a=Math.floor(Math.random()*n).toString(n)+a}if(o){var s=Math.pow(n,o);a=Math.floor(Math.random()*s).toString(n)+a}var c=parseInt(a,n);return c!==1/0&&c>=Math.pow(2,e)?t(e,n):a};t.rack=function(e,n,i){var r=function(r){var a=0;do{if(a++>10){if(!i)throw new Error("too many ID collisions, use more bits");e+=i}var s=t(e,n)}while(Object.hasOwnProperty.call(o,s));return o[s]=r,s},o=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=n||16,r}}));function c(e){if(!(this instanceof c))return new c(e);e=e||[128,36,1],this._seed=e.length?s.rack(e[0],e[1],e[2]):e}c.prototype.next=function(e){return this._seed(e||!0)},c.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},c.prototype.claim=function(e,t){this._seed.set(e,t||!0)},c.prototype.assigned=function(e){return this._seed.get(e)||!1},c.prototype.unclaim=function(e){delete this._seed.hats[e]},c.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var l=c;function u(e){return Array.prototype.concat.apply([],e)}var d=Object.prototype.toString,p=Object.prototype.hasOwnProperty;function h(e){return void 0===e}function f(e){return void 0!==e}function g(e){return null==e}function m(e){return"[object Array]"===d.call(e)}function v(e){return"[object Object]"===d.call(e)}function y(e){return"[object Number]"===d.call(e)}function b(e){var t=d.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function w(e){return"[object String]"===d.call(e)}function x(e,t){return p.call(e,t)}function E(e,t){var n;return t=F(t),S(e,(function(e,i){if(t(e,i))return n=e,!1})),n}function _(e,t){var n=[];return S(e,(function(e,i){t(e,i)&&n.push(e)})),n}function S(e,t){var n;if(!h(e)){var i=m(e)?H:z;for(var r in e)if(x(e,r)&&!1===t(n=e[r],i(r)))return n}}function C(e,t){return h(e)?[]:(function(e){if(!m(e))throw new Error("must supply array")}(e),t=F(t),e.filter((function(e,n){return!t(e,n)})))}function O(e,t,n){return S(e,(function(e,i){n=t(n,e,i)})),n}function k(e,t){return!!O(e,(function(e,n,i){return e&&t(n,i)}),!0)}function T(e,t){return!!E(e,t)}function P(e,t){var n=[];return S(e,(function(e,i){n.push(t(e,i))})),n}function j(e){return e&&Object.keys(e)||[]}function A(e){return j(e).length}function M(e){return P(e,(function(e){return e}))}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=I(t),S(e,(function(e){var i=t(e)||"_",r=n[i];r||(r=n[i]=[]),r.push(e)})),n}function R(e){e=I(e);for(var t={},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];S(i,(function(n){return D(n,e,t)}));var o=P(t,(function(e,t){return e[0]}));return o}var N=R;function L(e,t){t=I(t);var n=[];return S(e,(function(e,i){for(var r=t(e,i),o={d:r,v:e},a=0;a<n.length;a++){if(r<n[a].d)return void n.splice(a,0,o)}n.push(o)})),P(n,(function(e){return e.v}))}function B(e){return function(t){return k(e,(function(e,n){return t[n]===e}))}}function I(e){return b(e)?e:function(t){return t[e]}}function F(e){return b(e)?e:function(t){return t===e}}function z(e){return e}function H(e){return Number(e)}function V(e,t){var n,i,r,o;function a(){var a=Date.now(),c=o+t-a;if(c>0)return s(c);e.apply(r,i),n=o=i=r=void 0}function s(e){n=setTimeout(a,e)}return function(){o=Date.now();for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];i=a,r=this,n||s(t)}}function $(e,t){return e.bind(t)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function W(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return U.apply(void 0,[e].concat(n))}function q(e,t){var n={},i=Object(e);return S(t,(function(t){t in i&&(n[t]=e[t])})),n}function G(e,t){var n={};return S(Object(e),(function(e,i){-1===t.indexOf(i)&&(n[i]=e)})),n}var Y=n(0);function K(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}function X(e,t){return t.appendChild(K(e,t))}function Z(e,t){return X(t,e),e}var J={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Q(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=J[i];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function ee(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return J[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);Q(e,t,n)}else!function(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)Q(e,i,t[i])}(e,t);return e}function te(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var ne=/\s+/,ie=Object.prototype.toString;function re(e){return void 0!==e}function oe(e){return new ae(e)}function ae(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function se(e){var t=e.parentNode;return t&&t.removeChild(e),e}function ce(e){for(var t;t=e.firstChild;)se(t);return e}function le(e){return e.cloneNode(!0)}ae.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~te(t,e)||t.push(e),re(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},ae.prototype.remove=function(e){if("[object RegExp]"===ie.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=te(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},ae.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},ae.prototype.toggle=function(e,t){return this.list?(re(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(re(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},ae.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(ne);return""===e[0]&&e.shift(),e},ae.prototype.has=ae.prototype.contains=function(e){return this.list?this.list.contains(e):!!~te(this.array(),e)};var ue="http://www.w3.org/2000/svg",de='<svg xmlns="'+ue+'"';function pe(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(ue)&&(e=de+e.substring(4)):(e=de+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function he(e,t){var n;return"<"===e.charAt(0)?(n=pe(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(ue,e),t&&ee(n,t),n}var fe=he("svg");function ge(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function me(e){return e?fe.createSVGTransformFromMatrix(e):fe.createSVGTransform()}var ve=/([&<>]{1})/g,ye=/([\n\r"]{1})/g,be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function we(e,t){return e.replace(t,(function(e,t){return be[t]||t}))}function xe(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(we(e.textContent,ve));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(n=0,i=(r=e.attributes).length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',we(o.value,ye),'"');if(e.hasChildNodes()){for(t.push(">"),n=0,i=(a=e.childNodes).length;n<i;++n)xe(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",we(e.nodeValue,ve),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Ee(e,t){var n=pe(t);if(ce(e),t){"#document-fragment"!==n.nodeName&&(n=n.documentElement);for(var i,r=(i=n.childNodes,Array.prototype.slice.call(i)),o=0;o<r.length;o++)X(r[o],e)}}function _e(e,t){if(void 0!==t){try{Ee(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}return function(e){for(var t=e.firstChild,n=[];t;)xe(t,n),t=t.nextSibling;return n.join("")}(e)}function Se(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Ce(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Se(e,i))}(n,t)),n.consolidate()}var Oe=/^class /;function ke(e){return"[object Array]"===Object.prototype.toString.call(e)}function Te(){var e=Array.prototype.slice.call(arguments);1===e.length&&ke(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var Pe=/constructor\s*[^(]*\(\s*([^)]*)\)/m,je=/^function\s*[^(]*\(\s*([^)]*)\)/m,Ae=/\/\*([^*]*)\*\//m;function Me(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(function(e){return Oe.test(e.toString())}(e)?Pe:je);return t&&t[1]&&t[1].split(",").map((function(e){return(t=e.match(Ae))?t[1].trim():e.trim()}))||[]}function De(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}}var Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ne(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Le(e,t){t=t||{get:function(e,t){if(n.push(e),!1===t)return null;throw a('No provider for "'+e+'"!')}};var n=[],i=this._providers=Object.create(t._providers||null),r=this._instances=Object.create(null),o=r.injector=this,a=function(e){var t=n.join(" -> ");return n.length=0,new Error(t?e+" (Resolving: "+t+")":e)},s=function e(o,s){if(!i[o]&&-1!==o.indexOf(".")){for(var c=o.split("."),l=e(c.shift());c.length;)l=l[c.shift()];return l}if(Be(r,o))return r[o];if(Be(i,o)){if(-1!==n.indexOf(o))throw n.push(o),a("Cannot resolve circular dependency!");return n.push(o),r[o]=i[o][0](i[o][1]),n.pop(),r[o]}return t.get(o,s)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e){if(!ke(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=Te(e.slice())}var n=e.$inject||Me(e),i=n.map((function(e){return Be(t,e)?t[e]:s(e)}));return{fn:e,dependencies:i}},l=function(e){var t=c(e),n=t.dependencies,i=t.fn;return new(Function.prototype.bind.apply(i,[null].concat(Ne(n))))},u=function(e,t,n){var i=c(e,n),r=i.dependencies,o=i.fn;return o.call.apply(o,[t].concat(Ne(r)))},d=function(e){return Te((function(t){return e.get(t)}))},p={factory:u,type:l,value:function(e){return e}};e.forEach((function(e){function t(e,t){return"value"!==e&&ke(t)&&(t=Te(t.slice())),t}if(e instanceof De)e.forEach((function(e){var n=e[0],r=e[1],o=e[2];i[n]=[p[r],t(r,o),r]}));else if("object"===(void 0===e?"undefined":Re(e)))if(e.__exports__){var n=Object.keys(e).reduce((function(t,n){return"__"!==n.substring(0,2)&&(t[n]=e[n]),t}),Object.create(null)),r=new Le((e.__modules__||[]).concat([n]),o),a=Te((function(e){return r.get(e)}));e.__exports__.forEach((function(e){i[e]=[a,e,"private",r]}))}else Object.keys(e).forEach((function(n){if("private"!==e[n][2]){var r=e[n][0],o=e[n][1];i[n]=[p[r],t(r,o),r]}else i[n]=e[n]}))})),this.get=s,this.invoke=u,this.instantiate=l,this.createChild=function(e,t){if(t&&t.length){var n,r,a,s,c=Object.create(null),l=Object.create(null),u=[],p=[],h=[];for(var f in i)n=i[f],-1!==t.indexOf(f)&&("private"===n[2]?-1===(r=u.indexOf(n[3]))?(a=n[3].createChild([],t),s=d(a),u.push(n[3]),p.push(a),h.push(s),c[f]=[s,f,"private",a]):c[f]=[h[r],f,"private",p[r]]:c[f]=[n[2],n[1]],l[f]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach((function(e){-1!==n[1].$scope.indexOf(e)&&(c[f]=[n[2],n[1]],l[e]=!0)}));t.forEach((function(e){if(!l[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')})),e.unshift(c)}return new Le(e,o)}}function Be(e,t){return Object.hasOwnProperty.call(e,t)}function Ie(e,t){var n=this;t=t||1e3,e.on(["render.shape","render.connection"],t,(function(e,t){var i=e.type,r=t.element,o=t.gfx;if(n.canRender(r))return"render.shape"===i?n.drawShape(o,r):n.drawConnection(o,r)})),e.on(["render.getShapePath","render.getConnectionPath"],t,(function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)}))}function Fe(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function ze(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}function He(e,t){var n=he("polyline");return ee(n,{points:ze(e)}),t&&ee(n,t),n}function Ve(e){return _(e,(function(t){return!E(e,(function(e){return e!==t&&function e(t,n){if(!n)return;if(t===n)return n;if(!t.parent)return;return e(t.parent,n)}(t,e)}))}))}function $e(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function Ue(e,t,n){n=n||0,m(e)||(e=[e]),S(e,(function(e,i){var r=t(e,i,n);m(r)&&r.length&&Ue(r,t,n+1)}))}function We(e,t,n){var i=[],r=[];return Ue(e,(function(e,o,a){$e(i,e,t);var s=e.children;if((-1===n||a<n)&&s&&$e(r,s,t))return s})),i}function qe(e,t){return We(e,!t,-1)}function Ge(e,t){var n,i,r,o;return t=!!t,m(e)||(e=[e]),S(e,(function(e){var a=e;e.waypoints&&!t&&(a=Ge(e.waypoints,!0));var s=a.x,c=a.y,l=a.height||0,u=a.width||0;(s<n||void 0===n)&&(n=s),(c<i||void 0===i)&&(i=c),(s+u>r||void 0===r)&&(r=s+u),(c+l>o||void 0===o)&&(o=c+l)})),{x:n,y:i,height:o-i,width:r-n}}function Ye(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Ke(e){return!(!e||!e.isFrame)}function Xe(e,t){return W({},e||{},t||{})}Ie.prototype.canRender=function(){},Ie.prototype.drawShape=function(){},Ie.prototype.drawConnection=function(){},Ie.prototype.getShapePath=function(){},Ie.prototype.getConnectionPath=function(){};function Ze(e,t){Ie.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}a()(Ze,Ie),Ze.prototype.canRender=function(){return!0},Ze.prototype.drawShape=function(e,t){var n=he("rect");return ee(n,{x:0,y:0,width:t.width||0,height:t.height||0}),Ke(t)?ee(n,this.FRAME_STYLE):ee(n,this.SHAPE_STYLE),Z(e,n),n},Ze.prototype.drawConnection=function(e,t){var n=He(t.waypoints,this.CONNECTION_STYLE);return Z(e,n),n},Ze.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return Fe([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])},Ze.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return Fe(r)},Ze.$inject=["eventBus","styles"];var Je={__init__:["defaultRenderer"],defaultRenderer:["type",Ze],styles:["type",function(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){return W(this.style(t,n),{class:e})},this.style=function(t,n){m(t)||n||(n=t,t=[]);var i=O(t,(function(t,n){return W(t,e[n]||{})}),{});return n?W(i,n):i},this.computeStyle=function(e,n,i){return m(n)||(i=n,n=[]),t.style(n||[],W({},i,e||{}))}}]};function Qe(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function et(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function tt(e,t){return e&&t?e.indexOf(t):-1}function nt(e,t){return Math.round(e*t)/t}function it(e){return y(e)?e+"px":e}function rt(e,t,n){var i=he("g");oe(i).add(t);var r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}var ot={shape:["x","y","width","height"],connection:["waypoints"]};function at(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function st(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}at.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],at.prototype._init=function(e){var t=this._eventBus,n=this._container=function(e){var t=(e=W({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),W(n.style,{position:"relative",overflow:"hidden",width:it(e.width),height:it(e.height)}),t.appendChild(n),n}(e),i=this._svg=he("svg");ee(i,{width:"100%",height:"100%"}),Z(n,i);var r=this._viewport=rt(i,"viewport");this._layers={},!1!==e.deferUpdate&&(this._viewboxChanged=V($(this._viewboxChanged,this),300)),t.on("diagram.init",(function(){t.fire("canvas.init",{svg:i,viewport:r})}),this),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],(function(){delete this._cachedViewbox}),this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},at.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},at.prototype._clear=function(){var e=this;this._elementRegistry.getAll().forEach((function(t){var n=Ye(t);"root"===n?e.setRootElement(null,!0):e._removeElement(t,n)})),delete this._cachedViewbox},at.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},at.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},at.prototype._createLayer=function(e,t){t||(t=0);var n=O(this._layers,(function(e,n){return t>=n.index&&e++,e}),0);return{group:rt(this._viewport,"layer-"+e,n),index:t}},at.prototype.getContainer=function(){return this._container},at.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(S([i.gfx,i.secondaryGfx],(function(e){e&&(n?oe(e).add(t):oe(e).remove(t))})),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},at.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},at.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},at.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),oe(this.getGraphics(e)).has(t)},at.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},at.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},at.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(e){var o=this.getDefaultLayer();r.fire("root.add",{element:e}),i.add(e,o,this._svg),r.fire("root.added",{element:e,gfx:o})}return this._rootElement=e,e},at.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=ot[e];if(!k(n,(function(e){return void 0!==t[e]})))throw new Error("must supply { "+n.join(", ")+" } with "+e)},at.prototype._setParent=function(e,t,n){et(t.children,e,n),e.parent=t},at.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},at.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},at.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},at.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),i.remove(e),Qe(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},at.prototype.removeShape=function(e){return this._removeElement(e,"shape")},at.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},at.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},at.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},at.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},at.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;var t,n,i,r,o,a,s=this._viewport,c=this.getSize();return e?(this._changeViewbox((function(){r=Math.min(c.width/e.width,c.height/e.height);var t=this._svg.createSVGMatrix().scale(r).translate(-e.x,-e.y);Ce(s,t)})),e):(t=this.getDefaultLayer().getBBox(),n=(i=Ce(s))?i.matrix:function(e,t,n,i,r,o){var a=fe.createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return ge(a,e);case 6:return ge(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}(),r=nt(n.a,1e3),o=nt(-n.e||0,1e3),a=nt(-n.f||0,1e3),e=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:c.width/r,height:c.height/r,scale:r,inner:{width:t.width,height:t.height,x:t.x,y:t.y},outer:c})},at.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox((function(){e=W({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),st(t,n)})),{x:n.e,y:n.f}},at.prototype.zoom=function(e,t){return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox((function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)})),nt(i.a,1e3)):this.viewbox(e).scale;var n,i},at.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),r=i.outer,o=i.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!e?n={x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(t=Math.min(1,r.width/o.width,r.height/o.height),n={x:o.x+(e?o.width/2-r.width/t/2:0),y:o.y+(e?o.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t}),this.viewbox(n),this.viewbox(!1).scale},at.prototype._setZoom=function(e,t){var n,i,r,o,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),l=a.createSVGPoint(),u=(i=s.getCTM()).a;return t?(n=W(l,t).matrixTransform(i.inverse()),r=c.translate(n.x,n.y).scale(1/u*e).translate(-n.x,-n.y),o=i.multiply(r)):o=c.scale(e),st(this._viewport,o),o},at.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},at.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();e.waypoints?t=this.getGraphics(e).getBBox():t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},at.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var ct="data-element-id";function lt(e){this._elements={},this._eventBus=e}lt.$inject=["eventBus"],lt.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ee(t,ct,i),n&&ee(n,ct,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},lt.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ee(i.gfx,ct,""),i.secondaryGfx&&ee(i.secondaryGfx,ct,""),delete t[n])},lt.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},lt.prototype.get=function(e){var t;t="string"==typeof e?e:e&&ee(e,ct);var n=this._elements[t];return n&&n.element},lt.prototype.filter=function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(n)})),t},lt.prototype.getAll=function(){return this.filter((function(e){return e}))},lt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach((function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)}))},lt.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},lt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var ut=n(5),dt=n.n(ut),pt=new dt.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ht=new dt.a({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),ft=new dt.a({name:"attachers",collection:!0},{name:"host"}),gt=new dt.a({name:"outgoing",collection:!0},{name:"source"}),mt=new dt.a({name:"incoming",collection:!0},{name:"target"});function vt(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),pt.bind(this,"parent"),ht.bind(this,"labels"),gt.bind(this,"outgoing"),mt.bind(this,"incoming")}function yt(){vt.call(this),pt.bind(this,"children"),ft.bind(this,"host"),ft.bind(this,"attachers")}function bt(){yt.call(this)}function wt(){yt.call(this),ht.bind(this,"labelTarget")}function xt(){vt.call(this),gt.bind(this,"source"),mt.bind(this,"target")}a()(yt,vt),a()(bt,yt),a()(wt,yt),a()(xt,vt);var Et={connection:xt,shape:yt,label:wt,root:bt};function _t(){this._uid=12}_t.prototype.createRoot=function(e){return this.create("root",e)},_t.prototype.createLabel=function(e){return this.create("label",e)},_t.prototype.createShape=function(e){return this.create("shape",e)},_t.prototype.createConnection=function(e){return this.create("connection",e)},_t.prototype.create=function(e,t){return(t=W({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=Et[e];if(!n)throw new Error("unknown type: <"+e+">");return W(new n,t)}(e,t)};var St=Array.prototype.slice;function Ct(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function Ot(){}function kt(e){return e.childNodes[0]}function Tt(e,t,n,i,r){var o=me();o.setTranslate(t,n);var a=me();a.setRotate(i||0,0,0);var s=me();s.setScale(r||1,r||1),Ce(e,[o,a,s])}function Pt(e,t,n){var i=me();i.setTranslate(t,n),Ce(e,i)}function jt(e,t){var n=me();n.setRotate(t,0,0),Ce(e,n)}function At(e,t){this._eventBus=e,this._elementRegistry=t}function Mt(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}Ct.prototype.on=function(e,t,n,i){if(e=m(e)?e:[e],b(t)&&(i=n,n=t,t=1e3),!y(t))throw new Error("priority must be a number");var r=n;i&&((r=$(n,i)).__fn=n.__fn||n);var o=this;e.forEach((function(e){o._addListener(e,{priority:t,callback:r,next:null})}))},Ct.prototype.once=function(e,t,n,i){var r=this;if(b(t)&&(i=n,n=t,t=1e3),!y(t))throw new Error("priority must be a number");function o(){var t=n.apply(i,arguments);return r.off(e,o),t}o.__fn=n,this.on(e,t,o)},Ct.prototype.off=function(e,t){e=m(e)?e:[e];var n=this;e.forEach((function(e){n._removeListener(e,t)}))},Ct.prototype.createEvent=function(e){var t=new Ot;return t.init(e),t},Ct.prototype.fire=function(e,t){var n,i,r,o;if(o=St.call(arguments),"object"==typeof e&&(e=(t=e).type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){n=t instanceof Ot?t:this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},Ct.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},Ct.prototype._destroy=function(){this._listeners={}},Ct.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},Ct.prototype._invokeListener=function(e,t,n){var i;try{void 0!==(i=function(e,t){return e.apply(null,t)}(n.callback,t))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},Ct.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,void(n?n.next=t:this._setListeners(e,t));n=i,i=i.next}n.next=t}else this._setListeners(e,t)},Ct.prototype._getListeners=function(e){return this._listeners[e]},Ct.prototype._setListeners=function(e,t){this._listeners[e]=t},Ct.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r.__fn!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},Ot.prototype.stopPropagation=function(){this.cancelBubble=!0},Ot.prototype.preventDefault=function(){this.defaultPrevented=!0},Ot.prototype.init=function(e){W(this,e||{})},At.$inject=["eventBus","elementRegistry"],At.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n))||(oe(t=he("g")).add("djs-children"),Z(n.parentNode,t)):t=n,t},At.prototype._clear=function(e){var t=kt(e);return Object(Y.c)(t),t},At.prototype._createContainer=function(e,t,n,i){var r=he("g");oe(r).add("djs-group"),void 0!==n?Mt(r,t,t.childNodes[n]):Z(t,r);var o=he("g");oe(o).add("djs-element"),oe(o).add("djs-"+e),i&&oe(o).add("djs-frame"),Z(r,o);var a=he("g");return oe(a).add("djs-visual"),Z(o,a),o},At.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Ke(t))},At.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry;S(O(e,(function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e}),{}),(function(e){var i=e.children;if(i){var r=t._getChildrenContainer(e);S(i.slice().reverse(),(function(e){Mt(n.getGraphics(e).parentNode,r)}))}}))},At.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},At.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},At.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},At.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},At.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),Pt(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?ee(n,"display","none"):ee(n,"display","block")}},At.prototype.remove=function(e){se(this._elementRegistry.getGraphics(e).parentNode)};var Dt={__depends__:[Je],__init__:["canvas"],canvas:["type",at],elementRegistry:["type",lt],elementFactory:["type",_t],eventBus:["type",Ct],graphicsFactory:["type",At]};function Rt(e){var t=[],n=[];function i(e){return t.indexOf(e)>=0}e.forEach((function e(r){i(r)||((r.__depends__||[]).forEach(e),i(r)||(!function(e){t.push(e)}(r),(r.__init__||[]).forEach((function(e){n.push(e)}))))}));var r=new Le(t);return n.forEach((function(e){try{r["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}})),r}function Nt(e,t){this.injector=t=t||function(e){return Rt([{config:["value",e=e||{}]},Dt].concat(e.modules||[]))}(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}function Lt(){}function Bt(e,t){this.model=e,this.properties=t}Nt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Nt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Lt.prototype.get=function(e){return this.$model.properties.get(this,e)},Lt.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},Bt.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Lt.prototype);S(e.properties,(function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)})),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),S(e,$((function(e,t){this.set(t,e)}),this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var It={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ft={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};function zt(e,t){var n=Ft[e];return n?n(t):t}function Ht(e){return!!It[e]}function Vt(e){return!!Ft[e]}function $t(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function Ut(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Wt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,S(e,$(this.registerPackage,this))}function qt(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Gt(e){this.model=e}function Yt(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Kt(e){this.properties=new Gt(this),this.factory=new Bt(this,this.properties),this.registry=new Wt(e,this.properties),this.typeCache={}}Ut.prototype.build=function(){return q(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Ut.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},Ut.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},Ut.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=$t(r[0],i),a=$t(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,e,n),delete e.redefines},Ut.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},Ut.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},Ut.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},Ut.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},Ut.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},Ut.prototype.hasProperty=function(e){return this.propertiesByName[e]},Ut.prototype.addTrait=function(e,t){var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(S(e.properties,$((function(n){n=W({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var i=n.replaces,r=n.redefines;i||r?this.redefineProperty(n,i||r,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))}),this)),i.push(e),n[r]=e)},Wt.prototype.getPackage=function(e){return this.packageMap[e]},Wt.prototype.getPackages=function(){return this.packages},Wt.prototype.registerPackage=function(e){e=W({},e);var t=this.packageMap;qt(t,e,"prefix"),qt(t,e,"uri"),S(e.types,$((function(t){this.registerType(t,e)}),this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},Wt.prototype.registerType=function(e,t){var n=$t((e=W({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:W(e.meta||{})})).name,t.prefix),i=n.name,r={};S(e.properties,$((function(e){var t=$t(e.name,n.prefix),i=t.name;Ht(e.type)||(e.type=$t(e.type,t.prefix).name),W(e,{ns:t,name:i}),r[i]=e}),this)),W(e,{ns:n,name:i,propertiesByName:r}),S(e.extends,$((function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(i)}),this)),this.definePackage(e,t),this.typeMap[i]=e},Wt.prototype.mapTypes=function(e,t,n){var i=Ht(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(e){return a(e,!0)}function a(n,i){var o=$t(n,Ht(n)?"":e.prefix);r.mapTypes(o,t,i)}if(!i)throw new Error("unknown type <"+e.name+">");S(i.superClass,n?o:a),t(i,!n),S(i.traits,o)},Wt.prototype.getEffectiveDescriptor=function(e){var t=$t(e),n=new Ut(t);this.mapTypes(t,(function(e,t){n.addTrait(e,t)}));var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},Wt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},Gt.prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;void 0===n?i?delete e[r]:delete e.$attrs[t]:i?r in e?e[r]=n:Yt(e,i,n):e.$attrs[t]=n},Gt.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&Yt(e,n,[]),e[i]},Gt.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},Gt.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},Gt.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},Kt.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},Kt.prototype.getType=function(e){var t=this.typeCache,n=w(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},Kt.prototype.createAny=function(e,t,n){var i=$t(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),S(n,(function(e,t){v(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e})),r},Kt.prototype.getPackage=function(e){return this.registry.getPackage(e)},Kt.prototype.getPackages=function(){return this.registry.getPackages()},Kt.prototype.getElementDescriptor=function(e){return e.$descriptor},Kt.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},Kt.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},Kt.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Xt=String.fromCharCode,Zt=Object.prototype.hasOwnProperty,Jt=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Qt={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function en(e,t,n,i){return i?Zt.call(Qt,i)?Qt[i]:"&"+i+";":Xt(t||parseInt(n,16))}function tn(e){return e.length>3&&-1!==e.indexOf("&")?e.replace(Jt,en):e}Object.keys(Qt).forEach((function(e){Qt[e.toUpperCase()]=Qt[e]}));function nn(e){return new Error(e)}function rn(e){return"missing namespace for prefix <"+e+">"}function on(e){return{get:e,enumerable:!0}}function an(e){var t,n={};for(t in e)n[t]=e[t];return n}function sn(e){return e+"$uri"}function cn(){return{line:0,column:0}}function ln(e){throw e}function un(e){if(!this)return new un(e);var t,n,i,r,o,a,s,c,l,u=e&&e.proxy,d=ln,p=cn,h=!1,f=!1,g=null,m=!1;function v(e){e instanceof Error||(e=nn(e)),g=e,d(e,p)}function y(e){o&&(e instanceof Error||(e=nn(e)),o(e,p))}this.on=function(e,l){if("function"!=typeof l)throw nn("required args <name, cb>");switch(e){case"openTag":n=l;break;case"text":t=l;break;case"closeTag":i=l;break;case"error":d=l;break;case"warn":o=l;break;case"cdata":r=l;break;case"attention":c=l;break;case"question":s=l;break;case"comment":a=l;break;default:throw nn("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!=typeof e)throw nn("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n["http://www.w3.org/2001/XMLSchema-instance"]="xsi",f=!0,l=n,this},this.parse=function(e){if("string"!=typeof e)throw nn("required args <xml=string>");return g=null,function(e){var o,d,g,b,w,x,E,_,S,C,O,k=f?[]:null,T=f?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[sn(n)]=t;return i}(l):null,P=[],j=0,A=!1,M=!1,D=0,R=0,N="",L=0;function B(){if(null!==O)return O;var e,t,n,i,r,o,a,s,c,u,d,p=f&&T.xmlns,g=f&&h?[]:null,m=L,v=N,b=v.length,w={},x={};e:for(;m<b;m++)if(c=!1,!(32===(u=v.charCodeAt(m))||u<14&&u>8)){for((u<65||u>122||u>90&&u<97)&&95!==u&&58!==u&&(y("illegal first char attribute name"),c=!0),d=m+1;d<b;d++)if(!((u=v.charCodeAt(d))>96&&u<123||u>64&&u<91||u>47&&u<59||46===u||45===u||95===u)){if(32===u||u<14&&u>8){y("missing attribute value"),m=d;continue e}if(61===u)break;y("illegal attribute name char"),c=!0}if("xmlns:xmlns"===(s=v.substring(m,d))&&(y("illegal declaration of xmlns"),c=!0),34===(u=v.charCodeAt(d+1)))-1===(d=v.indexOf('"',m=d+2))&&-1!==(d=v.indexOf("'",m))&&(y("attribute value quote missmatch"),c=!0);else if(39===u)-1===(d=v.indexOf("'",m=d+2))&&-1!==(d=v.indexOf('"',m))&&(y("attribute value quote missmatch"),c=!0);else for(y("missing attribute value quotes"),c=!0,d+=1;d<b&&!(32===(u=v.charCodeAt(d+1))||u<14&&u>8);d++);for(-1===d&&(y("missing closing quotes"),d=b,c=!0),c||(o=v.substring(m,d)),m=d;d+1<b&&!(32===(u=v.charCodeAt(d+1))||u<14&&u>8);d++)m===d&&(y("illegal character after attribute end"),c=!0);if(m=d+1,!c)if(s in x)y("attribute <"+s+"> already defined");else if(x[s]=!0,f)if(h){if(null!==(r="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=tn(o),t=sn(r),!(a=l[e])){if("xmlns"===r||t in T&&T[t]!==e)do{a="ns"+j++}while(void 0!==T[a]);else a=r;l[e]=a}T[r]!==a&&(i||(T=an(T),i=!0),T[r]=a,"xmlns"===r&&(T[sn(a)]=e,p=a),T[t]=e),w[s]=o;continue}g.push(s,o)}else-1!==(u=s.indexOf(":"))?(n=T[s.substring(0,u)])?("xsi:type"===(s=p===n?s.substr(u+1):n+s.substr(u))&&(-1!==(u=o.indexOf(":"))?(n=o.substring(0,u),o=(n=T[n]||n)+o.substring(u)):o=p+":"+o),w[s]=o):y(rn(s.substring(0,u))):w[s]=o;else w[s]=o}if(h)for(m=0,b=g.length;m<b;m++){if(s=g[m++],o=g[m],-1!==(u=s.indexOf(":"))){if(!(n=T[s.substring(0,u)])){y(rn(s.substring(0,u)));continue}"xsi:type"===(s=p===n?s.substr(u+1):n+s.substr(u))&&(-1!==(u=o.indexOf(":"))?(n=o.substring(0,u),o=(n=T[n]||n)+o.substring(u)):o=p+":"+o)}w[s]=o}return O=w}function I(){for(var t,n,i=/(\r\n|\r|\n)/g,r=0,o=0,a=0,s=R;D>=a&&(t=i.exec(e))&&!((s=t[0].length+t.index)>D);)r+=1,a=s;return-1==D?(o=s,n=e.substring(R)):0===R?n=e.substring(R,D):(o=D-a,n=-1==R?e.substring(D):e.substring(D,R+1)),{data:n,line:r,column:o}}p=I,u&&(C=Object.create({},{name:on((function(){return _})),originalName:on((function(){return S})),attrs:on(B),ns:on((function(){return T}))}));for(;-1!==R;){if(-1===(D=60===e.charCodeAt(R)?R:e.indexOf("<",R)))return P.length?v("unexpected end of file"):0===R?v("missing start tag"):void(R<e.length&&e.substring(R).trim()&&y("non-whitespace outside of root node"));if(R!==D)if(P.length){if(t&&(t(e.substring(R,D),tn,p),m))return}else if(e.substring(R,D).trim()&&(y("non-whitespace outside of root node"),m))return;if(33===(w=e.charCodeAt(D+1))){if(91===(b=e.charCodeAt(D+2))&&"CDATA["===e.substr(D+3,6)){if(-1===(R=e.indexOf("]]>",D)))return v("unclosed cdata");if(r&&(r(e.substring(D+9,R),p),m))return;R+=3;continue}if(45===b&&45===e.charCodeAt(D+3)){if(-1===(R=e.indexOf("--\x3e",D)))return v("unclosed comment");if(a&&(a(e.substring(D+4,R),tn,p),m))return;R+=3;continue}}if(63!==w){for(d=D+1;;d++){if(x=e.charCodeAt(d),isNaN(x))return R=-1,v("unclosed tag");if(34===x)b=e.indexOf('"',d+1),d=-1!==b?b:d;else if(39===x)b=e.indexOf("'",d+1),d=-1!==b?b:d;else if(62===x){R=d;break}}if(33!==w){if(O={},47===w){if(A=!1,M=!0,!P.length)return v("missing open tag");if(d=_=P.pop(),b=D+2+d.length,e.substring(D+2,b)!==d)return v("closing tag mismatch");for(;b<R;b++)if(!(32===(w=e.charCodeAt(b))||w>8&&w<14))return v("close tag")}else{if(47===e.charCodeAt(R-1)?(d=_=e.substring(D+1,R-1),A=!0,M=!0):(d=_=e.substring(D+1,R),A=!0,M=!1),!(w>96&&w<123||w>64&&w<91||95===w||58===w))return v("illegal first char nodeName");for(b=1,g=d.length;b<g;b++)if(!((w=d.charCodeAt(b))>96&&w<123||w>64&&w<91||w>47&&w<59||45===w||95===w||46==w)){if(32===w||w<14&&w>8){_=d.substring(0,b),O=null;break}return v("invalid nodeName")}M||P.push(_)}if(f){if(o=T,A&&(M||k.push(o),null===O&&(h=-1!==d.indexOf("xmlns",b))&&(L=b,N=d,B(),h=!1)),S=_,-1!==(w=_.indexOf(":"))){if(!(E=T[_.substring(0,w)]))return v("missing namespace on <"+S+">");_=_.substr(w+1)}else E=T.xmlns;E&&(_=E+":"+_)}if(A&&(L=b,N=d,n&&(u?n(C,tn,M,p):n(_,B,tn,M,p),m)))return;if(M){if(i&&(i(u?C:_,tn,A,p),m))return;f&&(T=A?o:k.pop())}R+=1}else{if(c&&(c(e.substring(D,R+1),tn,p),m))return;R+=1}}else{if(-1===(R=e.indexOf("?>",D)))return v("unclosed question");if(s&&(s(e.substring(D,R+2),p),m))return;R+=2}}}(e),p=cn,m=!1,g},this.stop=function(){m=!0}}function dn(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var pn={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"};function hn(e){return e.xml&&e.xml.serialize}function fn(e){return"xsi:type"===hn(e)}function gn(e,t){return dn(t)?e.prefix+":"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function mn(e){return new Error(e)}function vn(e){return e.$descriptor}function yn(e){W(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw mn("expected element");var t,n=this.elementsById,i=vn(e).idProperty;if(i&&(t=e.get(i.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(t))throw new Error("illegal ID <"+t+">");if(n[t])throw mn("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function bn(){}function wn(){}function xn(){}function En(e,t){this.property=e,this.context=t}function _n(e,t){this.element=t,this.propertyDesc=e}function Sn(){}function Cn(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function On(e,t,n){Cn.call(this,e,t,n)}function kn(e,t,n){this.model=e,this.context=n}function Tn(e){e instanceof Kt&&(e={model:e}),W(this,{lax:!1},e)}bn.prototype.handleEnd=function(){},bn.prototype.handleText=function(){},bn.prototype.handleNode=function(){},wn.prototype=Object.create(bn.prototype),wn.prototype.handleNode=function(){return this},xn.prototype=Object.create(bn.prototype),xn.prototype.handleText=function(e){this.body=(this.body||"")+e},En.prototype=Object.create(xn.prototype),En.prototype.handleNode=function(e){if(this.element)throw mn("expected no sub nodes");return this.element=this.createReference(e),this},En.prototype.handleEnd=function(){this.element.id=this.body},En.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},_n.prototype=Object.create(xn.prototype),_n.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=zt(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},Sn.prototype=Object.create(xn.prototype),Sn.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},Cn.prototype=Object.create(Sn.prototype),Cn.prototype.addReference=function(e){this.context.addReference(e)},Cn.prototype.handleText=function(e){if(!vn(this.element).bodyProperty)throw mn("unexpected body text <"+e+">");xn.prototype.handleText.call(this,e)},Cn.prototype.handleEnd=function(){var e=this.body,t=this.element,n=vn(t).bodyProperty;n&&void 0!==e&&(e=zt(n.type,e),t.set(n.name,e))},Cn.prototype.createElement=function(e){var t,n=e.attributes,i=this.type,r=vn(i),o=this.context,a=new i({}),s=this.model;return S(n,(function(e,n){var i=r.propertiesByName[n];i&&i.isReference?i.isMany?S(e.split(" "),(function(e){o.addReference({element:a,property:i.ns.name,id:e})})):o.addReference({element:a,property:i.ns.name,id:e}):(i?e=zt(i.type,e):"xmlns"!==n&&(t=$t(n,r.ns.prefix),s.getPackage(t.prefix)&&o.addWarning({message:"unknown attribute <"+n+">",element:a,property:n,value:e})),a.set(n,e))})),a},Cn.prototype.getPropertyForNode=function(e){var t,n,i=$t(e.name),r=this.type,o=this.model,a=vn(r),s=i.name,c=a.propertiesByName[s];if(c&&!c.isAttr)return fn(c)&&(t=e.attributes["xsi:type"])?(t=function(e,t){var n=$t(e);return function(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+":"+i.slice(r.length):n}(n,t.getPackage(n.prefix))}(t,o),W({},c,{effectiveType:vn(n=o.getType(t)).name})):c;var l=o.getPackage(i.prefix);if(l){if(t=gn(i,l),n=o.getType(t),c=E(a.properties,(function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)})))return W({},c,{effectiveType:vn(n).name})}else if(c=E(a.properties,(function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type})))return c;throw mn("unrecognized element <"+i.name+">")},Cn.prototype.toString=function(){return"ElementDescriptor["+vn(this.type).name+"]"},Cn.prototype.valueHandler=function(e,t){return new _n(e,t)},Cn.prototype.referenceHandler=function(e){return new En(e,this.context)},Cn.prototype.handler=function(e){return"Element"===e?new kn(this.model,e,this.context):new Cn(this.model,e,this.context)},Cn.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,Vt(n=t.effectiveType||t.type))return this.valueHandler(t,i);var o=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(W(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},On.prototype=Object.create(Cn.prototype),On.prototype.createElement=function(e){var t=e.name,n=$t(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&gn(n,o)||t;if(!r.hasType(a))throw mn("unexpected element <"+e.originalName+">");return Cn.prototype.createElement.call(this,e)},kn.prototype=Object.create(Sn.prototype),kn.prototype.createElement=function(e){var t=e.name,n=$t(t).prefix,i=e.ns[n+"$uri"],r=e.attributes;return this.model.createAny(t,i,r)},kn.prototype.handleChild=function(e){var t=new kn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},kn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},Tn.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Cn?(i=t,t={}):"string"==typeof t?(i=this.handler(t),t={}):"string"==typeof i&&(i=this.handler(i));var r=this.model,o=this.lax,a=new yn(W({},t,{rootHandler:i})),s=new un({proxy:!0}),c=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function l(e,t,n){var i=t(),r=i.line,o=i.column,s=i.data;"<"===s.charAt(0)&&-1!==s.indexOf(" ")&&(s=s.slice(0,s.indexOf(" "))+">");var c="unparsable content "+(s?s+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return a.addWarning({message:c,error:e}),!0;throw mn(c)}function u(e,t){return l(e,t,!0)}i.context=a,c.push(i);var d=/^<\?xml /i,p=/ encoding="([^"]+)"/i,h=/^utf-8$/i;function f(e,t){try{c.peek().handleText(e)}catch(e){u(e,t)}}var g=r.getPackages().reduce((function(e,t){return e[t.uri]=t.prefix,e}),{"http://www.w3.org/XML/1998/namespace":"xml"});s.ns(g).on("openTag",(function(e,t,n,i){var r=e.attrs||{},a=Object.keys(r).reduce((function(e,n){var i=t(r[n]);return e[n]=i,e}),{});!function(e,t){var n=c.peek();try{c.push(n.handleNode(e))}catch(e){l(e,t,o)&&c.push(new wn)}}({name:e.name,originalName:e.originalName,attributes:a,ns:e.ns},i)})).on("question",(function(e){if(d.test(e)){var t=p.exec(e),n=t&&t[1];n&&!h.test(n)&&a.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}})).on("closeTag",(function(){c.pop().handleEnd()})).on("cdata",f).on("text",(function(e,t,n){!function(e,t){(e=e.trim())&&f(e,t)}(t(e),n)})).on("error",l).on("warn",u),setTimeout((function(){var t;try{s.parse(e),function(){var e,t,n=a.elementsById,i=a.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],s=vn(r).propertiesByName[t.property];if(o||a.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),s.isMany){var c=r.get(s.name),l=c.indexOf(t);-1===l&&(l=c.length),o?c[l]=o:c.splice(l,1)}else r.set(s.name,o)}}()}catch(e){t=e}var r=i.element;t||r||(t=mn("failed to parse document as <"+i.type.$descriptor.name+">")),n(t,t?void 0:r,a)}),0)},Tn.prototype.handler=function(e){return new On(this.model,e)};var Pn=/<|>|'|"|&|\n\r|\n/g,jn=/<|>|&/g;function An(e){var t={},n={},i={},r=[],o=[];this.byUri=function(t){return n[t]||e&&e.byUri(t)},this.add=function(e,t){n[e.uri]=e,t?r.push(e):o.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return t[e||"xmlns"]},this.mapPrefix=function(e,n){t[e||"xmlns"]=n},this.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},this.logUsed=function(t){var n=t.uri,r=this.getNSKey(t);i[r]=this.byUri(n),e&&e.logUsed(t)},this.getUsed=function(e){var t=this;return[].concat(r,o).filter((function(e){var n=t.getNSKey(e);return i[n]}))}}function Mn(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Dn(e){return w(e)?e:(e.prefix?e.prefix+":":"")+e.localName}var Rn={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Nn={"<":"lt",">":"gt","&":"amp"};function Ln(e,t,n){return(e=w(e)?e:""+e).replace(t,(function(e){return"&"+n[e]+";"}))}function Bn(e){this.tagName=e}function In(){}function Fn(e){this.tagName=e}function zn(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Hn(e,t){zn.call(this,e,t)}function Vn(){this.value="",this.write=function(e){this.value+=e}}function $n(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Un(e){return e=W({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var i=n||new Vn,r=new $n(i,e.format);if(e.preamble&&r.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new zn).build(t).serializeTo(r),!n)return i.value}}}function Wn(e,t){Kt.call(this,e,t)}Bn.prototype.build=function(e){return this.element=e,this},Bn.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},In.prototype.serializeValue=In.prototype.serializeTo=function(e){e.append(this.escape?Ln(this.value,jn,Nn):this.value)},In.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(jn)&&(this.escape=!0),this},Mn(Fn,In),Fn.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},zn.prototype.build=function(e){this.element=e;var t,n,i=e.$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(e){return _(e.$descriptor.properties,(function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var i=e[n];return i!==t.default&&(null!==i&&(!t.isMany||i.length))}))}(e),this.parseAttributes(_(n,(function(e){return e.isAttr}))),this.parseContainments(function(e){return _(e,(function(e){return!e.isAttr}))}(n))),this.parseGenericAttributes(e,t),this},zn.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?W({localName:t.ns.localName},e):W({localName:(n=t.ns.localName,i=t.$pkg,dn(i)?(r=n).charAt(0).toLowerCase()+r.slice(1):n)},e);var n,i,r}(this.logNamespaceUsed(e.ns),e)},zn.prototype.nsPropertyTagName=function(e){return function(e,t){return W({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},zn.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},zn.prototype.nsAttributeName=function(e){var t;if(t=w(e)?$t(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:W({localName:t.localName},n)},zn.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return S(e,(function(r,o){"$body"===o?n.push((new In).build({type:"String"},r)):"$children"===o?S(r,(function(e){n.push(new zn(t).build(e))})):0!==o.indexOf("$")&&t.parseNsAttribute(e,o,r)&&i.push({name:o,value:r})})),i},zn.prototype.parseNsAttribute=function(e,t,n){var i,r=e.$model,o=$t(t);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},zn.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return S(i,(function(t,i){var o=n.parseNsAttribute(e,i,t);o&&r.push(o)})),r},zn.prototype.parseGenericAttributes=function(e,t){var n=this;S(t,(function(t){if("xsi:type"!==t.name)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){console.warn("missing namespace information for ",t.name,"=",t.value,"on",e,n)}}))},zn.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;S(e,(function(e){var r=i.get(e.name),o=e.isReference;if(e.isMany||(r=[r]),e.isBody)n.push((new In).build(e,r[0]));else if(Vt(e.type))S(r,(function(i){n.push(new Fn(t.addTagName(t.nsPropertyTagName(e))).build(e,i))}));else if(o)S(r,(function(i){n.push(new Bn(t.addTagName(t.nsPropertyTagName(e))).build(i))}));else{var a=fn(e),s=function(e){return"property"===hn(e)}(e);S(r,(function(i){var r;r=a?new Hn(t,e):s?new zn(t,e):new zn(t),n.push(r.build(i))}))}}))},zn.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new An(t):n=t),n},zn.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,a=i.byUri(r);return"xml"===o||a&&!n||i.add(e,t),i.mapPrefix(o,r),e},zn.prototype.logNamespaceUsed=function(e,t){var n,i,r,o=this.element.$model,a=this.getNamespaces(t),s=e.prefix,c=e.uri;if(!s&&!c)return{localName:e.localName};if(r=pn[s]||o&&(o.getPackage(s)||{}).uri,!(c=c||r||a.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=a.byUri(c))){for(n=s,i=1;a.uriByPrefix(n);)n=s+"_"+i++;e=this.logNamespace({prefix:n,uri:c},r===c)}return s&&a.mapPrefix(s,c),e},zn.prototype.parseAttributes=function(e){var t=this,n=this.element;S(e,(function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var r=[];S(i,(function(e){r.push(e.id)})),i=r.join(" ")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)}))},zn.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Dn(e)},zn.prototype.addAttribute=function(e,t){var n=this.attrs;w(t)&&(t=Ln(t,Pn,Rn)),n.push({name:e,value:t})},zn.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return P(e.getUsed(),(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}))}(n).concat(t)),S(t,(function(t){e.append(" ").append(Dn(t.name)).append('="').append(t.value).append('"')}))},zn.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==In;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),S(this.body,(function(t){t.serializeTo(e)})),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()},Mn(Hn,zn),Hn.prototype.parseNsAttributes=function(e){var t=zn.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName("xsi:type"),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t},Hn.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},Wn.prototype=Object.create(Kt.prototype),Wn.prototype.fromXML=function(e,t,n,i){w(t)||(i=n,n=t,t="bpmn:Definitions"),b(n)&&(i=n,n={});var r=new Tn(W({model:this,lax:!0},n)),o=r.handler(t);r.fromXML(e,o,i)},Wn.prototype.toXML=function(e,t,n){b(t)&&(n=t,t={});var i,r,o=new Un(t);try{i=o.toXML(e)}catch(e){r=e}return n(r,i)};var qn={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};var Gn=function(e,t){return new Wn(W({},qn,e),t)};function Yn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var Kn=new dt.a({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Xn(e,t){return e.$instanceOf(t)}function Zn(e,t){var n={},i=[];function r(e,t){return function(n){e(n,t)}}function o(e){n[e.id]=e}function a(n,i){try{var r=n.di&&function(n,i){if(n.gfx)throw new Error(t("already rendered {element}",{element:Yn(n)}));return e.element(n,i)}(n,i);return o(n),r}catch(e){s(e.message,{element:n,error:e}),console.error(t("failed to import {element}",{element:Yn(n)})),console.error(e)}}function s(t,n){e.error(t,n)}function c(e){var n=e.bpmnElement;n?n.di?s(t("multiple DI elements defined for {element}",{element:Yn(n)}),{element:n}):(Kn.bind(n,"di"),n.di=e):s(t("no bpmnElement referenced in {element}",{element:Yn(e)}),{element:e})}function l(e){var t;c(t=e.plane),S(t.planeElement,u)}function u(e){c(e)}function d(){for(;i.length;)i.shift()()}function p(e,t){T(e,t),b(e.ioSpecification,t),y(e.artifacts,t),o(e)}function h(e,t){a(e,t)}function f(e,t){a(e,t)}function g(e,t){a(e,t)}function m(e,t){a(e,t)}function v(e,t){a(e,t)}function y(e,t){S(e,(function(e){Xn(e,"bpmn:Association")?i.push((function(){v(e,t)})):v(e,t)}))}function b(e,t){e&&(S(e.dataInputs,r(g,t)),S(e.dataOutputs,r(m,t)))}function w(e,t){T(e,t),y(e.artifacts,t)}function x(e,t){var n=a(e,t);Xn(e,"bpmn:SubProcess")&&w(e,n||t),Xn(e,"bpmn:Activity")&&b(e.ioSpecification,t),i.push((function(){S(e.dataInputAssociations,r(f,t)),S(e.dataOutputAssociations,r(f,t))}))}function C(e,t){a(e,t)}function O(e,t){i.push((function(){var n=a(e,t);e.childLaneSet&&k(e.childLaneSet,n||t),function(e){S(e.flowNodeRef,(function(t){var n=t.get("lanes");n&&n.push(e)}))}(e)}))}function k(e,t){S(e.lanes,r(O,t))}function T(e,n){!function(e,n){S(e,(function(e){Xn(e,"bpmn:SequenceFlow")?i.push((function(){!function(e,t){a(e,t)}(e,n)})):Xn(e,"bpmn:BoundaryEvent")?i.unshift((function(){x(e,n)})):Xn(e,"bpmn:FlowNode")?x(e,n):Xn(e,"bpmn:DataObject")||(Xn(e,"bpmn:DataStoreReference")||Xn(e,"bpmn:DataObjectReference")?C(e,n):s(t("unrecognized flowElement {element} in context {context}",{element:Yn(e),context:n?Yn(n.businessObject):"null"}),{element:e,context:n}))}))}(e.flowElements,n),e.laneSets&&function(e,t){S(e,r(k,t))}(e.laneSets,n)}function P(e,t){var n=a(e,t),i=e.processRef;i&&p(i,n||t)}return{handleDeferred:d,handleDefinitions:function(o,a){var u=o.diagrams;if(a&&-1===u.indexOf(a))throw new Error(t("diagram not part of bpmn:Definitions"));if(!a&&u&&u.length&&(a=u[0]),!a)throw new Error(t("no diagram to display"));l(a);var f=a.plane;if(!f)throw new Error(t("no plane for {element}",{element:Yn(a)}));var g=f.bpmnElement;if(!g){if(!(g=function(e){return E(e.rootElements,(function(e){return Xn(e,"bpmn:Process")||Xn(e,"bpmn:Collaboration")}))}(o)))throw new Error(t("no process or collaboration to display"));s(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Yn(f),rootElement:Yn(g)})),f.bpmnElement=g,c(f)}var m,v=function(t,n){return e.root(t,n)}(g,f);if(Xn(g,"bpmn:Process"))p(g,v);else{if(!Xn(g,"bpmn:Collaboration"))throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:Yn(f),rootElement:Yn(g)}));S((m=g).participants,r(P)),y(m.artifacts),i.push((function(){var e;S(m.messageFlows,r(h,e))})),function(e,t){_(e,(function(e){return!n[e.id]&&Xn(e,"bpmn:Process")&&e.laneSets})).forEach(r(p,t))}(o.rootElements,v)}d()},handleSubProcess:w,registerDi:c}}var Jn='<img width="52" height="52" src="'+("data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>'))+'" />';function Qn(e){return e.join(";")}var ei,ti='<div class="bjs-powered-by-lightbox" style="'+Qn(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Qn(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"])+'"></div><div class="notice" style="'+Qn(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"])+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+Jn+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';function ni(e){var t,n,i;e=W({},ii,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),t=this._container,n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+Jn+"</a>",i=Object(Y.f)(n),t.appendChild(i),Y.g.bind(i,"click",(function(e){ei||(ei=Object(Y.f)(ti),Y.e.bind(ei,".backdrop","click",(function(e){document.body.removeChild(ei)}))),document.body.appendChild(ei),e.preventDefault()})),this._init(this._container,this._moddle,e)}a()(ni,Nt),ni.prototype.importXML=function(e,t,n){b(t)&&(n=t,t=null),n=n||function(){};var i=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"bpmn:Definitions",(function(e,r,o){r=i._emit("import.parse.complete",{error:e,definitions:r,context:o})||r;var a=o.warnings;if(e)return e=function(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]);return e}(e),i._emit("import.done",{error:e,warnings:a}),n(e,a);i.importDefinitions(r,t,(function(e,t){var r=[].concat(a,t||[]);i._emit("import.done",{error:e,warnings:r}),n(e,r)}))}))},ni.prototype.importDefinitions=function(e,t,n){return b(t)&&(n=t,t=null),n=n||function(){},this._setDefinitions(e),this.open(t,n)},ni.prototype.open=function(e,t){b(e)&&(t=e,e=null);var n=this._definitions,i=e;if(t=t||function(){},!n)return t(new Error("no XML imported"));if("string"==typeof e&&!(i=function(e,t){if(!t)return null;return E(e.diagrams,(function(e){return e.id===t}))||null}(n,e)))return t(new Error("BPMNDiagram <"+e+"> not found"));try{this.clear()}catch(e){return t(e)}return function(e,t,n,i){var r,o,a;b(n)&&(i=n,n=null);var s,c=[];try{r=e.get("bpmnImporter"),o=e.get("eventBus"),a=e.get("translate"),o.fire("import.render.start",{definitions:t}),function(e,t){new Zn({root:function(e){return r.add(e)},element:function(e,t){return r.add(e,t)},error:function(e,t){c.push({message:e,context:t})}},a).handleDefinitions(e,t)}(t,n),o.fire("import.render.complete",{error:s,warnings:c})}catch(e){s=e}i(s,c)}(this,n,i,t)},ni.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this,i=this._definitions;if(!i)return t(new Error("no definitions loaded"));i=this._emit("saveXML.start",{definitions:i})||i,this._moddle.toXML(i,e,(function(e,i){try{i=n._emit("saveXML.serialized",{error:e,xml:i})||i,n._emit("saveXML.done",{error:e,xml:i})}catch(e){console.error("error in saveXML life-cycle listener",e)}t(e,i)}))},ni.prototype.saveSVG=function(e,t){var n,i;t||(t=e,e={}),this._emit("saveSVG.start");try{var r=this.get("canvas"),o=r.getDefaultLayer(),a=Object(Y.i)("defs",r._svg),s=_e(o),c=a?"<defs>"+_e(a)+"</defs>":"",l=o.getBBox();n='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+c+s+"</svg>"}catch(e){i=e}this._emit("saveSVG.done",{error:i,svg:n}),t(i,n)},ni.prototype._setDefinitions=function(e){this._definitions=e},ni.prototype.getModules=function(){return this._modules},ni.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach((function(e){var t=e.businessObject;t&&t.di&&delete t.di})),Nt.prototype.clear.call(this))},ni.prototype.destroy=function(){Nt.prototype.destroy.call(this),Object(Y.k)(this._container)},ni.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},ni.prototype.off=function(e,t){this.get("eventBus").off(e,t)},ni.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=Object(Y.i)(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},ni.prototype.getDefinitions=function(){return this._definitions},ni.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},ni.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[].concat([{bpmnjs:["value",this],moddle:["value",t]}],i,r),a=W(G(n,["additionalModules"]),{canvas:W({},n.canvas,{container:e}),modules:o});Nt.call(this,a),n&&n.container&&this.attachTo(n.container)},ni.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},ni.prototype._createContainer=function(e){var t=Object(Y.f)('<div class="bjs-container"></div>');return W(t.style,{width:ri(e.width),height:ri(e.height),position:e.position}),t},ni.prototype._createModdle=function(e){var t=W({},this._moddleExtensions,e.moddleExtensions);return new Gn(t)},ni.prototype._modules=[];var ii={width:"100%",height:"100%",position:"relative"};function ri(e){return e+(y(e)?"px":"")}function oi(e){ni.call(this,e),this.on("import.parse.complete",(function(e){e.error||this._collectIds(e.definitions,e.context)}),this),this.on("diagram.destroy",(function(){this.get("moddle").ids.clear()}),this)}function ai(e,t){var n=si(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function si(e){return e&&e.businessObject||e}function ci(e){return!ai(e,"bpmn:CallActivity")&&(ai(e,"bpmn:SubProcess")?!!si(e).di.isExpanded:!ai(e,"bpmn:Participant")||!!si(e).processRef)}function li(e){return e&&!!si(e).triggeredByEvent}function ui(e,t){var n=si(e),i=!1;return n.eventDefinitions&&S(n.eventDefinitions,(function(e){ai(e,t)&&(i=!0)})),i}function di(e){return ai(e,"bpmn:FlowElement")||ai(e,"bpmn:Participant")||ai(e,"bpmn:Lane")||ai(e,"bpmn:SequenceFlow")||ai(e,"bpmn:MessageFlow")||ai(e,"bpmn:DataInput")||ai(e,"bpmn:DataOutput")?"name":ai(e,"bpmn:TextAnnotation")?"text":ai(e,"bpmn:Group")?"categoryValueRef":void 0}function pi(e){var t=e.businessObject,n=di(t);if(n)return"categoryValueRef"===n?function(e){var t=e.categoryValueRef;return t&&t.value||""}(t):t[n]||""}function hi(e,t,n){return T(e.eventDefinitions,(function(i){return i.$type===t&&function(e,t){return k(t,(function(t,n){return e[n]==t}))}(e,n)}))}function fi(e){return e.businessObject.di}function gi(e){return e.businessObject}function mi(e,t){return fi(e).get("bioc:fill")||t||"white"}function vi(e,t){return fi(e).get("bioc:stroke")||t||"black"}a()(oi,ni),oi.prototype._createModdle=function(e){var t=ni.prototype._createModdle.call(this,e);return t.ids=new l([32,36,1]),t},oi.prototype._collectIds=function(e,t){var n,i=e.$model.ids;for(n in i.clear(),t.elementsById)i.claim(n,t.elementsById[n])};var yi=new l;function bi(e,t,n,i,r,o,a){Ie.call(this,t,a);var s=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,l=yi.next(),u={},d=n.computeStyle;function p(e,t){var n=W({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},o=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var a=he("marker");ee(t.element,n),Z(a,t.element),ee(a,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*o,markerHeight:20*o,orient:"auto"});var s=Object(Y.i)("defs",r._svg);s||(s=he("defs"),Z(r._svg,s)),Z(s,a),u[e]=a}function h(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function f(e,t,n){var i=e+"-"+h(t)+"-"+h(n)+"-"+l;return u[i]||function(e,t,n,i){if("sequenceflow-end"===t){var r=he("path");ee(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),p(e,{element:r,ref:{x:11,y:10},scale:.5,attrs:{fill:i,stroke:i}})}if("messageflow-start"===t){var o=he("circle");ee(o,{cx:6,cy:6,r:3.5}),p(e,{element:o,attrs:{fill:n,stroke:i},ref:{x:6,y:6}})}if("messageflow-end"===t){var a=he("path");ee(a,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),p(e,{element:a,attrs:{fill:n,stroke:i,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===t){var s=he("path");ee(s,{d:"M 11 5 L 1 10 L 11 15"}),p(e,{element:s,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===t){var c=he("path");ee(c,{d:"M 1 5 L 11 10 L 1 15"}),p(e,{element:c,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===t){var l=he("path");ee(l,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),p(e,{element:l,attrs:{fill:n,stroke:i},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===t){var u=he("path");ee(u,{d:"M 6 4 L 10 16"}),p(e,{element:u,attrs:{stroke:i},ref:{x:0,y:10},scale:.5})}}(i,e,t,n),"url(#"+i+")"}function g(e,t,n,i,r){v(i)&&(r=i,i=0),i=i||0,"none"===(r=d(r,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete r.fillOpacity;var o=t/2,a=n/2,s=he("circle");return ee(s,{cx:o,cy:a,r:Math.round((t+n)/4-i)}),ee(s,r),Z(e,s),s}function m(e,t,n,i,r,o){v(r)&&(o=r,r=0),r=r||0,o=d(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=he("rect");return ee(a,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),ee(a,o),Z(e,a),a}function y(e,t,n){var i=He(t,n=d(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return Z(e,i),i}function b(e,t,n){n=d(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=he("path");return ee(i,{d:t}),ee(i,n),Z(e,i),i}function w(e,t,n,i){return b(t,n,W({"data-marker":e},i))}function x(e){return function(t,n){return P[e](t,n)}}function E(e){return P[e]}function _(e,t){var n=gi(e),i=function(e){return"bpmn:IntermediateThrowEvent"===e.$type||"bpmn:EndEvent"===e.$type}(n);return n.eventDefinitions&&n.eventDefinitions.length>1?n.parallelMultiple?E("bpmn:ParallelMultipleEventDefinition")(t,e,i):E("bpmn:MultipleEventDefinition")(t,e,i):hi(n,"bpmn:MessageEventDefinition")?E("bpmn:MessageEventDefinition")(t,e,i):hi(n,"bpmn:TimerEventDefinition")?E("bpmn:TimerEventDefinition")(t,e,i):hi(n,"bpmn:ConditionalEventDefinition")?E("bpmn:ConditionalEventDefinition")(t,e):hi(n,"bpmn:SignalEventDefinition")?E("bpmn:SignalEventDefinition")(t,e,i):hi(n,"bpmn:EscalationEventDefinition")?E("bpmn:EscalationEventDefinition")(t,e,i):hi(n,"bpmn:LinkEventDefinition")?E("bpmn:LinkEventDefinition")(t,e,i):hi(n,"bpmn:ErrorEventDefinition")?E("bpmn:ErrorEventDefinition")(t,e,i):hi(n,"bpmn:CancelEventDefinition")?E("bpmn:CancelEventDefinition")(t,e,i):hi(n,"bpmn:CompensateEventDefinition")?E("bpmn:CompensateEventDefinition")(t,e,i):hi(n,"bpmn:TerminateEventDefinition")?E("bpmn:TerminateEventDefinition")(t,e,i):null}function C(e,t,n){n=W({size:{width:100}},n);var i=o.createText(t||"",n);return oe(i).add("djs-label"),Z(e,i),i}function O(e,t,n){return C(e,gi(t).name,{box:t,align:n,padding:5,style:{fill:vi(t,c)}})}function k(e,t,n){Tt(C(e,t,{box:{height:30,width:n.height},align:"center-middle",style:{fill:vi(n,c)}}),0,-(-1*n.height),270)}function T(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)n+="L"+t[i].x+","+t[i].y+" ";return n}var P=this.handlers={"bpmn:Event":function(e,t,n){return"fillOpacity"in n||(n.fillOpacity=.95),g(e,t.width,t.height,n)},"bpmn:StartEvent":function(e,t){var n={fill:mi(t,s),stroke:vi(t,c)};gi(t).isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round",fill:mi(t,s),stroke:vi(t,c)});var i=E("bpmn:Event")(e,t,n);return _(t,e),i},"bpmn:MessageEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?vi(t,c):mi(t,s),stroke:n?mi(t,s):vi(t,c)})},"bpmn:TimerEventDefinition":function(e,t){var n=g(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:mi(t,s),stroke:vi(t,c)});b(e,i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:vi(t,c)});for(var r=0;r<12;r++){var o=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),a=t.width/2;b(e,o,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*r+","+t.height/2+","+a+")",stroke:vi(t,c)})}return n},"bpmn:EscalationEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?vi(t,c):"none",stroke:vi(t,c)})},"bpmn:ConditionalEventDefinition":function(e,t){return b(e,i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:vi(t,c)})},"bpmn:LinkEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?vi(t,c):"none",stroke:vi(t,c)})},"bpmn:ErrorEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?vi(t,c):"none",stroke:vi(t,c)})},"bpmn:CancelEventDefinition":function(e,t,n){var r=b(e,i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?vi(t,c):"none",stroke:vi(t,c)});return jt(r,45),r},"bpmn:CompensateEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?vi(t,c):"none",stroke:vi(t,c)})},"bpmn:SignalEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?vi(t,c):"none",stroke:vi(t,c)})},"bpmn:MultipleEventDefinition":function(e,t,n){return b(e,i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?vi(t,c):"none"})},"bpmn:ParallelMultipleEventDefinition":function(e,t){return b(e,i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:vi(t,c),stroke:vi(t,c)})},"bpmn:EndEvent":function(e,t){var n=E("bpmn:Event")(e,t,{strokeWidth:4,fill:mi(t,s),stroke:vi(t,c)});return _(t,e),n},"bpmn:TerminateEventDefinition":function(e,t){return g(e,t.width,t.height,8,{strokeWidth:4,fill:vi(t,c),stroke:vi(t,c)})},"bpmn:IntermediateEvent":function(e,t){var n=E("bpmn:Event")(e,t,{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)});return g(e,t.width,t.height,3,{strokeWidth:1,fill:mi(t,"none"),stroke:vi(t,c)}),_(t,e),n},"bpmn:IntermediateCatchEvent":x("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":x("bpmn:IntermediateEvent"),"bpmn:Activity":function(e,t,n){return"fillOpacity"in(n=n||{})||(n.fillOpacity=.95),m(e,t.width,t.height,10,n)},"bpmn:Task":function(e,t){var n={fill:mi(t,s),stroke:vi(t,c)},i=E("bpmn:Activity")(e,t,n);return O(e,t,"center-middle"),j(e,t),i},"bpmn:ServiceTask":function(e,t){var n=E("bpmn:Task")(e,t);return b(e,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)}),b(e,i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:mi(t,s)}),b(e,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)}),n},"bpmn:UserTask":function(e,t){var n=E("bpmn:Task")(e,t);return b(e,i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:mi(t,s),stroke:vi(t,c)}),b(e,i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:mi(t,s),stroke:vi(t,c)}),b(e,i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:vi(t,c),stroke:vi(t,c)}),n},"bpmn:ManualTask":function(e,t){var n=E("bpmn:Task")(e,t);return b(e,i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:mi(t,s),stroke:vi(t,c)}),n},"bpmn:SendTask":function(e,t){var n=E("bpmn:Task")(e,t);return b(e,i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:vi(t,c),stroke:mi(t,s)}),n},"bpmn:ReceiveTask":function(e,t){var n,r=gi(t),o=E("bpmn:Task")(e,t);return r.instantiate?(g(e,28,28,4.4,{strokeWidth:1}),n=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):n=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),b(e,n,{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)}),o},"bpmn:ScriptTask":function(e,t){var n=E("bpmn:Task")(e,t);return b(e,i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:vi(t,c)}),n},"bpmn:BusinessRuleTask":function(e,t){var n=E("bpmn:Task")(e,t);return ee(b(e,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:mi(t,"#aaaaaa"),stroke:vi(t,c)}),ee(b(e,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:vi(t,c)}),n},"bpmn:SubProcess":function(e,t,n){n=W({fill:mi(t,s),stroke:vi(t,c)},n);var i=E("bpmn:Activity")(e,t,n),r=ci(t);return li(t)&&ee(i,{strokeDasharray:"1,2"}),O(e,t,r?"center-top":"center-middle"),r?j(e,t):j(e,t,["SubProcessMarker"]),i},"bpmn:AdHocSubProcess":function(e,t){return E("bpmn:SubProcess")(e,t)},"bpmn:Transaction":function(e,t){var i=E("bpmn:SubProcess")(e,t),r=n.style(["no-fill","no-events"],{stroke:vi(t,c)});return m(e,t.width,t.height,8,3,r),i},"bpmn:CallActivity":function(e,t){return E("bpmn:SubProcess")(e,t,{strokeWidth:5})},"bpmn:Participant":function(e,t){var n={fillOpacity:.95,fill:mi(t,s),stroke:vi(t,c)},i=E("bpmn:Lane")(e,t,n);ci(t)?(y(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:vi(t,c)}),k(e,gi(t).name,t)):C(e,gi(t).name,{box:t,align:"center-middle",style:{fill:vi(t,c)}});return!!gi(t).participantMultiplicity&&E("ParticipantMultiplicityMarker")(e,t),i},"bpmn:Lane":function(e,t,n){var i=m(e,t.width,t.height,0,W({fill:mi(t,s),fillOpacity:.35,stroke:vi(t,c)},n)),r=gi(t);"bpmn:Lane"===r.$type&&k(e,r.name,t);return i},"bpmn:InclusiveGateway":function(e,t){var n=E("bpmn:Gateway")(e,t);return g(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:mi(t,s),stroke:vi(t,c)}),n},"bpmn:ExclusiveGateway":function(e,t){var n=E("bpmn:Gateway")(e,t),r=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return fi(t).isMarkerVisible&&b(e,r,{strokeWidth:1,fill:vi(t,c),stroke:vi(t,c)}),n},"bpmn:ComplexGateway":function(e,t){var n=E("bpmn:Gateway")(e,t);return b(e,i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:vi(t,c),stroke:vi(t,c)}),n},"bpmn:ParallelGateway":function(e,t){var n=E("bpmn:Gateway")(e,t);return b(e,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:vi(t,c),stroke:vi(t,c)}),n},"bpmn:EventBasedGateway":function(e,t){var n=gi(t),r=E("bpmn:Gateway")(e,t);g(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:"none",stroke:vi(t,c)});var o=n.eventGatewayType,a=!!n.instantiate;if("Parallel"===o){var s=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}});ee(b(e,s),{strokeWidth:1,fill:"none"})}else if("Exclusive"===o){if(!a)ee(g(e,t.width,t.height,.26*t.height),{strokeWidth:1,fill:"none",stroke:vi(t,c)});!function(){var n=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),r={strokeWidth:2,fill:mi(t,"none"),stroke:vi(t,c)};b(e,n,r)}()}return r},"bpmn:Gateway":function(e,t){var n={fill:mi(t,s),fillOpacity:.95,stroke:vi(t,c)};return function(e,t,n,i){var r=t/2,o=n/2,a=[{x:r,y:0},{x:t,y:o},{x:r,y:n},{x:0,y:o}].map((function(e){return e.x+","+e.y})).join(" ");i=d(i,{stroke:"black",strokeWidth:2,fill:"white"});var s=he("polygon");return ee(s,{points:a}),ee(s,i),Z(e,s),s}(e,t.width,t.height,n)},"bpmn:SequenceFlow":function(e,t){var n,i=T(t),r=mi(t,s),o=vi(t,c),a=b(e,i,{strokeLinejoin:"round",markerEnd:f("sequenceflow-end",r,o),stroke:vi(t,c)}),l=gi(t);return t.source&&(n=t.source.businessObject,l.conditionExpression&&n.$instanceOf("bpmn:Activity")&&ee(a,{markerStart:f("conditional-flow-marker",r,o)}),n.default&&(n.$instanceOf("bpmn:Gateway")||n.$instanceOf("bpmn:Activity"))&&n.default===l&&ee(a,{markerStart:f("conditional-default-flow-marker",r,o)})),a},"bpmn:Association":function(e,t,n){var i=gi(t),r=mi(t,s),o=vi(t,c);return n=W({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:vi(t,c)},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=f("association-end",r,o)),"Both"===i.associationDirection&&(n.markerStart=f("association-start",r,o)),y(e,t.waypoints,n)},"bpmn:DataInputAssociation":function(e,t){var n=mi(t,s),i=vi(t,c);return E("bpmn:Association")(e,t,{markerEnd:f("association-end",n,i)})},"bpmn:DataOutputAssociation":function(e,t){var n=mi(t,s),i=vi(t,c);return E("bpmn:Association")(e,t,{markerEnd:f("association-end",n,i)})},"bpmn:MessageFlow":function(e,t){var n=gi(t),r=fi(t),o=mi(t,s),a=vi(t,c),l=b(e,T(t),{markerEnd:f("messageflow-end",o,a),markerStart:f("messageflow-start",o,a),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:vi(t,c)});if(n.messageRef){var u=l.getPointAtLength(l.getTotalLength()/2),d=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:u.x,y:u.y}}),p={strokeWidth:1};"initiating"===r.messageVisibleKind?(p.fill="white",p.stroke="black"):(p.fill="#888",p.stroke="white"),b(e,d,p)}return l},"bpmn:DataObject":function(e,t){var n=b(e,i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:mi(t,s),fillOpacity:.95,stroke:vi(t,c)});return function(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}(gi(t))&&function(e,t){var n=(t.height-16)/t.height,r=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:n}});b(e,r,{strokeWidth:2})}(e,t),n},"bpmn:DataObjectReference":x("bpmn:DataObject"),"bpmn:DataInput":function(e,t){var n=i.getRawPath("DATA_ARROW"),r=E("bpmn:DataObject")(e,t);return b(e,n,{strokeWidth:1}),r},"bpmn:DataOutput":function(e,t){var n=i.getRawPath("DATA_ARROW"),r=E("bpmn:DataObject")(e,t);return b(e,n,{strokeWidth:1,fill:"black"}),r},"bpmn:DataStoreReference":function(e,t){return b(e,i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:mi(t,s),fillOpacity:.95,stroke:vi(t,c)})},"bpmn:BoundaryEvent":function(e,t){var n=gi(t).cancelActivity,i={strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)};n||(i.strokeDasharray="6",i.strokeLinecap="round");var r=W({},i,{fillOpacity:1}),o=W({},i,{fill:"none"}),a=E("bpmn:Event")(e,t,r);return g(e,t.width,t.height,3,o),_(t,e),a},"bpmn:Group":function(e,t){return m(e,t.width,t.height,10,{stroke:vi(t,c),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(e,t){return function(e,t){var n={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return C(e,pi(t),{box:n,fitBox:!0,style:W({},o.getExternalStyle(),{fill:vi(t,c)})})}(e,t)},"bpmn:TextAnnotation":function(e,t){var n=m(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return b(e,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:vi(t,c)}),C(e,gi(t).text||"",{box:t,align:"left-top",padding:5,style:{fill:vi(t,c)}}),n},ParticipantMultiplicityMarker:function(e,t){w("participant-multiplicity",e,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)})},SubProcessMarker:function(e,t){Pt(m(e,14,14,0,{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)}),t.width/2-7.5,t.height-20),w("sub-process",e,i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:mi(t,s),stroke:vi(t,c)})},ParallelMarker:function(e,t,n){w("parallel",e,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}}),{fill:mi(t,s),stroke:vi(t,c)})},SequentialMarker:function(e,t,n){w("sequential",e,i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:mi(t,s),stroke:vi(t,c)})},CompensationMarker:function(e,t,n){w("compensation",e,i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c)})},LoopMarker:function(e,t,n){w("loop",e,i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}}),{strokeWidth:1,fill:mi(t,s),stroke:vi(t,c),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){w("adhoc",e,i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:vi(t,c),stroke:vi(t,c)})}};function j(e,t,n){var i,r=gi(t),o=n&&-1!==n.indexOf("SubProcessMarker");i=o?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},S(n,(function(n){E(n)(e,t,i)})),r.isForCompensation&&E("CompensationMarker")(e,t,i),"bpmn:AdHocSubProcess"===r.$type&&E("AdhocMarker")(e,t,i);var a=r.loopCharacteristics,s=a&&a.isSequential;a&&(void 0===s&&E("LoopMarker")(e,t,i),!1===s&&E("ParallelMarker")(e,t,i),!0===s&&E("SequentialMarker")(e,t,i))}this._drawPath=b}a()(bi,Ie),bi.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],bi.prototype.canRender=function(e){return ai(e,"bpmn:BaseElement")},bi.prototype.drawShape=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},bi.prototype.drawConnection=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},bi.prototype.getShapePath=function(e){return ai(e,"bpmn:Event")?(n=(t=e).x+t.width/2,i=t.y+t.height/2,r=t.width/2,Fe([["M",n,i],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]])):ai(e,"bpmn:Activity")?function(e,t){var n=e.x,i=e.y,r=e.width,o=e.height;return Fe([["M",n+t,i],["l",r-2*t,0],["a",t,t,0,0,1,t,t],["l",0,o-2*t],["a",t,t,0,0,1,-t,t],["l",2*t-r,0],["a",t,t,0,0,1,-t,-t],["l",0,2*t-o],["a",t,t,0,0,1,t,-t],["z"]])}(e,10):ai(e,"bpmn:Gateway")?function(e){var t=e.width/2,n=e.height/2;return Fe([["M",e.x+t,e.y],["l",t,n],["l",-t,n],["l",-t,-n],["z"]])}(e):function(e){var t=e.x,n=e.y,i=e.width;return Fe([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])}(e);var t,n,i,r};var wi={width:150,height:50};function xi(e,t){var n;t.textContent=e;try{var i,r=""===e;return t.textContent=r?"dummy":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(e){return{width:0,height:0}}}function Ei(e,t,n){for(var i,r=e.shift(),o=r;;){if((i=xi(o,n)).width=o?i.width:0," "===o||""===o||i.width<Math.round(t)||o.length<2)return _i(e,o,r,i);o=Si(o,i.width,t)}}function _i(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}function Si(e,t,n){var i=Math.max(e.length*(n/t),1),r=function(e,t){var n,i=e.split(/(\s|-)/g),r=[],o=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+o<t)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function Ci(e){this._config=W({},{size:wi,padding:0,style:{},align:"center-top"},e||{})}Ci.prototype.createText=function(e,t){return this.layoutText(e,t).element},Ci.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},Ci.prototype.layoutText=function(e,t){var n=W({},this._config.size,t.box),i=W({},this._config.style,t.style),r=function(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}(t.align||this._config.align),o=function(e){return v(e)?W({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}(void 0!==t.padding?t.padding:this._config.padding),a=t.fitBox||!1,s=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),c=e.split(/\r?\n/g),l=[],u=n.width-o.left-o.right,d=he("text");for(ee(d,{x:0,y:0}),ee(d,i),Z(function(){var e=document.getElementById("helper-svg");return e||(ee(e=he("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}(),d);c.length;)l.push(Ei(c,u,d));"middle"===r.vertical&&(o.top=o.bottom=0);var p=O(l,(function(e,t,n){return e+(s||t.height)}),0)+o.top+o.bottom,h=O(l,(function(e,t,n){return t.width>e?t.width:e}),0),f=o.top;"middle"===r.vertical&&(f+=(n.height-p)/2),f-=(s||l[0].height)/4;var g=he("text");return ee(g,i),S(l,(function(e){var t;switch(f+=s||e.height,r.horizontal){case"left":t=o.left;break;case"right":t=(a?h:u)-o.right-e.width;break;default:t=Math.max(((a?h:u)-e.width)/2+o.left,0)}var n=he("tspan");ee(n,{x:t,y:f}),n.textContent=e.text,Z(g,n)})),se(d),{dimensions:{width:h,height:p},element:g}};function Oi(e){var t=W({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=W({},t,{fontSize:n},e&&e.externalStyle||{}),r=new Ci({style:t});this.getExternalLabelBounds=function(e,t){var n=r.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=r.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(i.height))}},this.createText=function(e,t){return r.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Oi.$inject=["config.textRenderer"];var ki=/\{([^}]+)\}/g,Ti=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;var Pi={__init__:["bpmnRenderer"],bpmnRenderer:["type",bi],textRenderer:["type",Oi],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var o,a,s={};if(t.position){for(var c=t.containerHeight/r.height*t.yScaleFactor,l=t.containerWidth/r.width*t.xScaleFactor,u=0;u<r.heightElements.length;u++)s["y"+u]=r.heightElements[u]*c;for(var d=0;d<r.widthElements.length;d++)s["x"+d]=r.widthElements[d]*l}return o=r.d,a={mx:n,my:i,e:s},String(o).replace(ki,(function(e,t){return function(e,t,n){var i=n;return t.replace(Ti,(function(e,t,n,r,o){t=t||r,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))})),i=(null==i||i==n?e:i)+""}(e,t,a)}))}}]};var ji={translate:["value",function(e,t){return t=t||{},e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||"{"+n+"}"}))}]},Ai={width:90,height:20};function Mi(e){return ai(e,"bpmn:Event")||ai(e,"bpmn:Gateway")||ai(e,"bpmn:DataStoreReference")||ai(e,"bpmn:DataObjectReference")||ai(e,"bpmn:DataInput")||ai(e,"bpmn:DataOutput")||ai(e,"bpmn:SequenceFlow")||ai(e,"bpmn:MessageFlow")||ai(e,"bpmn:Group")}function Di(e){return Li(e.label)}function Ri(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=function(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=15:a+=15,{x:a,y:s}}function Ni(e){return e.waypoints?Ri(e.waypoints):ai(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Ai.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Ai.height/2}}function Li(e){return e&&!!e.labelTarget}function Bi(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function Ii(e,t,n,i){if(void 0===i&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Bi(e,t);return Math.abs(r/o)<=i}function Fi(e,t){var n;return function(e,t){var n;n=m(e)?e:[e,t];var i=n.slice().shift();return k(n,(function(e){return Math.abs(i.y-e.y)<=2}))}(n=m(e)?e:[e,t])?"h":!!function(e,t){var n;n=m(e)?e:[e,t];var i=n.slice().shift();return k(n,(function(e){return Math.abs(i.x-e.x)<=2}))}(n)&&"v"}function zi(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function Hi(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var Vi=n(17),$i=n.n(Vi);function Ui(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Wi(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function qi(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Gi(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Yi(e){return Wi({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Ki(e,t,n){v(n=n||0)||(n={x:n,y:n});var i=qi(e),r=qi(t),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,c=o?"top":s?"bottom":null,l=i.right+n.x<=r.left?"left":a?"right":null;return l&&c?c+"-"+l:l||c||"intersect"}function Xi(e,t,n){var i,r,o=(i=e,r=t,$i()(i,r));return 1===o.length||2===o.length&&Bi(o[0],o[1])<1?Wi(o[0]):o.length>1?Wi((o=L(o,(function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?"0":"")+t,e.segment2+"#"+t})))[n?0:o.length-1]):null}function Zi(e,t){return W({id:e.id,type:e.$type,businessObject:e},t)}function Ji(e,t,n){var i=e.di.waypoint;return!i||i.length<2?[Yi(t),Yi(n)]:i.map((function(e){return{x:e.x,y:e.y}}))}function Qi(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:Yn(n),referenced:Yn(t),property:i}))}function er(e,t,n,i,r,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=o}er.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],er.prototype.add=function(e,t){var n,i,r,o,a,s,c,l=e.di,u=this._translate;if(ai(l,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(Zi(e)),this._canvas.setRootElement(n);else if(ai(l,"bpmndi:BPMNShape")){var d=!ci(e),p=function(e){return ai(e,"bpmn:Group")}(e);i=t&&(t.hidden||t.collapsed);var h=e.di.bounds;n=this._elementFactory.createShape(Zi(e,{collapsed:d,hidden:i,x:Math.round(h.x),y:Math.round(h.y),width:Math.round(h.width),height:Math.round(h.height),isFrame:p})),ai(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,n),ai(e,"bpmn:Lane")&&(r=0),ai(e,"bpmn:DataStoreReference")&&(o=t,a=Yi(h),s=a.x,c=a.y,s>=o.x&&s<=o.x+o.width&&c>=o.y&&c<=o.y+o.height||(t=this._canvas.getRootElement())),this._canvas.addShape(n,t,r)}else{if(!ai(l,"bpmndi:BPMNEdge"))throw new Error(u("unknown di {di} for element {semantic}",{di:Yn(l),semantic:Yn(e)}));var f=this._getSource(e),g=this._getTarget(e);i=t&&(t.hidden||t.collapsed),n=this._elementFactory.createConnection(Zi(e,{hidden:i,source:f,target:g,waypoints:Ji(e,f,g)})),ai(e,"bpmn:DataAssociation")&&(t=null),ai(e,"bpmn:SequenceFlow")&&(r=0),this._canvas.addConnection(n,t,r)}return Mi(e)&&pi(n)&&this.addLabel(e,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},er.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:Yn(e)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw Qi(n,e,i,"attachedToRef");t.host=r,o||(r.attachers=o=[]),-1===o.indexOf(t)&&o.push(t)},er.prototype.addLabel=function(e,t){var n,i,r;return n=function(e,t){var n,i,r,o=e.di.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(Ai.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Ni(t),i=Ai),W({x:n.x-i.width/2,y:n.y-i.height/2},i)}(e,t),(i=pi(t))&&(n=this._textRenderer.getExternalLabelBounds(n,i)),r=this._elementFactory.createLabel(Zi(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!pi(t),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,t.parent)},er.prototype._getEnd=function(e,t){var n,i,r=e.$type,o=this._translate;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===r&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===r||"target"===t&&"bpmn:DataInputAssociation"===r)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?Qi(o,e,i,t+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:Yn(e),side:t}))},er.prototype._getSource=function(e){return this._getEnd(e,"source")},er.prototype._getTarget=function(e){return this._getEnd(e,"target")},er.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var tr={__depends__:[Pi,{__depends__:[ji],bpmnImporter:["type",er]}]};function nr(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function ir(e){return e.originalEvent||e.srcEvent}function rr(e,t){nr(e),nr(ir(e))}function or(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function ar(e){return!(ir(e)||e).button}function sr(e){var t=ir(e)||e;return!!ar(e)&&(/mac/i.test(navigator.platform)?t.metaKey:t.ctrlKey)}function cr(e){return!0}function lr(e,t,n){var i=this;function r(n,i,r){var o,a;(function(e,t){return!(c[e]||ar)(t)})(n,i)||(r?a=t.getGraphics(r):(o=i.delegateTarget||i.target)&&(a=o,r=t.get(a)),a&&r&&!1===e.fire(n,{element:r,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault()))}var o={};function a(e){return o[e]}var s={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":cr};function l(e,t,n,i){var a=o[n]=function(e){r(n,e)};i&&(c[n]=i),a.$delegate=Y.e.bind(e,"svg, .djs-element",t,a)}function u(e,t,n){var i=a(n);i&&Y.e.unbind(e,t,i.$delegate)}e.on("canvas.destroy",(function(e){var t;t=e.svg,S(s,(function(e,n){u(t,n,e)}))})),e.on("canvas.init",(function(e){var t;t=e.svg,S(s,(function(e,n){l(t,n,e)}))})),e.on(["shape.added","connection.added"],(function(t){var n=t.element,i=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:i})})),e.on(["shape.changed","connection.changed"],500,(function(t){var n=t.element,i=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:i})})),e.on("interactionEvents.createHit",500,(function(e){var t=e.element,n=e.gfx;i.createDefaultHit(t,n)})),e.on("interactionEvents.updateHit",(function(e){var t=e.element,n=e.gfx;i.updateDefaultHit(t,n)}));var d=f("djs-hit djs-hit-stroke"),p=f("djs-hit djs-hit-click-stroke"),h={all:f("djs-hit djs-hit-all"),"click-stroke":p,stroke:d};function f(e,t){return t=W({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function g(e,t){var n=h[t];if(!n)throw new Error("invalid hit type <"+t+">");return ee(e,n),e}function m(e,t){Z(e,t)}this.removeHits=function(e){S(Object(Y.j)(".djs-hit",e),se)},this.createDefaultHit=function(e,t){var n,i=e.waypoints,r=e.isFrame;return i?this.createWaypointsHit(t,i):(n=r?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=He(t);return g(n,"stroke"),m(e,n),n},this.createBoxHit=function(e,t,n){n=W({x:0,y:0},n);var i=he("rect");return g(i,t),ee(i,n),m(e,i),i},this.updateDefaultHit=function(e,t){var n=Object(Y.i)(".djs-hit",t);if(n)return e.waypoints?function(e,t){ee(e,{points:ze(t)})}(n,e.waypoints):ee(n,{width:e.width,height:e.height}),n},this.fire=r,this.triggerMouseEvent=function(e,t,n){var i=s[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return r(i,t,n)},this.mouseHandler=a,this.registerEvent=l,this.unregisterEvent=u}lr.$inject=["eventBus","elementRegistry","styles"];var ur={__init__:["interactionEvents"],interactionEvents:["type",lr]};function dr(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function o(e,t){var n=he("rect");return ee(n,W({x:10,y:10,width:100,height:100},i)),Z(e,n),n}e.on(["shape.added","shape.changed"],500,(function(e){var t=e.element,n=e.gfx,i=Object(Y.i)(".djs-outline",n);i||(i=o(n)),r.updateShapeOutline(i,t)})),e.on(["connection.added","connection.changed"],(function(e){var t=e.element,n=e.gfx,i=Object(Y.i)(".djs-outline",n);i||(i=o(n)),r.updateConnectionOutline(i,t)}))}dr.prototype.updateShapeOutline=function(e,t){ee(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},dr.prototype.updateConnectionOutline=function(e,t){var n=Ge(t);ee(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},dr.$inject=["eventBus","styles","elementRegistry"];var pr={__init__:["outline"],outline:["type",dr]};function hr(e){this._eventBus=e,this._selectedElements=[];var t=this;e.on(["shape.remove","connection.remove"],(function(e){var n=e.element;t.deselect(n)})),e.on(["diagram.clear"],(function(e){t.select(null)}))}hr.$inject=["eventBus"],hr.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},hr.prototype.get=function(){return this._selectedElements},hr.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},hr.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();m(e)||(e=e?[e]:[]),t?S(e,(function(e){-1===n.indexOf(e)&&n.push(e)})):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};function fr(e,t,n,i){function r(e,n){t.addMarker(e,n)}function o(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,e.on("element.hover",(function(e){r(e.element,"hover")})),e.on("element.out",(function(e){o(e.element,"hover")})),e.on("selection.changed",(function(e){var t=e.oldSelection,n=e.newSelection;S(t,(function(e){-1===n.indexOf(e)&&o(e,"selected")})),S(n,(function(e){-1===t.indexOf(e)&&r(e,"selected")}))}))}function gr(e,t,n,i){e.on("create.end",500,(function(e){var n=e.context,i=n.canExecute,r=n.elements,o=(n.hints||{}).autoSelect;if(i){if(!1===o)return;m(o)?t.select(o):t.select(r.filter(mr))}})),e.on("connect.end",500,(function(e){e.context.canExecute&&e.context.hover&&t.select(e.context.hover)})),e.on("shape.move.end",500,(function(e){var n=e.previousSelection||[],r=i.get(e.context.shape.id);E(n,(function(e){return r.id===e.id}))||t.select(r)})),e.on("element.click",(function(e){var i=e.element;i===n.getRootElement()&&(i=null);var r=t.isSelected(i),o=t.get().length>1,a=sr(e);if(r&&o)return a?t.deselect(i):t.select(i);r?t.deselect(i):t.select(i,a)}))}function mr(e){return!e.hidden}fr.$inject=["eventBus","canvas","selection","styles"],gr.$inject=["eventBus","selection","canvas","elementRegistry"];var vr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[ur,pr],selection:["type",hr],selectionVisuals:["type",fr],selectionBehavior:["type",gr]};function yr(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}yr.prototype.next=function(){return this._prefix+ ++this._counter};var br=new yr("ov");function wr(e,t,n,i){var r,o;this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=br,this._overlayDefaults=W({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),o=Object(Y.f)('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),r.insertBefore(o,r.firstChild),o),this._init()}function xr(e,t,n){W(e.style,{left:t+"px",top:n+"px"})}function Er(e,t){e.style.display=!1===t?"none":""}function _r(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){e.style[n+"transform"]=t}))}wr.$inject=["config.overlays","eventBus","canvas","elementRegistry"],wr.prototype.get=function(e){if(w(e)&&(e={id:e}),w(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?_(t.overlays,B({type:e.type})):t.overlays.slice():[]}return e.type?_(this._overlays,B({type:e.type})):e.id?this._overlays[e.id]:null},wr.prototype.add=function(e,t,n){if(v(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=W({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},wr.prototype.remove=function(e){var t=this.get(e)||[];m(t)||(t=[t]);var n=this;S(t,(function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(Object(Y.k)(e.html),Object(Y.k)(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var i=t.overlays.indexOf(e);-1!==i&&t.overlays.splice(i,1)}}))},wr.prototype.show=function(){Er(this._overlayRoot)},wr.prototype.hide=function(){Er(this._overlayRoot,!1)},wr.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Object(Y.c)(this._overlayRoot)},wr.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=Ge(t);i=o.x,r=o.y}xr(n,i,r),Object(Y.a)(e.html,"data-container-id",t.id)},wr.prototype._updateOverlay=function(e){var t,n,i=e.position,r=e.htmlContainer,o=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=o.waypoints?Ge(o).width:o.width,a=-1*i.right+t);void 0!==i.bottom&&(n=o.waypoints?Ge(o).height:o.height,s=-1*i.bottom+n);xr(r,a||0,s||0)},wr.prototype._createOverlayContainer=function(e){var t=Object(Y.f)('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},wr.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";_r(this._overlayRoot,n)},wr.prototype._getOverlayContainer=function(e,t){var n=E(this._overlayContainers,(function(t){return t.element===e}));return n||t?n:this._createOverlayContainer(e)},wr.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),w(o)&&(o=Object(Y.f)(o)),n=this._getOverlayContainer(r),(t=Object(Y.f)('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),e.type&&Object(Y.b)(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},wr.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,o=e.htmlContainer,a=!0;n&&((f(i)&&i>t.scale||f(r)&&r<t.scale)&&(a=!1),Er(o,a)),this._updateOverlayScale(e,t)},wr.prototype._updateOverlayScale=function(e,t){var n,i,r,o=e.scale,a=e.htmlContainer,s="";!0!==o&&(!1===o?(n=1,i=1):(n=o.min,i=o.max),f(n)&&t.scale<n&&(r=(1/t.scale||1)*n),f(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),f(r)&&(s="scale("+r+","+r+")"),_r(a,s)},wr.prototype._updateOverlaysVisibilty=function(e){var t=this;S(this._overlays,(function(n){t._updateOverlayVisibilty(n,e)}))},wr.prototype._init=function(){var e=this._eventBus,t=this;e.on("canvas.viewbox.changing",(function(e){t.hide()})),e.on("canvas.viewbox.changed",(function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()})),e.on(["shape.remove","connection.remove"],(function(e){var n=e.element;S(t.get({element:n}),(function(e){t.remove(e.id)}));var i=t._getOverlayContainer(n);if(i){Object(Y.k)(i.html);var r=t._overlayContainers.indexOf(i);-1!==r&&t._overlayContainers.splice(r,1)}})),e.on("element.changed",500,(function(e){var n=e.element,i=t._getOverlayContainer(n,!0);i&&(S(i.overlays,(function(e){t._updateOverlay(e)})),t._updateOverlayContainer(i))})),e.on("element.marker.update",(function(e){var n=t._getOverlayContainer(e.element,!0);n&&Object(Y.b)(n.html)[e.add?"add":"remove"](e.marker)})),e.on("diagram.clear",this.clear,this)};var Sr={__init__:["overlays"],overlays:["type",wr]};function Cr(e){ni.call(this,e)}function Or(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function kr(e,t){return-1!==(e=m(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.keyCode)}function Tr(e){return e.shiftKey}a()(Cr,ni),Cr.prototype._modules=[tr,ji,vr,Sr],Cr.prototype._moddleExtensions={};function Pr(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",(function(){n._fire("destroy"),n.unbind()})),t.on("diagram.init",(function(){n._fire("init")})),t.on("attach",(function(){e&&e.bindTo&&n.bind(e.bindTo)})),t.on("detach",(function(){n.unbind()}))}Pr.$inject=["config.keyboard","eventBus"],Pr.prototype._keydownHandler=function(e){this._keyHandler(e,"keyboard.keydown")},Pr.prototype._keyupHandler=function(e){this._keyHandler(e,"keyboard.keyup")},Pr.prototype._keyHandler=function(e,t){if(!function(e){return e&&(Object(Y.h)(e,"input, textarea")||"true"===e.contentEditable)}(e.target)){var n={keyEvent:e};this._eventBus.fire(t||"keyboard.keydown",n)&&e.preventDefault()}},Pr.prototype.bind=function(e){this.unbind(),this._node=e,Y.g.bind(e,"keydown",this._keydownHandler,!0),Y.g.bind(e,"keyup",this._keyupHandler,!0),this._fire("bind")},Pr.prototype.getBinding=function(){return this._node},Pr.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Y.g.unbind(e,"keydown",this._keydownHandler,!0),Y.g.unbind(e,"keyup",this._keyupHandler,!0)),this._node=null},Pr.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},Pr.prototype.addListener=function(e,t,n){b(e)&&(n=t,t=e,e=1e3),this._eventBus.on(n||"keyboard.keydown",e,t)},Pr.prototype.removeListener=function(e,t){this._eventBus.off(t||"keyboard.keydown",e)},Pr.prototype.hasModifier=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},Pr.prototype.isCmd=Or,Pr.prototype.isShift=Tr,Pr.prototype.isKey=kr;var jr=["c","C",67],Ar=["v","V",86],Mr=["y","Y",89],Dr=["z","Z",90];function Rr(e,t){var n=this;e.on("editorActions.init",500,(function(e){var i=e.editorActions;n.registerBindings(t,i)}))}Rr.$inject=["eventBus","keyboard"],Rr.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n("undo",(function(e){var n=e.keyEvent;if(Or(n)&&!Tr(n)&&kr(Dr,n))return t.trigger("undo"),!0})),n("redo",(function(e){var n=e.keyEvent;if(Or(n)&&(kr(Mr,n)||kr(Dr,n)&&Tr(n)))return t.trigger("redo"),!0})),n("copy",(function(e){var n=e.keyEvent;if(Or(n)&&kr(jr,n))return t.trigger("copy"),!0})),n("paste",(function(e){var n=e.keyEvent;if(Or(n)&&kr(Ar,n))return t.trigger("paste"),!0})),n("stepZoom",(function(e){var n=e.keyEvent;if(kr(["+","Add"],n)&&Or(n))return t.trigger("stepZoom",{value:1}),!0})),n("stepZoom",(function(e){var n=e.keyEvent;if(kr(["-","Subtract"],n)&&Or(n))return t.trigger("stepZoom",{value:-1}),!0})),n("zoom",(function(e){var n=e.keyEvent;if(kr("0",n)&&Or(n))return t.trigger("zoom",{value:1}),!0})),n("removeSelection",(function(e){if(kr(["Delete","Del"],e.keyEvent))return t.trigger("removeSelection"),!0}))};var Nr={__init__:["keyboard","keyboardBindings"],keyboard:["type",Pr],keyboardBindings:["type",Rr]},Lr={moveSpeed:50,moveSpeedAccelerated:200};function Br(e,t,n){var i=this;this._config=W({},Lr,e||{}),t.addListener((function(e){var n=e.keyEvent,r=i._config;if(!t.isCmd(n))return;if(t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],n)){var o,a=t.isShift(n)?r.moveSpeedAccelerated:r.moveSpeed;switch(n.key){case"ArrowLeft":case"Left":o="left";break;case"ArrowUp":case"Up":o="up";break;case"ArrowRight":case"Right":o="right";break;case"ArrowDown":case"Down":o="down"}return i.moveCanvas({speed:a,direction:o}),!0}})),this.moveCanvas=function(e){var t=0,i=0,r=e.speed/Math.min(Math.sqrt(n.viewbox().scale),1);switch(e.direction){case"left":t=r;break;case"up":i=r;break;case"right":t=-r;break;case"down":i=-r}n.scroll({dx:t,dy:i})}}Br.$inject=["config.keyboardMove","keyboard","canvas"];var Ir={__depends__:[Nr],__init__:["keyboardMove"],keyboardMove:["type",Br]},Fr=/^djs-cursor-.*$/;function zr(e){var t=Object(Y.b)(document.body);t.removeMatching(Fr),e&&t.add("djs-cursor-"+e)}function Hr(){zr(null)}function Vr(e,t){function n(){return!1}return t=t||"element.click",e.once(t,5e3,n),function(){e.off(t,n)}}function $r(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Ur(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Wr(e,t){var n;function i(i){var r,o=n.start,a=or(i),s=Ur(a,o);(!n.dragging&&(r=s,Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))>15)&&(n.dragging=!0,Vr(e),zr("grab")),n.dragging)&&(s=Ur(a,n.last||n.start),t.scroll({dx:s.x,dy:s.y}),n.last=a);i.preventDefault()}function r(e){Y.g.unbind(document,"mousemove",i),Y.g.unbind(document,"mouseup",r),n=null,Hr()}e.on("element.mousedown",500,(function(e){return function(e){if(Object(Y.d)(e.target,".djs-draggable"))return;if(e.button||e.ctrlKey||e.shiftKey||e.altKey)return;return n={start:or(e)},Y.g.bind(document,"mousemove",i),Y.g.bind(document,"mouseup",r),!0}(e.originalEvent)}))}Wr.$inject=["eventBus","canvas"];var qr={__init__:["moveCanvas"],moveCanvas:["type",Wr]};function Gr(e){return Math.log(e)/Math.log(10)}function Yr(e,t){var n=Gr(e.min),i=Gr(e.max);return(Math.abs(n)+Math.abs(i))/t}var Kr=Math.sign||function(e){return e>=0?1:-1},Xr={min:.2,max:4};function Zr(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=$(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||.75;var i=this;t.on("canvas.init",(function(t){i._init(!1!==e.enabled)}))}Zr.$inject=["config.zoomScroll","eventBus","canvas"],Zr.prototype.scroll=function(e){this._canvas.scroll(e)},Zr.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Zr.prototype.zoom=function(e,t){var n=Yr(Xr,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},Zr.prototype._handleWheel=function(e){if(!Object(Y.d)(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=e.ctrlKey,r=e.shiftKey,o=-1*this._scale;if(o*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i){var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Kr(e.deltaY)*o,this.zoom(n,s)}else n=r?{dx:o*e.deltaY,dy:0}:{dx:o*e.deltaX,dy:o*e.deltaY},this.scroll(n)}},Zr.prototype.stepZoom=function(e,t){var n=Yr(Xr,10);this._zoom(e,t,n)},Zr.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=Gr(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(function(e,t){return Math.max(e.min,Math.min(e.max,t))}(Xr,s),t)},Zr.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&Y.g[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},Zr.prototype._init=function(e){this.toggle(e)};var Jr={__init__:["zoomScroll"],zoomScroll:["type",Zr]};function Qr(e){Cr.call(this,e)}a()(Qr,Cr),Qr.prototype._navigationModules=[Ir,qr,Jr],Qr.prototype._modules=[].concat(Cr.prototype._modules,Qr.prototype._navigationModules);var eo=n(6),to=n.n(eo),no=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function io(e,t){return t.get(e,!1)}function ro(e){e.preventDefault(),e.stopPropagation(),"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}function oo(e){function t(t){setTimeout((function(){S(no,(function(t){Y.g.unbind(e,t,ro,!0)}))}),500)}Y.g.bind(e,"touchstart",(function(t){S(no,(function(t){Y.g.bind(e,t,ro,!0)}))}),!0),Y.g.bind(e,"touchend",t,!0),Y.g.bind(e,"touchcancel",t,!0);var n=new to.a.Manager(e,{inputClass:to.a.TouchInput,recognizers:[]}),i=new to.a.Tap,r=new to.a.Pan({threshold:10}),o=new to.a.Press,a=new to.a.Pinch,s=new to.a.Tap({event:"doubletap",taps:2});return a.requireFailure(r),a.requireFailure(o),n.add([r,o,a,s,i]),n.reset=function(e){var t=this.recognizers,i=this.session;i.stopped||(n.stop(e),setTimeout((function(){var e,n;for(e=0;n=t[e];e++)n.reset(),n.state=8;i.curRecognizer=null}),0))},n.on("hammer.input",(function(e){e.srcEvent.defaultPrevented&&n.reset(!0)})),n}function ao(e,t,n,i,r){var o,a=io("dragging",e),s=io("move",e),c=io("contextPad",e),l=io("palette",e);function u(e){return function(t){r.fire(e,t)}}function d(e){return Object(Y.d)(e,"svg, .djs-element",!0)}function p(e){function n(e){var n=d(e.target),r=n&&i.get(n);if(s&&t.getRootElement()!==r)return s.start(e,r,!0);!function(e){var n=0,i=0;function r(e){var r=e.deltaX-n,o=e.deltaY-i;t.scroll({dx:r,dy:o}),n=e.deltaX,i=e.deltaY}function a(e){o.off("panmove",r),o.off("panend",a),o.off("pancancel",a)}o.on("panmove",r),o.on("panend",a),o.on("pancancel",a)}()}(o=oo(e)).on("doubletap",u("element.dblclick")),o.on("tap",u("element.click")),o.on("panstart",n),o.on("press",n),o.on("pinchstart",(function(e){var n=t.zoom(),i=e.center;function r(e){var r=1-(1-e.scale)/1.5,o=Math.max(.2,Math.min(4,r*n));t.zoom(o,i),ro(e)}function a(e){o.off("pinchmove",r),o.off("pinchend",a),o.off("pinchcancel",a),o.reset(!0)}o.on("pinchmove",r),o.on("pinchend",a),o.on("pinchcancel",a)}))}a&&n.on("drag.move",(function(e){var t=e.originalEvent;if(t&&!(t instanceof MouseEvent)){var n=or(t),r=d(document.elementFromPoint(n.x,n.y)),o=r&&i.get(r);o!==e.hover&&(e.hover&&a.out(e),o&&(a.hover({element:o,gfx:r}),e.hover=o,e.hoverGfx=r))}})),c&&n.on("contextPad.create",(function(e){var t=oo(e.pad.html);t.on("panstart",(function(e){c.trigger("dragstart",e,!0)})),t.on("press",(function(e){c.trigger("dragstart",e,!0)})),t.on("tap",(function(e){c.trigger("click",e)}))})),l&&n.on("palette.create",(function(e){var t=oo(e.container);t.on("panstart",(function(e){l.trigger("dragstart",e,!0)})),t.on("press",(function(e){l.trigger("dragstart",e,!0)})),t.on("tap",(function(e){l.trigger("click",e)}))})),n.on("canvas.init",(function(e){p(e.svg)}))}function so(e,t){var n=this;t.on("canvas.init",(function(e){n.addBBoxMarker(e.svg)}))}ao.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],so.$inject=["canvas","eventBus"],so.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=he("rect");ee(n,{x:-1e4,y:1e4,width:10,height:10}),ee(n,t),Z(e,n);var i=he("rect");ee(i,{x:1e4,y:1e4,width:10,height:10}),ee(i,t),Z(e,i)};var co={__depends__:[{__depends__:[ur],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",ao],touchFix:["type",so]}]};function lo(e){return e&&e[e.length-1]}function uo(e){return e.y}function po(e){return e.x}var ho={left:po,center:po,right:function(e){return e.x+e.width},top:uo,middle:uo,bottom:function(e){return e.y+e.height}};function fo(e){this._modeling=e}fo.$inject=["modeling"],fo.prototype._getOrientationDetails=function(e){var t="x",n="width";return-1!==["top","bottom","middle"].indexOf(e)&&(t="y",n="height"),{axis:t,dimension:n}},fo.prototype._isType=function(e,t){return-1!==t.indexOf(e)},fo.prototype._alignmentPosition=function(e,t){var n,i,r,o=this._getOrientationDetails(e),a=o.axis,s=o.dimension,c={},l={},u=!1;if(this._isType(e,["left","top"]))c[e]=t[0][a];else if(this._isType(e,["right","bottom"]))r=lo(t),c[e]=r[a]+r[s];else if(this._isType(e,["center","middle"])){if(S(t,(function(e){var t=e[a]+Math.round(e[s]/2);l[t]?l[t].elements.push(e):l[t]={elements:[e],center:t}})),n=L(l,(function(e){return e.elements.length>1&&(u=!0),e.elements.length})),u)return c[e]=lo(n).center,c;i=t[0],r=lo(t=L(t,(function(e){return e[a]+e[s]}))),c[e]=function(e,t){return Math.round((e[a]+t[a]+t[s])/2)}(i,r)}return c},fo.prototype.trigger=function(e,t){var n=this._modeling,i=L(_(e,(function(e){return!(e.waypoints||e.host||e.labelTarget)})),ho[t]),r=this._alignmentPosition(t,i);n.alignElements(i,r)};var go={__init__:["alignElements"],alignElements:["type",fo]};function mo(e,t,n,i){for(var r;r=yo(e,n,t);)n=i(t,n,r);return n}function vo(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach((function(o){var a=e[o];if(a){var s="x"===o?"width":"height",c=a.margin,l=a.minDistance;r[o]=c<0?Math.min(i[o]+c-t[s]/2,n[o]-l+c):Math.max(i[o]+i[s]+c+t[s]/2,n[o]+l+c)}})),r}}function yo(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height};return E(function(e){var t=bo(e);e.host&&(t=t.concat(bo(e.host)));e.attachers&&(t=t.concat(e.attachers.reduce((function(e,t){return e.concat(bo(t))}),[])));return t}(e),(function(e){return e!==n&&"intersect"===Ki(e,i,10)}))}function bo(e){return(t=e,t.outgoing.map((function(e){return e.target}))).concat(function(e){return e.incoming.map((function(e){return e.source}))}(e));var t}function wo(){return!0}function xo(e,t){e.on("autoPlace",100,(function(e){var t=e.shape;return function(e,t,n){n||(n={});var i=n.defaultDistance||50,r=Yi(e);return{x:qi(e).right+i+t.width/2,y:r.y}}(e.source,t)})),this.append=function(n,i,r){e.fire("autoPlace.start",{source:n,shape:i});var o=e.fire("autoPlace",{source:n,shape:i}),a=t.appendShape(n,i,o,n.parent,r);return e.fire("autoPlace.end",{source:n,shape:a}),a}}function Eo(e,t){e.on("autoPlace.end",500,(function(e){t.select(e.shape)}))}xo.$inject=["eventBus","modeling"],Eo.$inject=["eventBus","selection"];var _o={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",xo],autoPlaceSelectionBehavior:["type",Eo]};function So(e,t){return T(t,(function(t){return ai(e,t)}))}function Co(e,t){for("string"==typeof t&&(t=[t]);e=e.parent;)if(So(e,t))return e;return null}function Oo(e,t){return ai(t,"bpmn:TextAnnotation")?function(e,t){var n=qi(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2};return mo(e,t,i,vo({y:{margin:-30,minDistance:20}}))}(e,t):So(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(e,t){var n=qi(e),i={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2};return mo(e,t,i,vo({x:{margin:30,minDistance:30}}))}(e,t):ai(t,"bpmn:FlowNode")?function(e,t){var n=qi(e),i=Yi(e),r=function(e,t){t||(t={});var n=t.defaultDistance||50,i=t.direction||"e",r=t.filter,o=t.getWeight||function(t){return t.source===e?1:-1},a=t.maxDistance||250,s=t.reference||"start";function c(e,t){return"n"===i?"start"===s?qi(e).top-qi(t).bottom:"center"===s?qi(e).top-Yi(t).y:qi(e).top-qi(t).top:"w"===i?"start"===s?qi(e).left-qi(t).right:"center"===s?qi(e).left-Yi(t).x:qi(e).left-qi(t).left:"s"===i?"start"===s?qi(t).top-qi(e).bottom:"center"===s?Yi(t).y-qi(e).bottom:qi(t).bottom-qi(e).bottom:"start"===s?qi(t).left-qi(e).right:"center"===s?Yi(t).x-qi(e).right:qi(t).right-qi(e).right}r||(r=wo);var l=e.incoming.filter(r).map((function(t){var n=o(t),i=n<0?c(t.source,e):c(e,t.source);return{id:t.source.id,distance:i,weight:n}})),u=e.outgoing.filter(r).map((function(t){var n=o(t),i=n>0?c(e,t.target):c(t.target,e);return{id:t.target.id,distance:i,weight:n}}));return O(l.concat(u).reduce((function(e,t){return e[t.id+"__weight_"+t.weight]=t,e}),{}),(function(e,t){var n=t.distance,i=t.weight;return n<0||n>a||(e[String(n)]||(e[String(n)]=0),e[String(n)]+=1*i,(!e.distance||e[e.distance]<e[String(n)])&&(e.distance=n)),e}),{}).distance||n}(e,{filter:function(e){return ai(e,"bpmn:SequenceFlow")}}),o=30,a="left";ai(e,"bpmn:BoundaryEvent")&&-1!==(a=Ki(e,e.host,-25)).indexOf("top")&&(o*=-1);var s={x:n.right+r+t.width/2,y:i.y+ko(a,80)};return mo(e,t,s,vo({y:{margin:o,minDistance:80}}))}(e,t):void 0}function ko(e,t){return-1!=e.indexOf("top")?-1*t:-1!=e.indexOf("bottom")?t:0}function To(e){e.on("autoPlace",(function(e){var t=e.shape;return Oo(e.source,t)}))}To.$inject=["eventBus"];var Po={__depends__:[_o],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",To]};function jo(e){this._eventBus=e}jo.$inject=["eventBus"],jo.prototype.on=function(e,t,n,i,r,o){if((b(t)||y(t))&&(o=r,r=i,i=n,n=t,t=null),b(n)&&(o=r,r=i,i=n,n=1e3),v(r)&&(o=r,r=!1),!b(i))throw new Error("handlerFn must be a function");m(e)||(e=[e]);var a=this._eventBus;S(e,(function(e){var s=["commandStack",e,t].filter((function(e){return e})).join(".");a.on(s,n,r?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(i,o):i,o)}))};function Ao(e,t,n,i){jo.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],(function(e){var t=e.context,n=t.hints||{},i=t.shape,o=t.parent||t.newParent;!1!==n.autoResize&&r._expand([i],o)})),this.postExecuted(["elements.move"],(function(e){var t=e.context,n=u(M(t.closure.topLevel)),i=t.hints,o=!i||i.autoResize;!1!==o&&S(D(n,(function(e){return e.parent.id})),(function(e,t){m(o)&&(e=e.filter((function(e){return E(o,B({id:e.id}))}))),r._expand(e,t)}))})),this.postExecuted(["shape.toggleCollapse"],(function(e){var t=e.context,n=t.hints,i=t.shape;n&&!1===n.autoResize||i.collapsed||r._expand(i.children||[],i)})),this.postExecuted(["shape.resize"],(function(e){var t=e.context,n=t.hints,i=t.shape,o=i.parent;n&&!1===n.autoResize||o&&r._expand([i],o)}))}function Mo(e){e.invoke(Ao,this)}function Do(e){jo.call(this,e),this.init()}function Ro(e){Do.call(this,e);var t=this;this.addRule("element.autoResize",(function(e){return t.canResize(e.elements,e.target)}))}function No(e,t){Ro.call(this,e),this._modeling=t}S(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],(function(e){jo.prototype[e]=function(t,n,i,r,o){(b(t)||y(t))&&(o=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,o)}})),Ao.$inject=["eventBus","elementRegistry","modeling","rules"],a()(Ao,jo),Ao.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=qi(Ge(e)),o=qi(t),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),Gi(W({},o,a))},Ao.prototype._expand=function(e,t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._rules.allowed("element.autoResize",{elements:e,target:t})){var n=this._getOptimalBounds(e,t);if(function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(n,t)){var i=function(e,t){var n="";e=qi(e),t=qi(t),e.top>t.top&&(n=n.concat("n"));e.right<t.right&&(n=n.concat("w"));e.bottom<t.bottom&&(n=n.concat("s"));e.left>t.left&&(n=n.concat("e"));return n}(q(t,["x","y","width","height"]),n);this.resize(t,n,{autoResize:i});var r=t.parent;r&&this._expand([t],r)}}},Ao.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},Ao.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},Ao.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)},Mo.$inject=["injector"],a()(Mo,Ao),Mo.prototype.resize=function(e,t,n){ai(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)},Do.$inject=["eventBus"],a()(Do,jo),Do.prototype.addRule=function(e,t,n){var i=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){i.canExecute(e,t,(function(e,t,i){return n(e)}),!0)}))},Do.prototype.init=function(){},Ro.$inject=["eventBus"],a()(Ro,Do),Ro.prototype.canResize=function(e,t){return!1},a()(No,Ro),No.$inject=["eventBus","modeling"],No.prototype.canResize=function(e,t){if(!ai(t,"bpmn:Participant")&&!ai(t,"bpmn:Lane")&&!ai(t,"bpmn:SubProcess"))return!1;var n=!0;return S(e,(function(e){(ai(e,"bpmn:Lane")||e.labelTarget)&&(n=!1)})),n};var Lo={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Mo],bpmnAutoResizeProvider:["type",No]},Bo=Math.round;function Io(e){e.preventDefault()}function Fo(e,t,n,i){var r,o={threshold:5,trapClick:!0};function a(e){var n=t.viewbox(),i=t._container.getBoundingClientRect();return{x:n.x+(e.x-i.left)/n.scale,y:n.y+(e.y-i.top)/n.scale}}function s(t,n){n=n||r;var i=e.createEvent(W({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,i)&&e.fire(n.prefix+"."+t,i)}function c(e,i){var o,c=r.payload,l=r.displacement,u=r.globalStart,d=or(e),p=Ur(d,u),h=r.localStart,f=a(d),m=Ur(f,h);if(!r.active&&(i||(o=p,Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))>r.threshold))){if(W(c,{x:Bo(h.x+l.x),y:Bo(h.y+l.y),dx:0,dy:0},{originalEvent:e}),!1===s("start"))return g();r.active=!0,r.keepSelection||(c.previousSelection=n.get(),n.select(null)),r.cursor&&zr(r.cursor),t.addMarker(t.getRootElement(),"djs-drag-active")}rr(e),r.active&&(W(c,{x:Bo(f.x+l.x),y:Bo(f.y+l.y),dx:Bo(m.x),dy:Bo(m.y)},{originalEvent:e}),s("move"))}function l(e){var t=!0;r.active&&(e&&(r.payload.originalEvent=e,rr(e)),t=s("end")),!1===t&&s("rejected"),s("ended",m(!0!==t))}function u(e){27===e.which&&(Io(e),g())}function d(t){var n;r.active&&(n=Vr(e),setTimeout(n,400),Io(t)),l(t)}function p(e){c(e)}function h(e){var t=r.payload;t.hoverGfx=e.gfx,t.hover=e.element,s("hover")}function f(e){s("out");var t=r.payload;t.hoverGfx=null,t.hover=null}function g(e){var t;if(r){var n=r.active;n&&s("cancel"),t=m(e),n&&s("canceled",t)}}function m(o){var a,m;s("cleanup"),Hr(),m=r.trapClick?d:l,Y.g.unbind(document,"mousemove",c),Y.g.unbind(document,"dragstart",Io),Y.g.unbind(document,"selectstart",Io),Y.g.unbind(document,"mousedown",m,!0),Y.g.unbind(document,"mouseup",m,!0),Y.g.unbind(document,"keyup",u),Y.g.unbind(document,"touchstart",p,!0),Y.g.unbind(document,"touchcancel",g,!0),Y.g.unbind(document,"touchmove",c,!0),Y.g.unbind(document,"touchend",l,!0),e.off("element.hover",h),e.off("element.out",f),t.removeMarker(t.getRootElement(),"djs-drag-active");var v=r.payload.previousSelection;return!1!==o&&v&&!n.get().length&&function(e){var t=e.filter((function(e){return i.get(e.id)}));t.length&&n.select(t)}(v),a=r,r=null,a}e.on("diagram.destroy",g),this.init=function(t,n,i,m){r&&g(!1),"string"==typeof n&&(m=i,i=n,n=null);var v,y,b,w,x,E=(m=W({},o,m||{})).data||{};w=m.trapClick?d:l,t?(v=ir(t)||t,y=or(t),rr(t),"dragstart"===v.type&&Io(v)):(v=null,y={x:0,y:0}),b=a(y),n||(n=b),x=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(v),r=W({prefix:i,data:E,payload:{},globalStart:y,displacement:Ur(n,b),localStart:b,isTouch:x},m),m.manual||(x?(Y.g.bind(document,"touchstart",p,!0),Y.g.bind(document,"touchcancel",g,!0),Y.g.bind(document,"touchmove",c,!0),Y.g.bind(document,"touchend",l,!0)):(Y.g.bind(document,"mousemove",c),Y.g.bind(document,"dragstart",Io),Y.g.bind(document,"selectstart",Io),Y.g.bind(document,"mousedown",w,!0),Y.g.bind(document,"mouseup",w,!0)),Y.g.bind(document,"keyup",u),e.on("element.hover",h),e.on("element.out",f)),s("init"),m.autoActivate&&c(t,!0)},this.move=c,this.hover=h,this.out=f,this.end=l,this.cancel=g,this.context=function(){return r},this.setOptions=function(e){W(o,e)}}Fo.$inject=["eventBus","canvas","selection","elementRegistry"];function zo(e,t,n){var i=this;e.on("drag.start",(function(r){e.once("drag.move",1500,(function(e){!function(e){if(!e.hover){var r=e.originalEvent,o=i._findTargetGfx(r),a=o&&n.get(o);o&&a&&(e.stopPropagation(),t.hover({element:a,gfx:o}),t.move(r))}}(e)}))})),e.on("drag.init",(function(){var n,i;function r(e){n=e.hover,i=e.hoverGfx}function o(){n=null,i=null}function a(){if(n){var e=n,r=i;n=null,i=null,t.out({element:e,gfx:r})}}e.on("drag.hover",r),e.on("element.out",o),e.on("element.hover",1500,a),e.once("drag.cleanup",(function(){e.off("drag.hover",r),e.off("element.out",o),e.off("element.hover",a)}))})),this._findTargetGfx=function(e){var t;if(e instanceof MouseEvent)return t=or(e),function(e){return Object(Y.d)(e,"svg, .djs-element",!0)}(document.elementFromPoint(t.x,t.y))}}zo.$inject=["eventBus","dragging","elementRegistry"];var Ho={__init__:["hoverFix"],__depends__:[vr],dragging:["type",Fo],hoverFix:["type",zo]};function Vo(e,t,n){this._canvas=n,this._opts=W({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",(function(e){var t=i._toBorderPoint(e);i.startScroll(t)})),t.on(["drag.cleanup"],(function(){i.stopScroll()}))}function $o(e,t,n){return t<e&&e<n}Vo.$inject=["config.autoScroll","eventBus","canvas"],Vo.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var a=0,s=0,c=0;c<4;c++)$o(o[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(0===c?a=n.scrollStep:1==c?s=n.scrollStep:2==c?a=-n.scrollStep:3==c&&(s=-n.scrollStep));0===a&&0===s||(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout((function(){i.startScroll(e)}),n.scrollRepeatTimeout))},Vo.prototype.stopScroll=function(){clearTimeout(this._scrolling)},Vo.prototype.setOptions=function(e){this._opts=W({},this._opts,e)},Vo.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=or(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};var Uo={__depends__:[Ho],__init__:["autoScroll"],autoScroll:["type",Vo]};function Wo(e){this._commandStack=e.get("commandStack",!1)}Wo.$inject=["injector"],Wo.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n};var qo={__init__:["rules"],rules:["type",Wo]},Go=Math.round,Yo=Math.max;function Ko(e,t){return function(e,t){var n,i;for(n=0;i=e[n];n++)if(Bi(i,t)<=10)return{point:e[n],bendpoint:!0,index:n};return null}(e,t)||function(e,t){var n,i,r,o,a=$i()((r=10,[["M",(i=t).x,i.y],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]]),(n=[],e.forEach((function(e,t){n.push([0===t?"M":"L",e.x,e.y])})),n)),s=a[0],c=a[a.length-1];return s?s!==c?s.segment2!==c.segment2?{point:e[o=Yo(s.segment2,c.segment2)-1],bendpoint:!0,index:o}:{point:{x:Go(s.x+c.x)/2,y:Go(s.y+c.y)/2},index:s.segment2}:{point:{x:Go(s.x),y:Go(s.y)},index:s.segment2}:null}(e,t)}function Xo(e,t,n){return Ko(t,function(e,t){var n,i=or(t),r=e._container.getBoundingClientRect();n={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(i.x-n.x)/o.scale,y:o.y+(i.y-n.y)/o.scale}}(e,n))}function Zo(e,t){var n=he("g");oe(n).add("djs-bendpoint"),Z(e,n);var i=he("circle");ee(i,{cx:0,cy:0,r:4}),oe(i).add("djs-visual"),Z(n,i);var r=he("circle");return ee(r,{cx:0,cy:0,r:10}),oe(r).add("djs-hit"),Z(n,r),t&&oe(n).add(t),n}function Jo(e,t,n,i){var r=he("g");Z(e,r);var o=function(e,t,n){var i=t.x-e.x,r=t.y-e.y;return ea("h"===n?i:r)}(t,n,i),a=he("rect");ee(a,{x:-7,y:-1.5,width:14,height:3}),oe(a).add("djs-visual"),Z(r,a);var s=he("rect");return ee(s,{x:-o/2,y:-4.5,width:o,height:9}),oe(s).add("djs-hit"),Z(r,s),jt(r,"v"===i?90:0),r}function Qo(e,t,n){var i=he("g"),r=Hi(t,n),o=Fi(t,n);return Z(e,i),Jo(i,t,n,o),oe(i).add("djs-segment-dragger"),oe(i).add("h"===o?"horizontal":"vertical"),Pt(i,r.x,r.y),i}function ea(e){return Math.abs(Math.round(2*e/3))}var ta=n(8),na=n.n(ta),ia={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ra(e){return(e=""+e)&&e.replace(/[&<>"']/g,(function(e){return ia[e]}))}function oa(e,t,n,i,r){function o(e,n){var o=n.waypoints,a=Xo(t,o,e);if(a)return!function(e,t,n){var i,r,o,a,s,c,l=e.index,u=e.point;return!(l<=0||e.bendpoint)&&(o=Hi(i=t[l-1],r=t[l]),a=Fi(i,r),s=Math.abs(u.x-o.x),c=Math.abs(u.y-o.y),a&&s<=n&&c<=n)}(a,o,function(e,t){var n,i,r=e.waypoints;return t.index<=0||t.bendpoint?null:(i=Fi((n={start:r[t.index-1],end:r[t.index]}).start,n.end))?ea("h"===i?n.end.x-n.start.x:n.end.y-n.start.y)/2:null}(n,a))?i.start(e,n,a.index,!a.bendpoint):r.start(e,n,a.index),!0}function a(e,t,i){Y.g.bind(e,t,(function(e){n.triggerMouseEvent(t,e,i),e.stopPropagation()}))}function s(e,n){var i=t.getLayer("overlays"),r=Object(Y.i)('.djs-bendpoints[data-element-id="'+na()(e.id)+'"]',i);return!r&&n&&(ee(r=he("g"),{"data-element-id":e.id}),oe(r).add("djs-bendpoints"),Z(i,r),a(r,"mousedown",e),a(r,"click",e),a(r,"dblclick",e)),r}function c(e,t){return Object(Y.i)('.djs-segment-dragger[data-segment-idx="'+e+'"]',t)}function l(e,t){t.waypoints.forEach((function(t,n){var i=Zo(e);Z(e,i),Pt(i,t.x,t.y)})),Zo(e,"floating")}function u(e,t){for(var n,i,r,o=t.waypoints,s=1;s<o.length;s++)Fi(n=o[s-1],i=o[s])&&(ee(r=Qo(e,n,i),{"data-segment-idx":s}),a(r,"mousemove",t))}function d(e){var t=s(e);return t||(l(t=s(e,!0),e),u(t,e)),t}function p(e){var t=s(e);t&&(!function(e){S(Object(Y.j)(".djs-segment-dragger",e),(function(e){se(e)}))}(t),function(e){S(Object(Y.j)(".djs-bendpoint",e),(function(e){se(e)}))}(t),u(t,e),l(t,e))}function h(e,t,n){var i,r,o=c(t.index,e),a=n[t.index-1],s=n[t.index],l=t.point,u=Hi(a,s),d=Fi(a,s);o&&(i=function(e){return Object(Y.i)(".djs-visual",e)}(o),r={x:l.x-u.x,y:l.y-u.y},"v"===d&&(r={x:r.y,y:r.x}),Pt(i,r.x,r.y))}e.on("connection.changed",(function(e){p(e.element)})),e.on("connection.remove",(function(e){var t=s(e.element);t&&se(t)})),e.on("element.marker.update",(function(e){var t,n=e.element;n.waypoints&&(t=d(n),e.add?oe(t).add(e.marker):oe(t).remove(e.marker))})),e.on("element.mousemove",(function(e){var n,i,r=e.element,o=r.waypoints;if(o){if(n=s(r,!0),!(i=Xo(t,o,e.originalEvent)))return;!function(e,t){var n=Object(Y.i)(".floating",e),i=t.point;n&&Pt(n,i.x,i.y)}(n,i),i.bendpoint||h(n,i,o)}})),e.on("element.mousedown",(function(e){var t=e.originalEvent,n=e.element;if(n.waypoints)return o(t,n)})),e.on("selection.changed",(function(e){var t=e.newSelection[0];t&&t.waypoints&&d(t)})),e.on("element.hover",(function(e){var t=e.element;t.waypoints&&(d(t),n.registerEvent(e.gfx,"mousemove","element.mousemove"))})),e.on("element.out",(function(e){n.unregisterEvent(e.gfx,"mousemove","element.mousemove")})),e.on("element.updateId",(function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=s(t);i&&ee(i,{"data-element-id":n})}})),this.addHandles=d,this.updateHandles=p,this.getBendpointsContainer=s,this.getSegmentDragger=c}oa.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var aa=Math.round;function sa(e,t,n,i,r,o){this._injector=e,this.start=function(e,t,o,a){var s,c=n.getGraphics(t),l=t.source,u=t.target,d=t.waypoints,p="updateWaypoints"===(s=a||0!==o?a||o!==d.length-1?"updateWaypoints":"reconnectEnd":"reconnectStart")?"connection.updateWaypoints":"connection.reconnect",h=r.allowed(p,{connection:t,source:l,target:u});!1===h&&(h=r.allowed(p,{connection:t,source:u,target:l})),!1!==h&&i.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:c,context:{allowed:h,bendpointIndex:o,connection:t,source:l,target:u,insert:a,type:s}}})},t.on("bendpoint.move.hover",(function(e){var t,n=e.context,i=n.connection,o=i.source,a=i.target,s=e.hover,c=n.type;if(n.hover=s,s){var l="updateWaypoints"===c?"connection.updateWaypoints":"connection.reconnect";if(t=n.allowed=r.allowed(l,{connection:i,source:"reconnectStart"===c?s:o,target:"reconnectEnd"===c?s:a}))return n.source="reconnectStart"===c?s:o,void(n.target="reconnectEnd"===c?s:a);!1===t&&(t=n.allowed=r.allowed(l,{connection:i,source:"reconnectEnd"===c?s:a,target:"reconnectStart"===c?s:o})),t&&(n.source="reconnectEnd"===c?s:a,n.target="reconnectStart"===c?s:o)}})),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],(function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.allowed=!1})),t.on("bendpoint.move.end",(function(e){var t=e.context,n=t.allowed,i=t.bendpointIndex,r=t.connection,a=t.insert,s=r.waypoints.slice(),c=t.source,l=t.target,u=t.type,d=t.hints||{},p={x:aa(e.x),y:aa(e.y)};if(!n)return!1;"updateWaypoints"===u?(a?s.splice(i,0,p):s[i]=p,d.bendpointMove={insert:a,bendpointIndex:i},s=this.cropWaypoints(r,s),o.updateWaypoints(r,function(e){e=e.slice();for(var t,n,i,r=0;e[r];)t=e[r],n=e[r-1],0===Bi(t,i=e[r+1])||Ii(n,i,t)?e.splice(r,1):r++;return e}(s),d)):("reconnectStart"===u?(d.docking="source",ca(t)&&(d.docking="target",d.newWaypoints=s.reverse())):"reconnectEnd"===u&&(d.docking="target",ca(t)&&(d.docking="source",d.newWaypoints=s.reverse())),o.reconnect(r,c,l,p,d))}),this)}function ca(e){var t=e.hover,n=e.source,i=e.target,r=e.type;return"reconnectStart"===r?t&&i&&t===i&&n!==i:"reconnectEnd"===r?t&&n&&t===n&&n!==i:void 0}sa.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],sa.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function la(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",(function(e){var t=e.context,n=t.bendpointIndex,r=t.connection,o=t.insert,a=r.waypoints,s=a.slice();t.waypoints=a,o&&s.splice(n,0,{x:e.x,y:e.y}),r.waypoints=s,oe(t.draggerGfx=Zo(i.getLayer("overlays"))).add("djs-dragging"),i.addMarker(r,"djs-element-hidden"),i.addMarker(r,"djs-updating")})),n.on("bendpoint.move.hover",(function(e){var t=e.context,n=t.allowed,r=t.hover,o=t.type;if(r){if(i.addMarker(r,"connect-hover"),"updateWaypoints"===o)return;n?(i.removeMarker(r,"connect-not-ok"),i.addMarker(r,"connect-ok")):!1===n&&(i.removeMarker(r,"connect-ok"),i.addMarker(r,"connect-not-ok"))}})),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,(function(e){var t=e.context,n=t.hover,r=t.target;n&&(i.removeMarker(n,"connect-hover"),i.removeMarker(n,r?"connect-ok":"connect-not-ok"))})),n.on("bendpoint.move.move",(function(t){var n=t.context,i=n.allowed,o=n.bendpointIndex,a=n.draggerGfx,s=n.hover,c=n.type,l=n.connection,u=l.source,d=l.target,p=l.waypoints.slice(),h={x:t.x,y:t.y},f=n.hints||{},g={};r&&(f.connectionStart&&(g.connectionStart=f.connectionStart),f.connectionEnd&&(g.connectionEnd=f.connectionEnd),"reconnectStart"===c?ca(n)?(g.connectionEnd=g.connectionEnd||h,g.source=d,g.target=s||u,p=p.reverse()):(g.connectionStart=g.connectionStart||h,g.source=s||u,g.target=d):"reconnectEnd"===c?ca(n)?(g.connectionStart=g.connectionStart||h,g.source=s||d,g.target=u,p=p.reverse()):(g.connectionEnd=g.connectionEnd||h,g.source=u,g.target=s||d):(g.noCropping=!0,g.noLayout=!0,p[o]=h),"updateWaypoints"===c&&(p=e.cropWaypoints(l,p)),g.waypoints=p,r.drawPreview(n,i,g)),Pt(a,t.x,t.y)}),this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,(function(e){var t=e.context,n=t.connection,o=t.draggerGfx,a=t.hover,s=t.target,c=t.waypoints;n.waypoints=c,se(o),i.removeMarker(n,"djs-updating"),i.removeMarker(n,"djs-element-hidden"),a&&(i.removeMarker(a,"connect-ok"),i.removeMarker(a,s?"connect-ok":"connect-not-ok")),r&&r.cleanUp(t)}))}la.$inject=["bendpointMove","injector","eventBus","canvas"];function ua(e,t,n){return da(e,t,e[t]+n)}function da(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function pa(e){return"x"===e?"y":"x"}function ha(e,t,n){var i,r;return e.original?e.original:(i=Yi(t),da(e,r=pa(n),i[r]))}function fa(e,t,n,i,r,o){var a=e.get("connectionDocking",!1);function s(e,t){if(!a)return t;var n,i=e.waypoints;return e.waypoints=t,n=a.getCroppedWaypoints(e),e.waypoints=i,n}function c(e){r.update("connection",e.connection,e.connectionGfx)}function l(e,t,n){var i=e.newWaypoints,r=function(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]);return da(t,i,Math.min(Math.max(o+20,e[i]),r-20))}(n,i[e.segmentStartIndex+t],i[e.segmentEndIndex+t],pa(e.axis));Pt(e.draggerGfx,r.x,r.y)}this.start=function(e,t,r){var o,a,s,c,l=n.getGraphics(t),u=r-1,d=r,p=t.waypoints,h=p[u],f=p[d],g=Xo(n,p,e);(a=Fi(h,f))&&(s="v"===a?"x":"y",0===u&&(h=ha(h,t.source,s)),d===p.length-1&&(f=ha(f,t.target,s)),o={connection:t,segmentStartIndex:u,segmentEndIndex:d,segmentStart:h,segmentEnd:f,axis:s,dragPosition:c=g?g.point:{x:(h.x+f.x)/2,y:(h.y+f.y)/2}},i.init(e,c,"connectionSegment.move",{cursor:"x"===s?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:l,context:o}}))},t.on("connectionSegment.move.start",(function(e){var t=e.context,i=e.connection,r=n.getLayer("overlays");t.originalWaypoints=i.waypoints.slice(),t.draggerGfx=Qo(r,t.segmentStart,t.segmentEnd),oe(t.draggerGfx).add("djs-dragging"),n.addMarker(i,"djs-updating")})),t.on("connectionSegment.move.move",(function(e){var t,n,i=e.context,r=i.connection,o=i.segmentStartIndex,a=i.segmentEndIndex,u=i.segmentStart,d=i.segmentEnd,p=i.axis,h=i.originalWaypoints.slice(),f=ua(u,p,e["d"+p]),g=ua(d,p,e["d"+p]),m=h.length,v=0;h[o]=f,h[a]=g,o<2&&(t=Ki(r.source,f),1===o?"intersect"===t&&(h.shift(),h[0]=f,v--):"intersect"!==t&&(h.unshift(u),v++)),a>m-3&&(n=Ki(r.target,g),a===m-2?"intersect"===n&&(h.pop(),h[h.length-1]=g):"intersect"!==n&&h.push(d)),i.newWaypoints=r.waypoints=s(r,h),l(i,v,e),i.newSegmentStartIndex=o+v,c(e)})),t.on("connectionSegment.move.hover",(function(e){e.context.hover=e.hover,n.addMarker(e.hover,"connect-hover")})),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],(function(e){var t=e.context.hover;t&&n.removeMarker(t,"connect-hover")})),t.on("connectionSegment.move.cleanup",(function(e){var t=e.context,i=t.connection;t.draggerGfx&&se(t.draggerGfx),n.removeMarker(i,"djs-updating")})),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],(function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,c(e)})),t.on("connectionSegment.move.end",(function(e){var t=e.context,n=t.connection,i=t.newWaypoints,r=t.newSegmentStartIndex,a=function(e,t){var n=0;return{waypoints:e.filter((function(i,r){return!Ii(e[r-1],e[r+1],i)||(n=r<=t?n-1:n,!1)})),segmentOffset:n}}(i=i.map((function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}})),r),c=s(n,a.waypoints),l=a.segmentOffset,u={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:r+l}};o.updateWaypoints(n,c,u)}))}fa.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var ga=Math.abs,ma=Math.round;function va(e){return{x:e.x,y:e.y}}function ya(e){return{x:e.x+e.width,y:e.y+e.height}}function ba(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:ma(e.x+e.width/2),y:ma(e.y+e.height/2)}}function wa(e,t){var n=e.snapped;return!!n&&("string"==typeof t?n[t]:n.x&&n.y)}function xa(e,t,n){if("string"!=typeof t)throw new Error("axis must be in [x, y]");if("number"!=typeof n&&!1!==n)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return!1===n?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function Ea(e){return e.children||[]}var _a=Math.abs,Sa=Math.round;function Ca(e){function t(e,t){if(m(e)){for(var n=e.length;n--;)if(_a(e[n]-t)<=10)return e[n]}else{var i=t%(e=+e);if(i<10)return t-i;if(i>e-10)return t-i+e}return t}function n(e){if(e.width)return{x:Sa(e.width/2+e.x),y:Sa(e.height/2+e.y)}}e.on("connectionSegment.move.move",1500,(function(e){var i,r,o=function(e){var t=e.snapPoints,i=e.connection,r=i.waypoints,o=e.segmentStart,a=e.segmentStartIndex,s=e.segmentEnd,c=e.segmentEndIndex,l=e.axis;if(t)return t;var u=[r[a-1],o,s,r[c+1]];return a<2&&u.unshift(n(i.source)),c>r.length-3&&u.unshift(n(i.target)),e.snapPoints=t={horizontal:[],vertical:[]},S(u,(function(e){e&&(e=e.original||e,"y"===l&&t.horizontal.push(e.y),"x"===l&&t.vertical.push(e.x))})),t}(e.context),a=e.x,s=e.y;if(o){var c=a-(i=t(o.vertical,a)),l=s-(r=t(o.horizontal,s));W(e,{dx:e.dx-c,dy:e.dy-l,x:i,y:r}),(c||-1!==o.vertical.indexOf(a))&&xa(e,"x",i),(l||-1!==o.horizontal.indexOf(s))&&xa(e,"y",r)}})),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,(function(e){var i,r,o=e.context,a=function(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var r=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},S(r,(function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))})),t}(o),s=o.hover,c=s&&n(s),l=e.x,u=e.y;if(a){var d=l-(i=t(c?a.vertical.concat([c.x]):a.vertical,l)),p=u-(r=t(c?a.horizontal.concat([c.y]):a.horizontal,u));W(e,{dx:e.dx-d,dy:e.dy-p,x:e.x-d,y:e.y-p}),(d||-1!==a.vertical.indexOf(l))&&xa(e,"x",i),(p||-1!==a.horizontal.indexOf(u))&&xa(e,"y",r)}}))}Ca.$inject=["eventBus"];var Oa={__depends__:[Ho,qo],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",oa],bendpointMove:["type",sa],bendpointMovePreview:["type",la],connectionSegmentMove:["type",fa],bendpointSnapping:["type",Ca]};function ka(e,t,n,i){function r(e,t){return i.allowed("connection.create",{source:e,target:t})}e.on("connect.hover",(function(e){var t,n=e.context,i=n.start,o=e.hover;if(n.hover=o,!g(t=n.canExecute=r(i,o))){if(!1!==t)return n.source=i,void(n.target=o);g(t=n.canExecute=r(o,i))||!1!==t&&(n.source=o,n.target=i)}})),e.on(["connect.out","connect.cleanup"],(function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1})),e.on("connect.end",(function(e){var t=e.context,i=t.canExecute,r=t.connectionStart,o={x:e.x,y:e.y},a=t.source,s=t.target;if(!i)return!1;var c=null,l={connectionStart:Ta(t)?o:r,connectionEnd:Ta(t)?r:o};v(i)&&(c=i),n.connect(a,s,c,l)})),this.start=function(e,n,i,r){v(i)||(r=i,i=Yi(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{start:n,connectionStart:i}}})}}function Ta(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}ka.$inject=["eventBus","dragging","modeling","rules"];function Pa(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",(function(e){var t=e.context,n=t.canExecute,r=t.hover,o=t.source,a=t.start,s=t.startPosition,c=t.connectionStart,l=t.connectionEnd,u=t.target;c||(c=Ta(t)?{x:e.x,y:e.y}:s),l||(l=Ta(t)?s:{x:e.x,y:e.y}),i.drawPreview(t,n,{source:o||a,target:u||r,connectionStart:c,connectionEnd:l})})),t.on("connect.hover",900,(function(e){var t=e.context,i=e.hover,r=t.canExecute;null!==r&&n.addMarker(i,r?"connect-ok":"connect-not-ok")})),t.on(["connect.out","connect.cleanup"],1100,(function(e){var t=e.hover;t&&(n.removeMarker(t,"connect-ok"),n.removeMarker(t,"connect-not-ok"))})),i&&t.on("connect.cleanup",(function(e){i.cleanUp(e.context)}))}Pa.$inject=["injector","eventBus","canvas"];var ja={__depends__:[vr,qo,Ho],__init__:["connectPreview"],connect:["type",ka],connectPreview:["type",Pa]};function Aa(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Aa.$inject=["injector","canvas","graphicsFactory","elementFactory"],Aa.prototype.drawPreview=function(e,t,n){n=n||{};var i,r,o,a=e.connectionPreviewGfx,s=e.getConnection,c=n.source,l=n.target,u=n.waypoints,d=n.connectionStart,p=n.connectionEnd,h=n.noLayout,f=n.noCropping,g=n.noNoop,m=this;a||(a=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),ce(a),s||(s=e.getConnection=(r=function(e,t,n){return m.getConnection(e,t,n)},o={},function(e){var t=JSON.stringify(e),n=o[t];return n||(n=o[t]=r.apply(null,arguments)),n})),t&&(i=s(t,c,l)),i?(i.waypoints=u||[],this._layouter&&!h&&(i.waypoints=this._layouter.layoutConnection(i,{source:c,target:l,connectionStart:d,connectionEnd:p,waypoints:n.waypoints||i.waypoints})),i.waypoints&&i.waypoints.length||(i.waypoints=[c?Yi(c):d,l?Yi(l):p]),this._connectionDocking&&(c||l)&&!f&&(i.waypoints=this._connectionDocking.getCroppedWaypoints(i,c,l)),this._graphicsFactory.drawConnection(a,i)):!g&&this.drawNoopPreview(a,n)},Aa.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||Yi(n),o=t.connectionEnd||Yi(i),a=this.cropWaypoints(r,o,n,i);Z(e,this.createNoopConnection(a[0],a[1]))},Aa.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),a=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return[e=n&&Xi(o,s,!0)||e,t=i&&Xi(a,s,!1)||t]},Aa.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&se(e.connectionPreviewGfx)},Aa.prototype.getConnection=function(e){var t=function(e){return v(e)?e:{}}(e);return this._elementFactory.createConnection(t)},Aa.prototype.createConnectionPreviewGfx=function(){var e=he("g");return ee(e,{pointerEvents:"none"}),oe(e).add("djs-connection-preview"),Z(this._canvas.getDefaultLayer(),e),e},Aa.prototype.createNoopConnection=function(e,t){var n=he("polyline");return ee(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),ee(n,{points:[e.x,e.y,t.x,t.y]}),n};var Ma={__init__:["connectionPreview"],connectionPreview:["type",Aa]},Da=Math.min,Ra=Math.max;function Na(e){e.preventDefault()}function La(e){e.stopPropagation()}function Ba(e){this.container=e.container,this.parent=Object(Y.f)('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Object(Y.i)("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=$(this.autoResize,this),this.handlePaste=$(this.handlePaste,this)}function Ia(e,t){this._eventBus=e,this._providers=[],this._textbox=new Ba({container:t.getContainer(),keyHandler:$(this._handleKey,this),resizeHandler:$(this._handleResize,this)})}Ba.prototype.create=function(e,t,n,i){var r=this.parent,o=this.content,a=this.container;i=this.options=i||{};var s=q(t=this.style=t||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);W(r.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},s);var c=q(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return W(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),i.centerVertically&&W(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),o.innerText=n,Y.g.bind(o,"keydown",this.keyHandler),Y.g.bind(o,"mousedown",La),Y.g.bind(o,"paste",this.handlePaste),i.autoResize&&Y.g.bind(o,"input",this.autoResize),i.resizable&&this.resizable(t),a.appendChild(r),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),r},Ba.prototype.handlePaste=function(e){var t,n=this.options,i=this.style;if(e.preventDefault(),t=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(t),n.autoResize){var r=this.autoResize(i);r&&this.resizeHandler(r)}},Ba.prototype.insertText=function(e){document.execCommand("insertText",!1,e)||this._insertTextIE(e)},Ba.prototype._insertTextIE=function(e){var t,n,i,r=this.getSelection(),o=r.startContainer,a=r.endContainer,s=r.startOffset,c=r.endOffset,l=r.commonAncestorContainer,u=(t=l.childNodes,[].slice.call(t));if(l.nodeType===Node.TEXT_NODE){var d=o.textContent;o.textContent=d.substring(0,s)+e+d.substring(c),n=o,i=s+e.length}else if(o===this.content&&a===this.content){var p=document.createTextNode(e);this.content.insertBefore(p,u[s]),n=p,i=p.textContent.length}else{var h=u.indexOf(o),f=u.indexOf(a);u.forEach((function(t,n){n===h?t.textContent=o.textContent.substring(0,s)+e+a.textContent.substring(c):n>h&&n<=f&&Object(Y.k)(t)})),n=o,i=s+e.length}n&&void 0!==i&&setTimeout((function(){self.setSelection(n,i)}))},Ba.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},Ba.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){var s,c,l,u;n=this.resizeHandle=Object(Y.f)('<div class="djs-direct-editing-resize-handle"></div>');var d=function(n){Na(n),La(n);var d=Da(Ra(l+n.clientX-s,i),o),p=Da(Ra(u+n.clientY-c,r),a);t.style.width=d+"px",t.style.height=p+"px",e.resizeHandler({width:l,height:u,dx:n.clientX-s,dy:n.clientY-c})},p=function(e){Na(e),La(e),Y.g.unbind(document,"mousemove",d,!1),Y.g.unbind(document,"mouseup",p,!1)};Y.g.bind(n,"mousedown",(function(e){Na(e),La(e),s=e.clientX,c=e.clientY;var n=t.getBoundingClientRect();l=n.width,u=n.height,Y.g.bind(document,"mousemove",d),Y.g.bind(document,"mouseup",p)}))}W(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},Ba.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Y.g.unbind(t,"keydown",this.keyHandler),Y.g.unbind(t,"mousedown",La),Y.g.unbind(t,"input",this.autoResize),Y.g.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Object(Y.k)(n)),Object(Y.k)(e)},Ba.prototype.getValue=function(){return this.content.innerText.trim()},Ba.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},Ba.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},Ia.$inject=["eventBus","canvas"],Ia.prototype.registerProvider=function(e){this._providers.push(e)},Ia.prototype.isActive=function(){return!!this._active},Ia.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Ia.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},Ia.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Ia.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue();r===e.context.text&&i.height===n.height&&i.width===n.width||(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},Ia.prototype.getValue=function(){return this._textbox.getValue()},Ia.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},Ia.prototype._handleResize=function(e){this._fire("resize",e)},Ia.prototype.activate=function(e){var t;this.isActive()&&this.cancel();var n=E(this._providers,(function(n){return(t=n.activate(e))?n:null}));return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};var Fa={__depends__:[ur],__init__:["directEditing"],directEditing:["type",Ia]};function za(e,t,n){this._eventBus=t,this._overlays=n;var i=f(e&&e.scale)?e.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}za.$inject=["config.contextPad","eventBus","overlays"],za.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",(function(e){var n=e.newSelection;1===n.length?t.open(n[0]):t.close()})),e.on("elements.delete",(function(e){S(e.elements,(function(e){t.isOpen(e)&&t.close()}))})),e.on("element.changed",(function(e){var n=e.element,i=t._current;i&&i.element===n&&t.open(n,!0)}))},za.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("contextPad.getProviders",e,(function(e){e.providers.push(t)}))},za.prototype.getEntries=function(e){var t=this._getProviders(),n={};return S(t,(function(t){var i=t.getContextPadEntries(e);b(i)?n=i(n):S(i,(function(e,t){n[t]=e}))})),n},za.prototype.trigger=function(e,t,n){var i,r,o=this._current.element,a=this._current.entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(i=a[Object(Y.a)(s,"data-action")].action,r=t.originalEvent||t,b(i)){if("click"===e)return i(r,o,n)}else if(i[e])return i[e](r,o,n);t.preventDefault()},za.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},za.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},za.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html;S(t,(function(e,t){var n,r=e.group||"default",o=Object(Y.f)(e.html||'<div class="entry" draggable="true"></div>');Object(Y.a)(o,"data-action",t),(n=Object(Y.i)("[data-group="+r+"]",i))||(n=Object(Y.f)('<div class="group" data-group="'+r+'"></div>'),i.appendChild(n)),n.appendChild(o),e.className&&function(e,t){var n=Object(Y.b)(e);(m(t)?t:t.split(/\s+/g)).forEach((function(e){n.add(e)}))}(o,e.className),e.title&&Object(Y.a)(o,"title",e.title),e.imageUrl&&o.appendChild(Object(Y.f)('<img src="'+e.imageUrl+'">'))})),Object(Y.b)(i).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},za.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=Object(Y.f)('<div class="djs-context-pad"></div>'),r=W({html:i},this._overlaysConfig);Y.e.bind(i,".entry","click",(function(e){t.trigger("click",e)})),Y.e.bind(i,".entry","dragstart",(function(e){t.trigger("dragstart",e)})),Y.g.bind(i,"mousedown",(function(e){e.stopPropagation()})),this._overlayId=n.add(e,"context-pad",r);var o=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:o}),o},za.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},za.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)};var Ha={__depends__:[ur,Sr],contextPad:["type",za]},Va=["marker-start","marker-mid","marker-end"],$a=["circle","ellipse","line","path","polygon","polyline","rect"];function Ua(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;t.on("drag.cleanup",(function(){S(r._clonedMarkers,(function(e){se(e)})),r._clonedMarkers={}}))}Ua.$inject=["elementRegistry","eventBus","canvas","styles"],Ua.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},Ua.prototype.addDragger=function(e,t,n){var i=le(n=n||this.getGfx(e)),r=n.getBoundingClientRect();return this._cloneMarkers(kt(i)),ee(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),Z(t,i),i},Ua.prototype.addFrame=function(e,t){var n=he("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return Z(t,n),n},Ua.prototype._cloneMarkers=function(e){var t,n=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)n._cloneMarkers(e.childNodes[i]);(t=e,-1!==$a.indexOf(t.nodeName))&&Va.forEach((function(t){if(ee(e,t)){var i=function(e,t,n){var i=(r=ee(e,t),r.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]);var r;return Object(Y.i)("marker#"+i,n||document)}(e,t,n._canvas.getContainer());n._cloneMarker(e,i,t)}}))},Ua.prototype._cloneMarker=function(e,t,n){var i=t.id,r=this._clonedMarkers[i];if(!r){var o=i+"-clone";(r=le(t)).id=o,oe(r).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=r;var a=Object(Y.i)("defs",this._canvas._svg);a||(a=he("defs"),Z(this._canvas._svg,a)),Z(a,r)}ee(e,n,"url(#"+this._clonedMarkers[i].id+")")};var Wa={__init__:["previewSupport"],previewSupport:["type",Ua]},qa="drop-ok",Ga="drop-not-ok",Ya="attach-ok",Ka="new-parent";function Xa(e,t,n,i,r){function o(t,n){[Ya,qa,Ga,Ka].forEach((function(i){i===n?e.addMarker(t,i):e.removeMarker(t,i)}))}function a(){var e=t.context();e&&"create"===e.prefix&&t.cancel()}n.on(["create.move","create.hover"],(function(e){var t=e.context,n=t.elements,i=e.hover,a=t.source,s=t.hints||{};if(!i)return t.canExecute=!1,void(t.target=null);Za(e);var c={x:e.x,y:e.y},l=t.canExecute=i&&function(e,t,n,i,o){if(!t)return!1;var a=E(e=_(e,(function(t){var n=t.labelTarget;return!(t.parent||function(e){return!!e.labelTarget}(t)&&-1!==e.indexOf(n))})),(function(e){return!Ja(e)})),s=!1,c=!1,l=!1;Qa(e)&&(s=r.allowed("shape.attach",{position:n,shape:a,target:t})),s||(l=Qa(e)?r.allowed("shape.create",{position:n,shape:a,source:i,target:t}):r.allowed("elements.create",{elements:e,position:n,target:t}));var u=o.connectionTarget;return l||s?(a&&i&&(c=r.allowed("connection.create",{source:u===i?a:i,target:u===i?i:a,hints:{targetParent:t,targetAttach:s}})),{attach:s,connect:c}):(null===l||null===s)&&null}(n,i,c,a,s);i&&null!==l&&(t.target=i,l&&l.attach?o(i,Ya):o(i,l?Ka:Ga))})),n.on(["create.end","create.out","create.cleanup"],(function(e){var t=e.hover;t&&o(t,null)})),n.on("create.end",(function(e){var t=e.context,n=t.source,r=t.shape,o=t.elements,a=t.target,s=t.canExecute,c=s&&s.attach,l=s&&s.connect,u=t.hints||{};if(!1===s||!a)return!1;Za(e);var d={x:e.x,y:e.y};r=l?i.appendShape(n,r,d,a,{attach:c,connection:!0===l?{}:l,connectionTarget:u.connectionTarget}):E(o=i.createElements(o,d,a,W({},u,{attach:c})),(function(e){return!Ja(e)})),W(t,{elements:o,shape:r}),W(e,{elements:o,shape:r})})),n.on("create.init",(function(){n.on("elements.changed",a),n.once(["create.cancel","create.end"],2e3,(function(){n.off("elements.changed",a)}))})),this.start=function(e,n,i){m(n)||(n=[n]);var r=E(n,(function(e){return!Ja(e)}));if(r){i=W({elements:n,hints:{},shape:r},i||{}),S(n,(function(e){y(e.x)||(e.x=0),y(e.y)||(e.y=0)}));var o=Ge(n);S(n,(function(e){Ja(e)&&(e.waypoints=P(e.waypoints,(function(e){return{x:e.x-o.x-o.width/2,y:e.y-o.y-o.height/2}}))),W(e,{x:e.x-o.x-o.width/2,y:e.y-o.y-o.height/2})})),t.init(e,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:r,elements:n,context:i}})}}}function Za(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function Ja(e){return!!e.waypoints}function Qa(e){return e&&1===e.length&&!Ja(e[0])}Xa.$inject=["canvas","dragging","eventBus","modeling","rules"];function es(e,t,n,i,r){t.on("create.move",750,(function(t){var o=t.hover,a=t.context,s=a.elements,c=a.dragGroup;c||(c=a.dragGroup=function(e){var t=he("g");ee(t,r.cls("djs-drag-group",["no-events"]));var o=he("g");return e.forEach((function(e){var r;e.hidden||(e.waypoints?(r=n._createContainer("connection",o),n.drawConnection(kt(r),e)):(r=n._createContainer("shape",o),n.drawShape(kt(r),e),Pt(r,e.x,e.y)),i.addDragger(e,t,r))})),t}(s)),o?(c.parentNode||Z(e.getDefaultLayer(),c),Pt(c,t.x,t.y)):se(c)})),t.on("create.cleanup",(function(e){var t=e.context.dragGroup;t&&se(t)}))}es.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var ts={__depends__:[Ho,Wa,qo,vr],__init__:["create","createPreview"],create:["type",Xa],createPreview:["type",es]},ns=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function is(e,t,n){var i=f(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=t,this._canvas=n,this._providers={},this._current={}}is.$inject=["config.popupMenu","eventBus","canvas"],is.prototype.registerProvider=function(e,t,n){n||(n=t,t=1e3),this._eventBus.on("popupMenu.getProviders."+e,t,(function(e){e.providers.push(n)}))},is.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");var n=this._getProviders(t);if(!n)return!0;var i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=A(i)>0,a=r&&A(r)>0;return!o&&!a},is.prototype.open=function(e,t,n){var i=this._getProviders(t);if(!e)throw new Error("Element is missing");if(!i||!i.length)throw new Error("No registered providers for: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:t,element:e,position:n},o=this._getEntries(e,i),a=this._getHeaderEntries(e,i);r.entries=W({},o,a),r.container=this._createContainer(),A(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-header")),A(o)&&r.container.appendChild(this._createEntries(o,"djs-popup-body"));var s=this._canvas.getContainer();this._attachContainer(r.container,s,n.cursor),this._bindAutoClose()},is.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),Object(Y.k)(this._current.container),this._current.container=null)},is.prototype.isOpen=function(){return!!this._current.container},is.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=Object(Y.a)(t,"data-id"),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)},is.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},is.prototype._getEntries=function(e,t){var n={};return S(t,(function(t){if(t.getPopupMenuEntries){var i=t.getPopupMenuEntries(e);b(i)?n=i(n):S(i,(function(e,t){n[t]=e}))}else S(t.getEntries(e),(function(e){var t=e.id;if(!t)throw new Error("every entry must have the id property set");n[t]=G(e,["id"])}))})),n},is.prototype._getHeaderEntries=function(e,t){var n={};return S(t,(function(t){if(t.getPopupMenuHeaderEntries){var i=t.getPopupMenuHeaderEntries(e);b(i)?n=i(n):S(i,(function(e,t){n[t]=e}))}else{if(!t.getHeaderEntries)return;S(t.getHeaderEntries(e),(function(e){var t=e.id;if(!t)throw new Error("every entry must have the id property set");n[t]=G(e,["id"])}))}})),n},is.prototype._getEntry=function(e){var t=this._current.entries[e];if(!t)throw new Error("entry not found");return t},is.prototype._emit=function(e){this._eventBus.fire("popupMenu."+e)},is.prototype._createContainer=function(){var e=Object(Y.f)('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return W(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),Object(Y.b)(e).add(n),e},is.prototype._attachContainer=function(e,t,n){var i=this;Y.e.bind(e,".entry","click",(function(e){i.trigger(e)})),this._updateScale(e),t.appendChild(e),n&&this._assureIsInbounds(e,n)},is.prototype._updateScale=function(e){var t,n,i,r,o=this._canvas.zoom(),a=this._config.scale,s=o;!0!==a&&(!1===a?(t=1,n=1):(t=a.min,n=a.max),f(t)&&o<t&&(s=t),f(n)&&o>n&&(s=n)),r="scale("+s+")",(i=e).style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(e){i.style[e+"transform"]=r}))},is.prototype._assureIsInbounds=function(e,t){var n,i,r=this._canvas._container.getBoundingClientRect(),o=e.offsetLeft,a=e.offsetTop,s=e.scrollWidth,c=e.scrollHeight,l={},u=t.x-r.left,d=t.y-r.top;o+s>r.width&&(l.x=!0),a+c>r.height&&(l.y=!0),l.x&&l.y?(n=u-s+"px",i=d-c+"px"):l.x?(n=u-s+"px",i=d+"px"):l.y&&d<c?(n=u+"px",i="10px"):l.y&&(n=u+"px",i=d-c+"px"),W(e.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},is.prototype._createEntries=function(e,t){var n=Object(Y.f)("<div>"),i=this;return Object(Y.b)(n).add(t),S(e,(function(e,t){var r=i._createEntry(e,t);n.appendChild(r)})),n},is.prototype._createEntry=function(e,t){var n=Object(Y.f)("<div>"),i=Object(Y.b)(n);if(i.add("entry"),e.className&&e.className.split(" ").forEach((function(e){i.add(e)})),Object(Y.a)(n,"data-id",t),e.label){var r=Object(Y.f)("<span>");r.textContent=e.label,n.appendChild(r)}return e.imageUrl&&n.appendChild(Object(Y.f)('<img src="'+e.imageUrl+'" />')),!0===e.active&&i.add("active"),!0===e.disabled&&i.add("disabled"),e.title&&(n.title=e.title),n},is.prototype._bindAutoClose=function(){this._eventBus.once(ns,this.close,this)},is.prototype._unbindAutoClose=function(){this._eventBus.off(ns,this.close,this)};var rs={__init__:["popupMenu"],popupMenu:["type",is]};function os(){}os.prototype.get=function(){return this._data},os.prototype.set=function(e){this._data=e},os.prototype.clear=function(){var e=this._data;return delete this._data,e},os.prototype.isEmpty=function(){return!this._data};var as={clipboard:["type",os]};function ss(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",(function(e){(t._svg=e.svg).addEventListener("mousemove",n)})),e.on("canvas.destroy",(function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)}))}ss.$inject=["eventBus"],ss.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||function(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,a=t;n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,a,!1,!1,!1,!1,0,null);return n}(0,0)};var cs={__init__:["mouse"],mouse:["type",ss]};function ls(e,t,n,i,r,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=s,r.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element,i=e.elements;t.priority=1,t.id=n.id,E(i,(function(e){return e===n.parent}))&&(t.parent=n.parent.id),function(e){return!!e.host}(n)&&(t.priority=2,t.host=n.host.id),us(n)&&(t.priority=3,t.source=n.source.id,t.target=n.target.id,t.waypoints=function(e){return P(e.waypoints,(function(e){return(e=ps(e)).original&&(e.original=ps(e.original)),e}))}(n)),ds(n)&&(t.priority=4,t.labelTarget=n.labelTarget.id),S(["x","y","width","height"],(function(e){y(n[e])&&(t[e]=n[e])})),t.hidden=n.hidden,t.collapsed=n.collapsed})),r.on("copyPaste.pasteElements",(function(e){W(e.hints,{createElementsBehavior:!1})}))}function us(e){return!!e.waypoints}function ds(e){return!!e.labelTarget}function ps(e){return W({},e)}function hs(e,t){var n=t.indexOf(e);return-1===n?t:t.splice(n,1)}ls.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],ls.prototype.copy=function(e){var t,n;return m(e)||(e=e?[e]:[]),n=!1===(t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}))?{}:this.createTree(m(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n},ls.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},ls.prototype._paste=function(e,t,n,i){S(e,(function(e){y(e.x)||(e.x=0),y(e.y)||(e.y=0)}));var r=Ge(e);return S(e,(function(e){us(e)&&(e.waypoints=P(e.waypoints,(function(e){return{x:e.x-r.x-r.width/2,y:e.y-r.y-r.height/2}}))),W(e,{x:e.x-r.x-r.width/2,y:e.y-r.y-r.height/2})})),this._modeling.createElements(e,n,t,W({},i))},ls.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return S(e,(function(e,o){o=parseInt(o,10),S(e=L(e,"priority"),(function(e){var o,a=W({},G(e,["priority"]));return i[e.parent]?a.parent=i[e.parent]:delete a.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:a}),us(a)?(a.source=i[e.source],a.target=i[e.target],o=i[e.id]=t.createConnection(a),void r.push(o)):ds(a)?(a.labelTarget=i[a.labelTarget],o=i[e.id]=t.createLabel(a),void r.push(o)):(a.host&&(a.host=i[a.host]),o=i[e.id]=t.createShape(a),void r.push(o))}))})),r},ls.prototype.createConnection=function(e){return this._elementFactory.createConnection(G(e,["id"]))},ls.prototype.createLabel=function(e){return this._elementFactory.createLabel(G(e,["id"]))},ls.prototype.createShape=function(e){return this._elementFactory.createShape(G(e,["id"]))},ls.prototype.hasRelations=function(e,t){var n,i;return!(us(e)&&(n=E(t,B({id:e.source.id})),i=E(t,B({id:e.target.id})),!n||!i))&&!(ds(e)&&!E(t,B({id:e.labelTarget.id})))},ls.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[];function o(e,t){var n=E(r,(function(t){return e===t.element}));n?n.depth<t&&(r=function(e,t){var n=t.indexOf(e);-1!==n&&t.splice(n,1);return t}(n,r)).push({element:n.element,depth:t}):r.push({element:e,depth:t})}return Ue(Ve(e),(function(e,t,n){if(!ds(e))return S(e.labels,(function(e){o(e,n)})),S([e.attachers,e.incoming,e.outgoing],(function(e){e&&e.length&&S(e,(function(e){S(e.labels,(function(e){o(e,n)})),o(e,n)}))})),o(e,n),e.children})),e=P(r,(function(e){return e.element})),r=L(r=P(r,(function(t){return t.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:t.descriptor,element:t.element,elements:e}),t})),(function(e){return e.descriptor.priority})),e=P(r,(function(e){return e.element})),S(r,(function(r){var o=r.depth;n.hasRelations(r.element,e)?!function(e,n){return t.allowed("element.copy",{element:e,elements:n})}(r.element,e)?hs(r.element,e):(i[o]||(i[o]=[]),i[o].push(r.descriptor)):hs(r.element,e)})),i};var fs={__depends__:[as,ts,cs,qo],__init__:["copyPaste"],copyPaste:["type",ls]};function gs(e,t,n){m(n)||(n=[n]),S(n,(function(n){h(e[n])||(t[n]=e[n])}))}function ms(e,t,n){var i;t.on("copyPaste.copyElement",750,(function(e){var t=e.descriptor,n=e.element,i=t.oldBusinessObject=si(n);if(t.type=n.type,gs(i,t,"name"),t.di={},gs(i.di,t.di,["fill","stroke"]),gs(i.di,t,"isExpanded"),vs(t))return t;i.default&&(t.default=i.default.id)})),t.on("moddleCopy.canCopyProperty",(function(t){var i,r=t.parent,o=t.property;if("processRef"===t.propertyName&&ai(r,"bpmn:Participant")&&ai(o,"bpmn:Process"))return i=e.create("bpmn:Process"),n.copyElement(o,i)})),t.on("copyPaste.pasteElements",(function(){i={}})),t.on("copyPaste.pasteElement",(function(t){var r,o,a,s=t.cache,c=t.descriptor,l=c.oldBusinessObject;vs(c)?c.businessObject=si(s[c.labelTarget]):(r=e.create(l.$type),c.businessObject=n.copyElement(l,r),function(e,t){var n=si(e);e.default&&(i[e.default]={element:n,property:"default"}),e.host&&(si(e).attachedToRef=si(t[e.host])),i=G(i,O(i,(function(t,i,r){var o=i.element,a=i.property;return r===e.id&&(o[a]=n,t.push(e.id)),t}),[]))}(c,s),gs(c,r,["isExpanded","name"]),o=c,m(a="oldBusinessObject")||(a=[a]),S(a,(function(e){o[e]&&delete o[e]})))}))}function vs(e){return!!e.labelTarget}ms.$inject=["bpmnFactory","eventBus","moddleCopy"];var ys=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function bs(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",(function(e){var t=e.propertyNames;if(t&&t.length)return L(t,(function(e){return"extensionElements"===e}))})),e.on("moddleCopy.canCopyProperty",(function(e){var t=e.parent,n=v(t)&&t.$descriptor,i=e.propertyName;return(!i||-1===ys.indexOf(i))&&(!(i&&n&&!E(n.properties,B({name:i})))&&void 0)})),e.on("moddleCopy.canSetCopiedProperty",(function(e){var t,n,i=e.property;if(n="bpmn:ExtensionElements",(t=i)&&"function"==typeof t.$instanceOf&&t.$instanceOf(n)&&(!i.values||!i.values.length))return!1}))}function ws(e,t){return O(e.properties,(function(e,n){return t&&n.default?e:e.concat(n.name)}),[])}bs.$inject=["eventBus","bpmnFactory","moddle"],bs.prototype.copyElement=function(e,t,n){var i=this;n&&!m(n)&&(n=[n]),n=n||ws(e.$descriptor);var r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t});return!1===r||(m(r)&&(n=r),S(n,(function(n){var r;x(e,n)&&(r=e.get(n));var o=i.copyProperty(r,t,n);!1!==i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:o,propertyName:n})&&f(o)&&t.set(n,o)}))),t},bs.prototype.copyProperty=function(e,t,n){var i=this,r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n});if(!1!==r){if(r)return v(r)&&r.$type&&!r.$parent&&(r.$parent=t),r;var o=this._moddle.getPropertyDescriptor(t,n);if(!o.isId&&!o.isReference){if(m(e))return O(e,(function(e,o){return(r=i.copyProperty(o,t,n))?(r.$parent=t,e.concat(r)):e}),[]);if(v(e)&&e.$type){if(this._moddle.getElementDescriptor(e).isGeneric)return;return(r=i._bpmnFactory.create(e.$type)).$parent=t,r=i.copyElement(e,r)}return e}}};var xs={__depends__:[fs],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",ms],moddleCopy:["type",bs]},Es=Math.round;function _s(e){this._modeling=e}_s.$inject=["modeling"],_s.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=t.width||e.width,o=t.height||e.height,a=t.x||e.x,s=t.y||e.y,c=Es(a+r/2),l=Es(s+o/2);return i.replaceShape(e,W({},t,{x:c,y:l,width:r,height:o}),n)};var Ss={__init__:["replace"],replace:["type",_s]};var Cs=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function Os(e,t,n,i,r,o){this.replaceElement=function(a,s,c){c=c||{};var l=s.type,u=a.businessObject;if(ks(u)&&"bpmn:SubProcess"===l&&function(e,t){var n=e&&x(e,"collapsed")?e.collapsed:!ci(e);return n!==(t&&(x(t,"collapsed")||x(t,"isExpanded"))?x(t,"collapsed")?t.collapsed:!t.isExpanded:n)&&(e.collapsed=n,!0)}(a,s))return i.toggleCollapse(a),a;var d,p=e.create(l),f={type:l,businessObject:p},g=ws(u.$descriptor),v=ws(p.$descriptor,!0),y=(d=v,g.filter((function(e){return-1!==d.indexOf(e)})));W(p,q(s,Cs));var b=_(y,(function(e){return"eventDefinitions"===e?Ts(a,s.eventDefinitionType):"loopCharacteristics"===e?!li(p):!p.hasOwnProperty(e)&&(("processRef"!==e||!1!==s.isExpanded)&&"triggeredByEvent"!==e)}));return p=n.copyElement(u,p,b),s.eventDefinitionType&&(Ts(p,s.eventDefinitionType)||(f.eventDefinitionType=s.eventDefinitionType,f.eventDefinitionAttrs=s.eventDefinitionAttrs)),ai(u,"bpmn:Activity")&&(ks(u)?f.isExpanded=ci(u):s&&x(s,"isExpanded")&&(f.isExpanded=s.isExpanded),ci(u)&&!ai(u,"bpmn:Task")&&f.isExpanded&&(f.width=a.width,f.height=a.height)),ks(u)&&!ks(p)&&(c.moveChildren=!1),ai(u,"bpmn:Participant")&&(!0===s.isExpanded?p.processRef=e.create("bpmn:Process"):c.moveChildren=!1,f.width=a.width,f.height=t._getDefaultSize(p).height),p.name=u.name,So(u,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&So(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(p.default=u.default),s.host&&!ai(u,"bpmn:BoundaryEvent")&&ai(p,"bpmn:BoundaryEvent")&&(f.host=s.host),f.di={},function(e,t,n){m(n)||(n=[n]),S(n,(function(n){h(e[n])||(t[n]=e[n])}))}(u.di,f.di,["fill","stroke"]),f=r.replaceElement(a,f,c),!1!==c.select&&o.select(f),f}}function ks(e){return ai(e,"bpmn:SubProcess")}function Ts(e,t){var n=si(e);return t&&n.get("eventDefinitions").some((function(e){return ai(e,t)}))}Os.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","selection"];var Ps={__depends__:[xs,Ss,vr],bpmnReplace:["type",Os]};function js(e){return function(t){var n=t.target,i=si(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,a=(r&&r.$type)===n.eventDefinitionType,s=i.triggeredByEvent===n.triggeredByEvent,c=void 0===n.isExpanded||n.isExpanded===ci(i);return!(o&&a&&s&&c)}}var As=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],Ms=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],Ds=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Rs=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],Ns=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],Ls=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],Bs=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],Is=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],Fs=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],zs=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],Hs=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],Vs=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Collapsed Pool",actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function $s(e,t,n,i,r,o){this._popupMenu=e,this._modeling=t,this._moddle=n,this._bpmnReplace=i,this._rules=r,this._translate=o,this.register()}$s.$inject=["popupMenu","modeling","moddle","bpmnReplace","rules","translate"],$s.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},$s.prototype.getEntries=function(e){var t,n=e.businessObject;if(!this._rules.allowed("shape.replace",{element:e}))return[];var i=js(e);return ai(n,"bpmn:StartEvent")&&!li(n.$parent)?(t=_(As,i),this._createEntries(e,t)):ai(n,"bpmn:Participant")?(t=_(Vs,(function(e){return ci(n)!==e.target.isExpanded})),this._createEntries(e,t)):ai(n,"bpmn:StartEvent")&&li(n.$parent)?(t=_(zs,(function(t){var n=!1!==t.target.isInterrupting,r=si(e).isInterrupting===n;return i(t)||!i(t)&&!r})),this._createEntries(e,t)):ai(n,"bpmn:EndEvent")?(t=_(Ds,(function(e){return!("bpmn:CancelEventDefinition"==e.target.eventDefinitionType&&!ai(n.$parent,"bpmn:Transaction"))&&i(e)})),this._createEntries(e,t)):ai(n,"bpmn:BoundaryEvent")?(t=_(Fs,(function(e){var t=e.target;if("bpmn:CancelEventDefinition"==t.eventDefinition&&!ai(n.attachedToRef,"bpmn:Transaction"))return!1;var r=!1!==t.cancelActivity,o=n.cancelActivity==r;return i(e)||!i(e)&&!o})),this._createEntries(e,t)):ai(n,"bpmn:IntermediateCatchEvent")||ai(n,"bpmn:IntermediateThrowEvent")?(t=_(Ms,i),this._createEntries(e,t)):ai(n,"bpmn:Gateway")?(t=_(Rs,i),this._createEntries(e,t)):ai(n,"bpmn:Transaction")?(t=_(Ls,i),this._createEntries(e,t)):li(n)&&ci(n)?(t=_(Bs,i),this._createEntries(e,t)):ai(n,"bpmn:SubProcess")&&ci(n)?(t=_(Ns,i),this._createEntries(e,t)):ai(n,"bpmn:AdHocSubProcess")&&!ci(n)?(t=_(Is,(function(t){var n=t.target,i="bpmn:SubProcess"===n.type,r=!0===n.isExpanded;return js(e)&&(!i||r)})),this._createEntries(e,t)):ai(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,Hs):ai(n,"bpmn:FlowNode")?(t=_(Is,i),ai(n,"bpmn:SubProcess")&&!ci(n)&&(t=_(t,(function(e){return"Sub Process (collapsed)"!==e.label}))),this._createEntries(e,t)):[]},$s.prototype.getHeaderEntries=function(e){var t=[];return ai(e,"bpmn:Activity")&&!li(e)&&(t=t.concat(this._getLoopEntries(e))),!ai(e,"bpmn:SubProcess")||ai(e,"bpmn:Transaction")||li(e)||t.push(this._getAdHocEntry(e)),t},$s.prototype._createEntries=function(e,t){var n=[],i=this;return S(t,(function(t){var r=i._createMenuEntry(t,e);n.push(r)})),n},$s.prototype._createSequenceFlowEntries=function(e,t){var n=si(e),i=[],r=this._modeling,o=this._moddle,a=this;return S(t,(function(t){switch(t.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(ai(n.sourceRef,"bpmn:ExclusiveGateway")||ai(n.sourceRef,"bpmn:InclusiveGateway")||ai(n.sourceRef,"bpmn:ComplexGateway")||ai(n.sourceRef,"bpmn:Activity"))&&i.push(a._createMenuEntry(t,e,(function(){r.updateProperties(e.source,{default:n})})));break;case"replace-with-conditional-flow":!n.conditionExpression&&ai(n.sourceRef,"bpmn:Activity")&&i.push(a._createMenuEntry(t,e,(function(){var t=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:t})})));break;default:if(ai(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(a._createMenuEntry(t,e,(function(){r.updateProperties(e,{conditionExpression:void 0})})));if((ai(n.sourceRef,"bpmn:ExclusiveGateway")||ai(n.sourceRef,"bpmn:InclusiveGateway")||ai(n.sourceRef,"bpmn:ComplexGateway")||ai(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(a._createMenuEntry(t,e,(function(){r.updateProperties(e.source,{default:void 0})})))}})),i},$s.prototype._createMenuEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement;return n=n||function(){return r(t,e.target)},{label:i(e.label),className:e.className,id:e.actionName,action:n}},$s.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function i(n,i){var r;i.active?r=void 0:(r=t._moddle.create(i.options.loopCharacteristics),i.options.isSequential&&(r.isSequential=i.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:r})}var r,o,a,s=si(e).loopCharacteristics;return s&&(r=s.isSequential,o=void 0===s.isSequential,a=void 0!==s.isSequential&&!s.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:r,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:o,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},$s.prototype._getAdHocEntry=function(e){var t=this._translate,n=ai(si(e),"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:n,action:function(t,r){return i(e,n?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};var Us={__depends__:[rs,Ps],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",$s]},Ws=Math.max,qs=Math.min;function Gs(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function Ys(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return y(r)&&(i=(/top|left/.test(e)?qs:Ws)(i,r)),y(o)&&(i=(/top|left/.test(e)?Ws:qs)(i,o)),i}function Ks(e,t){return void 0!==e?e:20}function Xs(e){return!e.waypoints&&"label"!==e.type}function Zs(e,t){var n;if((n=void 0===e.length?_(e.children,Xs):e).length)return function(e,t){var n,i,r,o;return"object"==typeof t?(n=Ks(t.left),i=Ks(t.right),r=Ks(t.top),o=Ks(t.bottom)):n=i=r=o=Ks(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}(Ge(n),t)}var Js=Math.abs;var Qs=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];function ec(e,t){return t=t||[],e.children.filter((function(e){ai(e,"bpmn:Lane")&&(ec(e,t),t.push(e))})),t}function tc(e){return e.children.filter((function(e){return ai(e,"bpmn:Lane")}))}function nc(e){return Co(e,Qs)||e}function ic(e,t){var n=nc(e),i=ec(n,ai(n,"bpmn:Process")?[]:[n]),r=qi(e),o=qi(t),a=function(e,t){return Gs(qi(t),qi(e))}(e,t),s=[];return i.forEach((function(t){if(t!==e){var n,i,c=0,l=a.right,u=0,d=a.left,p=qi(t);a.top&&(Js(p.bottom-r.top)<10&&(u=o.top-p.bottom),Js(p.top-r.top)<5&&(c=o.top-p.top)),a.bottom&&(Js(p.top-r.bottom)<10&&(c=o.bottom-p.top),Js(p.bottom-r.bottom)<5&&(u=o.bottom-p.bottom)),(c||l||u||d)&&s.push({shape:t,newBounds:(n=t,i={top:c,right:l,bottom:u,left:d},{x:n.x+(i.left||0),y:n.y+(i.top||0),width:n.width-(i.left||0)+(i.right||0),height:n.height-(i.top||0)+(i.bottom||0)})})}})),s}function rc(e,t,n,i,r,o,a,s,c,l,u,d){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=c,this._canvas=l,this._rules=u,this._translate=d,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context.shape;if(sr(e)&&i.isOpen(t)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}}))}function oc(e,t,n){var i=e.$instanceOf(t),r=!1;return S(e.eventDefinitions||[],(function(e){e.$type===n&&(r=!0)})),i&&r}rc.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],rc.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,s=this._canvas,c=this._rules,l=this._autoPlace,u=this._translate,d={};if("label"===e.type)return d;var p=e.businessObject;function h(e,t){r.start(e,t)}function f(e,t,n,r){function a(t,n){var a=i.createShape(W({type:e},r));o.start(t,a,{source:n})}return"string"!=typeof n&&(r=n,n=u("Append {type}",{type:e.replace(/^bpmn:/,"")})),{group:"model",className:t,title:n,action:{dragstart:a,click:l?function(t,n){var o=i.createShape(W({type:e},r));l.append(n,o)}:a}}}function g(e){return function(i,r){n.splitLane(r,e),t.open(r,!0)}}if(So(p,["bpmn:Lane","bpmn:Participant"])&&ci(p)){var v=tc(e);W(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:u("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),v.length<2&&(e.height>=120&&W(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:u("Divide into two Lanes"),action:{click:g(2)}}}),e.height>=180&&W(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:u("Divide into three Lanes"),action:{click:g(3)}}})),W(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:u("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}ai(p,"bpmn:FlowNode")&&(ai(p,"bpmn:EventBasedGateway")?W(d,{"append.receive-task":f("bpmn:ReceiveTask","bpmn-icon-receive-task",u("Append ReceiveTask")),"append.message-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",u("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",u("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",u("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",u("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):oc(p,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?W(d,{"append.compensation-activity":f("bpmn:Task","bpmn-icon-task",u("Append compensation activity"),{isForCompensation:!0})}):ai(p,"bpmn:EndEvent")||p.isForCompensation||oc(p,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||li(p)||W(d,{"append.end-event":f("bpmn:EndEvent","bpmn-icon-end-event-none",u("Append EndEvent")),"append.gateway":f("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",u("Append Gateway")),"append.append-task":f("bpmn:Task","bpmn-icon-task",u("Append Task")),"append.intermediate-event":f("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",u("Append Intermediate/Boundary Event"))})),a.isEmpty(e,"bpmn-replace")||W(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:u("Change type"),action:{click:function(e,n){var i=W(function(e){var n=s.getContainer(),i=t.getPad(e).html,r=n.getBoundingClientRect(),o=i.getBoundingClientRect(),a=o.top-r.top;return{x:o.left-r.left,y:a+o.height+5}}(n),{cursor:{x:e.x,y:e.y}});a.open(n,"bpmn-replace",i)}}}}),So(p,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&W(d,{"append.text-annotation":f("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:u("Connect using "+(p.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:h,dragstart:h}}}),So(p,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&W(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:u("Connect using DataInputAssociation"),action:{click:h,dragstart:h}}});var y=c.allowed("elements.delete",{elements:[e]});return m(y)&&(y=y[0]===e),y&&W(d,{delete:{group:"edit",className:"bpmn-icon-trash",title:u("Remove"),action:{click:function(t){n.removeElements([e])}}}}),d};var ac={__depends__:[Fa,Ha,vr,ja,ts,Us],__init__:["contextPadProvider"],contextPadProvider:["type",rc]},sc={horizontal:["x","width"],vertical:["y","height"]};function cc(e){this._modeling=e,this._filters=[],this.registerFilter((function(e,t,n){var i,r=0,o=0;return S(e,(function(e){e.waypoints||e.labelTarget||(r+=e[n],o+=1)})),i=Math.round(r/o),_(e,(function(e){return e[n]<i+50}))}))}cc.$inject=["modeling"],cc.prototype.registerFilter=function(e){if("function"!=typeof e)throw new Error("the filter has to be a function");this._filters.push(e)},cc.prototype.trigger=function(e,t){var n,i,r=this._modeling;if(!(e.length<3||(this._setOrientation(t),i=this._filterElements(e),(n=this._createGroups(i)).length<=2)))return r.distributeElements(n,this._axis,this._dimension),n},cc.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(S(t,(function(e){r=e(r,n,i)})),r):e},cc.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');return S(L(e,i),(function(e,o){var a,s=n._findRange(e,i,r),c=t[t.length-1];c&&n._hasIntersection(c.range,s)?t[t.length-1].elements.push(e):(a={range:s,elements:[e]},t.push(a))})),t},cc.prototype._setOrientation=function(e){var t=sc[e];this._axis=t[0],this._dimension=t[1]},cc.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},cc.prototype._findRange=function(e){var t=e[this._axis];return{min:t+5,max:t+e[this._dimension]-5}};var lc={__init__:["distributeElements"],distributeElements:["type",cc]};function uc(e){e.registerFilter((function(e){return _(e,(function(e){var t=So(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)}))}))}uc.$inject=["distributeElements"];var dc={__depends__:[lc],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",uc]};function pc(e,t){this._actions={};var n=this;e.on("diagram.init",(function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})}))}function hc(e,t){return new Error(e+" "+t)}pc.$inject=["eventBus","injector"],pc.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",(function(){t.undo()})),this.register("redo",(function(){t.redo()}))),o&&i&&this.register("copy",(function(){var e=i.get();o.copy(e)})),o&&this.register("paste",(function(){o.paste()})),r&&this.register("stepZoom",(function(e){r.stepZoom(e.value)})),a&&this.register("zoom",(function(e){a.zoom(e.value)})),n&&i&&s&&this.register("removeSelection",(function(){var e=i.get();if(e.length){var t,r=s.allowed("elements.delete",{elements:e});!1!==r&&(t=m(r)?r:e).length&&n.removeElements(t.slice())}})),c&&this.register("moveCanvas",(function(e){c.moveCanvas(e)})),l&&this.register("moveSelection",(function(e){l.moveSelection(e.direction,e.accelerated)}))},pc.prototype.trigger=function(e,t){if(!this._actions[e])throw hc(e,"is not a registered action");return this._actions[e](t)},pc.prototype.register=function(e,t){var n=this;if("string"==typeof e)return this._registerAction(e,t);S(e,(function(e,t){n._registerAction(t,e)}))},pc.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw hc(e,"is already registered");this._actions[e]=t},pc.prototype.unregister=function(e){if(!this.isRegistered(e))throw hc(e,"is not a registered action");this._actions[e]=void 0},pc.prototype.getActions=function(){return Object.keys(this._actions)},pc.prototype.isRegistered=function(e){return!!this._actions[e]};var fc={__init__:["editorActions"],editorActions:["type",pc]};function gc(e){e.invoke(pc,this)}a()(gc,pc),gc.$inject=["injector"],gc.prototype._registerDefaultActions=function(e){pc.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),c=e.get("distributeElements",!1),l=e.get("alignElements",!1),u=e.get("directEditing",!1),d=e.get("searchPad",!1),p=e.get("modeling",!1);t&&n&&i&&this._registerAction("selectElements",(function(){var e=t.getRootElement(),r=n.filter((function(t){return t!==e}));return i.select(r),r})),r&&this._registerAction("spaceTool",(function(){r.toggle()})),o&&this._registerAction("lassoTool",(function(){o.toggle()})),a&&this._registerAction("handTool",(function(){a.toggle()})),s&&this._registerAction("globalConnectTool",(function(){s.toggle()})),i&&c&&this._registerAction("distributeElements",(function(e){var t=i.get(),n=e.type;t.length&&c.trigger(t,n)})),i&&l&&this._registerAction("alignElements",(function(e){var t=i.get(),n=[],r=e.type;t.length&&(n=_(t,(function(e){return!ai(e,"bpmn:Lane")})),l.trigger(n,r))})),i&&p&&this._registerAction("setColor",(function(e){var t=i.get();t.length&&p.setColor(t,e)})),i&&u&&this._registerAction("directEditing",(function(){var e=i.get();e.length&&u.activate(e[0])})),d&&this._registerAction("find",(function(){d.toggle()})),t&&p&&this._registerAction("moveToOrigin",(function(){var e,i,r=t.getRootElement();e=Ge(i=ai(r,"bpmn:Collaboration")?n.filter((function(e){return ai(e.parent,"bpmn:Collaboration")})):n.filter((function(e){return e!==r&&!ai(e.parent,"bpmn:SubProcess")}))),p.moveElements(i,{x:-e.x,y:-e.y},r)}))};var mc={__depends__:[fc],editorActions:["type",gc]};function vc(e){e.on(["create.init","shape.move.init"],(function(e){var t=e.context;So(e.shape,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(t.gridSnappingContext||(t.gridSnappingContext={}),t.gridSnappingContext.snapLocation="top-left")}))}vc.$inject=["eventBus"];function yc(e,t,n){return n||(n="round"),Math[n](e/t)*t}function bc(e,t,n){var i=!n||!1!==n.active;this._eventBus=t;var r=this;t.on("diagram.init",800,(function(){r.setActive(i)})),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,(function(t){var n=t.originalEvent;if(!(!r.active||n&&Or(n))){var i=t.context,o=i.gridSnappingContext;o||(o=i.gridSnappingContext={}),["x","y"].forEach((function(n){var i={},o=function(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;if(s&&y(s[t]))return s[t];s||(s=o.snapOffset={});y(s[t])||(s[t]=0);if(!r)return s[t];n.get(r.id)||(wc(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2);if(!a)return s[t];"x"===t?/left/.test(a)?s[t]-=r.width/2:/right/.test(a)&&(s[t]+=r.width/2):/top/.test(a)?s[t]-=r.height/2:/bottom/.test(a)&&(s[t]+=r.height/2);return s[t]}(t,n,e);o&&(i.offset=o);var a=function(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={});a[t]||(a[t]={});var s=n.direction;i&&(wc(t)?(a.x.min=i.left,a.x.max=i.right):(a.y.min=i.top,a.y.max=i.bottom));var c=r.min,l=r.max;c&&(wc(t)?Ec(s)?a.x.max=c.left:a.x.min=c.right:xc(s)?a.y.max=c.top:a.y.min=c.bottom);l&&(wc(t)?Ec(s)?a.x.min=l.left:a.x.max=l.right:xc(s)?a.y.min=l.top:a.y.max=l.bottom);return a[t]}(t,n);a&&W(i,a),wa(t,n)||r.snapEvent(t,n,i)}))}}))}function wc(e){return"x"===e}function xc(e){return-1!==e.indexOf("n")}function Ec(e){return-1!==e.indexOf("w")}function _c(e,t){jo.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",(function(e){var t=e.context,i=(t.hints||{}).autoResize;if(i){var r=t.shape,o=t.newBounds;w(i)?t.newBounds=n.snapComplex(o,i):t.newBounds=n.snapSimple(r,o)}}))}bc.prototype.snapEvent=function(e,t,n){xa(e,t,this.snapValue(e[t],n))},bc.prototype.getGridSpacing=function(){return 10},bc.prototype.snapValue=function(e,t){var n,i,r=0;return t&&t.offset&&(r=t.offset),e=yc(e+=r,10),t&&t.min&&y(n=t.min)&&(n=yc(n+r,10,"ceil"),e=Math.max(e,n)),t&&t.max&&y(i=t.max)&&(i=yc(i+r,10,"floor"),e=Math.min(e,i)),e-=r},bc.prototype.isActive=function(){return this.active},bc.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})},bc.prototype.toggleActive=function(){this.setActive(!this.active)},bc.$inject=["elementRegistry","eventBus","config.gridSnapping"],_c.$inject=["eventBus","gridSnapping","modeling"],a()(_c,jo),_c.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t},_c.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e},_c.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),W(e,o),e},_c.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),W(e,o),e};function Sc(e,t){e.on(["spaceTool.move","spaceTool.end"],2e3,(function(e){var n,i=e.context;i.initialized&&("x"===i.axis?(n=t.snapValue(e.dx),e.x=e.x+n-e.dx,e.dx=n):(n=t.snapValue(e.dy),e.y=e.y+n-e.dy,e.dy=n))}))}Sc.$inject=["eventBus","gridSnapping"];var Cc={__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",_c],gridSnappingSpaceToolBehavior:["type",Sc]}],__init__:["gridSnapping"],gridSnapping:["type",bc]};function Oc(e,t){e.on("autoPlace",2e3,(function(e){var n=e.source,i=Yi(n),r=e.shape,o=Oo(n,r);return["x","y"].forEach((function(e){var n={};o[e]!==i[e]&&(o[e]>i[e]?n.min=o[e]:n.max=o[e],ai(r,"bpmn:TextAnnotation")&&(!function(e){return"x"===e}(e)?n.offset=-r.height/2:n.offset=-r.width/2),o[e]=t.snapValue(o[e],n))})),o}))}Oc.$inject=["eventBus","gridSnapping"];function kc(e,t,n){t.on(["create.start","shape.move.start"],1750,(function(t){var i=t.context,r=i.shape,o=e.getRootElement();ai(r,"bpmn:Participant")&&ai(o,"bpmn:Process")&&o.children.length&&(i.createConstraints&&(r.width=n.snapValue(r.width,{min:r.width}),r.height=n.snapValue(r.height,{min:r.height})))}))}kc.$inject=["canvas","eventBus","gridSnapping"];function Tc(e,t,n){jo.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],3e3,(function(e){var t=e.context,r=t.connection,o=t.hints||{},a=r.waypoints;o.connectionStart||o.connectionEnd||!1===o.createElementsBehavior||function(e){return e.length>3}(a)&&n.updateWaypoints(r,i.snapMiddleSegments(a))}))}function Pc(e,t,n){var i=Fi(t,n),r={};return function(e){return"h"===e}(i)&&(r.y=e.snapValue(t.y)),function(e){return"v"===e}(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=W({},t,r),n=W({},n,r)),[t,n]}Tc.$inject=["eventBus","gridSnapping","modeling"],a()(Tc,jo),Tc.prototype.snapMiddleSegments=function(e){var t,n=this._gridSnapping;e=e.slice();for(var i=1;i<e.length-2;i++)t=Pc(n,e[i],e[i+1]),e[i]=t[0],e[i+1]=t[1];return e};var jc={__depends__:[Cc,{__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",Oc],gridSnappingCreateParticipantBehavior:["type",kc],gridSnappingLayoutConnectionBehavior:["type",Tc]}],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",vc]};function Ac(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],(function(e){var t=e.element,i=e.gfx;return ai(t,"bpmn:Lane")?n.createParticipantHit(t,i):ai(t,"bpmn:Participant")?ci(t)?n.createParticipantHit(t,i):n.createDefaultHit(t,i):ai(t,"bpmn:SubProcess")?ci(t)?n.createSubProcessHit(t,i):n.createDefaultHit(t,i):void 0}))}Ac.$inject=["eventBus","interactionEvents"],Ac.prototype.createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},Ac.prototype.createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:30,height:e.height}),!0},Ac.prototype.createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:30}),!0};var Mc={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Ac]};function Dc(e){e.invoke(Rr,this)}a()(Dc,Rr),Dc.$inject=["injector"],Dc.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}Rr.prototype.registerBindings.call(this,e,t),n("selectElements",(function(n){var i=n.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0})),n("find",(function(n){var i=n.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0})),n("spaceTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["s","S"],i)?(t.trigger("spaceTool"),!0):void 0})),n("lassoTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["l","L"],i)?(t.trigger("lassoTool"),!0):void 0})),n("handTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["h","H"],i)?(t.trigger("handTool"),!0):void 0})),n("globalConnectTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["c","C"],i)?(t.trigger("globalConnectTool"),!0):void 0})),n("directEditing",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["e","E"],i)?(t.trigger("directEditing"),!0):void 0}))};var Rc={__depends__:[Nr],__init__:["keyboardBindings"],keyboardBindings:["type",Dc]},Nc={moveSpeed:1,moveSpeedAccelerated:10},Lc={ArrowLeft:"left",Left:"left",ArrowUp:"up",Up:"up",ArrowRight:"right",Right:"right",ArrowDown:"down",Down:"down"},Bc={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function Ic(e,t,n,i,r){var o=this;this._config=W({},Nc,e||{}),t.addListener(1500,(function(e){var n=e.keyEvent,i=Lc[n.key];if(i&&!t.isCmd(n)){var r=t.isShift(n);return o.moveSelection(i,r),!0}})),this.moveSelection=function(e,t){var o=r.get();if(o.length){var a=this._config[t?"moveSpeedAccelerated":"moveSpeed"],s=Bc[e](a);i.allowed("elements.move",{shapes:o})&&n.moveElements(o,s)}}}Ic.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var Fc={__depends__:[Nr,vr],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",Ic]};function zc(e,t,n,i){e.on("element.changed",(function(i){var r=i.element;(r.parent||r===t.getRootElement())&&(i.gfx=n.getGraphics(r)),i.gfx&&e.fire(Ye(r)+".changed",i)})),e.on("elements.changed",(function(t){var n=t.elements;n.forEach((function(t){e.fire("element.changed",{element:t})})),i.updateContainments(n)})),e.on("shape.changed",(function(e){i.update("shape",e.element,e.gfx)})),e.on("connection.changed",(function(e){i.update("connection",e.element,e.gfx)}))}zc.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var Hc={__init__:["changeSupport"],changeSupport:["type",zc]};function Vc(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(e,t){var n,i=e.shape,o=e.direction,a=e.resizeConstraints;e.delta=t,n=function(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return-1!==t.indexOf("n")?(o.y=e.y+r,o.height=e.height-r):-1!==t.indexOf("s")&&(o.height=e.height+r),-1!==t.indexOf("e")?o.width=e.width+i:-1!==t.indexOf("w")&&(o.x=e.x+i,o.width=e.width-i),o}(i,o,t),e.newBounds=function(e,t){if(!t)return e;var n=qi(e);return Gi({top:Ys("top",n,t),right:Ys("right",n,t),bottom:Ys("bottom",n,t),left:Ys("left",n,t)})}(n,a),e.canExecute=r.canResize(e)}e.on("resize.start",(function(e){var t,n,i;t=e.context,n=t.resizeConstraints,i=t.minBounds,void 0===n&&(void 0===i&&(i=r.computeMinResizeBox(t)),t.resizeConstraints={min:qi(i)})})),e.on("resize.move",(function(e){var t={x:e.dx,y:e.dy};o(e.context,t)})),e.on("resize.end",(function(e){!function(e){var t=e.shape,i=e.canExecute,r=e.newBounds;if(i){if(!function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(t,r=Ui(r)))return;n.resizeShape(t,r)}}(e.context)}))}function $c(e,t){var n=Yi(e),i=qi(e),r={x:n.x,y:n.y};return-1!==t.indexOf("n")?r.y=i.top:-1!==t.indexOf("s")&&(r.y=i.bottom),-1!==t.indexOf("e")?r.x=i.right:-1!==t.indexOf("w")&&(r.x=i.left),r}function Uc(e){return"n"===e||"s"===e?"resize-ns":"e"===e||"w"===e?"resize-ew":"nw"===e||"se"===e?"resize-nwse":"resize-nesw"}Vc.prototype.canResize=function(e){var t=this._rules,n=q(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},Vc.prototype.activate=function(e,t,n){var i,r,o=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(i=W({shape:t},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");o.init(e,$c(t,r),"resize",{autoActivate:!0,cursor:Uc(r),data:{shape:t,context:i}})},Vc.prototype.computeMinResizeBox=function(e){var t=e.shape;return function(e,t,n,i){var r=qi(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},a=i?qi(i):o;return Gi({top:qs(o.top,a.top),left:qs(o.left,a.left),bottom:Ws(o.bottom,a.bottom),right:Ws(o.right,a.right)})}(e.direction,t,e.minDimensions||{width:10,height:10},Zs(t,e.childrenBoxPadding))},Vc.$inject=["eventBus","rules","modeling","dragging"];function Wc(e,t,n){e.on("resize.move",500,(function(e){var i,r,o,a;i=e.context,r=i.shape,o=i.newBounds,(a=i.frame)||(a=i.frame=n.addFrame(r,t.getDefaultLayer()),t.addMarker(r,"djs-resizing")),o.width>5&&ee(a,{x:o.x,width:o.width}),o.height>5&&ee(a,{y:o.y,height:o.height}),i.canExecute?oe(a).remove("resize-not-ok"):oe(a).add("resize-not-ok")})),e.on("resize.cleanup",(function(e){var n,i;n=e.context,i=n.shape,n.frame&&se(n.frame),t.removeMarker(i,"djs-resizing")}))}Wc.$inject=["eventBus","canvas","previewSupport"];var qc=["n","w","s","e","nw","ne","se","sw"];function Gc(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",(function(e){var t=e.newSelection;r.removeResizers(),1===t.length&&S(t,$(r.addResizer,r))})),e.on("shape.changed",(function(e){var t=e.element;n.isSelected(t)&&(r.removeResizers(),r.addResizer(t))}))}Gc.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(t){ar(t)&&i.activate(t,e,n)}Y.g.bind(t,"mousedown",r),Y.g.bind(t,"touchstart",r)},Gc.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=function(e){var t={x:0,y:0};-1!==e.indexOf("e")?t.x=6:-1!==e.indexOf("w")&&(t.x=-6);-1!==e.indexOf("s")?t.y=6:-1!==e.indexOf("n")&&(t.y=-6);return t}(i),a=he("g");oe(a).add("djs-resizer"),oe(a).add("djs-resizer-"+e.id),oe(a).add("djs-resizer-"+i),Z(r,a);var s=he("rect");ee(s,{x:-2+o.x,y:-2+o.y,width:4,height:4}),oe(s).add("djs-resizer-visual"),Z(a,s);var c=he("rect");return ee(c,{x:-10+o.x,y:-10+o.y,width:20,height:20}),oe(c).add("djs-resizer-hit"),Z(a,c),Tt(a,t,n),a},Gc.prototype.createResizer=function(e,t){var n=$c(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)},Gc.prototype.addResizer=function(e){var t=this;this._resize.canResize({shape:e})&&S(qc,(function(n){t.createResizer(e,n)}))},Gc.prototype.removeResizers=function(){ce(this._getResizersParent())},Gc.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Gc.$inject=["eventBus","canvas","selection","resize"];var Yc={__depends__:[qo,Ho,Wa],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Vc],resizePreview:["type",Wc],resizeHandles:["type",Gc]};function Kc(e,t){var n=t.create("bpmn:CategoryValue"),i=t.create("bpmn:Category",{categoryValue:[n]});return et(e.get("rootElements"),i),si(i).$parent=e,si(n).$parent=i,n}function Xc(e,t,n,i,r,o,a){function s(e,t){(t||So(e,["bpmn:Task","bpmn:TextAnnotation","bpmn:Group"])||Zc(e))&&i.activate(e)}this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=a,i.registerProvider(this),e.on("element.dblclick",(function(e){s(e.element,!0)})),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],(function(e){i.isActive()&&i.complete()})),e.on(["commandStack.changed"],(function(e){i.isActive()&&i.cancel()})),e.on("directEditing.activate",(function(e){o.removeResizers()})),e.on("create.end",500,(function(e){var t=e.context,n=t.shape,i=e.context.canExecute;e.isTouch||i&&(t.hints&&!1===t.hints.createElementsBehavior||s(n))})),e.on("autoPlace.end",500,(function(e){s(e.shape)}))}function Zc(e){return ai(e,"bpmn:SubProcess")&&!ci(e)}Xc.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],Xc.prototype.activate=function(e){var t=pi(e);if(void 0!==t){var n={text:t};W(n,this.getEditingBBox(e));var i={};return(So(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Zc(e))&&W(i,{centerVertically:!0}),Mi(e)&&W(i,{autoResize:!0}),ai(e,"bpmn:TextAnnotation")&&W(i,{resizable:!0,autoResize:!0}),W(n,{options:i}),n}},Xc.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r=i.x+i.width/2,o=i.y+i.height/2,a={x:i.x,y:i.y},s=t.zoom(),c=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),u=l.fontSize*s,d=l.lineHeight,p=c.fontSize*s,h=c.lineHeight,f={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(ai(e,"bpmn:Lane")||function(e){return ai(e,"bpmn:Participant")&&ci(e)}(e))&&(W(a,{width:i.height,height:30*s,x:i.x-i.height/2+15*s,y:o-30*s/2}),W(f,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:"rotate(-90deg)"})),(So(e,["bpmn:Task","bpmn:CallActivity"])||function(e){return ai(e,"bpmn:Participant")&&!ci(e)}(e)||Zc(e))&&(W(a,{width:i.width,height:i.height}),W(f,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),function(e){return ai(e,"bpmn:SubProcess")&&ci(e)}(e)&&(W(a,{width:i.width,x:i.x}),W(f,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"}));var g=90*s,m=7*s,v=4*s;if(n.labelTarget&&(W(a,{width:g,height:i.height+m+v,x:r-g/2,y:i.y-m}),W(f,{fontSize:u+"px",lineHeight:d,paddingTop:m+"px",paddingBottom:v+"px"})),Mi(n)&&!Di(n)&&!Li(n)){var y=Ni(e),b=t.getAbsoluteBBox({x:y.x,y:y.y,width:0,height:0}),w=u+m+v;W(a,{width:g,height:w,x:b.x-g/2,y:b.y-w/2}),W(f,{fontSize:u+"px",lineHeight:d,paddingTop:m+"px",paddingBottom:v+"px"})}return ai(e,"bpmn:TextAnnotation")&&(W(a,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),W(f,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:p+"px",lineHeight:h})),{bounds:a,style:f}},Xc.prototype.update=function(e,t,n,i){var r,o,a;if((ai(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),ai(e,"bpmn:Group"))&&!si(e).categoryValueRef){var s=Kc(si(this._canvas.getRootElement()).$parent,this._bpmnFactory);si(e).categoryValueRef=s}(a=t)&&a.trim()||(t=null),this._modeling.updateLabel(e,t,r)};function Jc(e,t,n,i){var r,o,a,s=this,c=t.getDefaultLayer();e.on("directEditing.activate",(function(e){var n=e.active;if(ai(r=n.element.label||n.element,"bpmn:TextAnnotation")){o=t.getAbsoluteBBox(r),a=he("g");var l=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:0,my:0}}),u=s.path=he("path");ee(u,{d:l,strokeWidth:2,stroke:Qc(r)}),Z(a,u),Z(c,a),Pt(a,r.x,r.y)}ai(r,"bpmn:TextAnnotation")||r.labelTarget?t.addMarker(r,"djs-element-hidden"):(ai(r,"bpmn:Task")||ai(r,"bpmn:CallActivity")||ai(r,"bpmn:SubProcess")||ai(r,"bpmn:Participant"))&&t.addMarker(r,"djs-label-hidden")})),e.on("directEditing.resize",(function(e){if(ai(r,"bpmn:TextAnnotation")){var t=e.height,n=e.dy,a=Math.max(r.height/o.height*(t+n),0),c=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:a,position:{mx:0,my:0}});ee(s.path,{d:c})}})),e.on(["directEditing.complete","directEditing.cancel"],(function(e){var n=e.active;n&&(t.removeMarker(n.element.label||n.element,"djs-element-hidden"),t.removeMarker(r,"djs-label-hidden")),r=void 0,o=void 0,a&&(se(a),a=void 0)}))}function Qc(e,t){return si(e).di.get("stroke")||t||"black"}Jc.$inject=["eventBus","canvas","elementRegistry","pathMap"];var el={__depends__:[Hc,Yc,Fa],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Xc],labelEditingPreview:["type",Jc]},tl=["top","bottom","left","right"];function nl(e,t){function n(e){if(Di(e)){var n=function(e){var t=Yi(e.label),n=il(Yi(e),t);if(i=n,-1===tl.indexOf(i))return;var i;var r=function(e){var t=Yi(e);return[].concat(e.incoming.map((function(e){return e.waypoints[e.waypoints.length-2]})),e.outgoing.map((function(e){return e.waypoints[1]}))).map((function(e){return il(t,e)}))}(e);if(e.host){var o=function(e){var t,n=e.host,i=Ki(Yi(e),n);t=i.indexOf("-")>=0?i.split("-"):[i];return tl.filter((function(e){return-1===t.indexOf(e)}))}(e);r=r.concat(o)}var a=tl.filter((function(e){return-1===r.indexOf(e)}));if(-1!==a.indexOf(n))return;return a[0]}(e);n&&function(e,n){var i=Yi(e),r=e.label,o=Yi(r);if(!r.parent)return;var a,s=qi(e);switch(n){case"top":a={x:i.x,y:s.top-10-r.height/2};break;case"left":a={x:s.left-10-r.width/2,y:i.y};break;case"bottom":a={x:i.x,y:s.bottom+10+r.height/2};break;case"right":a={x:s.right+10+r.width/2,y:i.y}}var c=Ur(a,o);t.moveShape(r,c)}(e,n)}}jo.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],(function(e){var t=e.context,i=t.connection,r=i.source,o=i.target;!1!==(t.hints||{}).createElementsBehavior&&(n(r),n(o))})),this.postExecuted(["label.create"],(function(e){var t=e.context,i=t.shape;!1!==(t.hints||{}).createElementsBehavior&&n(i.labelTarget)})),this.postExecuted(["elements.create"],(function(e){var t=e.context,i=t.elements;!1!==(t.hints||{}).createElementsBehavior&&i.forEach((function(e){n(e)}))}))}function il(e,t){return Ki(t,e,5)}function rl(e,t,n){jo.call(this,e),this.preExecute("shape.append",(function(e){var t=e.source,n=e.shape;e.position||(ai(n,"bpmn:TextAnnotation")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})}),!0)}function ol(e,t){e.invoke(jo,this),this.postExecute("shape.move",(function(e){var n=e.newParent,i=e.shape;S(_(i.incoming.concat(i.outgoing),(function(e){return ai(e,"bpmn:Association")})),(function(e){t.moveConnection(e,{x:0,y:0},n)}))}),!0)}a()(nl,jo),nl.$inject=["eventBus","modeling"],a()(rl,jo),rl.$inject=["eventBus","elementFactory","bpmnRules"],a()(ol,jo),ol.$inject=["injector","modeling"];function al(e,t){t.invoke(jo,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,(function(e){var t=e.elements;1===(t=t.filter((function(e){return sl(e,e.host)}))).length&&t.map((function(e){return t.indexOf(e)})).forEach((function(i){var r=t[i];e.elements[i]=n.replaceShape(t[i],r)}))}),!0),this.preExecute("elements.move",500,(function(e){var t=e.shapes,i=e.newHost;if(1===t.length){var r=t[0];sl(r,i)&&(e.shapes=[n.replaceShape(r,i)])}}),!0)}function sl(e,t){return!Li(e)&&So(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function cl(e,t){function n(e){return _(e.attachers,(function(e){return ai(e,"bpmn:BoundaryEvent")}))}jo.call(this,e),this.postExecute("connection.create",(function(e){var i=e.context.source,r=e.context.target,o=n(r);ai(i,"bpmn:EventBasedGateway")&&ai(r,"bpmn:ReceiveTask")&&o.length>0&&t.removeElements(o)})),this.postExecute("connection.reconnect",(function(e){var i=e.context.oldSource,r=e.context.newSource;ai(i,"bpmn:Gateway")&&ai(r,"bpmn:EventBasedGateway")&&S(r.outgoing,(function(e){var i=e.target,r=n(i);ai(i,"bpmn:ReceiveTask")&&r.length>0&&t.removeElements(r)}))}))}al.$inject=["bpmnReplace","injector"],a()(al,jo),al.prototype.replaceShape=function(e,t){var n,i=(n=si(e).eventDefinitions)&&n[0],r={type:"bpmn:BoundaryEvent",host:t};return i&&(r.eventDefinitionType=i.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})},cl.$inject=["eventBus","modeling"],a()(cl,jo);function ll(e,t,n,i,r){function o(e){return So(e,["bpmn:ReceiveTask","bpmn:SendTask"])||function(e,t){m(t)||(t=[t]);return T(t,(function(t){return ui(e,t)}))}(e,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(t){return!!E(e.getDefinitions().get("rootElements"),B({id:t.id}))}function s(e){return ai(e,"bpmn:ErrorEventDefinition")?"errorRef":ai(e,"bpmn:EscalationEventDefinition")?"escalationRef":ai(e,"bpmn:MessageEventDefinition")?"messageRef":ai(e,"bpmn:SignalEventDefinition")?"signalRef":void 0}function c(e){if(So(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.get("messageRef");var t=e.get("eventDefinitions")[0];return t.get(s(t))}n.invoke(jo,this),this.executed("shape.create",(function(t){var n=t.shape;if(o(n)){var i=c(si(n));i&&!a(i)&&(et(e.getDefinitions().get("rootElements"),i),t.addedRootElement=i)}}),!0),this.reverted("shape.create",(function(t){var n=t.addedRootElement;n&&Qe(e.getDefinitions().get("rootElements"),n)}),!0),t.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element;if(o(n)){var i=c(si(n));i&&(t.referencedRootElement=i)}})),t.on("copyPaste.pasteElement",500,(function(e){var t=e.descriptor,n=t.businessObject;if(o(n)){var c=t.referencedRootElement;c&&(a(c)||(c=i.copyElement(c,r.create(c.$type))),function(e,t){if(So(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.set("messageRef",t);var n=e.get("eventDefinitions")[0];n.set(s(n),t)}(n,c))}}))}function ul(e){e.invoke(jo,this),this.preExecute("shape.create",1500,(function(e){var t=e.context,n=t.parent,i=t.shape;ai(n,"bpmn:Lane")&&!ai(i,"bpmn:Lane")&&(t.parent=Co(n,"bpmn:Participant"))}))}ll.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],a()(ll,jo),ul.$inject=["injector"],a()(ul,jo);function dl(e,t,n){t.on(["create.hover","create.move","create.end","shape.move.hover","shape.move.move","shape.move.end"],1500,(function(t){var i=t.context.shape||t.shape,r=t.hover;ai(r,"bpmn:Lane")&&!So(i,["bpmn:Lane","bpmn:Participant"])&&(t.hover=nc(r),t.hoverGfx=e.getGraphics(t.hover));var o=n.getRootElement();r!==o&&(i.labelTarget||ai(i,"bpmn:Group"))&&(t.hover=o,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],1500,(function(t){var n=t.hover;ai(n,"bpmn:Lane")&&(t.hover=nc(n)||n,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["bendpoint.move.hover"],1500,(function(t){var n=t.context,i=t.hover,r=n.type;ai(i,"bpmn:Lane")&&/reconnect/.test(r)&&(t.hover=nc(i)||i,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.start"],1500,(function(e){var t=e.context,n=t.start;ai(n,"bpmn:Lane")&&(t.start=nc(n)||n)})),t.on("shape.move.start",2e3,(function(e){var t=e.shape;ai(t,"bpmn:Lane")&&(e.shape=nc(t)||t)}))}function pl(e,t,n){jo.call(this,e),this.preExecute("shape.create",(function(e){var n=e.context.shape;if(ai(n,"bpmn:DataObjectReference")&&"label"!==n.type){var i=t.create("bpmn:DataObject");n.businessObject.dataObjectRef=i}}))}dl.$inject=["elementRegistry","eventBus","canvas"],pl.$inject=["eventBus","bpmnFactory","moddle"],a()(pl,jo);function hl(e,t,n){function i(t){var i,r=t.parent,o=e.getRootElement();ai(o,"bpmn:Collaboration")?i=o:(i=n.makeCollaboration(),t.process=r),t.parent=i}jo.call(this,t),t.on(["create.start","shape.move.start"],2e3,(function(t){var n=t.context,i=n.shape,r=e.getRootElement();if(ai(i,"bpmn:Participant")&&ai(r,"bpmn:Process")&&r.children.length){var o=r.children.filter((function(e){return!ai(e,"bpmn:Group")&&!Li(e)&&!function(e){return!!e.waypoints}(e)}));if(o.length){var a=Ge(o);W(i,function(e,t){t={width:t.width+40+30,height:t.height+40};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}(i,a)),n.createConstraints=function(e,t){return{bottom:(t=qi(t)).top+e.height/2-20,left:t.right-e.width/2+20,top:t.bottom-e.height/2+20,right:t.left+e.width/2-20-30}}(i,a)}}})),t.on("create.start",2e3,(function(n){var i=n.context.shape,r=e.getRootElement(),o=e.getGraphics(r);function a(e){e.element=r,e.gfx=o}ai(i,"bpmn:Participant")&&ai(r,"bpmn:Process")&&(t.on("element.hover",2e3,a),t.once("create.cleanup",(function(){t.off("element.hover",a)})))})),this.preExecute("shape.create",(function(e){var t=e.parent;ai(e.shape,"bpmn:Participant")&&ai(t,"bpmn:Process")&&i(e)}),!0),this.execute("shape.create",(function(e){var t=e.process,n=e.shape;t&&(e.oldProcessRef=n.businessObject.processRef,n.businessObject.processRef=t.businessObject)}),!0),this.revert("shape.create",(function(e){var t=e.process,n=e.shape;t&&(n.businessObject.processRef=e.oldProcessRef)}),!0),this.postExecute("shape.create",(function(e){var t=e.process,i=e.shape;if(t){var r=t.children.slice();n.moveElements(r,{x:0,y:0},i)}}),!0),this.preExecute("elements.create",2e3,(function(e){var t,n=e.elements,r=e.parent;fl(n)&&ai(r,"bpmn:Process")&&(i(e),t=fl(n),e.oldProcessRef=t.businessObject.processRef,t.businessObject.processRef=r.businessObject)}),!0),this.revert("elements.create",(function(e){var t=e.elements;e.process&&(fl(t).businessObject.processRef=e.oldProcessRef)}),!0),this.postExecute("elements.create",(function(e){var t,i=e.elements,r=e.process;if(r){t=fl(i);var o=r.children.slice();n.moveElements(o,{x:0,y:0},t)}}),!0)}function fl(e){return E(e,(function(e){return ai(e,"bpmn:Participant")}))}hl.$inject=["canvas","eventBus","modeling"],a()(hl,jo);function gl(e,t){function n(e,n){var i=e.get("properties"),r=E(i,(function(e){return"__targetRef_placeholder"===e.name}));return!r&&n&&et(i,r=t.create("bpmn:Property",{name:"__targetRef_placeholder"})),r}function i(e,t){var i=n(e);i&&(function(e,t,n){return E(e.get("dataInputAssociations"),(function(e){return e!==n&&e.targetRef===t}))}(e,i,t)||Qe(e.get("properties"),i))}function r(e){var t,r=e.context,o=r.connection,a=o.businessObject,s=o.target,c=s&&s.businessObject,l=r.newTarget,u=l&&l.businessObject,d=r.oldTarget||r.target,p=d&&d.businessObject,h=o.businessObject;p&&p!==c&&i(p,a),u&&u!==c&&i(u,a),c?(t=n(c,!0),h.targetRef=t):h.targetRef=null}jo.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],ml(r)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],ml(r))}function ml(e){return function(t){if(ai(t.context.connection,"bpmn:DataInputAssociation"))return e(t)}}function vl(e){this._bpmnUpdater=e}function yl(e,t,n,i){function r(e){return e.children.filter((function(e){return ai(e,"bpmn:DataStoreReference")&&!e.labelTarget}))}function o(e,i){var r=e.businessObject||e;if(i=i||n.filter((function(e){return ai(e,"bpmn:Participant")}))[0]){var o=i.businessObject||i;t.execute("dataStore.updateContainment",{dataStoreBo:r,newSemanticParent:o.processRef||o,newDiParent:o.di})}}jo.call(this,i),t.registerHandler("dataStore.updateContainment",vl),this.preExecute("shape.create",(function(e){var t=e.context,n=t.shape;ai(n,"bpmn:DataStoreReference")&&"label"!==n.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)})),this.preExecute("elements.move",(function(e){var t=e.context,n=t.shapes;n.filter((function(e){return ai(e,"bpmn:DataStoreReference")})).length&&(t.hints||(t.hints={}),t.hints.autoResize=n.filter((function(e){return!ai(e,"bpmn:DataStoreReference")})))})),this.postExecute("shape.create",(function(e){var t=e.context.shape,n=t.parent;ai(t,"bpmn:DataStoreReference")&&"label"!==t.type&&ai(n,"bpmn:Collaboration")&&o(t)})),this.postExecute("shape.move",(function(e){var t=e.context,n=t.shape,i=t.oldParent,r=n.parent;ai(i,"bpmn:Collaboration")||ai(n,"bpmn:DataStoreReference")&&"label"!==n.type&&ai(r,"bpmn:Collaboration")&&o(n,ai(i,"bpmn:Participant")?i:function(e,t){for(;e.parent;){if(ai(e.parent,t))return e.parent;e=e.parent}}(i,"bpmn:Participant"))})),this.postExecute("shape.delete",(function(t){var n=t.context.shape,i=e.getRootElement();So(n,["bpmn:Participant","bpmn:SubProcess"])&&ai(i,"bpmn:Collaboration")&&r(i).filter((function(e){return function(e,t){var n=e.businessObject||e,i=t.businessObject||t;for(;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}(e,n)})).forEach((function(e){o(e)}))})),this.postExecute("canvas.updateRoot",(function(e){var t=e.context,n=t.oldRoot,i=t.newRoot;r(n).forEach((function(e){ai(i,"bpmn:Process")&&o(e,i)}))}))}gl.$inject=["eventBus","bpmnFactory"],a()(gl,jo),vl.$inject=["bpmnUpdater"],vl.prototype.execute=function(e){var t=e.dataStoreBo,n=e.newSemanticParent,i=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=t.di.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},vl.prototype.revert=function(e){var t=e.dataStoreBo,n=e.oldSemanticParent,i=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},yl.$inject=["canvas","commandStack","elementRegistry","eventBus"],a()(yl,jo);function bl(e,t,n){jo.call(this,e),this.postExecuted("shape.delete",500,(function(e){var t=e.context,i=t.hints,r=t.shape,o=t.oldParent;ai(r,"bpmn:Lane")&&(i&&i.nested||function(e,t){var i,r,o,a=tc(t),s=[],c=[];Ue(a,(function(t){return t.y>e.y?c.push(t):s.push(t),t.children})),a.length&&(i=c.length&&s.length?e.height/2:e.height,s.length&&(r=n.calculateAdjustments(s,"y",i,e.y-10),n.makeSpace(r.movingShapes,r.resizingShapes,{x:0,y:i},"s")),c.length&&(o=n.calculateAdjustments(c,"y",-i,e.y+e.height+10),n.makeSpace(o.movingShapes,o.resizingShapes,{x:0,y:-i},"n")))}(r,o))}))}bl.$inject=["eventBus","modeling","spaceTool"],a()(bl,jo);function wl(e,t){t.invoke(jo,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,(function(e){var t=e.elements;t.filter((function(e){return xl(e,e.host)})).map((function(e){return t.indexOf(e)})).forEach((function(i){e.elements[i]=n.replaceShape(t[i])}))}),!0),this.preExecute("elements.move",500,(function(e){var t=e.shapes,i=e.newHost;t.forEach((function(e,r){var o,a=e.host;xl(e,(o=a,-1!==t.indexOf(o)?a:i))&&(t[r]=n.replaceShape(e))}))}),!0)}function xl(e,t){return!Li(e)&&ai(e,"bpmn:BoundaryEvent")&&!t}function El(e,t,n){function i(e,i,r){var o,a,s,c,l,u,d,p,h=i.waypoints,f=e.outgoing.slice(),g=e.incoming.slice(),m=Ko(h,p=y(r.width)?Yi(r):r);if(m){if(o=h.slice(0,m.index),a=h.slice(m.index+(m.bendpoint?1:0)),!o.length||!a.length)return;s=m.bendpoint?h[m.index]:p,_l(e,o[o.length-1])||o.push(Sl(s)),_l(e,a[0])||a.unshift(Sl(s))}c=i.source,l=i.target,t.canConnect(c,e,i)&&(n.reconnectEnd(i,e,o||p),u=i),t.canConnect(e,l,i)&&(u?d=n.connect(e,l,{type:i.type,waypoints:a}):(n.reconnectStart(i,e,a||p),d=i));var v=[].concat(u&&_(g,(function(e){return e.source===u.source}))||[],d&&_(f,(function(e){return e.target===d.target}))||[]);v.length&&n.removeElements(v)}jo.call(this,e),this.preExecute("elements.move",(function(e){var n=e.newParent,i=e.shapes,r=e.delta,o=i[0];if(o&&n){n&&n.waypoints&&(e.newParent=n=n.parent);var a=Yi(o),s={x:a.x+r.x,y:a.y+r.y},c=E(n.children,(function(e){return t.canInsert(i,e)&&Ko(e.waypoints,s)}));c&&(e.targetFlow=c,e.position=s)}}),!0),this.postExecuted("elements.move",(function(e){var t=e.shapes,n=e.targetFlow,r=e.position;n&&i(t[0],n,r)}),!0),this.preExecute("shape.create",(function(e){var n=e.parent,i=e.shape;t.canInsert(i,n)&&(e.targetFlow=n,e.parent=n.parent)}),!0),this.postExecuted("shape.create",(function(e){var t=e.shape,n=e.targetFlow,r=e.position;n&&i(t,n,r)}),!0)}function _l(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Sl(e){return W({},e)}function Cl(e,t){jo.call(this,e),this.preExecuted("connection.create",(function(e){var n=e.context,i=n.source,r=n.target,o=r.incoming.slice();n.hints&&!1===n.hints.createElementsBehavior||ai(i,"bpmn:EventBasedGateway")&&r.incoming.length&&o.filter(Ol).forEach((function(e){t.removeConnection(e)}))})),this.preExecuted("shape.replace",(function(e){var n=e.context.newShape;ai(n,"bpmn:EventBasedGateway")&&n.outgoing.filter(Ol).map((function(e){return e.target})).reduce((function(e,t){var n=t.incoming.filter(Ol);return e.concat(n)}),[]).forEach((function(e){e.source!==n&&t.removeConnection(e)}))}))}function Ol(e){return ai(e,"bpmn:SequenceFlow")}wl.$inject=["bpmnReplace","injector"],a()(wl,jo),wl.prototype.replaceShape=function(e){var t,n,i=(n=si(e).eventDefinitions)&&n[0];return t=i?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:i.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,t,{layoutConnection:!1})},a()(El,jo),El.$inject=["eventBus","bpmnRules","modeling"],Cl.$inject=["eventBus","modeling"],a()(Cl,jo);function kl(e,t,n,i,r,o){function a(){return si(t.getRootElement()).$parent}function s(e){var t=si(e).categoryValueRef;if(t){var n=t.$parent;t&&(Qe(n.categoryValue,t),n&&!n.categoryValue.length&&function(e){Qe(a().get("rootElements"),e)}(n))}}r.invoke(jo,this),this.executed("shape.delete",(function(e){var t,i=e.context.shape;if(ai(i,"bpmn:Group")){var r=si(i).categoryValueRef,o=n.filter((function(e){return ai(e,"bpmn:Group")}));t=r,o.some((function(e){var n=si(e);return n.categoryValueRef&&n.categoryValueRef===t}))||s(i)}})),this.reverted("shape.delete",(function(e){var t=e.context.shape;if(ai(t,"bpmn:Group")){var n=si(t).categoryValueRef,i=a(),r=n?n.$parent:null;et(r.get("categoryValue"),n),et(i.get("rootElements"),r)}})),this.execute("shape.create",(function(t){var n=si(t.context.shape);if(ai(n,"bpmn:Group")&&!n.categoryValueRef){var i=Kc(a(),e);n.categoryValueRef=i}})),this.revert("shape.create",(function(e){var t=e.context.shape;ai(t,"bpmn:Group")&&(s(t),delete si(t).categoryValueRef)})),i.on("moddleCopy.canCopyProperty",2e3,(function(t){var n,i=t.property;if(ai(i,"bpmn:CategoryValue"))return n=Kc(a(),e),o.copyElement(i,n)}))}function Tl(e,t,n,i){var r,o,a,s;return 0==(r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y))?null:(o=e.y-n.y,a=e.x-n.x,s=((i.x-n.x)*o-(i.y-n.y)*a)/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function Pl(e){function t(e,t,n){var i,r={x:n.x,y:n.y-50},o={x:n.x-50,y:n.y},a=Tl(e,t,n,r),s=Tl(e,t,n,o);i=a&&s?jl(a,n)>jl(s,n)?s:a:a||s,e.original=i}e.on("bpmnElement.added",(function(e){var n,i,r=e.element;r.waypoints&&(t((i=(n=r).waypoints)[0],i[1],Yi(n.source)),t(i[i.length-1],i[i.length-2],Yi(n.target)))}))}function jl(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Al(e){jo.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],(function(e){var n=si(e.context.shape);So(n,t)&&!n.di.get("isHorizontal")&&n.di.set("isHorizontal",!0)}))}function Ml(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Dl(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function Rl(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=function(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}];return-(i[0].n*t[0]+i[1].n*t[1])/(i[0].lambda*t[0]+i[1].lambda*t[1])}([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function Nl(e,t){var n=Rl(e,t);return Ml({x:n.x-e.x,y:n.y-e.y})}function Ll(e,t){return Ml({x:e.x-t.x,y:e.y-t.y})}kl.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],a()(kl,jo),Pl.$inject=["eventBus"],Al.$inject=["eventBus"],a()(Al,jo);var Bl=Math.sqrt,Il=Math.min,Fl=Math.max,zl=Math.abs;function Hl(e){return Math.pow(e,2)}function Vl(e,t){return Bl(Hl(e.x-t.x)+Hl(e.y-t.y))}function $l(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=r*r+o*o,l=(r*a+o*s)/c,u=l*l-(a*a+s*s-i*i)/c;if(u<0&&u>-1e-6&&(u=0),u<0)return[];var d=Bl(u),p=-l+d,h=-l-d,f={x:e.x-r*p,y:e.y-o*p};return 0===u?[f]:[f,{x:e.x-r*h,y:e.y-o*h}].filter((function(n){return function(e,t,n){return Ul(e.x,t.x,n.x)&&Ul(e.y,t.y,n.y)}(n,e,t)}))}function Ul(e,t,n){return e>=Il(t,n)-Wl&&e<=Fl(t,n)+Wl}var Wl=.1;function ql(e,t){return zl(e.x-t.x)<=Wl&&zl(e.y-t.y)<=Wl}function Gl(e,t,n,i){var r=0,o=0,a=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}(e),s=function(e,t){var n,i,r,o,a,s,c,l,u,d,p,h,f=0;for(f=0;f<t.length-1;f++){if(ql(n=t[f],i=t[f+1])?s=[n]:(r=Vl(e,n),o=Vl(e,i),s=$l(n,i,e,Il(r,o))),s.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===s.length&&(c={type:"bendpoint",position:s[0],segmentIndex:f,bendpointIndex:ql(n,s[0])?f:f+1}),2===s.length&&(p=s[0],h=s[1],c={type:"segment",position:a={x:(p.x+h.x)/2,y:(p.y+h.y)/2},segmentIndex:f,relativeLocation:Vl(n,a)/Vl(n,i)}),l=Vl(c.position,e),(!d||u>l)&&(d=c,u=l)}return d}(a,n),c=s.segmentIndex,l=function(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===a?s:r>=s?r+o<s?s:r+o:r}if(i.bendpointMove){var c,l=i.bendpointMove.insert,u=i.bendpointMove.bendpointIndex;if(0===o)return r;if(r>=u&&(c=l?r+1:r-1),r<u)if(c=r,l&&"bendpoint"!==n.type&&u-1===r)Yl(t,u)<n.relativeLocation&&c++;return c}return 0===o?r:i.connectionStart?0===r?0:null:i.connectionEnd&&r===e.length-2?t.length-2:null}(n,t,s,i);if(null===l)return{x:r,y:o};if(l<0||l>t.length-2)return{x:r,y:o};var u,d,p,h,f,g,m=Kl(n,c),v=Kl(t,l),y=s.position,b=(h=y,f=Ll((p=m)[0],p[1]),g=Ll(p[0],h),0===f?0:g/f),w=(u=v,d=Dl(m),Dl(u)-d);if("bendpoint"===s.type){var x=t.length-n.length,E=s.bendpointIndex,_=n[E];if(-1!==t.indexOf(_))return{x:r,y:o};if(0===x){var S=t[E];return{x:S.x-s.position.x,y:S.y-s.position.y}}x<0&&0!==E&&E<n.length-1&&(b=Yl(n,E))}var C,O,k=(v[1].x-v[0].x)*b+v[0].x,T=(v[1].y-v[0].y)*b+v[0].y,P=(C={x:a.x-y.x,y:a.y-y.y},(O=w)?{x:Math.cos(O)*C.x-Math.sin(O)*C.y,y:Math.sin(O)*C.x+Math.cos(O)*C.y}:C);return Wi({x:r=k+P.x-a.x,y:o=T+P.y-a.y})}function Yl(e,t){var n=Ll(e[t-1],e[t]);return n/(n+Ll(e[t],e[t+1]))}function Kl(e,t){return[e[t],e[t+1]]}function Xl(e,t,n){var i=$r(t),r=$r(n),o=Ur(e,i),a=o.x*(n.width/t.width),s=o.y*(n.height/t.height);return Wi({x:r.x+a,y:r.y+s})}function Zl(e,t,n){var i=$r(e),r=$r(t),o=$r(n),a=Ur(e,i),s=Ur(i,r),c=function(e,t,n){var i=qi(t),r=qi(n);if(function(e,t){return function(e,t){return e.right!==t.right&&e.left!==t.left}(e,t)||function(e,t){return e.top!==t.top&&e.bottom!==t.bottom}(e,t)}(i,r))return null;var o,a,s=Ki(t,e);if("top"===s)o={x:0,y:r.bottom-i.bottom};else if("bottom"===s)o={x:0,y:r.top-i.top};else if("right"===s)o={x:r.left-i.left,y:0};else{if("left"!==s)return null;o={x:r.right-i.right,y:0}}if(a={x:e.x+o.x,y:e.y+o.y},Ki(n,a)!==s)return null;return o}(i,t,n);if(c)return c;var l=s.x*(n.width/t.width),u=s.y*(n.height/t.height),d=o.x+l,p=o.y+u;return Wi({x:d+a.x-e.x,y:p+a.y-e.y})}var Jl={width:90,height:20};function Ql(e,t,n,i){jo.call(this,e),this.postExecute("element.updateProperties",(function(e){var n=e.context,r=n.element,o=n.properties;if("name"in o&&t.updateLabel(r,o.name),"text"in o&&ai(r,"bpmn:TextAnnotation")){var a=i.getTextAnnotationBounds({x:r.x,y:r.y,width:r.width,height:r.height},o.text||"");t.updateLabel(r,o.text,a)}})),this.postExecute(["shape.create","connection.create"],(function(e){var n=e.context;if(!1!==(n.hints||{}).createElementsBehavior){var r=n.shape||n.connection,o=r.businessObject;if(!Li(r)&&Mi(r)&&pi(r)){var a=Ni(r),s=i.getExternalLabelBounds(Jl,pi(r));t.createLabel(r,a,{id:o.id+"_label",businessObject:o,width:s.width,height:s.height})}}})),this.postExecute("shape.delete",(function(e){var n=e.context,i=n.labelTarget,r=n.hints||{};i&&!1!==r.unsetLabel&&t.updateLabel(i,null,null,{removeShape:!1})})),this.postExecute(["label.create"],(function(e){var t,i=e.context.shape;i.labelTarget&&ai(i.labelTarget||i,"bpmn:BaseElement")&&((t=i.businessObject.di).label||(t.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),W(t.label.bounds,{x:i.x,y:i.y,width:i.width,height:i.height}))})),this.postExecute(["connection.layout","connection.updateWaypoints"],(function(e){var n=e.context;if(!1!==(n.hints||{}).labelBehavior){var i,r=n.connection.label;r&&r.parent&&(i=function(e){var t=e.context,n=t.connection,i=n.label,r=W({},t.hints),o=t.newWaypoints||n.waypoints,a=t.oldWaypoints;return void 0===r.startChanged&&(r.startChanged=!!r.connectionStart),void 0===r.endChanged&&(r.endChanged=!!r.connectionEnd),Gl(i,o,a,r)}(e),t.moveShape(r,i))}})),this.postExecute(["shape.replace"],(function(e){var t=e.context,n=t.newShape,i=t.oldShape,r=si(n);r&&Mi(r)&&i.label&&n.label&&(n.label.x=i.label.x,n.label.y=i.label.y)})),this.postExecute("shape.resize",(function(e){var n,i=e.context,r=i.shape,o=i.newBounds,a=i.oldBounds;if(Di(r)){var s=r.label,c=function(e,t,n){return Wi(Ur(Xl(e,t,n),e))}(function(e,t){if(!t.length)return;var n=function(e,t){return L(t.map((function(t){return{line:t,distance:Nl(e,t)}})),"distance")[0].line}(e,t);return Rl(e,n)}(Yi(s),[[{x:(n=a).x,y:n.y},{x:n.x+(n.width||0),y:n.y}],[{x:n.x+(n.width||0),y:n.y},{x:n.x+(n.width||0),y:n.y+(n.height||0)}],[{x:n.x,y:n.y+(n.height||0)},{x:n.x+(n.width||0),y:n.y+(n.height||0)}],[{x:n.x,y:n.y},{x:n.x,y:n.y+(n.height||0)}]]),a,o);t.moveShape(s,c)}}))}a()(Ql,jo),Ql.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];var eu="flow elements must be children of pools/participants";function tu(e,t,n){function i(e,n,i){t.add({position:{x:e.x+5,y:e.y+5},type:"error",timeout:i||2e3,html:"<div>"+n+"</div>"})}e.on(["shape.move.rejected","create.rejected"],(function(e){var t=e.context,r=t.shape;ai(t.target,"bpmn:Collaboration")&&ai(r,"bpmn:FlowNode")&&i(e,n(eu))})),e.on(["elements.paste.rejected"],(function(e){var t=e.context,r=t.position,o=t.target;ai(o,"bpmn:Collaboration")&&i(r,n(eu)),ai(o,"bpmn:Process")&&i(r,n("participants cannot be pasted onto a non-empty process diagram"),3e3)}))}function nu(e,t,n,i){jo.call(this,e);var r=i.get("dragging",!1);function o(e){var i,r,o=e.source,a=e.target;e.parent&&(ai(e,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(o,a)||(r=!0),n.canConnectMessageFlow(o,a)&&(i="bpmn:MessageFlow")),ai(e,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(o,a)||(r=!0),n.canConnectSequenceFlow(o,a)&&(i="bpmn:SequenceFlow")),ai(e,"bpmn:Association")&&!n.canConnectAssociation(o,a)&&(r=!0),r&&t.removeConnection(e),i&&t.connect(o,a,{type:i,waypoints:e.waypoints.slice()}))}this.postExecuted("elements.move",(function(e){S(e.closure.allConnections,o)}),!0),this.preExecute("connection.reconnect",(function(e){var i,o,a=e.context,s=a.connection,c=a.newSource||s.source,l=a.newTarget||s.target;(i=n.canConnect(c,l))&&i.type!==s.type&&(o=t.connect(c,l,{type:i.type,waypoints:s.waypoints.slice()}),t.removeConnection(s),a.connection=o,r&&function(e,t){var n,i=r.context(),o=i&&i.payload.previousSelection;if(!o||!o.length)return;if(-1===(n=o.indexOf(e)))return;o.splice(n,1,t)}(s,o))})),this.postExecuted("element.updateProperties",(function(e){var n,i=e.context,r=i.properties,o=i.element,a=o.businessObject;r.default&&(n=E(o.outgoing,B({id:o.businessObject.default.id})))&&t.updateProperties(n,{conditionExpression:void 0}),r.conditionExpression&&a.sourceRef.default===a&&t.updateProperties(o.source,{default:void 0})}))}function iu(e,t){jo.call(this,e),this.preExecute("shape.delete",(function(e){var t=e.shape,n=t.parent;ai(t,"bpmn:Participant")&&(e.collaborationRoot=n)}),!0),this.postExecute("shape.delete",(function(e){var n=e.collaborationRoot;n&&!n.businessObject.participants.length&&t.makeProcess()}),!0)}function ru(e,t,n,i,r,o){i.invoke(jo,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.move"],500,(function(e){var n=e.context,i=n.newParent,r=n.newHost,o=[];S(n.closure.topLevel,(function(e){o=li(e)?o.concat(e.children):o.concat(e)})),1===o.length&&r&&(i=r);var a=t.canReplace(o,i);a&&this.replaceElements(o,a.replacements,r)}),this),this.postExecute(["shape.replace"],1500,(function(e){var n,i=e.context,r=i.oldShape,o=i.newShape,a=r.attachers;a&&a.length&&(n=t.canReplace(a,o),this.replaceElements(a,n.replacements))}),this),this.postExecuted(["shape.replace"],1500,(function(e){var t=e.context,n=t.oldShape,i=t.newShape;r.unclaimId(n.businessObject.id,n.businessObject),r.updateProperties(i,{id:n.id})}))}tu.$inject=["eventBus","tooltips","translate"],a()(nu,jo),nu.$inject=["eventBus","modeling","bpmnRules","injector"],iu.$inject=["eventBus","modeling"],a()(iu,jo),a()(ru,jo),ru.prototype.replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;S(t,(function(t){var r={type:t.newElementType},o=n.get(t.oldElementId),a=e.indexOf(o);e[a]=i.replaceElement(o,r,{select:!1})})),t&&r.select(e)},ru.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var ou=Math.abs,au=Math.min,su=Math.max;function cu(e,t,n,i){var r=e[t];e[t]=void 0===r?n:i(n,r)}function lu(e,t,n){return cu(e,t,n,au)}function uu(e,t,n){return cu(e,t,n,su)}var du={width:300,height:60},pu={width:300,height:150},hu={width:140,height:120},fu={width:50,height:30};function gu(e){e.on("resize.start",1500,(function(e){var t=e.context,n=t.shape,i=t.direction,r=t.balanced;(ai(n,"bpmn:Lane")||ai(n,"bpmn:Participant"))&&(t.resizeConstraints=function(e,t,n){var i=nc(e),r=!0,o=!0,a=ec(i,[i]),s=qi(e),c={},l={};return/e/.test(t)?l.right=s.left+du.width:/w/.test(t)&&(l.left=s.right-du.width),a.forEach((function(e){var i=qi(e);/n/.test(t)&&(i.top<s.top-10&&(r=!1),n&&ou(s.top-i.bottom)<10&&uu(c,"top",i.top+du.height),ou(s.top-i.top)<5&&lu(l,"top",i.bottom-du.height)),/s/.test(t)&&(i.bottom>s.bottom+10&&(o=!1),n&&ou(s.bottom-i.top)<10&&lu(c,"bottom",i.bottom-du.height),ou(s.bottom-i.bottom)<5&&uu(l,"bottom",i.top+du.height))})),i.children.filter((function(e){return!e.hidden&&!e.waypoints&&(ai(e,"bpmn:FlowElement")||ai(e,"bpmn:Artifact"))})).forEach((function(e){var n=qi(e);r&&/n/.test(t)&&lu(l,"top",n.top-20),/e/.test(t)&&uu(l,"right",n.right+20),o&&/s/.test(t)&&uu(l,"bottom",n.bottom+20),/w/.test(t)&&lu(l,"left",n.left-50)})),{min:l,max:c}}(n,i,r)),ai(n,"bpmn:Participant")&&(t.minDimensions=pu),ai(n,"bpmn:SubProcess")&&ci(n)&&(t.minDimensions=hu),ai(n,"bpmn:TextAnnotation")&&(t.minDimensions=fu)}))}gu.$inject=["eventBus"];function mu(e,t){e.on("resize.start",1501,(function(e){var t=e.context,n=t.shape;(ai(n,"bpmn:Lane")||ai(n,"bpmn:Participant"))&&(t.balanced=!sr(e))})),e.on("resize.end",1001,(function(e){var n=e.context,i=n.shape,r=n.canExecute,o=n.newBounds;if(ai(i,"bpmn:Lane")||ai(i,"bpmn:Participant"))return r&&(o=Ui(o),t.resizeLane(i,o,n.balanced)),!1}))}function vu(e,t,n){jo.call(this,e),this.preExecute("shape.delete",(function(e){var i=e.context.shape;if(1===i.incoming.length&&1===i.outgoing.length){var r,o,a,s=i.incoming[0],c=i.outgoing[0];if(ai(s,"bpmn:SequenceFlow")&&ai(c,"bpmn:SequenceFlow"))if(t.canConnect(s.source,c.target,s)){var l=(r=s.waypoints,o=c.waypoints,(a=Tl(yu(r[r.length-2]),yu(r[r.length-1]),yu(o[1]),yu(o[0])))?[].concat(r.slice(0,r.length-1),[a],o.slice(1)):[yu(r[0]),yu(o[o.length-1])]);n.reconnectEnd(s,c.target,l)}}}))}function yu(e){return e.original||e}mu.$inject=["eventBus","modeling"],a()(vu,jo),vu.$inject=["eventBus","bpmnRules","modeling"];var bu=Math.max;function wu(e){e.on("spaceTool.getMinDimensions",(function(e){var t=e.shapes,n=e.axis,i=e.start,r={};return S(t,(function(e){var t=e.id;ai(e,"bpmn:Participant")&&(!function(e){return"x"===e}(n)?r[t]={width:pu.width,height:xu(e,i)}:r[t]=pu),ai(e,"bpmn:SubProcess")&&ci(e)&&(r[t]=hu),ai(e,"bpmn:TextAnnotation")&&(r[t]=fu)})),r}))}function xu(e,t){var n;return tc(e).length?(n=function(e,t){var n,i=tc(e);return n=function e(t,n){var i,r,o;for(i=0;i<t.length;i++)if(r=t[i],n>=r.y&&n<=r.y+r.height)return(o=tc(r)).length?e(o,n):r}(i,t),e.height-n.height+du.height}(e,t),bu(pu.height,n)):pu.height}function Eu(e,t){e.invoke(jo,this),this.postExecuted("shape.replace",(function(e){var n=e.context.oldShape,i=e.context.newShape;if(ai(i,"bpmn:SubProcess")&&ai(n,"bpmn:Task")&&ci(i)){var r,o={x:(r=i).x+r.width/6,y:r.y+r.height/2};t.createShape({type:"bpmn:StartEvent"},o,i)}}))}wu.$inject=["eventBus"],Eu.$inject=["injector","modeling"],a()(Eu,jo);function _u(e,t,n,i){jo.call(this,e),this.executed(["shape.toggleCollapse"],500,(function(e){var t,n=e.context.shape;ai(n,"bpmn:SubProcess")&&(n.collapsed?si(n).di.isExpanded=!1:((t=n.children).length&&t.forEach((function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)})),si(n).di.isExpanded=!0))})),this.reverted(["shape.toggleCollapse"],500,(function(e){var t=e.context.shape;t.collapsed?si(t).di.isExpanded=!1:si(t).di.isExpanded=!0})),this.postExecuted(["shape.toggleCollapse"],500,(function(e){var i,r=e.context.shape,o=t._getDefaultSize(r);i=r.collapsed?function(e,t){return{x:e.x+(e.width-t.width)/2,y:e.y+(e.height-t.height)/2,width:t.width,height:t.height}}(r,o):function(e,t){var n,i,r=e.children,o=t;return(n=Zs((i=r,i.filter((function(e){return!e.hidden}))).concat([e])))?(o.width=Math.max(n.width,o.width),o.height=Math.max(n.height,o.height),o.x=n.x+(n.width-o.width)/2,o.y=n.y+(n.height-o.height)/2):(o.x=e.x+(e.width-o.width)/2,o.y=e.y+(e.height-o.height)/2),o}(r,o),n.resizeShape(r,i,null,{autoResize:!r.collapsed&&"nwse"})}))}function Su(e,t,n,i){t.invoke(jo,this),this.preExecute("shape.delete",(function(e){var t=e.context.shape,r=t.businessObject;Li(t)||(ai(t,"bpmn:Participant")&&ci(t)&&n.ids.unclaim(r.processRef.id),i.unclaimId(r.id,r))})),this.preExecute("connection.delete",(function(e){var t=e.context.connection.businessObject;i.unclaimId(t.id,t)})),this.preExecute("canvas.updateRoot",(function(){var t=e.getRootElement().businessObject;n.ids.unclaim(t.id)}))}a()(_u,jo),_u.$inject=["eventBus","elementFactory","modeling"],a()(Su,jo),Su.$inject=["canvas","injector","moddle","modeling"];function Cu(e,t,n){var i;function r(){if(!i)throw new Error(n("out of bounds release"));return i}jo.call(this,e);var o=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(o,5e3,(function(e){(i=i||new Ou).enter()})),this.postExecuted(o,500,(function(e){!function(){if(!i)throw new Error(n("out of bounds release"));var e=i.leave();e&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null)}()})),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],(function(e){var t=e.context.shape,n=r();t.labelTarget||(ai(t,"bpmn:Lane")&&n.addLane(t),ai(t,"bpmn:FlowNode")&&n.addFlowNode(t))}))}function Ou(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function ku(e,t){jo.call(this,e),this.preExecute("connection.delete",(function(e){var n=e.context.connection,i=n.source;(function(e,t){if(!ai(e,"bpmn:SequenceFlow"))return!1;var n=si(t),i=si(e);return n.get("default")===i})(n,i)&&t.updateProperties(i,{default:null})}))}Cu.$inject=["eventBus","modeling","translate"],a()(Cu,jo),a()(ku,jo),ku.$inject=["eventBus","modeling"];var Tu={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",nl],appendBehavior:["type",rl],associationBehavior:["type",ol],attachEventBehavior:["type",al],boundaryEventBehavior:["type",cl],rootElementReferenceBehavior:["type",ll],createBehavior:["type",ul],fixHoverBehavior:["type",dl],createDataObjectBehavior:["type",pl],createParticipantBehavior:["type",hl],dataInputAssociationBehavior:["type",gl],dataStoreBehavior:["type",yl],deleteLaneBehavior:["type",bl],detachEventBehavior:["type",wl],dropOnFlowBehavior:["type",El],eventBasedGatewayBehavior:["type",Cl],groupBehavior:["type",kl],importDockingFix:["type",Pl],isHorizontalFix:["type",Al],labelBehavior:["type",Ql],modelingFeedback:["type",tu],replaceConnectionBehavior:["type",nu],removeParticipantBehavior:["type",iu],replaceElementBehaviour:["type",ru],resizeBehavior:["type",gu],resizeLaneBehavior:["type",mu],removeElementBehavior:["type",vu],toggleElementCollapseBehaviour:["type",_u],spaceToolBehavior:["type",wu],subProcessStartEventBehavior:["type",Eu],unclaimIdBehavior:["type",Su],updateFlowNodeRefsBehavior:["type",Cu],unsetDefaultFlowBehavior:["type",ku]};function Pu(e,t){var n=Ki(e,t,-15);return"intersect"!==n?n:null}function ju(e){Do.call(this,e)}function Au(e){return!e||Li(e)}function Mu(e){do{if(ai(e,"bpmn:Process"))return si(e);if(ai(e,"bpmn:Participant"))return si(e).processRef||si(e)}while(e=e.parent)}function Du(e){return ai(e,"bpmn:TextAnnotation")}function Ru(e){return ai(e,"bpmn:Group")&&!e.labelTarget}function Nu(e){return ai(e,"bpmn:BoundaryEvent")&&Iu(e,"bpmn:CompensateEventDefinition")}function Lu(e){return si(e).isForCompensation}function Bu(e){for(var t=e;t=t.parent;){if(ai(t,"bpmn:FlowElementsContainer"))return si(t);if(ai(t,"bpmn:Participant"))return si(t).processRef}return null}function Iu(e,t){return!!E(si(e).eventDefinitions||[],(function(e){return ai(e,t)}))}function Fu(e,t){return(si(e).eventDefinitions||[]).every((function(e){return ai(e,t)}))}function zu(e){return ai(e,"bpmn:ReceiveTask")||ai(e,"bpmn:IntermediateCatchEvent")&&(Iu(e,"bpmn:MessageEventDefinition")||Iu(e,"bpmn:TimerEventDefinition")||Iu(e,"bpmn:ConditionalEventDefinition")||Iu(e,"bpmn:SignalEventDefinition"))}function Hu(e){return e.waypoints}function Vu(e,t){return-1!==function(e){for(var t=[];e;)(e=e.parent)&&t.push(e);return t}(t).indexOf(e)}function $u(e,t,n){if(Au(e)||Au(t))return null;if(!ai(n,"bpmn:DataAssociation")){if(td(e,t))return{type:"bpmn:MessageFlow"};if(nd(e,t))return{type:"bpmn:SequenceFlow"}}var i=id(e,t);return i||(Nu(e)&&Lu(t)?{type:"bpmn:Association",associationDirection:"One"}:!!ed(e,t)&&{type:"bpmn:Association"})}function Uu(e,t,n){return!(!Li(e)&&!Ru(e))||!(ai(t,"bpmn:Participant")&&!ci(t))&&(ai(e,"bpmn:Participant")?ai(t,"bpmn:Process")||ai(t,"bpmn:Collaboration"):So(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:ai(e,"bpmn:Lane")?ai(t,"bpmn:Participant")||ai(t,"bpmn:Lane"):!(ai(e,"bpmn:BoundaryEvent")&&!function(e){return si(e).cancelActivity&&(Gu(e)||Yu(e))}(e))&&(ai(e,"bpmn:FlowElement")&&!ai(e,"bpmn:DataStoreReference")?ai(t,"bpmn:FlowElementsContainer")?ci(t):So(t,["bpmn:Participant","bpmn:Lane"]):So(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?So(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!ai(e,"bpmn:MessageFlow")&&(ai(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t)))}function Wu(e){return ai(e,"bpmn:Lane")}function qu(e){return!!function(e){return!Li(e)&&ai(e,"bpmn:BoundaryEvent")}(e)||(!(!ai(e,"bpmn:IntermediateThrowEvent")||!Gu(e))||ai(e,"bpmn:IntermediateCatchEvent")&&Yu(e))}function Gu(e){var t=si(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function Yu(e){return function(e,t){return t.some((function(t){return Iu(e,t)}))}(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Ku(e,t,n,i){if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var r=e[0];return!Li(r)&&(!!qu(r)&&(!li(t)&&(!(!ai(t,"bpmn:Activity")||Lu(t))&&(!(i&&!Pu(i,t))&&(!function(e){return ai(e,"bpmn:ReceiveTask")&&E(e.incoming,(function(e){return ai(e.source,"bpmn:EventBasedGateway")}))}(t)&&"attach")))))}function Xu(e,t,n){if(!t)return!1;var i={replacements:[]};return S(e,(function(e){li(t)||ai(e,"bpmn:StartEvent")&&"label"!==e.type&&Uu(e,t)&&(function(e){return e&&!1!==si(e).isInterrupting}(e)||i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),(function(e){return ui(e,"bpmn:ErrorEventDefinition")}(e)||function(e){return ui(e,"bpmn:EscalationEventDefinition")}(e)||function(e){return ui(e,"bpmn:CompensateEventDefinition")}(e))&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"})),ai(t,"bpmn:Transaction")||Iu(e,"bpmn:CancelEventDefinition")&&"label"!==e.type&&(ai(e,"bpmn:EndEvent")&&Uu(e,t)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:EndEvent"}),ai(e,"bpmn:BoundaryEvent")&&Ku(e,t,0,n)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:BoundaryEvent"}))})),!!i.replacements.length&&i}function Zu(e,t){return!T(e,Wu)&&(!t||e.every((function(e){return Uu(e,t)})))}function Ju(e,t,n,i){return!!t&&(!(!Li(e)&&!Ru(e))||n!==t&&((!n||!Vu(n,t))&&(Uu(e,t)||rd(e,t,i))))}function Qu(e,t){return ai(e,"bpmn:SubProcess")?ci(e)&&(!t||t.width>=100&&t.height>=80):ai(e,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:ai(e,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:!!Du(e)||!!Ru(e)}function ed(e,t){return!Hu(e)&&!Hu(t)&&(!(!Nu(e)||!Lu(t))||!Vu(t,e)&&!Vu(e,t)&&(!!function(e,t){var n=Du(e),i=Du(t);return(n||i)&&n!==i}(e,t)||!!id(e,t)))}function td(e,t){return!(sd(e)&&!sd(t))&&(ai(i=e,"bpmn:InteractionNode")&&(!ai(i,"bpmn:Event")||ai(i,"bpmn:ThrowEvent")&&Fu(i,"bpmn:MessageEventDefinition"))&&function(e){return ai(e,"bpmn:InteractionNode")&&!Lu(e)&&(!ai(e,"bpmn:Event")||ai(e,"bpmn:CatchEvent")&&Fu(e,"bpmn:MessageEventDefinition"))}(t)&&(n=t,!(Mu(e)===Mu(n))));var n,i}function nd(e,t){return!(zu(t)&&t.incoming.length>0&&(n=t.incoming,(n=n||[]).some(ad))&&!ai(e,"bpmn:EventBasedGateway"))&&(ai(r=e,"bpmn:FlowNode")&&!ai(r,"bpmn:EndEvent")&&!li(r)&&!(ai(r,"bpmn:IntermediateThrowEvent")&&Iu(r,"bpmn:LinkEventDefinition"))&&!Nu(r)&&!Lu(r)&&function(e){return ai(e,"bpmn:FlowNode")&&!ai(e,"bpmn:StartEvent")&&!ai(e,"bpmn:BoundaryEvent")&&!li(e)&&!(ai(e,"bpmn:IntermediateCatchEvent")&&Iu(e,"bpmn:LinkEventDefinition"))&&!Lu(e)}(t)&&(i=t,Bu(e)===Bu(i))&&!(ai(e,"bpmn:EventBasedGateway")&&!zu(t)));var n,i,r}function id(e,t){return So(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&So(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!So(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!So(e,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function rd(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return t.source!==e&&t.target!==e&&(So(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Li(t)&&ai(e,"bpmn:FlowNode")&&!ai(e,"bpmn:BoundaryEvent")&&Uu(e,t.parent))}function od(e,t){return!!Li(t)||!(ai(t,"bpmn:Lane")&&!function(e,t){return e&&t&&-1!==e.indexOf(t)}(e,t.parent))}function ad(e){if(e&&e.source)return ai(e.source,"bpmn:EventBasedGateway")}function sd(e){return Co(e,"bpmn:Process")||Co(e,"bpmn:Collaboration")}a()(ju,Do),ju.$inject=["eventBus"],ju.prototype.init=function(){this.addRule("connection.start",(function(e){return function(e){if(Au(e))return null;return So(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])}(e.source)})),this.addRule("connection.create",(function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent;if(i.targetAttach)return!1;r&&(n.parent=r);try{return $u(t,n)}finally{r&&(n.parent=null)}})),this.addRule("connection.reconnect",(function(e){var t=e.connection;return $u(e.source,e.target,t)})),this.addRule("connection.updateWaypoints",(function(e){return{type:e.connection.type}})),this.addRule("shape.resize",(function(e){return Qu(e.shape,e.newBounds)})),this.addRule("elements.create",(function(e){var t=e.elements,n=e.position,i=e.target;return k(t,(function(e){return Hu(e)?$u(e.source,e.target,e):e.host?Ku(e,e.host,null,n):Ju(e,i,null,n)}))})),this.addRule("elements.move",(function(e){var t=e.target,n=e.shapes,i=e.position;return Ku(n,t,null,i)||Xu(n,t,i)||Zu(n,t)||rd(n,t,i)})),this.addRule("shape.create",(function(e){return Ju(e.shape,e.target,e.source,e.position)})),this.addRule("shape.attach",(function(e){return Ku(e.shape,e.target,null,e.position)})),this.addRule("element.copy",(function(e){var t=e.element;return od(e.elements,t)}))},ju.prototype.canConnectMessageFlow=td,ju.prototype.canConnectSequenceFlow=nd,ju.prototype.canConnectDataAssociation=id,ju.prototype.canConnectAssociation=ed,ju.prototype.canMove=Zu,ju.prototype.canAttach=Ku,ju.prototype.canReplace=Xu,ju.prototype.canDrop=Uu,ju.prototype.canInsert=rd,ju.prototype.canCreate=Ju,ju.prototype.canConnect=$u,ju.prototype.canResize=Qu,ju.prototype.canCopy=od;var cd={__depends__:[qo],__init__:["bpmnRules"],bpmnRules:["type",ju]};function ld(e,t){e.on("saveXML.start",2e3,(function(){var e,n,i=t.getRootElement(),r=si(i).di;e=_(e=qe([i],!1),(function(e){return e!==i&&!e.labelTarget})),n=P(e,fi),r.set("planeElement",n)}))}ld.$inject=["eventBus","canvas"];var ud={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",ld]};function dd(e){jo.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],(function(e){var n=e.context,i=n.shape||n.connection,r=n.parent,o=t.getOrdering(i,r);o&&(void 0!==o.parent&&(n.parent=o.parent),n.parentIndex=o.index)})),this.preExecute(["shape.move","connection.move"],(function(e){var n=e.context,i=n.shape||n.connection,r=n.newParent||i.parent,o=t.getOrdering(i,r);o&&(void 0!==o.parent&&(n.newParent=o.parent),n.newParentIndex=o.index)}))}function pd(e,t,n){dd.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(e){var t=e.order;return t||(e.order=t=function(e){if(e.labelTarget)return{level:10};var t=E(i,(function(t){return So(e,[t.type])}));return t&&t.order||{level:1}}(e)),t}this.getOrdering=function(e,i){if(e.labelTarget)return{parent:t.getRootElement(),index:-1};var o=r(e);o.containers&&(i=function(e,t,i){for(var r=t;r&&!So(r,i);)r=r.parent;if(!r)throw new Error(n("no parent for {element} in {parent}",{element:e.id,parent:t.id}));return r}(e,i,o.containers));var a=i.children.indexOf(e),s=function(e,t){t=F(t);var n=m(e)?-1:void 0;return S(e,(function(e,i){if(t(e,i))return n=i,!1})),n}(i.children,(function(t){return!(!e.labelTarget&&t.labelTarget)&&o.level<r(t).level}));return-1!==s&&-1!==a&&a<s&&(s-=1),{index:s,parent:i}}}dd.prototype.getOrdering=function(e,t){return null},a()(dd,jo),pd.$inject=["eventBus","canvas","translate"],a()(pd,dd);var hd={__depends__:[ji],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",pd]};function fd(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}fd.$inject=["eventBus","injector"],fd.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},fd.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),r=this._fire(e,"canExecute",n);if(void 0===r){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r},fd.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed")},fd.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},fd.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},fd.prototype.register=function(e,t){this._setHandler(e,t)},fd.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},fd.prototype.canUndo=function(){return!!this._getUndoAction()},fd.prototype.canRedo=function(){return!!this._getRedoAction()},fd.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},fd.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},fd.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,r=this._getHandler(n);this._atomicDo((function(){t._fire(n,"revert",e),r.revert&&t._markDirty(r.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)}))},fd.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,r,o,a=t?[e+"."+t,t]:[e];for(n=this._eventBus.createEvent(n),i=0;(r=a[i])&&(o=this._eventBus.fire("commandStack."+r,n),!n.cancelBubble);i++);return o},fd.prototype._createId=function(){return this._uid++},fd.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},fd.prototype._internalExecute=function(e,t){var n=this,i=e.command,r=e.context,o=this._getHandler(i);if(!o)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),o.preExecute&&o.preExecute(r),this._fire(i,"preExecuted",e)),this._atomicDo((function(){n._fire(i,"execute",e),o.execute&&n._markDirty(o.execute(r)),n._executedAction(e,t),n._fire(i,"executed",e)})),t||(this._fire(i,"postExecute",e),o.postExecute&&o.postExecute(r),this._fire(i,"postExecuted",e)),this._popAction(e)},fd.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},fd.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:R("id",n.reverse())}),n.length=0,this._fire("changed"))},fd.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=m(e)?e:[e],t.dirty=t.dirty.concat(e))},fd.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},fd.prototype._revertedAction=function(e){this._stackIdx--},fd.prototype._getHandler=function(e){return this._handlerMap[e]},fd.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};var gd={commandStack:["type",fd]},md=new yr("tt");function vd(e,t){e.style.display=!1===t?"none":""}function yd(e,t){var n,i;this._eventBus=e,this._canvas=t,this._ids=md,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=t.getContainer(),i=Object(Y.f)('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />'),n.insertBefore(i,n.firstChild),i);var r=this;Y.e.bind(this._tooltipRoot,".djs-tooltip","mousedown",(function(e){e.stopPropagation()})),Y.e.bind(this._tooltipRoot,".djs-tooltip","mouseover",(function(e){r.trigger("mouseover",e)})),Y.e.bind(this._tooltipRoot,".djs-tooltip","mouseout",(function(e){r.trigger("mouseout",e)})),this._init()}yd.$inject=["eventBus","canvas"],yd.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=W({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},yd.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(Object(Y.a)(n,"data-tooltip-id"));i&&("mouseover"===e&&i.timeout&&this.clearTimeout(i),"mouseout"===e&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},yd.prototype.get=function(e){return"string"!=typeof e&&(e=e.id),this._tooltips[e]},yd.prototype.clearTimeout=function(e){if(e=this.get(e)){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},yd.prototype.setTimeout=function(e){if(e=this.get(e)){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout((function(){t.remove(e)}),e.timeout)}},yd.prototype.remove=function(e){var t=this.get(e);t&&(Object(Y.k)(t.html),Object(Y.k)(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},yd.prototype.show=function(){vd(this._tooltipRoot)},yd.prototype.hide=function(){vd(this._tooltipRoot,!1)},yd.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},yd.prototype._addTooltip=function(e){var t,n=e.id,i=e.html,r=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),w(i)&&(i=Object(Y.f)(i)),(t=Object(Y.f)('<div data-tooltip-id="'+n+'" class="djs-tooltip" style="position: absolute">')).appendChild(i),e.type&&Object(Y.b)(t).add("djs-tooltip-"+e.type),e.className&&Object(Y.b)(t).add(e.className),e.htmlContainer=t,r.appendChild(t),this._tooltips[n]=e,this._updateTooltip(e)},yd.prototype._updateTooltip=function(e){var t,n,i,r=e.position,o=e.htmlContainer;t=o,n=r.x,i=r.y,W(t.style,{left:n+"px",top:i+"px"})},yd.prototype._updateTooltipVisibilty=function(e){S(this._tooltips,(function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),vd(i,r))}))},yd.prototype._init=function(){var e=this;this._eventBus.on("canvas.viewbox.changing",(function(t){e.hide()})),this._eventBus.on("canvas.viewbox.changed",(function(t){var n;n=t.viewbox,e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}))};var bd={__init__:["tooltips"],tooltips:["type",yd]};function wd(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}function xd(e,t,n){jo.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",1400,(function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=Ed(n),t.validatedShapes=Ed(i)})),i&&t.on("shape.move.start",250,(function(e){var t=e.context,n=t.shapes,r=[];S(n,(function(e){S(e.labels,(function(n){n.hidden||-1!==t.shapes.indexOf(n)||r.push(n),e.labelTarget&&r.push(e)}))})),S(r,(function(e){i.makeDraggable(t,e,!0)}))})),this.preExecuted("elements.move",1400,(function(e){var t=e.context.closure,n=t.enclosedElements,i=[];S(n,(function(e){S(e.labels,(function(e){n[e.id]||i.push(e)}))})),t.addAll(i)})),this.preExecute(["connection.delete","shape.delete"],(function(e){var t=e.context;wd((t.connection||t.shape).labels,(function(e){n.removeShape(e,{nested:!0})}))})),this.execute("shape.delete",(function(e){var t=e.context,n=t.shape,i=n.labelTarget;i&&(t.labelTargetIndex=tt(i.labels,n),t.labelTarget=i,n.labelTarget=null)})),this.revert("shape.delete",(function(e){var t=e.context,n=t.shape,i=t.labelTarget,r=t.labelTargetIndex;i&&(et(i.labels,n,r),n.labelTarget=i)}))}function Ed(e){return _(e,(function(t){return-1===e.indexOf(t.labelTarget)}))}a()(xd,jo),xd.$inject=["injector","eventBus","modeling"];var _d={__init__:["labelSupport"],labelSupport:["type",xd]};function Sd(e,t,n,i,r){jo.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",1401,(function(e){var t,n,i=e.context,r=i.shapes,o=i.validatedShapes;i.shapes=(n=Cd(t=r),N("id",t,n)),i.validatedShapes=function(e){var t=D(e,"id");return _(e,(function(e){for(;e;){if(e.host&&t[e.host.id])return!1;e=e.parent}return!0}))}(o)})),o&&t.on("shape.move.start",251,(function(e){var t=e.context;S(Cd(t.shapes),(function(e){o.makeDraggable(t,e,!0),S(e.labels,(function(e){o.makeDraggable(t,e,!0)}))}))})),o&&t.on("shape.move.start",(function(e){var i=e.context.shapes;if(1===i.length){var r=i[0].host;r&&(n.addMarker(r,"attach-ok"),t.once(["shape.move.out","shape.move.cleanup"],(function(){n.removeMarker(r,"attach-ok")})))}})),this.preExecuted("elements.move",1401,(function(e){var t=e.context,n=t.closure;S(Cd(t.shapes),(function(e){n.add(e,n.topLevel[e.host.id])}))})),this.postExecuted("elements.move",(function(e){var t=e.context,n=t.shapes,i=t.newHost;i&&1!==n.length||S(i?n:_(n,(function(e){var t,i=e.host;return function(e){return!!e.host}(e)&&(t=i,!(-1!==n.indexOf(t)))})),(function(e){r.updateAttachment(e,i)}))})),this.postExecuted("elements.move",(function(e){S(e.context.shapes,(function(e){S(e.attachers,(function(e){S(e.outgoing.slice(),(function(e){i.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||r.removeConnection(e)})),S(e.incoming.slice(),(function(e){i.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||r.removeConnection(e)}))}))}))})),this.postExecute("shape.create",(function(e){var t=e.context,n=t.shape,i=t.host;i&&r.updateAttachment(n,i)})),this.postExecute("shape.replace",(function(e){var t=e.context,n=t.oldShape,o=t.newShape;wd(n.attachers,(function(e){"attach"===i.allowed("elements.move",{target:o,shapes:[e]})?r.updateAttachment(e,o):r.removeShape(e)})),o.attachers.length&&S(o.attachers,(function(e){var t=Zl(e,n,o);r.moveShape(e,t,e.parent)}))})),this.postExecute("shape.resize",(function(e){var t=e.context,n=t.shape,i=t.oldBounds,o=t.newBounds,a=n.attachers;!1!==(t.hints||{}).attachSupport&&S(a,(function(e){var t=Zl(e,i,o);r.moveShape(e,t,e.parent),S(e.labels,(function(e){r.moveShape(e,t,e.parent)}))}))})),this.preExecute("shape.delete",(function(e){var t=e.context.shape;wd(t.attachers,(function(e){r.removeShape(e)})),t.host&&r.updateAttachment(t,null)}))}function Cd(e){return u(P(e,(function(e){return e.attachers||[]})))}a()(Sd,jo),Sd.$inject=["injector","eventBus","canvas","rules","modeling"];var Od={__depends__:[qo],__init__:["attachSupport"],attachSupport:["type",Sd]};function kd(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}kd.$inject=["eventBus","dragging"],kd.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},kd.prototype.isActive=function(e){return e&&this._active===e},kd.prototype.length=function(e){return this._tools.length},kd.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},kd.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",(function(t){if(!t.context.reactivate&&this.isActive(e))return this.setActive(null),void i.cancel();this.setActive(e)}),this),S(t,(function(e){r.push(e+".ended"),r.push(e+".canceled")})),n.on(r,250,(function(e){var t=e.originalEvent;this._active&&(t&&Object(Y.d)(t.target,'.group[data-group="tools"]')||this.setActive(null))}),this)};var Td={__depends__:[Ho],__init__:["toolManager"],toolManager:["type",kd]};function Pd(e,t){return-1!==e.indexOf(t)}var jd=Math.abs,Ad=Math.round,Md={x:"width",y:"height"},Dd={n:"top",w:"left",s:"bottom",e:"right"},Rd={n:"s",w:"e",s:"n",e:"w"};function Nd(e,t,n,i,r,o){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o;var a=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",(function(e){n.once("spaceTool.selection.ended",(function(){a.activateMakeSpace(e.originalEvent)}))})),n.on("spaceTool.move",1500,(function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=a.init(e,t)),n&&Bd(e)})),n.on("spaceTool.end",(function(e){var t=e.context,i=t.axis,r=t.direction,o=t.movingShapes,s=t.resizingShapes,c=t.start;if(t.initialized){Bd(e);var l={x:0,y:0};l[i]=Ad(e["d"+i]),a.makeSpace(o,s,l,r,c),n.once("spaceTool.ended",(function(e){a.activateSelection(e.originalEvent,!0,!0)}))}}))}function Ld(e){return{top:e.top-20,right:e.right+20,bottom:e.bottom+20,left:e.left-20}}function Bd(e){var t,n,i=e.context.spaceToolConstraints;i&&(y(i.left)&&(t=Math.max(e.x,i.left),e.dx=e.dx+t-e.x,e.x=t),y(i.right)&&(t=Math.min(e.x,i.right),e.dx=e.dx+t-e.x,e.x=t),y(i.top)&&(n=Math.max(e.y,i.top),e.dy=e.dy+n-e.y,e.y=n),y(i.bottom)&&(n=Math.min(e.y,i.bottom),e.dy=e.dy+n-e.y,e.y=n))}function Id(e,t){return-1!==e.indexOf(t)}function Fd(e){return!!e.waypoints}function zd(e){return!!e.labelTarget}Nd.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager"],Nd.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:"crosshair",data:{context:{reactivate:n}},trapClick:!1})},Nd.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:"crosshair",data:{context:{}}})},Nd.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)},Nd.prototype.init=function(e,t){var n=jd(e.dx)>jd(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(jd(i)<5)return!1;i<0&&(i*=-1),sr(e)&&(i*=-1);var o=function(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}(n,i),a=qe(this._canvas.getRootElement(),!0),s=this.calculateAdjustments(a,n,i,r);return W(t,s,{axis:n,direction:o,spaceToolConstraints:function(e,t,n,i,r){var o=e.movingShapes,a=e.resizingShapes;if(!a.length)return;var s,c,l={};return S(a,(function(e){var u,d,p,h=qi(e),f=_(e.children,(function(e){return!(Fd(e)||zd(e)||Id(o,e)||Id(a,e))})),g=_(e.children,(function(e){return!Fd(e)&&!zd(e)&&Id(o,e)}));f.length&&(d=Ld(qi(Ge(f))),u=i-h[Dd[n]]+d[Dd[n]],"n"===n?l.bottom=c=y(c)?Math.min(c,u):u:"w"===n?l.right=c=y(c)?Math.min(c,u):u:"s"===n?l.top=s=y(s)?Math.max(s,u):u:"e"===n&&(l.left=s=y(s)?Math.max(s,u):u)),g.length&&(p=Ld(qi(Ge(g))),u=i-p[Dd[Rd[n]]]+h[Dd[Rd[n]]],"n"===n?l.bottom=c=y(c)?Math.min(c,u):u:"w"===n?l.right=c=y(c)?Math.min(c,u):u:"s"===n?l.top=s=y(s)?Math.max(s,u):u:"e"===n&&(l.left=s=y(s)?Math.max(s,u):u));var m=r&&r[e.id];m&&("n"===n?(u=i+e[Md[t]]-m[Md[t]],l.bottom=c=y(c)?Math.min(c,u):u):"w"===n?(u=i+e[Md[t]]-m[Md[t]],l.right=c=y(c)?Math.min(c,u):u):"s"===n?(u=i-e[Md[t]]+m[Md[t]],l.top=s=y(s)?Math.max(s,u):u):"e"===n&&(u=i-e[Md[t]]+m[Md[t]],l.left=s=y(s)?Math.max(s,u):u))})),l}(s,n,o,r,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:s.resizingShapes,start:r})),start:r}),zr("resize-"+("x"===n?"ew":"ns")),!0},Nd.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],a=[];return S(e,(function(e){if(e.parent&&!Fd(e)){var s=e[t],c=s+e[Md[t]];return n>0&&s>i||n<0&&c<i?o.push(e):s<i&&c>i&&r.allowed("shape.resize",{shape:e})?a.push(e):void 0}})),{movingShapes:o,resizingShapes:a}},Nd.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},Nd.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)};var Hd=Math.max;function Vd(e,t,n,i,r){function o(e,t){S(e,(function(e){r.addDragger(e,t),n.addMarker(e,"djs-dragging")}))}e.on("spaceTool.selection.start",(function(e){var t=n.getLayer("space"),r=e.context,o="M 0,-10000 L 0,10000",a="M -10000,0 L 10000,0",s=he("g");ee(s,i.cls("djs-crosshair-group",["no-events"])),Z(t,s);var c=he("path");ee(c,"d",o),oe(c).add("djs-crosshair"),Z(s,c);var l=he("path");ee(l,"d",a),oe(l).add("djs-crosshair"),Z(s,l),r.crosshairGroup=s})),e.on("spaceTool.selection.move",(function(e){Pt(e.context.crosshairGroup,e.x,e.y)})),e.on("spaceTool.selection.cleanup",(function(e){var t=e.context.crosshairGroup;t&&se(t)})),e.on("spaceTool.move",250,(function(e){var a=e.context,s=a.line,c=a.axis,l=a.movingShapes,u=a.resizingShapes;if(a.initialized){if(!a.dragGroup){var d=n.getLayer("space");ee(s=he("path"),"d","M0,0 L0,0"),oe(s).add("djs-crosshair"),Z(d,s),a.line=s;var p=he("g");ee(p,i.cls("djs-drag-group",["no-events"])),Z(n.getDefaultLayer(),p),o(l,p),o(a.movingConnections=t.filter((function(e){var t=!1;S(l,(function(n){S(n.outgoing,(function(n){e===n&&(t=!0)}))}));var n=!1;S(l,(function(t){S(t.incoming,(function(t){e===t&&(n=!0)}))}));var i=!1;S(u,(function(t){S(t.outgoing,(function(t){e===t&&(i=!0)}))}));var r=!1;return S(u,(function(t){S(t.incoming,(function(t){e===t&&(r=!0)}))})),function(e){return e.waypoints}(e)&&(t||i)&&(n||r)})),p),a.dragGroup=p}if(!a.frameGroup){var h=he("g");ee(h,i.cls("djs-frame-group",["no-events"])),Z(n.getDefaultLayer(),h);var f=[];S(u,(function(e){var t=r.addFrame(e,h),i=t.getBBox();f.push({element:t,initialBounds:i}),n.addMarker(e,"djs-resizing")})),a.frameGroup=h,a.frames=f}ee(s,{d:{x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y}[c]});var g={x:e.dx,y:e.dy};g[{x:"y",y:"x"}[a.axis]]=0,Pt(a.dragGroup,g.x,g.y),S(a.frames,(function(e){var t,n,i=e.element,r=e.initialBounds;"e"===a.direction?ee(i,{width:Hd(r.width+g.x,5)}):ee(i,{width:t=Hd(r.width-g.x,5),x:r.x+r.width-t}),"s"===a.direction?ee(i,{height:Hd(r.height+g.y,5)}):ee(i,{height:n=Hd(r.height-g.y,5),y:r.y+r.height-n})}))}})),e.on("spaceTool.cleanup",(function(e){var t=e.context,i=t.movingShapes,r=t.movingConnections,o=t.resizingShapes,a=t.line,s=t.dragGroup,c=t.frameGroup;S(i,(function(e){n.removeMarker(e,"djs-dragging")})),S(r,(function(e){n.removeMarker(e,"djs-dragging")})),s&&(se(a),se(s)),S(o,(function(e){n.removeMarker(e,"djs-resizing")})),c&&se(c)}))}Vd.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];var $d={__init__:["spaceToolPreview"],__depends__:[Ho,qo,Td,Wa],spaceTool:["type",Nd],spaceToolPreview:["type",Vd]};function Ud(e){this._model=e}function Wd(e,t,n,i){jo.call(this,e),this._bpmnFactory=t,this._translate=i;var r=this;function o(e){S(e.context.oldRoot.children,(function(e){ai(e,"bpmn:BaseElement")&&r.updateParent(e)}))}function a(e){var t=e.context.shape;ai(t,"bpmn:BaseElement")&&r.updateBounds(t)}function s(e){r.updateConnection(e.context)}function c(e){r.updateConnectionWaypoints(e.context.connection)}function l(e){r.updateAttachment(e.context)}this.executed(["connection.layout","connection.create"],(function(e){var t,i=e.context,r=i.hints||{};i.cropped||!1===r.createElementsBehavior||((t=i.connection).waypoints=n.getCroppedWaypoints(t),i.cropped=!0)})),this.reverted(["connection.layout"],(function(e){delete e.context.cropped})),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],qd((function(e){var t=e.context;r.updateParent(t.shape||t.connection,t.oldParent)}))),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],qd((function(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;r.updateParent(n,i)}))),this.executed(["canvas.updateRoot"],o),this.reverted(["canvas.updateRoot"],o),this.executed(["shape.move","shape.create","shape.resize"],qd((function(e){"label"!==e.context.shape.type&&a(e)}))),this.reverted(["shape.move","shape.create","shape.resize"],qd((function(e){"label"!==e.context.shape.type&&a(e)}))),e.on("shape.changed",(function(e){"label"===e.element.type&&a({context:{shape:e.element}})})),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],qd(s)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],qd(s)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],qd(c)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],qd(c)),this.executed("connection.reconnect",qd((function(e){var t=e.context,n=t.connection,i=t.oldSource,r=t.newSource,o=si(n),a=si(i),s=si(r);o.conditionExpression&&!So(s,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(t.oldConditionExpression=o.conditionExpression,delete o.conditionExpression),i!==r&&a.default===o&&(t.oldDefault=a.default,delete a.default)}))),this.reverted("connection.reconnect",qd((function(e){var t=e.context,n=t.connection,i=t.oldSource,r=t.newSource,o=si(n),a=si(i),s=si(r);t.oldConditionExpression&&(o.conditionExpression=t.oldConditionExpression),t.oldDefault&&(a.default=t.oldDefault,delete s.default)}))),this.executed(["element.updateAttachment"],qd(l)),this.reverted(["element.updateAttachment"],qd(l))}function qd(e){return function(t){var n=t.context;ai(n.shape||n.connection,"bpmn:BaseElement")&&e(t)}}function Gd(e,t,n){_t.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}function Yd(e,t,n){e[n]=t[n],delete t[n]}function Kd(e,t){this._modeling=e,this._canvas=t}function Xd(e){this._modeling=e}function Zd(e,t){this._canvas=e,this._layouter=t}Ud.$inject=["moddle"],Ud.prototype._needsId=function(e){return So(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},Ud.prototype._ensureId=function(e){var t;t=ai(e,"bpmn:Activity")?"Activity":ai(e,"bpmn:Event")?"Event":ai(e,"bpmn:Gateway")?"Gateway":So(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},Ud.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},Ud.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},Ud.prototype.createDiShape=function(e,t,n){return this.create("bpmndi:BPMNShape",W({bpmnElement:e,bounds:this.createDiBounds(t)},n))},Ud.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},Ud.prototype.createDiWaypoints=function(e){var t=this;return P(e,(function(e){return t.createDiWaypoint(e)}))},Ud.prototype.createDiWaypoint=function(e){return this.create("dc:Point",q(e,["x","y"]))},Ud.prototype.createDiEdge=function(e,t,n){return this.create("bpmndi:BPMNEdge",W({bpmnElement:e},n))},Ud.prototype.createDiPlane=function(e){return this.create("bpmndi:BPMNPlane",{bpmnElement:e})},a()(Wd,jo),Wd.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],Wd.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},Wd.prototype.updateParent=function(e,t){if(!(e instanceof wt||ai(e,"bpmn:DataStoreReference")&&e.parent&&ai(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=n&&n.businessObject,o=r&&r.di;ai(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,t&&t.businessObject),ai(e,"bpmn:DataOutputAssociation")&&(r=e.source?e.source.businessObject:null),ai(e,"bpmn:DataInputAssociation")&&(r=e.target?e.target.businessObject:null),this.updateSemanticParent(i,r),ai(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(i.di,o)}},Wd.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof wt?this._getLabel(t):t,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set("bounds",i)),W(i,{x:e.x,y:e.y,width:e.width,height:e.height})},Wd.prototype.updateFlowNodeRefs=function(e,t,n){n!==t&&(ai(n,"bpmn:Lane")&&Qe(n.get("flowNodeRef"),e),ai(t,"bpmn:Lane")&&et(t.get("flowNodeRef"),e))},Wd.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)},Wd.prototype.updateDiParent=function(e,t){if(t&&!ai(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Qe(n,e),e.$parent=null)}},Wd.prototype.getLaneSet=function(e){var t,n;return ai(e,"bpmn:Lane")?((t=e.childLaneSet)||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(ai(e,"bpmn:Participant")&&(e=e.processRef),(t=(n=e.get("laneSets"))[0])||((t=this._bpmnFactory.create("bpmn:LaneSet")).$parent=e,n.push(t)),t)},Wd.prototype.updateSemanticParent=function(e,t,n){var i,r=this._translate;if(e.$parent!==t&&(!ai(e,"bpmn:DataInput")&&!ai(e,"bpmn:DataOutput")||(ai(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),!("ioSpecification"in t)||t.ioSpecification!==e.$parent))){if(ai(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(ai(e,"bpmn:FlowElement")){if(t)if(ai(t,"bpmn:Participant"))t=t.processRef;else if(ai(t,"bpmn:Lane"))do{t=t.$parent.$parent}while(ai(t,"bpmn:Lane"));i="flowElements"}else if(ai(e,"bpmn:Artifact")){for(;t&&!ai(t,"bpmn:Process")&&!ai(t,"bpmn:SubProcess")&&!ai(t,"bpmn:Collaboration");){if(ai(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}i="artifacts"}else if(ai(e,"bpmn:MessageFlow"))i="messageFlows";else if(ai(e,"bpmn:Participant")){i="participants";var o,a=e.processRef;a&&(o=function(e){for(;e&&!ai(e,"bpmn:Definitions");)e=e.$parent;return e}(e.$parent||t),e.$parent&&(Qe(o.get("rootElements"),a),a.$parent=null),t&&(et(o.get("rootElements"),a),a.$parent=o))}else ai(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":ai(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var s;if(e.$parent&&Qe(s=e.$parent.get(i),e),t?((s=t.get(i)).push(e),e.$parent=t):e.$parent=null,n){var c=n.get(i);Qe(s,e),t&&(c||(c=[],t.set(i,c)),c.push(e))}}},Wd.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},Wd.prototype.updateConnection=function(e){var t,n=e.connection,i=si(n),r=si(n.source),o=si(n.target);if(ai(i,"bpmn:DataAssociation"))ai(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,t=e.parent||e.newParent||o,this.updateSemanticParent(i,o,t)):ai(i,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||r,this.updateSemanticParent(i,r,t),i.targetRef=o);else{var a=ai(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(a&&(Qe(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==o&&(a&&(Qe(i.targetRef&&i.targetRef.get("incoming"),i),o&&o.get("incoming")&&o.get("incoming").push(i)),i.targetRef=o)}this.updateConnectionWaypoints(n),this.updateDiConnection(i.di,r,o)},Wd.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label},a()(Gd,_t),Gd.$inject=["bpmnFactory","moddle","translate"],Gd.prototype.baseCreate=_t.prototype.create,Gd.prototype.create=function(e,t){return"label"===e?this.baseCreate(e,W({type:"label"},Ai,t)):this.createBpmnElement(e,t)},Gd.prototype.createBpmnElement=function(e,t){var n,i,r,o=this._translate,a=(t=t||{}).businessObject;if(!a){if(!t.type)throw new Error(o("no shape type specified"));a=this._bpmnFactory.create(t.type)}return a.di||(a.di="root"===e?this._bpmnFactory.createDiPlane(a,[],{id:a.id+"_di"}):"connection"===e?this._bpmnFactory.createDiEdge(a,[],{id:a.id+"_di"}):this._bpmnFactory.createDiShape(a,{},{id:a.id+"_di"})),ai(a,"bpmn:Group")&&(t=W({isFrame:!0},t)),t.di&&(W(a.di,t.di),delete t.di),function(e,t,n){S(n,(function(n){void 0!==t[n]&&Yd(e,t,n)}))}(a,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&Yd(a.di,t,"isExpanded"),ai(a,"bpmn:ExclusiveGateway")&&(a.di.isMarkerVisible=!0),t.eventDefinitionType&&(i=a.get("eventDefinitions")||[],r=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),"bpmn:ConditionalEventDefinition"===t.eventDefinitionType&&(r.condition=this._bpmnFactory.create("bpmn:FormalExpression")),i.push(r),r.$parent=a,a.eventDefinitions=i,delete t.eventDefinitionType),n=this._getDefaultSize(a),t=W({businessObject:a,id:a.id},n,t),this.baseCreate(e,t)},Gd.prototype._getDefaultSize=function(e){return ai(e,"bpmn:SubProcess")?ci(e)?{width:350,height:200}:{width:100,height:80}:ai(e,"bpmn:Task")?{width:100,height:80}:ai(e,"bpmn:Gateway")?{width:50,height:50}:ai(e,"bpmn:Event")?{width:36,height:36}:ai(e,"bpmn:Participant")?ci(e)?{width:600,height:250}:{width:400,height:60}:ai(e,"bpmn:Lane")?{width:400,height:100}:ai(e,"bpmn:DataObjectReference")?{width:36,height:50}:ai(e,"bpmn:DataStoreReference")?{width:50,height:50}:ai(e,"bpmn:TextAnnotation")?{width:100,height:30}:ai(e,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},Gd.prototype.createParticipantShape=function(e){return v(e)||(e={isExpanded:e}),!1!==(e=W({type:"bpmn:Participant"},e||{})).isExpanded&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)},Kd.$inject=["modeling","canvas"],Kd.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;S(n,(function(e){var n={x:0,y:0};i.left?n.x=i.left-e.x:i.right?n.x=i.right-e.width-e.x:i.center?n.x=i.center-Math.round(e.width/2)-e.x:i.top?n.y=i.top-e.y:i.bottom?n.y=i.bottom-e.height-e.y:i.middle&&(n.y=i.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)}))},Kd.prototype.postExecute=function(e){},Xd.$inject=["modeling"],Xd.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i},Xd.prototype.postExecute=function(e){var t,n,i=e.hints||{};t=e.source,n=e.shape,T(t.outgoing,(function(e){return e.target===n}))||(i.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},Zd.$inject=["canvas","layouter"],Zd.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t},Zd.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Jd=Math.round;function Qd(e){this._modeling=e}function ep(e){return!!e.waypoints}Qd.$inject=["modeling"],Qd.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,a=this._modeling;S(t,(function(e){y(e.x)||(e.x=0),y(e.y)||(e.y=0)}));var s=Ge(t);S(t,(function(e){ep(e)&&(e.waypoints=P(e.waypoints,(function(e){return{x:Jd(e.x-s.x-s.width/2+r.x),y:Jd(e.y-s.y-s.height/2+r.y)}}))),W(e,{x:Jd(e.x-s.x-s.width/2+r.x),y:Jd(e.y-s.y-s.height/2+r.y)})}));var c=Ve(t),l={};S(t,(function(e){if(ep(e))l[e.id]=y(i)?a.createConnection(l[e.source.id],l[e.target.id],i,e,e.parent||n,o):a.createConnection(l[e.source.id],l[e.target.id],e,e.parent||n,o);else{var t=W({},o);-1===c.indexOf(e)&&(t.autoResize=!1),l[e.id]=y(i)?a.createShape(e,q(e,["x","y","width","height"]),e.parent||n,i,t):a.createShape(e,q(e,["x","y","width","height"]),e.parent||n,t)}})),e.elements=M(l)};var tp=Math.round;function np(e){this._canvas=e}function ip(e){np.call(this,e)}np.$inject=["canvas"],np.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?W(t,n):W(t,{x:n.x-tp(t.width/2),y:n.y-tp(t.height/2)}),this._canvas.addShape(t,i,r),t},np.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},a()(ip,np),ip.$inject=["canvas"];var rp=np.prototype.execute;ip.prototype.execute=function(e){var t=e.shape;return function(e){["width","height"].forEach((function(t){void 0===e[t]&&(e[t]=0)}))}(t),t.labelTarget=e.labelTarget,rp.call(this,e)};var op=np.prototype.revert;function ap(e,t){this._canvas=e,this._modeling=t}function sp(e,t){this._modeling=e,this._elementRegistry=t}function cp(e,t){this._canvas=e,this._modeling=t}function lp(e){this._modeling=e}ip.prototype.revert=function(e){return e.shape.labelTarget=null,op.call(this,e)},ap.$inject=["canvas","modeling"],ap.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=tt(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},ap.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,et(n.children,t,i),this._canvas.addConnection(t,n),t},sp.$inject=["modeling","elementRegistry"],sp.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;S(e.elements,(function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))}))},cp.$inject=["canvas","modeling"],cp.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;wd(n.incoming,(function(e){t.removeConnection(e,{nested:!0})})),wd(n.outgoing,(function(e){t.removeConnection(e,{nested:!0})})),wd(n.children,(function(e){e.waypoints?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})}))},cp.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=tt(i.children,n),t.removeShape(n),n},cp.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return et(i.children,n,r),t.addShape(n,i),n},lp.$inject=["modeling"];var up={x:"y",y:"x"};function dp(e,t){this._layouter=e,this._canvas=t}function pp(){}function hp(e,t,n){var i=yp(e),r=bp(i,t),o=i[0];return r.length?r[r.length-1]:Xl(o.original||o,n,t)}function fp(e,t,n){var i=yp(e),r=bp(i,t),o=i[i.length-1];return r.length?r[0]:Xl(o.original||o,n,t)}function gp(e,t,n){var i=yp(e),r=vp(t,n),o=i[0];return Xl(o.original||o,r,t)}function mp(e,t,n){var i=yp(e),r=vp(t,n),o=i[i.length-1];return Xl(o.original||o,r,t)}function vp(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function yp(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function bp(e,t){return _(P(e,wp),(function(e){return function(e,t){return"intersect"===Ki(t,e,1)}(e,t)}))}function wp(e){return e.original||e}function xp(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function Ep(e){this._modeling=e}function _p(e){this._helper=new Ep(e)}function Sp(e){this._modeling=e,this._helper=new Ep(e)}function Cp(e){this._modeling=e}function Op(e){return e.original||e}function kp(e,t){this._modeling=e,this._rules=t}function Tp(e){this._modeling=e}function Pp(e){this._modeling=e}function jp(e){return W({},e)}function Ap(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Mp(e,t,n){var i=Ap(n);return/e|s/.test(n)?e[i]>t:/n|w/.test(n)?e[i]<t:void 0}function Dp(e,t){return-1!==e.indexOf(t)}function Rp(e){this._modeling=e}function Np(e){this._modeling=e}function Lp(e,t){return Qe(e&&e.attachers,t)}function Bp(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),et(i,t,n)}}function Ip(){}function Fp(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",(function(){i.registerHandlers(n)}))}lp.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(e,t){e.range.min=Math.min(t[i],e.range.min),e.range.max=Math.max(t[i]+t[r],e.range.max)}function a(e){return e[i]+e[r]/2}function s(e){return e.length-1}function c(e){return e.max-e.min}var l,u,d=n[0],p=s(n),h=n[p],f=0;S(n,(function(e,l){var u,d,h;e.elements.length<2?l&&l!==n.length-1&&(o(e,e.elements[0]),f+=c(e.range)):(d=(u=L(e.elements,i))[0],l===p&&(d=u[s(u)]),h=a(d),e.range=null,S(u,(function(n){!function(e,n){var r={y:0};r[i]=e-a(n),r[i]&&(r[up[i]]=0,t.moveElements([n],r,n.parent))}(h,n),null!==e.range?o(e,n):e.range={min:n[i],max:n[i]+n[r]}})),l&&l!==n.length-1&&(f+=c(e.range)))})),u=Math.abs(h.range.min-d.range.max),(l=Math.round((u-f)/(n.length-1)))<n.length-1||S(n,(function(e,o){var a,s={};e!==d&&e!==h&&(a=n[o-1],e.range.max=0,S(e.elements,(function(n,o){s[up[i]]=0,s[i]=a.range.max-n[i]+l,e.range.min!==n[i]&&(s[i]+=n[i]-e.range.min),s[i]&&t.moveElements([n],s,n.parent),e.range.max=Math.max(n[i]+n[r],o?e.range.max:0)})))}))},lp.prototype.postExecute=function(e){},dp.$inject=["layouter","canvas"],dp.prototype.execute=function(e){var t=e.connection;return W(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},dp.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},pp.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=Qe(o.children,t),et(i.children,t,r),t.parent=i,S(t.waypoints,(function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)})),t},pp.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return Qe(n.children,t),et(i.children,t,r),t.parent=i,S(t.waypoints,(function(e){e.x-=o.x,e.y-=o.y,e.original&&(e.original.x-=o.x,e.original.y-=o.y)})),t},xp.prototype.add=function(e,t){return this.addAll([e],t)},xp.prototype.addAll=function(e,t){return W(this,function(e,t,n){h(t)&&(t=!0),v(t)&&(n=t,t=!0);var i=Xe((n=n||{}).allShapes),r=Xe(n.allConnections),o=Xe(n.enclosedElements),a=Xe(n.enclosedConnections),s=Xe(n.topLevel,t&&D(e,(function(e){return e.id})));function c(e){s[e.source.id]&&s[e.target.id]&&(s[e.id]=[e]),i[e.source.id]&&i[e.target.id]&&(a[e.id]=o[e.id]=e),r[e.id]=e}return Ue(e,(function(e){if(o[e.id]=e,!e.waypoints)return i[e.id]=e,S(e.incoming,c),S(e.outgoing,c),e.children;a[e.id]=r[e.id]=e})),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}}(e,!!t,this)),this},Ep.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},Ep.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),S(a,(function(e){o.moveShape(e,t,l[e.id]&&!u&&n,{recurse:!1,layout:!1})})),S(s,(function(e){var i=!!a[e.source.id],r=!!a[e.target.id];c[e.id]&&i&&r?o.moveConnection(e,t,l[e.id]&&!u&&n):o.layoutConnection(e,{connectionStart:i&&gp(e,e.source,t),connectionEnd:r&&mp(e,e.target,t)})}))},Ep.prototype.getClosure=function(e){return(new xp).addAll(e,!0)},_p.$inject=["modeling"],_p.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},_p.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Sp.$inject=["modeling"],Sp.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=q(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=Qe(o.children,t),et(i.children,t,r),W(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},Sp.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;!1!==i.layout&&(S(t.incoming,(function(e){r.layoutConnection(e,{connectionEnd:mp(e,t,n)})})),S(t.outgoing,(function(e){r.layoutConnection(e,{connectionStart:gp(e,t,n)})}))),!1!==i.recurse&&this.moveChildren(e)},Sp.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return et(n.children,t,i),W(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},Sp.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},Sp.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},Cp.$inject=["modeling"],Cp.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return m(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i},Cp.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),!1!==o.layoutConnection&&(!n||i&&"source"!==o.docking||(a.connectionStart=a.connectionStart||Op(m(r)?r[0]:r)),!i||n&&"target"!==o.docking||(a.connectionEnd=a.connectionEnd||Op(m(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))},Cp.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r},kp.$inject=["modeling","rules"],kp.prototype.preExecute=function(e){var t,n=this,i=this._modeling,r=this._rules,o=e.oldShape,a=e.newData,s=e.hints||{};function c(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var l,u={x:a.x,y:a.y},d={x:o.x,y:o.y,width:o.width,height:o.height};t=e.newShape=e.newShape||n.createShape(a,u,o.parent,s),o.host&&i.updateAttachment(t,o.host),!1!==s.moveChildren&&(l=o.children.slice(),i.moveElements(l,{x:0,y:0},t,s));var p=o.incoming.slice(),h=o.outgoing.slice();S(p,(function(e){c(e.source,t,e)&&n.reconnectEnd(e,t,fp(e,t,d),s)})),S(h,(function(e){var i=e.target;c(t,i,e)&&n.reconnectStart(e,t,hp(e,t,d),s)}))},kp.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},kp.prototype.execute=function(e){},kp.prototype.revert=function(e){},kp.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)},kp.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)},kp.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)},Tp.$inject=["modeling"],Tp.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},W(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Tp.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds;!1!==(e.hints||{}).layout&&(S(n.incoming,(function(e){t.layoutConnection(e,{connectionEnd:fp(e,n,i)})})),S(n.outgoing,(function(e){t.layoutConnection(e,{connectionStart:hp(e,n,i)})})))},Tp.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return W(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Pp.$inject=["modeling"],Pp.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,a={};this.moveShapes(i,t),S(r,(function(e){a[e.id]=function(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}(e)})),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(function(e,t){var n=[];return S(e.concat(t),(function(i){var r=i.incoming,o=i.outgoing;S(r.concat(o),(function(i){var r=i.source,o=i.target;(Pd(e,r)||Pd(e,o)||Pd(t,r)||Pd(t,o))&&(Pd(n,i)||n.push(i))}))})),n}(i,r),t,n,o,i,r,a)},Pp.prototype.execute=function(){},Pp.prototype.revert=function(){},Pp.prototype.moveShapes=function(e,t){var n=this;S(e,(function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})}))},Pp.prototype.resizeShapes=function(e,t,n){var i=this;S(e,(function(e){var r=function(e,t,n){var i=e.x,r=e.y,o=e.width,a=e.height,s=n.x,c=n.y;switch(t){case"n":return{x:i,y:r+c,width:o,height:a-c};case"s":return{x:i,y:r,width:o,height:a+c};case"w":return{x:i+s,y:r,width:o-s,height:a};case"e":return{x:i,y:r,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}(e,n,t);i._modeling.resizeShape(e,r,null,{attachSupport:!1,autoResize:!1,layout:!1})}))},Pp.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,a){var s=this,c=r.concat(o);S(e,(function(e){var l=e.source,u=e.target,d=function(e){return P(e.waypoints,(function(e){return(e=jp(e)).original&&(e.original=jp(e.original)),e}))}(e),p=Ap(n),h={labelBehavior:!1};Dp(c,l)&&Dp(c,u)?(d=P(d,(function(e){return Mp(e,i,n)&&(e[p]=e[p]+t[p]),e.original&&Mp(e.original,i,n)&&(e.original[p]=e.original[p]+t[p]),e})),s._modeling.updateWaypoints(e,d,{labelBehavior:!1})):(Dp(c,l)||Dp(c,u))&&(Dp(r,l)?h.connectionStart=gp(e,l,t):Dp(r,u)?h.connectionEnd=mp(e,u,t):Dp(o,l)?h.connectionStart=hp(e,l,a[l.id]):Dp(o,u)&&(h.connectionEnd=fp(e,u,a[u.id])),s._modeling.layoutConnection(e,h))}))},Rp.$inject=["modeling"],Rp.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=function e(t){var n={};return S(t,(function(t){n[t.id]=t.hidden,t.children&&(n=W({},n,e(t.children)))})),n}(n),t.collapsed=!t.collapsed;var i=function e(t,n){var i=[];return S(t,(function(t){t.hidden=n,i=i.concat(t),t.children&&(i=i.concat(e(t.children,t.collapsed||n)))})),i}(n,t.collapsed);return[t].concat(i)},Rp.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=function e(t,n){var i=[];return S(t,(function(t){t.hidden=n[t.id],i=i.concat(t),t.children&&(i=i.concat(e(t.children,n)))})),i}(t.children,n);return t.collapsed=!t.collapsed,[t].concat(i)},Np.$inject=["modeling"],Np.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=Lp(i,t),Bp(n,t),t.host=n,t},Np.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,Lp(n,t),Bp(i,t,r),t},Ip.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},Ip.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},Fp.$inject=["eventBus","elementFactory","commandStack"],Fp.prototype.getHandlers=function(){return{"shape.append":Xd,"shape.create":np,"shape.delete":cp,"shape.move":Sp,"shape.resize":Tp,"shape.replace":kp,"shape.toggleCollapse":Rp,spaceTool:Pp,"label.create":ip,"connection.create":Zd,"connection.delete":ap,"connection.move":pp,"connection.layout":dp,"connection.updateWaypoints":Ip,"connection.reconnect":Cp,"elements.create":Qd,"elements.move":_p,"elements.delete":sp,"elements.distribute":lp,"elements.align":Kd,"element.updateAttachment":Np}},Fp.prototype.registerHandlers=function(e){S(this.getHandlers(),(function(t,n){e.registerHandler(n,t)}))},Fp.prototype.moveShape=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},Fp.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Fp.prototype.moveElements=function(e,t,n,i){var r,o=(i=i||{}).attach,a=n;!0===o?(r=n,a=n.parent):!1===o&&(r=null);var s={shapes:e,delta:t,newParent:a,newHost:r,hints:i};this._commandStack.execute("elements.move",s)},Fp.prototype.moveConnection=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},Fp.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Fp.prototype.createConnection=function(e,t,n,i,r,o){"object"==typeof n&&(o=r,r=i,i=n,n=void 0);var a={source:e,target:t,parent:r,parentIndex:n,connection:i=this._create("connection",i),hints:o};return this._commandStack.execute("connection.create",a),a.connection},Fp.prototype.createShape=function(e,t,n,i,r){"number"!=typeof i&&(r=i,i=void 0);var o,a,s=(r=r||{}).attach;e=this._create("shape",e),s?(o=n.parent,a=n):o=n;var c={position:t,shape:e,parent:o,parentIndex:i,host:a,hints:r};return this._commandStack.execute("shape.create",c),c.shape},Fp.prototype.createElements=function(e,t,n,i,r){m(e)||(e=[e]),"number"!=typeof i&&(r=i,i=void 0);var o={position:t,elements:e,parent:n,parentIndex:i,hints:r=r||{}};return this._commandStack.execute("elements.create",o),o.elements},Fp.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Fp.prototype.appendShape=function(e,t,n,i,r){r=r||{};var o={source:e,position:n,target:i,shape:t=this._create("shape",t),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape},Fp.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Fp.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},Fp.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Fp.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Fp.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},Fp.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Fp.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)},Fp.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)},Fp.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},Fp.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)},Fp.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,W(i,{docking:"source"}))},Fp.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,W(i,{docking:"target"}))},Fp.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},Fp.prototype._create=function(e,t){return t instanceof vt?t:this._elementFactory.create(e,t)},Fp.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};var zp="id",Hp={width:0,height:0};function Vp(e,t,n,i,r){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=r}function $p(e,t){return zp in e&&e.id!==t.id}function Up(e,t){S(t,(function(t,n){"di"!==n?e.set(n,t):e.di&&function(e,t){S(t,(function(t,n){e.set(n,t)}))}(e.di,t)}))}Vp.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],Vp.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var r=this._elementRegistry,o=this._moddle.ids,a=t.businessObject,s=function(e){var t=W({},e);return Wp.forEach((function(n){n in e&&(t[n]=si(t[n]))})),t}(e.properties),c=e.oldProperties||function(e,t){return O(j(t),(function(n,i){return n[i]="di"!==i?e.get(i):function(e,t){return O(t,(function(t,n){return t[n]=e.get(n),t}),{})}(e.di,j(t.di)),n}),{})}(a,s);return $p(s,a)&&(o.unclaim(a.id),r.updateId(t,s.id),o.claim(s.id,a)),"default"in s&&(s.default&&n.push(r.get(s.default.id)),a.default&&n.push(r.get(a.default.id))),Up(a,s),e.oldProperties=c,e.changed=n,n},Vp.prototype.postExecute=function(e){var t=e.element.label,n=t&&si(t).name;if(n){var i=this._textRenderer.getExternalLabelBounds(t,n);this._modeling.resizeShape(t,i,Hp)}},Vp.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return Up(r,i),$p(n,r)&&(a.unclaim(n.id),o.updateId(t,i.id),a.claim(i.id,r)),e.changed};var Wp=["default"];function qp(e,t){this._canvas=e,this._modeling=t}function Gp(e,t){this._modeling=e,this._spaceTool=t}function Yp(e,t){this._modeling=e,this._translate=t}function Kp(e,t){this._modeling=e,this._spaceTool=t}qp.$inject=["canvas","modeling"],qp.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,a=o.$parent,s=o.di;t.setRootElement(n,!0),et(a.rootElements,i),i.$parent=a,Qe(a.rootElements,o),o.$parent=null,o.di=null,s.bpmnElement=i,i.di=s,e.oldRoot=r},qp.prototype.revert=function(e){var t=this._canvas,n=e.newRoot.businessObject,i=e.oldRoot,r=i.businessObject,o=n.$parent,a=n.di;t.setRootElement(i,!0),Qe(o.rootElements,n),n.$parent=null,et(o.rootElements,r),r.$parent=o,n.di=null,a.bpmnElement=r,r.di=a},Gp.$inject=["modeling","spaceTool"],Gp.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=nc(i),a=o===i,s=a?i:i.parent;tc(s).length||n.createShape({type:"bpmn:Lane"},{x:i.x+30,y:i.y,width:i.width-30,height:i.height},s);var c=[];Ue(o,(function(e){return c.push(e),e.label&&c.push(e.label),e===i?[]:_(e.children,(function(e){return e!==i}))}));var l="top"===r?-120:120,u="top"===r?i.y:i.y+i.height,d=u+("top"===r?10:-10),p="top"===r?"n":"s",h=t.calculateAdjustments(c,"y",l,d);t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:l},p,d),e.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(a?30:0),y:u-("top"===r?120:0),width:i.width-(a?30:0),height:120},s)},Yp.$inject=["modeling","translate"],Yp.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,r=e.count,o=tc(i),a=o.length;if(a>r)throw new Error(n("more than {count} child lanes",{count:r}));var s,c,l,u,d,p=Math.round(i.height/r);for(d=0;d<r;d++)s=i.y+d*p,c=d===r-1?i.height-p*d:p,l={x:i.x+30,y:s,width:i.width-30,height:c},d<a?t.resizeShape(o[d],l):(u={type:"bpmn:Lane"},t.createShape(u,l,i))},Kp.$inject=["modeling","spaceTool"],Kp.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,n):this.resizeSpace(t,n)},Kp.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=ic(e,t);n.resizeShape(e,t),i.forEach((function(e){n.resizeShape(e.shape,e.newBounds)}))},Kp.prototype.resizeSpace=function(e,t){var n,i,r,o,a,s=this._spaceTool,c=qi(e),l=Gs(qi(t),c),u=nc(e),d=[],p=[];Ue(u,(function(e){return d.push(e),(ai(e,"bpmn:Lane")||ai(e,"bpmn:Participant"))&&p.push(e),e.children})),(l.bottom||l.top)&&(n=l.bottom||l.top,i=e.y+(l.bottom?e.height:0)+(l.bottom?-10:10),r=l.bottom?"s":"n",o=l.top>0||l.bottom<0?-n:n,a=s.calculateAdjustments(d,"y",o,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:n},r)),(l.left||l.right)&&(n=l.right||l.left,i=e.x+(l.right?e.width:0)+(l.right?-10:100),r=l.right?"e":"w",o=l.left>0||l.right<0?-n:n,a=s.calculateAdjustments(p,"x",o,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:n,y:0},r))};function Xp(e){this._elementRegistry=e}function Zp(e){this._moddle=e}Xp.$inject=["elementRegistry"],Xp.prototype.computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function a(e){-1===n.indexOf(e)&&(o.push(e),n.push(e))}function s(e){return e.parent?function(e){var t=nc(e);return r[t.id]||(r[t.id]=ec(t)),r[t.id]}(e).filter((function(t){return n=e,i=qi(t),r=n.x+n.width/2,o=n.y+n.height/2,r>i.left&&r<i.right&&o>i.top&&o<i.bottom;var n,i,r,o})).map((function(e){return e.businessObject})):[]}return t.forEach((function(e){var t=nc(e);t&&-1===n.indexOf(t)&&(t.children.filter((function(e){return ai(e,"bpmn:FlowNode")})).forEach(a),n.push(t))})),e.forEach(a),o.forEach((function(e){var t=e.businessObject,n=t.get("lanes").slice(),r=s(e);i.push({flowNode:t,remove:n,add:r})})),t.forEach((function(e){var t=e.businessObject;e.parent||t.get("flowNodeRef").forEach((function(e){i.push({flowNode:e,remove:[t],add:[]})}))})),i},Xp.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach((function(e){var t=e.flowNode,n=t.get("lanes");e.remove.forEach((function(e){Qe(n,e),Qe(e.get("flowNodeRef"),t)})),e.add.forEach((function(e){et(n,e),et(e.get("flowNodeRef"),t)}))}))},Xp.prototype.revert=function(e){e.updates.forEach((function(e){var t=e.flowNode,n=t.get("lanes");e.add.forEach((function(e){Qe(n,e),Qe(e.get("flowNodeRef"),t)})),e.remove.forEach((function(e){et(n,e),et(e.get("flowNodeRef"),t)}))}))},Zp.$inject=["moddle"],Zp.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},Zp.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)};var Jp={fill:void 0,stroke:void 0};function Qp(e){this._commandStack=e}Qp.$inject=["commandStack"],Qp.prototype.postExecute=function(e){var t=e.elements,n=e.colors||Jp,i=this,r={};"fill"in n&&W(r,{fill:n.fill}),"stroke"in n&&W(r,{stroke:n.stroke}),S(t,(function(e){i._commandStack.execute("element.updateProperties",{element:e,properties:{di:r}})}))};var eh={width:0,height:0};function th(e,t){function n(e,t){var n=e.label||e,i=e.labelTarget||e;return function(e,t,n){var i=e.businessObject,r=di(i);r&&("categoryValueRef"===r?i.categoryValueRef.value=t:i[r]=t)}(n,t),[n,i]}this.preExecute=function(t){var n=t.element,i=n.businessObject,r=t.newLabel;if(!Li(n)&&Mi(n)&&!Di(n)&&!nh(r)){var o=Ni(n);o={x:o.x,y:o.y+7},e.createLabel(n,o,{id:i.id+"_label",businessObject:i})}},this.execute=function(e){return e.oldLabel=pi(e.element),n(e.element,e.newLabel)},this.revert=function(e){return n(e.element,e.oldLabel)},this.postExecute=function(n){var i=n.element,r=i.label||i,o=n.newLabel,a=n.newBounds,s=n.hints||{};if(Li(r)||ai(r,"bpmn:TextAnnotation"))if(Li(r)&&nh(o))!1!==s.removeShape&&e.removeShape(r,{unsetLabel:!1});else{var c=pi(r);void 0===a&&(a=t.getExternalLabelBounds(r,c)),a&&e.resizeShape(r,a,eh)}}}function nh(e){return!e||!e.trim()}function ih(e,t,n,i){Fp.call(this,e,t,n),this._bpmnRules=i}function rh(){}th.$inject=["modeling","textRenderer"],a()(ih,Fp),ih.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],ih.prototype.getHandlers=function(){var e=Fp.prototype.getHandlers.call(this);return e["element.updateProperties"]=Vp,e["canvas.updateRoot"]=qp,e["lane.add"]=Gp,e["lane.resize"]=Kp,e["lane.split"]=Yp,e["lane.updateRefs"]=Xp,e["id.updateClaim"]=Zp,e["element.setColor"]=Qp,e["element.updateLabel"]=th,e},ih.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})},ih.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,i)},ih.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},ih.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},ih.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},ih.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},ih.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},ih.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},ih.prototype.makeProcess=function(){var e={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",e)},ih.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},ih.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},ih.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})},rh.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||Yi(t.source||e.source),t.connectionEnd||Yi(t.target||e.target)]};var oh=Math.round,ah={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function sh(e,t,n){var i,r,o,a=Ki(t,e,5),s=n.split(":")[0],c=oh((t.x-e.x)/2+e.x),l=oh((t.y-e.y)/2+e.y),u=(o=a,{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[s].test(o)),d=/h|r|l/.test(s),p=!1;return u?(i=d?{x:c,y:e.y}:{x:e.x,y:l},r=d?"h:h":"v:v"):(r=d?"h:v":"v:h",function(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}(a,s)?d?(p=l===e.y,i={x:e.x+20*(/l/.test(s)?-1:1),y:p?l+20:l}):i={x:(p=c===e.x)?c+20:c,y:e.y+20*(/t/.test(s)?-1:1)}:i={x:c,y:l}),{waypoints:lh(e,i,r).concat(i),directions:r,turnNextDirections:p}}function ch(e){return e.split(":").reverse().join(":")}function lh(e,t,n){if(!function(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}(n=n||"h:h"))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(fh(n)){var i=function(e,t,n){return sh(e,t,n)}(e,t,n),r=function(e,t,n){var i=sh(t,e,ch(n));return{waypoints:i.waypoints.slice().reverse(),directions:ch(i.directions),turnNextDirections:i.turnNextDirections}}(e,t,n),o=function(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n="h"==n?"v":"h"),t.turnNextDirections&&(i="h"==i?"v":"h");var r=n+":"+i;return{waypoints:lh(e.waypoints[e.waypoints.length-1],t.waypoints[0],r),directions:r}}(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return function(e,t,n){var i=oh((t.x-e.x)/2+e.x),r=oh((t.y-e.y)/2+e.y);if("h:v"===n)return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return[{x:i,y:e.y},{x:i,y:t.y}];if("v:v"===n)return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(e,t,n)}function uh(e,t,n,i,r){var o=C(r&&r.preferredLayouts||[],"straight")[0]||"h:h",a=Ki(e,t,ah[o]||0),s=function(e,t){if(fh(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}(a,o);n=n||Yi(e),i=i||Yi(t);var c=s.split(":");return function(e,t,n){var i=lh(e,t,n);return i.unshift(e),i.push(t),mh(i)}(gh(n,e,c[0],function(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}(a)),gh(i,t,c[1],a),s)}function dh(e,t,n,i,r,o){var a;return m(n)&&(r=n,o=i,n=Yi(e),i=Yi(t)),r=r||[],(a=-1!==(o=W({preferredLayouts:[]},o)).preferredLayouts.indexOf("straight")&&function(e,t,n,i,r){var o,a,s={};if(a=Ki(e,t),!/^(top|bottom|left|right)$/.test(a))return null;/top|bottom/.test(a)&&(o="x");/left|right/.test(a)&&(o="y");return"target"===r.preserveDocking?ph(o,i,e)?(s[o]=i[o],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:ph(o,n,t)?(s[o]=n[o],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null}(e,t,n,i,o))||(a=o.connectionEnd&&function(e,t,n,i){var r=i.slice().reverse();return(r=hh(e,t,n,r))?r.reverse():null}(t,e,i,r))?a:(a=o.connectionStart&&hh(e,t,n,r))||(!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:uh(e,t,n,i,o))}function ph(e,t,n){return function(e,t,n){return e>=t&&e<=n}(t[e],n[e],n[e]+n[{x:"width",y:"height"}[e]])}function hh(e,t,n,i){if(function(e){return e.length<3||!(e.length>4)&&!!E(e,(function(t,n){var i=e[n-1];return i&&Bi(t,i)<3}))}(i))return null;var r,o=i[0],a=i.slice();return a[0]=n,a[1]=function(e,t,n){switch(Fi(t,e)){case"v":return{x:n.x,y:e.y};case"h":return{x:e.x,y:n.y}}return{x:e.x,y:e.y}}(a[1],o,n),(r=function(e,t,n){var i;for(i=e.length-2;0!==i;i--)if(zi(e[i],t,20)||zi(e[i],n,20))return e.slice(i);return e}(a,e,t))!==a&&(a=hh(e,t,n,r)),a&&Fi(a)?null:a}function fh(e){return e&&/t|r|b|l/.test(e)}function gh(e,t,n,i){if("h"===n&&(n=/left/.test(i)?"l":"r"),"v"===n&&(n=/top/.test(i)?"t":"b"),"t"===n)return{original:e,x:e.x,y:t.y};if("r"===n)return{original:e,x:t.x+t.width,y:e.y};if("b"===n)return{original:e,x:e.x,y:t.y+t.height};if("l"===n)return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function mh(e){return e.reduce((function(t,n,i){return Ii(t[t.length-1],e[i+1],n,0)||t.push(n),t}),[])}var vh={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},yh={top:"t",right:"r",bottom:"b",left:"l"};function bh(){}function wh(e,t){return ai(t,"bpmn:Participant")?"source":ai(e,"bpmn:Participant")?"target":Sh(t)?"source":Sh(e)||ai(t,"bpmn:Event")?"target":ai(e,"bpmn:Event")?"source":null}function xh(e){return Sh(e)?"target":"source"}function Eh(e,t){return e?e.original||e:Yi(t)}function _h(e,t){return ai(t,"bpmn:Activity")&&ai(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Sh(e){return ai(e,"bpmn:SubProcess")&&ci(e)}function Ch(e,t){return e===t}function Oh(e){var t=/right|left/.exec(e);return t&&t[0]}function kh(e){var t=/top|bottom/.exec(e);return t&&t[0]}function Th(e){return"right"===e||"left"===e}function Ph(e,t){var n=t.waypoints,i=n&&n.length&&Ki(n[0],e);return"top"===i?["t:r"]:"right"===i?["r:b"]:"left"===i?["l:t"]:["b:l"]}function jh(e,t,n){var i,r,o=Yi(e),a=Yi(t),s=(r=(i=e).host,Ki(Yi(i),r,-10)),c=Ch(e.host,t),l=-1!==["top","right","bottom","left"].indexOf(s),u=Ki(a,o,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return c?function(e,t,n,i,r){var o,a=t?e:kh(e),s=yh[a];o=t?Th(e)?Ah("y",n,i,r)?"h":"b":Ah("x",n,i,r)?"v":"l":"v";return[s+":"+o]}(s,l,e,t,n):[function(e,t,n){if(n)return yh[e];if(Ch(kh(e),kh(t))||(i=Oh(e),r=Oh(t),vh[i]===r))return yh[kh(e)];var i,r;return yh[Oh(e)]}(s,u,l)+":"+function(e,t,n){if(n)return Th(e)?(i=t,r=Oh(e),o=vh[r],-1!==i.indexOf(o)||Ch(e,t)?"h":"v"):function(e,t){var n=kh(e),i=vh[n];return-1!==t.indexOf(i)}(e,t)||Ch(e,t)?"v":"h";var i,r,o;return Th(t)||Ch(kh(e),kh(t))&&Oh(t)?"h":"v"}(s,u,l)]}function Ah(e,t,n,i){return!(Mh(e,i,n,40)||Mh(e,i,{x:n.x+n.width,y:n.y+n.height},40)||Mh(e,i,Yi(t),40))}function Mh(e,t,n,i){return Math.abs(t[e]-n[e])<i}function Dh(e){return W({original:e.point.original||e.point},e.actual)}function Rh(e,t){this._elementRegistry=e,this._graphicsFactory=t}a()(bh,rh),bh.prototype.layoutConnection=function(e,t){t||(t={});var n,i,r=t.source||e.source,o=t.target||e.target,a=t.waypoints||e.waypoints,s=t.connectionStart,c=t.connectionEnd;return s||(s=Eh(a&&a[0],r)),c||(c=Eh(a&&a[a.length-1],o)),(ai(e,"bpmn:Association")||ai(e,"bpmn:DataAssociation"))&&a&&!_h(r,o)?[].concat([s],a.slice(1,-1),[c]):(ai(e,"bpmn:MessageFlow")?n=function(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:wh(e,t)}}(r,o):(ai(e,"bpmn:SequenceFlow")||_h(r,o))&&(n=r===o?{preferredLayouts:Ph(r,e)}:ai(r,"bpmn:BoundaryEvent")?{preferredLayouts:jh(r,o,c)}:Sh(r)||Sh(o)?function(e){return{preferredLayouts:["straight","h:h"],preserveDocking:xh(e)}}(r):ai(r,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:ai(o,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),n&&(i=mh(dh(r,o,s,c,a,n=W(n,t)))),i||[s,c])},Rh.$inject=["elementRegistry","graphicsFactory"],Rh.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(Dh(i)),o.push(Dh(r)),o},Rh.prototype.getDockingPoint=function(e,t,n){var i,r,o=e.waypoints;return{point:r=o[i=n?0:o.length-1],actual:this._getIntersection(t,e,n)||r,idx:i}},Rh.prototype._getIntersection=function(e,t,n){return Xi(this._getShapePath(e),this._getConnectionPath(t),n)},Rh.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},Rh.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},Rh.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var Nh={__init__:["modeling","bpmnUpdater"],__depends__:[Tu,cd,ud,hd,Ps,gd,bd,_d,Od,vr,Hc,$d],bpmnFactory:["type",Ud],bpmnUpdater:["type",Wd],elementFactory:["type",Gd],modeling:["type",ih],layouter:["type",bh],connectionDocking:["type",Rh]},Lh=Math.round;function Bh(e,t,n,i,r){function o(e,t,n,i){return r.allowed("elements.move",{shapes:e,delta:t,position:n,target:i})}function a(e,n,i,r){if(v(i)&&(r=i,i=!1),!n.waypoints&&n.parent){var o=function(e){return{x:e.x+Lh(e.width/2),y:e.y+Lh(e.height/2)}}(n);return t.init(e,o,"shape.move",{cursor:"grabbing",autoActivate:i,data:{shape:n,context:r||{}}}),!0}}e.on("shape.move.start",1500,(function(e){var t,n,r=e.context,o=e.shape,a=i.get().slice();-1===a.indexOf(o)&&(a=[o]),n=D(t=a,"id"),W(r,{shapes:a=_(t,(function(e){for(;e=e.parent;)if(n[e.id])return!1;return!0})),validatedShapes:a,shape:o})})),e.on("shape.move.start",1250,(function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=o(n)))return!1})),e.on("shape.move.move",500,(function(e){var t,n=e.context,i=n.validatedShapes,r=e.hover,a={x:e.dx,y:e.dy};t=o(i,a,{x:e.x,y:e.y},r),n.delta=a,n.canExecute=t,n.target=null!==t?r:null})),e.on("shape.move.end",(function(e){var t=e.context,i=t.delta,r=t.canExecute,o="attach"===r,a=t.shapes;if(!1===r)return!1;i.x=Lh(i.x),i.y=Lh(i.y),0===i.x&&0===i.y||n.moveElements(a,i,t.target,{primaryShape:t.shape,attach:o})})),e.on("element.mousedown",(function(e){var t=ir(e);if(!t)throw new Error("must supply DOM mousedown event");return a(t,e.element)})),this.start=a}Bh.$inject=["eventBus","dragging","modeling","selection","rules"];var Ih="drop-ok",Fh="drop-not-ok",zh="new-parent",Hh="attach-ok";function Vh(e,t,n,i){function r(e){return function(e){return _(e,(function(t){return!function(e){return e.waypoints}(t)||E(e,B({id:t.source.id}))&&E(e,B({id:t.target.id}))}))}(o(e))}function o(e){var t=qe(e,!0),n=P(t,(function(e){return(e.incoming||[]).concat(e.outgoing||[])}));return u(t.concat(n))}function a(e,n){[Hh,Ih,Fh,zh].forEach((function(i){i===n?t.addMarker(e,i):t.removeMarker(e,i)}))}e.on("shape.move.start",499,(function(e){var a=e.context,s=a.shapes,c=a.allDraggedElements,l=r(s);if(!a.dragGroup){var d=he("g");ee(d,n.cls("djs-drag-group",["no-events"])),Z(t.getDefaultLayer(),d),a.dragGroup=d}l.forEach((function(e){i.addDragger(e,a.dragGroup)})),S(c=c?u([c,o(s)]):o(s),(function(e){t.addMarker(e,"djs-dragging")})),a.allDraggedElements=c,a.differentParents=1!==A(D(s,(function(e){return e.parent&&e.parent.id})))})),e.on("shape.move.move",499,(function(e){var t=e.context,n=t.dragGroup,i=t.target,r=t.shape.parent,o=t.canExecute;i&&("attach"===o?a(i,Hh):t.canExecute&&i&&i.id!==r.id?a(i,zh):a(i,t.canExecute?Ih:Fh)),Pt(n,e.dx,e.dy)})),e.on(["shape.move.out","shape.move.cleanup"],(function(e){var t=e.context.target;t&&a(t,null)})),e.on("shape.move.cleanup",(function(e){var n=e.context,i=n.allDraggedElements,r=n.dragGroup;S(i,(function(e){t.removeMarker(e,"djs-dragging")})),r&&se(r)})),this.makeDraggable=function(e,n,r){i.addDragger(n,e.dragGroup),r&&t.addMarker(n,"djs-dragging"),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}}Vh.$inject=["eventBus","canvas","styles","previewSupport"];var $h={__depends__:[ur,vr,pr,qo,Ho,Wa],__init__:["move","movePreview"],move:["type",Bh],movePreview:["type",Vh]};function Uh(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",(function(e){var t=e.tool;n.updateToolHighlight(t)})),e.on("i18n.changed",(function(){n._update()})),e.on("diagram.init",(function(){n._diagramInitialized=!0,n._rebuild()}))}function Wh(e,t){var n=t.getPaletteEntries();return b(n)?n(e):(S(n,(function(t,n){e[n]=t})),e)}Uh.$inject=["eventBus","canvas"],Uh.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("palette.getProviders",e,(function(e){e.providers.push(t)})),this._rebuild()},Uh.prototype.getEntries=function(){return this._getProviders().reduce(Wh,{})},Uh.prototype._rebuild=function(){this._diagramInitialized&&(this._getProviders().length&&(this._container||this._init(),this._update()))},Uh.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=Object(Y.f)(Uh.HTML_MARKUP);n.appendChild(i),Y.e.bind(i,".djs-palette-toggle, .entry","click",(function(t){var n=t.delegateTarget;if(Object(Y.h)(n,".djs-palette-toggle"))return e.toggle();e.trigger("click",t)})),Y.g.bind(i,"mousedown",(function(e){e.stopPropagation()})),Y.e.bind(i,".entry","dragstart",(function(t){e.trigger("dragstart",t)})),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})},Uh.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},Uh.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),i=this._container,r=this._eventBus,o=Object(Y.b)(i);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),o.toggle("two-column",t),"open"in e&&o.toggle("open",e.open),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},Uh.prototype._update=function(){var e=Object(Y.i)(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Object(Y.c)(e),S(t,(function(t,n){var i=t.group||"default",r=Object(Y.i)("[data-group="+i+"]",e);r||(r=Object(Y.f)('<div class="group" data-group="'+i+'"></div>'),e.appendChild(r));var o,a,s,c=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),l=Object(Y.f)(c);r.appendChild(l),t.separator||(Object(Y.a)(l,"data-action",n),t.title&&Object(Y.a)(l,"title",t.title),t.className&&(o=l,a=t.className,s=Object(Y.b)(o),(m(a)?a:a.split(/\s+/g)).forEach((function(e){s.add(e)}))),t.imageUrl&&l.appendChild(Object(Y.f)('<img src="'+t.imageUrl+'">')))})),this.open()},Uh.prototype.trigger=function(e,t,n){var i,r,o,a=this._entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();(i=a[Object(Y.a)(s,"data-action")])&&(r=i.action,o=t.originalEvent||t,b(r)?"click"===e&&r(o,n):r[e]&&r[e](o,n),t.preventDefault())},Uh.prototype._layoutChanged=function(){this._toggleState({})},Uh.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},Uh.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Uh.prototype.open=function(){this._toggleState({open:!0})},Uh.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},Uh.prototype.isActiveTool=function(e){return e&&this._activeTool===e},Uh.prototype.updateToolHighlight=function(e){var t;this._toolsContainer||(t=Object(Y.i)(".djs-palette-entries",this._container),this._toolsContainer=Object(Y.i)("[data-group=tools]",t)),S(this._toolsContainer.children,(function(t){var n=t.getAttribute("data-action");if(n){var i=Object(Y.b)(t);n=n.replace("-tool",""),i.contains("entry")&&n===e?i.add("highlighted-entry"):i.remove("highlighted-entry")}}))},Uh.prototype.isOpen=function(){return Object(Y.b)(this._container).has("open")},Uh.prototype._getParentContainer=function(){return this._canvas.getContainer()},Uh.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var qh={__init__:["palette"],palette:["type",Uh]};function Gh(e,t,n,i,r,o){this._selection=r,this._dragging=n;var a=this,s=function(e){var n,i=t.getDefaultLayer();ee(n=e.frame=he("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Z(i,n)},c=function(e){var t=e.frame,n=e.bbox;ee(t,{x:n.x,y:n.y,width:n.width,height:n.height})},l=function(e){e.frame&&se(e.frame)};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",(function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",(function(){a.activateLasso(t.originalEvent,!0)}))})),e.on("lasso.end",(function(e){var t=Yh(e),n=i.filter((function(e){return e}));a.select(n,t)})),e.on("lasso.start",(function(e){var t=e.context;t.bbox=Yh(e),s(t)})),e.on("lasso.move",(function(e){var t=e.context;t.bbox=Yh(e),c(t)})),e.on("lasso.cleanup",(function(e){var t=e.context;l(t)})),e.on("element.mousedown",1500,(function(e){if(function(e){var t=ir(e)||e;return ar(e)&&t.shiftKey}(e))return a.activateLasso(e.originalEvent),!0}))}function Yh(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}Gh.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],Gh.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:"crosshair",data:{context:{}}})},Gh.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:"crosshair",data:{context:{}}})},Gh.prototype.select=function(e,t){var n=function(e,t){var n={};return S(e,(function(e){var i=e;i.waypoints&&(i=Ge(i)),!y(t.y)&&i.x>t.x&&(n[e.id]=e),!y(t.x)&&i.y>t.y&&(n[e.id]=e),i.x>t.x&&i.y>t.y&&(y(t.width)&&y(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y?n[e.id]=e:y(t.width)&&y(t.height)||(n[e.id]=e))})),n}(e,t);this._selection.select(M(n))},Gh.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},Gh.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};var Kh={__depends__:[Td],__init__:["lassoTool"],lassoTool:["type",Gh]};function Xh(e,t,n,i,r){this._dragging=n;var o=this,a=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",1500,(function(e){if(sr(e))return this.activateMove(e.originalEvent),!1}),this),a&&a.addListener(1500,(function(e){function t(e){o.activateMove(e),window.removeEventListener("mousemove",t)}Zh(e.keyEvent)&&(o.isActive()||(window.addEventListener("mousemove",t),a.addListener(1500,(function e(i){Zh(i.keyEvent)&&(window.removeEventListener("mousemove",t),a.removeListener(e,"keyboard.keyup"),n.cancel())}),"keyboard.keyup")))}),"keyboard.keydown"),e.on("hand.end",(function(t){var n=t.originalEvent.target;if(!(t.hover||n instanceof SVGElement))return!1;e.once("hand.ended",(function(){this.activateMove(t.originalEvent,{reactivate:!0})}),this)}),this),e.on("hand.move.move",(function(e){var n=t.viewbox().scale;t.scroll({dx:e.dx*n,dy:e.dy*n})})),e.on("hand.move.end",(function(t){var n=t.context.reactivate;return!sr(t)&&n&&e.once("hand.move.ended",(function(e){this.activateHand(e.originalEvent,!0,!0)}),this),!1}),this)}function Zh(e){return kr(" ",e)}Xh.$inject=["eventBus","canvas","dragging","injector","toolManager"],Xh.prototype.activateMove=function(e,t,n){"object"==typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:"grab",data:{context:n||{}}})},Xh.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:"grab",data:{context:{reactivate:n}}})},Xh.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},Xh.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^(hand|hand\.move)$/.test(e.prefix)};var Jh={__depends__:[Td],__init__:["handTool"],handTool:["type",Xh]};function Qh(e,t,n,i,r,o){var a=this;this._dragging=t,this._rules=o,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",(function(e){var t=e.context,n=e.hover,r=t.canStartConnect=a.canStartConnect(n);null!==r&&(t.startTarget=n,i.addMarker(n,r?"connect-ok":"connect-not-ok"))})),e.on(["global-connect.out","global-connect.cleanup"],(function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&i.removeMarker(t,n?"connect-ok":"connect-not-ok")})),e.on(["global-connect.ended"],(function(t){var i=t.context.startTarget,r={x:t.x,y:t.y};if(a.canStartConnect(i))return e.once("element.out",(function(){e.once(["connect.ended","connect.canceled"],(function(){e.fire("global-connect.drag.ended")})),n.start(null,i,r)})),!1}))}Qh.$inject=["eventBus","dragging","connect","canvas","toolManager","rules"],Qh.prototype.start=function(e){this._dragging.init(e,"global-connect",{trapClick:!1,data:{context:{}}})},Qh.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},Qh.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},Qh.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};var ef={__depends__:[ja,qo,Ho,Td],globalConnect:["type",Qh]};function tf(e,t,n,i,r,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}tf.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],tf.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,r=this._spaceTool,o=this._lassoTool,a=this._handTool,s=this._globalConnect,c=this._translate;function l(e,t,r,o,a){function s(t){var r=i.createShape(W({type:e},a));a&&(r.businessObject.di.isExpanded=a.isExpanded),n.start(t,r)}var l=e.replace(/^bpmn:/,"");return{group:t,className:r,title:o||c("Create {type}",{type:l}),action:{dragstart:s,click:s}}}function u(e){var t=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),r=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:t});n.start(e,[t,r],{hints:{autoSelect:[r]}})}function d(e){n.start(e,i.createParticipantShape())}return W(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate the hand tool"),action:{click:function(e){a.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate the lasso tool"),action:{click:function(e){o.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate the create/remove space tool"),action:{click:function(e){r.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate the global connect tool"),action:{click:function(e){s.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create StartEvent")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create Intermediate/Boundary Event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create EndEvent")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create Gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",c("Create Task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create DataObjectReference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded SubProcess"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create Pool/Participant"),action:{dragstart:d,click:d}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",c("Create Group"))}),t};var nf={__depends__:[qh,ts,$d,Kh,Jh,ef,ji],__init__:["paletteProvider"],paletteProvider:["type",tf]};function rf(e,t,n,i,r){jo.call(this,e),e.on("shape.move.move",250,(function(e){var o=e.context,a=o.canExecute;o.visualReplacements||(o.visualReplacements={}),a&&a.replacements?function(e){S(e.canExecute.replacements,(function(o){var a=o.oldElementId,s={type:o.newElementType};if(!e.visualReplacements[a]){var c=t.get(a);W(s,{x:c.x,y:c.y});var l=n.createShape(s);i.addShape(l,c.parent);var u=Object(Y.i)('[data-element-id="'+na()(c.id)+'"]',e.dragGroup);u&&ee(u,{display:"none"});var d=r.addDragger(l,e.dragGroup);e.visualReplacements[a]=d,i.removeShape(l)}}))}(o):function(e){var t=e.visualReplacements;S(t,(function(n,i){var r=Object(Y.i)('[data-element-id="'+na()(i)+'"]',e.dragGroup);r&&ee(r,{display:"inline"}),n.remove(),t[i]&&delete t[i]}))}(o)}))}rf.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],a()(rf,jo);var of={__depends__:[Wa],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",rf]},af=["x","y"],sf=Math.abs;function cf(e){e.on(["connect.hover","connect.move","connect.end"],1250,(function(e){var t,n=e.context,i=n.canExecute,r=n.start,o=n.hover,a=n.source,s=n.target;e.originalEvent&&Or(e.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&function(e,t,n){af.forEach((function(i){var r=df(i,t);e[i]<t[i]+n?xa(e,i,t[i]+n):e[i]>t[i]+r-n&&xa(e,i,t[i]+r-n)}))}(e,o,function(e){return ai(e,"bpmn:Task")?10:20}(o)),o&&(t=i,T(["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"],(function(e){return uf(t,e)})))?(n.connectionStart=ba(r),So(o,["bpmn:Event","bpmn:Gateway"])&&lf(e,ba(o)),So(o,["bpmn:Task","bpmn:SubProcess"])&&function(e,t){var n=ba(t);af.forEach((function(i){(function(e,t,n){return e[n]>t[n]+20&&e[n]<t[n]+df(n,t)-20})(e,t,i)&&xa(e,i,n[i])}))}(e,o),ai(a,"bpmn:BoundaryEvent")&&s===a.host&&function(e){var t=e.context,n=t.source,i=t.target;if(function(e){var t=e.hover,n=e.source;return t&&n&&t===n}(t))return;var r=ba(n),o=Ki(r,i,-10),a=[];/top|bottom/.test(o)&&a.push("x");/left|right/.test(o)&&a.push("y");a.forEach((function(t){var n,i=e[t];sf(i-r[t])<40&&(n=i>r[t]?r[t]+40:r[t]-40,xa(e,t,n))}))}(e)):uf(i,"bpmn:MessageFlow")?(ai(r,"bpmn:Event")&&(n.connectionStart=ba(r)),ai(o,"bpmn:Event")&&lf(e,ba(o))):n.connectionStart=n.initialConnectionStart)}))}function lf(e,t){xa(e,"x",t.x),xa(e,"y",t.y)}function uf(e,t){return e&&e.type===t}function df(e,t){return"x"===e?t.width:t.height}function pf(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function hf(e){this._snapValues={}}cf.$inject=["eventBus"],pf.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},pf.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,-1===this._snapLocations.indexOf(e)&&this._snapLocations.push(e)},pf.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},pf.prototype.getSnapLocations=function(){return this._snapLocations},pf.prototype.setSnapLocations=function(e){this._snapLocations=e},pf.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new hf).initDefaults(this._defaultSnaps),n},hf.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),-1===n.x.indexOf(t.x)&&n.x.push(t.x),-1===n.y.indexOf(t.y)&&n.y.push(t.y)},hf.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&function(e,t,n){var i,r;for(n=void 0===n?10:n,i=0;i<t.length;i++)if(r=t[i],ga(r-e)<=n)return r}(e[n],r[n],i)},hf.prototype.initDefaults=function(e){var t=this;S(e||{},(function(e,n){S(e,(function(e){t.add(n,e)}))}))};function ff(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],(function(e){i.initSnap(e)})),t.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,(function(e){var t=e.context,r=t.shape,o=t.snapContext,a=t.target;if((!e.originalEvent||!Or(e.originalEvent))&&!wa(e)&&a){var s=o.pointsForTarget(a);s.initialized||((s=i.addSnapTargetPoints(s,r,a)).initialized=!0),n.snap(e,s)}})),t.on(["create.cleanup","shape.move.cleanup"],(function(){n.hide()}))}function gf(e){return!!e.labelTarget}ff.$inject=["elementRegistry","eventBus","snapping"],ff.prototype.initSnap=function(e){var t,n=this._elementRegistry,i=e.context,r=i.shape,o=i.snapContext;o||(o=i.snapContext=new pf);var a=(t=n.get(r.id)?ba(r,e):{x:e.x+ba(r).x,y:e.y+ba(r).y}).x-r.width/2,s=t.y-r.height/2,c=t.x+r.width/2,l=t.y+r.height/2;return o.setSnapOrigin("mid",{x:t.x-e.x,y:t.y-e.y}),gf(r)||(o.setSnapOrigin("top-left",{x:a-e.x,y:s-e.y}),o.setSnapOrigin("bottom-right",{x:c-e.x,y:l-e.y})),o},ff.prototype.addSnapTargetPoints=function(e,t,n){return S(this.getSnapTargets(t,n),(function(n){if(gf(n))gf(t)&&e.add("mid",ba(n));else if(n.waypoints){if(n.waypoints.length<3)return;S(n.waypoints.slice(1,-1),(function(t){e.add("mid",t)}))}else{e.add("mid",ba(n))}})),y(t.x)&&y(t.y)?(this._elementRegistry.get(t.id)&&e.add("mid",ba(t)),e):e},ff.prototype.getSnapTargets=function(e,t){return Ea(t).filter((function(e){return!e.hidden}))};function mf(e,t){t.invoke(ff,this),e.on(["create.move","create.end"],1500,vf),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,(function(e){var t=e.context,n=t.canExecute,i=t.target;n&&("attach"===n||n.attach)&&!wa(e)&&function(e,t){var n,i=qi(t),r=Pu(e,t),o=e.context.shape;n=o.parent?{x:0,y:0}:Yi(o);/top/.test(r)?xa(e,"y",i.top-n.y):/bottom/.test(r)&&xa(e,"y",i.bottom-n.y);/left/.test(r)?xa(e,"x",i.left-n.x):/right/.test(r)&&xa(e,"x",i.right-n.x)}(e,i)}))}function vf(e){var t=e.context.createConstraints;if(t){var n=t.top,i=t.right,r=t.bottom,o=t.left;(o&&o>=e.x||i&&i<=e.x)&&xa(e,"x",e.x),(n&&n>=e.y||r&&r<=e.y)&&xa(e,"y",e.y)}}function yf(e,t){return-1!==e.indexOf(t)}function bf(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}a()(mf,ff),mf.$inject=["eventBus","injector"],mf.prototype.initSnap=function(e){var t=ff.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return S(n.outgoing,(function(n){var r=n.waypoints[0];r=r.original||r,t.setSnapOrigin(n.id+"-docking",bf(r,i,e))})),S(n.incoming,(function(n){var r=n.waypoints[n.waypoints.length-1];r=r.original||r,t.setSnapOrigin(n.id+"-docking",bf(r,i,e))})),ai(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},mf.prototype.addSnapTargetPoints=function(e,t,n){ff.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);S(i,(function(n){var i;(function(e){if(ai(e,"bpmn:SubProcess")&&ci(e))return!0;return ai(e,"bpmn:Participant")}(n)||(i="bpmn:TextAnnotation",[t,n].every((function(e){return ai(e,i)}))))&&(e.add("top-left",va(n)),e.add("bottom-right",ya(n)))}));var r=this._elementRegistry;return S(t.incoming,(function(n){if(r.get(t.id)){yf(i,n.source)||e.add("mid",Yi(n.source));var o=n.waypoints[0];e.add(n.id+"-docking",o.original||o)}})),S(t.outgoing,(function(n){if(r.get(t.id)){yf(i,n.target)||e.add("mid",Yi(n.target));var o=n.waypoints[n.waypoints.length-1];e.add(n.id+"-docking",o.original||o)}})),ai(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},mf.prototype.getSnapTargets=function(e,t){return ff.prototype.getSnapTargets.call(this,e,t).filter((function(e){return!ai(e,"bpmn:Lane")}))};function wf(e,t){var n=this;e.on(["resize.start"],(function(e){n.initSnap(e)})),e.on(["resize.move","resize.end"],1250,(function(e){var i=e.context,r=i.shape,o=r.parent,a=i.direction,s=i.snapContext;if(!(e.originalEvent&&Or(e.originalEvent)||wa(e))){var c=s.pointsForTarget(o);c.initialized||((c=n.addSnapTargetPoints(c,r,o,a)).initialized=!0),function(e){return"n"===e||"s"===e}(a)&&xa(e,"x",e.x),function(e){return"e"===e||"w"===e}(a)&&xa(e,"y",e.y),t.snap(e,c)}})),e.on(["resize.cleanup"],(function(){t.hide()}))}function xf(e,t){var n=Yi(e),i=qi(e),r={x:n.x,y:n.y};return-1!==t.indexOf("n")?r.y=i.top:-1!==t.indexOf("s")&&(r.y=i.bottom),-1!==t.indexOf("e")?r.x=i.right:-1!==t.indexOf("w")&&(r.x=i.left),r}wf.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new pf);var o=xf(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r},wf.prototype.addSnapTargetPoints=function(e,t,n,i){return S(this.getSnapTargets(t,n),(function(t){e.add("corner",ya(t)),e.add("corner",va(t))})),e.add("corner",xf(t,i)),e},wf.$inject=["eventBus","snapping"],wf.prototype.getSnapTargets=function(e,t){return Ea(t).filter((function(t){return!(n=t,i=e,n.host===i||function(e){return!!e.waypoints}(t)||function(e){return!!e.hidden}(t)||function(e){return!!e.labelTarget}(t));var n,i}))};function Ef(e){this._canvas=e,this._asyncHide=V($(this.hide,this),1e3)}Ef.$inject=["canvas"],Ef.prototype.snap=function(e,t){var n=e.context.snapContext,i=n.getSnapLocations(),r={x:wa(e,"x"),y:wa(e,"y")};S(i,(function(i){var o=n.getSnapOrigin(i),a={x:e.x+o.x,y:e.y+o.y};if(S(["x","y"],(function(e){var n;r[e]||void 0!==(n=t.snap(a,i,e,7))&&(r[e]={value:n,originValue:n-o[e]})})),r.x&&r.y)return!1})),this.showSnapLine("vertical",r.x&&r.x.value),this.showSnapLine("horizontal",r.y&&r.y.value),S(["x","y"],(function(t){var n=r[t];v(n)&&xa(e,t,n.originValue)}))},Ef.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=he("path");return ee(n,{d:"M0,0 L0,0"}),oe(n).add("djs-snap-line"),Z(t,n),{update:function(t){y(t)?ee(n,"horizontal"===e?{d:"M-100000,"+t+" L+100000,"+t,display:""}:{d:"M "+t+",-100000 L "+t+", +100000",display:""}):ee(n,{display:"none"})}}},Ef.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},Ef.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},Ef.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},Ef.prototype.hide=function(){S(this._snapLines,(function(e){e.update()}))};var _f={__depends__:[{__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ff],resizeSnapping:["type",wf],snapping:["type",Ef]}],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",cf],createMoveSnapping:["type",mf]};function Sf(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=Object(Y.f)(Sf.BOX_HTML),this._searchInput=Object(Y.i)(Sf.INPUT_SELECTOR,this._container),this._resultsContainer=Object(Y.i)(Sf.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}function Cf(e,t,n){var i=function(e){var t="";return e.forEach((function(e){e.matched?t+='<strong class="'+Sf.RESULT_HIGHLIGHT_CLASS+'">'+ra(e.matched)+"</strong>":t+=ra(e.normal)})),""!==t?t:null}(t),r=Object(Y.f)(n);r.innerHTML=i,e.appendChild(r)}Sf.$inject=["canvas","eventBus","overlays","selection"],Sf.prototype._bindEvents=function(){var e=this;function t(t,n,i,r){e._eventMaps.push({el:t,type:i,listener:Y.e.bind(t,n,i,r)})}t(document,"html","click",(function(t){e.close()})),t(this._container,Sf.INPUT_SELECTOR,"click",(function(e){e.stopPropagation(),e.delegateTarget.focus()})),t(this._container,Sf.RESULT_SELECTOR,"mouseover",(function(t){t.stopPropagation(),e._scrollToNode(t.delegateTarget),e._preselect(t.delegateTarget)})),t(this._container,Sf.RESULT_SELECTOR,"click",(function(t){t.stopPropagation(),e._select(t.delegateTarget)})),t(this._container,Sf.INPUT_SELECTOR,"keydown",(function(e){38===e.keyCode&&e.preventDefault(),40===e.keyCode&&e.preventDefault()})),t(this._container,Sf.INPUT_SELECTOR,"keyup",(function(t){if(27===t.keyCode)return e.close();if(13===t.keyCode){var n=e._getCurrentResult();return n?e._select(n):e.close()}return 38===t.keyCode?e._scrollToDirection(!0):40===t.keyCode?e._scrollToDirection():void(37!==t.keyCode&&39!==t.keyCode&&e._search(t.delegateTarget.value))}))},Sf.prototype._unbindEvents=function(){this._eventMaps.forEach((function(e){Y.e.unbind(e.el,e.type,e.listener)}))},Sf.prototype._search=function(e){var t=this;if(this._clearResults(),e&&""!==e){var n=this._searchProvider.find(e);if(n.length){n.forEach((function(e){var n=e.element.id,i=t._createResultNode(e,n);t._results[n]={element:e.element,node:i}}));var i=Object(Y.i)(Sf.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},Sf.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},Sf.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},Sf.prototype._clearResults=function(){Object(Y.c)(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},Sf.prototype._getCurrentResult=function(){return Object(Y.i)(Sf.RESULT_SELECTED_SELECTOR,this._resultsContainer)},Sf.prototype._createResultNode=function(e,t){var n=Object(Y.f)(Sf.RESULT_HTML);return e.primaryTokens.length>0&&Cf(n,e.primaryTokens,Sf.RESULT_PRIMARY_HTML),Cf(n,e.secondaryTokens,Sf.RESULT_SECONDARY_HTML),Object(Y.a)(n,Sf.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},Sf.prototype.registerProvider=function(e){this._searchProvider=e},Sf.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,Object(Y.b)(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},Sf.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,Object(Y.b)(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},Sf.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Sf.prototype.isOpen=function(){return this._open},Sf.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&Object(Y.b)(t).remove(Sf.RESULT_SELECTED_CLASS);var n=Object(Y.a)(e,Sf.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Object(Y.b)(e).add(Sf.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._centerViewbox(i),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},Sf.prototype._select=function(e){var t=Object(Y.a)(e,Sf.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._centerViewbox(n),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},Sf.prototype._centerViewbox=function(e){var t=this._canvas.viewbox(),n=Ge(e),i={x:n.x+n.width/2-t.outer.width/2,y:n.y+n.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(i),this._canvas.zoom(t.scale)},Sf.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=function(e){var t=e.width+12,n=e.height+12,i=["width: "+t+"px","height: "+n+"px"].join("; ");return{position:{bottom:n-6,right:t-6},show:!0,html:'<div style="'+i+'" class="'+Sf.OVERLAY_CLASS+'"></div>'}}(Ge(e));this._overlayId=this._overlays.add(e,t)}},Sf.CONTAINER_SELECTOR=".djs-search-container",Sf.INPUT_SELECTOR=".djs-search-input input",Sf.RESULTS_CONTAINER_SELECTOR=".djs-search-results",Sf.RESULT_SELECTOR=".djs-search-result",Sf.RESULT_SELECTED_CLASS="djs-search-result-selected",Sf.RESULT_SELECTED_SELECTOR="."+Sf.RESULT_SELECTED_CLASS,Sf.RESULT_ID_ATTRIBUTE="data-result-id",Sf.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",Sf.OVERLAY_CLASS="djs-search-overlay",Sf.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',Sf.RESULT_HTML='<div class="djs-search-result"></div>',Sf.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',Sf.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var Of={__depends__:[Sr,vr],searchPad:["type",Sf]};function kf(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function Tf(e){return _(e,(function(e){return!!e.matched})).length>0}function Pf(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(0!==r&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}kf.$inject=["elementRegistry","searchPad","canvas"],kf.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter((function(e){return!e.labelTarget}));return n=_(n,(function(e){return e!==t})),n=L(n=_(n=P(n,(function(t){return{primaryTokens:Pf(pi(t),e),secondaryTokens:Pf(t.id,e),element:t}})),(function(e){return Tf(e.primaryTokens)||Tf(e.secondaryTokens)})),(function(e){return pi(e.element)+e.element.id}))};var jf={__depends__:[Of],__init__:["bpmnSearch"],bpmnSearch:["type",kf]};function Af(e){oi.call(this,e)}a()(Af,oi),Af.Viewer=Cr,Af.NavigatedViewer=Qr,Af.prototype.createDiagram=function(e){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>',e)},Af.prototype._interactionModules=[Ir,qr,co,Jr],Af.prototype._modelingModules=[go,Po,Uo,Lo,Oa,ja,Ma,ac,xs,ts,dc,mc,jc,Mc,Rc,Fc,el,Nh,$h,nf,of,Yc,_f,jf],Af.prototype._modules=[].concat(Cr.prototype._modules,Af.prototype._interactionModules,Af.prototype._modelingModules);var Mf=n(38),Df="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Rf=new Uint8Array(16);function Nf(){if(!Df)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Df(Rf)}for(var Lf=[],Bf=0;Bf<256;++Bf)Lf.push((Bf+256).toString(16).substr(1));var If=function(e,t){var n=t||0,i=Lf;return(i[e[n+0]]+i[e[n+1]]+i[e[n+2]]+i[e[n+3]]+"-"+i[e[n+4]]+i[e[n+5]]+"-"+i[e[n+6]]+i[e[n+7]]+"-"+i[e[n+8]]+i[e[n+9]]+"-"+i[e[n+10]]+i[e[n+11]]+i[e[n+12]]+i[e[n+13]]+i[e[n+14]]+i[e[n+15]]).toLowerCase()};var Ff=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||Nf)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){for(var r=n||0,o=0;o<16;++o)t[r+o]=i[o];return t}return If(i)},zf=n(7),Hf=n.n(zf);n(35);function Vf(e,t){var n=Object(Y.f)('<div class="form-service-task__row" />'),i=Object(Y.f)("<label/>");return i.innerText=e,n.appendChild(i),n.appendChild(t),n}function $f(e,t){let n=Object(Y.i)("#bpmn-container"),i=Object(Y.f)('<fieldset class="form-service-task__row"/>'),r=Object(Y.f)('<input type="text"/>');r.value=t&&(t.code||"");let o=Object(Y.f)('<select>\n                            <option value="text/html">HTML</option>\n                            <option value="application/json">JSON</option>\n                            <option value="application/xml">XML</option>\n                            </select>');o.value=t&&(t.type||"");let a=Object(Y.f)('<input type="text"/>');a.value=t&&(t.permit||"");let s=Object(Y.f)("<textarea/>");s.value=t&&(t.content||"");let c=Object(Y.f)('<button class="btn btn--default" type="button">&times;</button>');i.appendChild(Vf("Code",r)),i.appendChild(Vf("Type",o)),i.appendChild(Vf("Authorities",a)),i.appendChild(Vf("Layout",s));let l=Object(Y.f)('<button class="btn btn--default" type="button">Edit Layout</button>'),u=Object(Y.f)('<div class="form-service-task__action" />');u.appendChild(l),i.appendChild(u);let d=Object(Y.f)('<div class="form-service-task__action" />');return d.appendChild(c),i.appendChild(d),l.onclick=function(){var e=Object(Y.f)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index:20"/>');n.parentElement.appendChild(e);var t=Hf.a.init({height:"100%",container:e,showOffsets:!0,fromElement:!1,noticeOnUnload:!1,storageManager:!1,plugins:["gjs-preset-webpage"],canvas:{styles:["w3.css"]}});const i={model:{init(){this.addTrait({type:"text",label:"Foreach Expr",name:"mvel-foreach"}),this.addTrait({type:"text",label:"Foreach Delim",name:"mvel-end"}),this.addTrait({type:"text",label:"If Expr",name:"mvel-if"})}}};if(t.DomComponents.addType("default",i),t.Panels.addButton("devices-c",{id:"save",className:"fa fa-floppy-o icon-blank",command(t){for(var n=Object(Y.f)("<div>"+t.getHtml()+"</div>"),i=n.querySelectorAll('[mvel-foreach]:not([mvel-foreach=""])'),r=i.length-1;r>=0;r--){var o="@foreach{"+i[r].getAttribute("mvel-foreach")+"}",a=i[r].getAttribute("mvel-end");a=a?"@end{"+a+"}":"@end{}",i[r].removeAttribute("mvel-end"),i[r].removeAttribute("mvel-foreach"),i[r].outerHTML=o+i[r].outerHTML+a}var c=n.querySelectorAll('[mvel-if]:not([mvel-if=""])');for(r=c.length-1;r>=0;r--){var l="@if{"+c[r].getAttribute("mvel-if")+"}";c[r].removeAttribute("mvel-if"),c[r].outerHTML=l+c[r].outerHTML+"@end{}"}s.value=n.innerHTML+"<style>"+t.getCss()+"</style>",e.parentNode.removeChild(e)},active:!0}),t.Panels.addButton("devices-c",{id:"close",className:"fa fa-times icon-blank",command(t){e.parentNode.removeChild(e)},active:!0}),t.Panels.render(),s.value.length>0){for(var r=Object(Y.f)("<span>"+s.value+"</span>"),o=(l=r.querySelectorAll("*")).length-1;o>=0;o--){if((u=l[o].previousSibling)&&u.nodeType===Node.TEXT_NODE)if(d=u.nodeValue.match(/@if\{([^\}]*)\}$/)){var a=d[0];if(d=d[1],(p=l[o].nextSibling)&&p.nodeType===Node.TEXT_NODE)if(h=p.nodeValue.match(/^@end\{\}/)){var c=h[0];u.nodeValue===a?u.parentNode.removeChild(u):u.nodeValue=u.nodeValue.substring(0,u.nodeValue.length-a.length),p.nodeValue===c?p.parentNode.removeChild(p):p.nodeValue=p.nodeValue.substring(c.length),l[o].setAttribute("mvel-if",d)}}}var l;for(o=(l=r.querySelectorAll("*")).length-1;o>=0;o--){var u,d;if((u=l[o].previousSibling)&&u.nodeType===Node.TEXT_NODE)if(d=u.nodeValue.match(/@foreach\{([^\}]*)\}$/)){var p,h;a=d[0];if(d=d[1],(p=l[o].nextSibling)&&p.nodeType===Node.TEXT_NODE)if(h=p.nodeValue.match(/^@end\{([^\}]*)\}/)){c=h[0];h=h[1],u.nodeValue===a?u.parentNode.removeChild(u):u.nodeValue=u.nodeValue.substring(0,u.nodeValue.length-a.length),p.nodeValue===c?p.parentNode.removeChild(p):p.nodeValue=p.nodeValue.substring(c.length),l[o].setAttribute("mvel-foreach",d),h.length>0&&l[o].setAttribute("mvel-end",h)}}}t.setComponents(r.innerHTML)}},c.onclick=function(){for(var n in i.parentElement.removeChild(i),e)if(t===e[n]){e.splice(n,1),t=null;break}},r.onchange=function(){t.code=r.value},o.onchange=function(){t.type=o.value},a.onchange=function(){t.permit=a.value},s.onchange=function(){t.content=s.value},{node:i,codeField:r,typeField:o,permitField:a,layoutField:s}}var Uf=n(39);class Wf{constructor(e,t,n,i,r,o){this.create=n,this.elementFactory=i,this.translate=o,!1!==e.autoPlace&&(this.autoPlace=r.get("autoPlace",!1)),t.registerProvider(this)}getContextPadEntries(e){const{autoPlace:t,create:n,elementFactory:i,translate:r}=this;return{"append.service-task":{group:"edit",className:"bpmn-icon-service",title:r("Append ServiceTask"),action:{click:function(e,t){var n=Object(Y.i)('[data-element-id="'+na()(t.id)+'"]');if(!n.hasApopper){var i=Object(Y.f)("<form/>");i.classList.add("form-service-task"),document.body.appendChild(i);var r=new Uf.a(n,i,{removeOnDestroy:!0}),o=function(e){var t=function(e){for(;!e.rootElements;)e.$parent&&(e=e.$parent);return e.rootElements},n=[],i=[];if(e.businessObject.eventDefinitions)for(var r in e.businessObject.eventDefinitions){let o=e.businessObject.eventDefinitions[r];if("bpmn:MessageEventDefinition"===o.$type){let r=Object(Y.f)('<input type="text"/>'),a=o.messageRef;if(a&&(r.value=a.name||""),n.push(Vf("URL",r)),i.push((function(){a||(a=e.businessObject.$model.create("bpmn:Message",{id:"a"+Ff()}),t(e.businessObject).push(a),o.messageRef=a),a.name=r.value})),"bpmn:IntermediateCatchEvent"===e.businessObject.$type||"bpmn:BoundaryEvent"===e.businessObject.$type||"bpmn:StartEvent"===e.businessObject.$type&&"bpmn:SubProcess"===e.businessObject.$parent.$type){let e=Object(Y.f)('<input type="text"/>');e.value=o.existingId||"",n.push(Vf("Existing Key",e)),i.push((function(){o.existingId=e.value}));let t=Object(Y.f)('<input type="text"/>');t.value=o.incomingId||"",n.push(Vf("Incoming Key",t)),i.push((function(){o.incomingId=t.value}))}}else if("bpmn:ErrorEventDefinition"===o.$type){let r=Object(Y.f)('<input type="text"/>'),a=o.errorRef;a&&(r.value=a.errorCode||""),n.push(Vf("Error Code",r)),i.push((function(){a&&a.errorCode===r.value||(a=e.businessObject.$model.create("bpmn:Error",{id:r.value}),t(e.businessObject).push(a),o.errorRef=a),a.name=r.value,a.errorCode=r.value}))}else if("bpmn:EscalationEventDefinition"===o.$type){let r=Object(Y.f)('<input type="text"/>'),a=o.escalationRef;a&&(r.value=a.escalationCode||""),n.push(Vf("Escalation Code",r)),i.push((function(){a&&a.escalationCode===r.value||(a=e.businessObject.$model.create("bpmn:Escalation",{id:r.value}),t(e.businessObject).push(a),o.escalationRef=a),a.escalationCode=r.value}))}else if("bpmn:SignalEventDefinition"===o.$type){let r=Object(Y.f)('<input type="text"/>'),a=o.signalRef;a&&(r.value=a.name||""),n.push(Vf("Signal Name",r)),i.push((function(){a&&a.name===r.value||(a=e.businessObject.$model.create("bpmn:Signal",{id:"a"+Ff()}),t(e.businessObject).push(a),o.signalRef=a),a.name=r.value}))}}if("bpmn:ReceiveTask"===e.businessObject.$type||"bpmn:SendTask"===e.businessObject.$type){let r=Object(Y.f)('<input type="text"/>'),o=e.businessObject.messageRef;if(o&&(r.value=o.name||""),n.push(Vf("URL",r)),i.push((function(){o||(o=e.businessObject.$model.create("bpmn:Message",{id:"a"+Ff()}),t(e.businessObject).push(o),e.businessObject.messageRef=o),o.name=r.value})),"bpmn:ReceiveTask"===e.businessObject.$type){let t=Object(Y.f)('<input type="text"/>');t.value=e.businessObject.existingId||"",n.push(Vf("Existing Key",t)),i.push((function(){e.businessObject.existingId=t.value}));let r=Object(Y.f)('<input type="text"/>');r.value=e.businessObject.incomingId||"",n.push(Vf("Incoming Key",r)),i.push((function(){e.businessObject.incomingId=r.value}))}}else if("bpmn:SequenceFlow"===e.businessObject.$type){let t=Object(Y.f)('<input type="text"/>');t.value=e.businessObject.conditionExpression?e.businessObject.conditionExpression.body:"",n.push(Vf("Condition",t)),i.push((function(){if(t.value){var n=e.businessObject.conditionExpression;n||(n=e.businessObject.$model.create("bpmn:Expression",{type:"tFormalExpression"})),n.body=t.value,e.businessObject.conditionExpression=n}else delete e.businessObject.conditionExpression}))}else if("bpmn:ScriptTask"===e.businessObject.$type){let t=Object(Y.f)("<textarea/>");t.value=e.businessObject.script||"",n.push(Vf("Script",t));let r=Object(Y.f)('<select>\n                <option value="javascript">JavaScript</option>\n                <option value="groovy">Groovy</option>\n                <option value="mvel">MVEL</option>\n                </select>');r.value=e.businessObject.scriptFormat||"javascript",n.push(Vf("Language",r)),i.push((function(){e.businessObject.script=t.value,e.businessObject.scriptFormat=r.value}))}else if("bpmn:CallActivity"===e.businessObject.$type){let t=Object(Y.f)('<input type="text"/>');t.value=e.businessObject.calledElement||"",n.push(Vf("Process",t)),i.push((function(){e.businessObject.calledElement=t.value}))}if(e.businessObject.$instanceOf("dela:Serviceable")){let t=Object(Y.f)("<textarea/>");t.value=e.businessObject.service||"",n.push(Vf("Service",t)),i.push((function(){e.businessObject.service=t.value}))}if(e.businessObject.$instanceOf("dela:Multipliable")&&e.businessObject.loopCharacteristics){let t=Object(Y.f)("<textarea/>");if(t.value=e.businessObject.expression||"",n.push(Vf("Split Expression",t)),i.push((function(){e.businessObject.expression=t.value})),e.businessObject.loopCharacteristics.$instanceOf("bpmn:MultiInstanceLoopCharacteristics")){let t=Object(Y.f)('<input type="text"/>');t.value=e.businessObject.loopCharacteristics.loopCardinality?e.businessObject.loopCharacteristics.loopCardinality.body:"",n.push(Vf("Loop Cardinality",t)),i.push((function(){if(t.value){var n=e.businessObject.loopCharacteristics.loopCardinality;n||(n=e.businessObject.loopCharacteristics.$model.create("bpmn:Expression",{type:"tFormalExpression"})),n.body=t.value,e.businessObject.loopCharacteristics.loopCardinality=n}else delete e.businessObject.loopCharacteristics.loopCardinality}));let r=Object(Y.f)('<input type="text"/>');r.value=e.businessObject.loopCharacteristics.completionCondition?e.businessObject.loopCharacteristics.completionCondition.body:"",n.push(Vf("Completion Condition",r)),i.push((function(){if(r.value){var t=e.businessObject.loopCharacteristics.completionCondition;t||(t=e.businessObject.loopCharacteristics.$model.create("bpmn:Expression",{type:"tFormalExpression"})),t.body=r.value,e.businessObject.loopCharacteristics.completionCondition=t}else delete e.businessObject.loopCharacteristics.completionCondition}))}else if(e.businessObject.loopCharacteristics.$instanceOf("bpmn:StandardLoopCharacteristics")){let t=Object(Y.f)('<input type="text"/>');t.value=e.businessObject.loopCharacteristics.loopMaximum||"",n.push(Vf("Loop Maximum",t)),i.push((function(){t.value?e.businessObject.loopCharacteristics.loopMaximum=t.value:delete e.businessObject.loopCharacteristics.loopMaximum}));let r=Object(Y.f)('<input type="checkbox"/>');r.checked=e.businessObject.loopCharacteristics.testBefore,n.push(Vf("Test Before",r)),i.push((function(){r.checked?e.businessObject.loopCharacteristics.testBefore=r.checked:delete e.businessObject.loopCharacteristics.testBefore}));let o=Object(Y.f)('<input type="text"/>');o.value=e.businessObject.loopCharacteristics.loopCondition?e.businessObject.loopCharacteristics.loopCondition.body:"",n.push(Vf("Loop Condition",o)),i.push((function(){if(o.value){var t=e.businessObject.loopCharacteristics.loopCondition;t||(t=e.businessObject.loopCharacteristics.$model.create("bpmn:Expression",{type:"tFormalExpression"})),t.body=o.value,e.businessObject.loopCharacteristics.loopCondition=t}else delete e.businessObject.loopCharacteristics.loopCondition}))}}if(e.businessObject.$instanceOf("dela:Permittable")){let t=Object(Y.f)('<input type="text"/>');t.value=e.businessObject.existingId||"",n.push(Vf("Authorities",t)),i.push((function(){e.businessObject.existingId=t.value}))}if(e.businessObject.$instanceOf("dela:Viewable")){if(e.businessObject.view)for(var r in e.businessObject.view){let t=e.businessObject.view[r],o=$f(e.businessObject,t);n.push(o.node),i.push((function(){t&&(t.code=o.codeField.value,t.type=o.typeField.value,t.permit=o.permitField.value,t.content=o.layoutField.value)}))}else e.businessObject.view=[];let t=Object(Y.f)('<div class="form-service-task__action" />'),o=Object(Y.f)('<button class="btn btn--default" type="button">+</button>');t.appendChild(o),n.push(t),o.onclick=function(){var n=e.businessObject.$model.create("dela:View");let r=$f(e.businessObject,n);t.parentElement.insertBefore(r.node,t),i.push((function(){r.layoutField.value&&(n.code=r.codeField.value,n.type=r.typeField.value,n.permit=r.permitField.value,n.content=r.layoutField.value,e.businessObject.view.push(n))}))}}return{entries:n,save:function(){for(var e in i)i[e]()}}}(t);for(var a in o.entries)i.appendChild(o.entries[a]);var s=Object(Y.f)('<div class="form-service-task__bg" />');s.onclick=function(e){o.save(),r.destroy(),delete n.hasApopper,s.remove()},document.body.appendChild(s),n.hasApopper=r}}}}}}}Wf.$inject=["config","contextPad","create","elementFactory","injector","translate"];var qf={__init__:["extendedContextPad"],extendedContextPad:["type",Wf]};function Gf(e,t){var n=Object(Y.f)('<div class="form-service-task__row" />'),i=Object(Y.f)("<label/>");return i.innerText=e,n.appendChild(i),n.appendChild(t),n}function Yf(e,t){let n=Object(Y.f)('<fieldset class="form-service-task__row"/>'),i=Object(Y.f)('<input type="text"/>');i.value=t&&(t.code||"");let r=Object(Y.f)('<select>\n                            <option value="javascript">javascript</option>\n                            <option value="mvel">mvel</option>\n                            </select>');r.language=t&&(t.language||"");let o=Object(Y.f)("<textarea/>");o.value=t&&(t.definition||"");let a=Object(Y.f)('<button class="btn btn--default" type="button">&times;</button>');n.appendChild(Gf("Code",i)),n.appendChild(Gf("Language",r)),n.appendChild(Gf("Definition",o));let s=Object(Y.f)('<div class="form-service-task__action" />');return s.appendChild(a),n.appendChild(s),a.onclick=function(){for(var i in n.parentElement.removeChild(n),e)if(t===e[i]){e.splice(i,1),t=null;break}},i.onchange=function(){t.code=i.value},r.onchange=function(){t.language=r.value},o.onchange=function(){t.definition=o.value},{node:n,codeField:i,languageField:r,definitionField:o}}function Kf(e,t,n=!1){var i=Object(Y.f)('<div class="form-service-task__row" />');i.hidden=n;var r=Object(Y.f)("<label/>");return r.innerText=e,i.appendChild(r),i.appendChild(t),i}function Xf(e,t){let n=Object(Y.f)('<fieldset class="form-service-task__row"/>'),i=Object(Y.f)('<input type="text"/>');i.value=t&&(t.code||"");let r=Object(Y.f)('<select>\n                            <option value="text/html">html</option>\n                            <option value="text/css">css</option>\n                            <option value="text/csv">csv</option>\n                            <option value="application/json">json</option>\n                            <option value="application/javascript">javascript</option>\n                            <option value="image/jpg">jpg</option>\n                            <option value="image/png">png</option>\n                            <option value="image/gif">gif</option>\n                            </select>');r.value=t&&(t.type||"");let o=Object(Y.f)('<input type="checkbox"/>');o.checked=t&&(!0===t.isBinary||!1);let a=Object(Y.f)("<textarea/>");a.value=t&&(t.content||"");let s=Object(Y.f)('<input type="file"/>'),c=Object(Y.f)('<button type="button">Open image</button>');c.onclick=function(){var e=new Image;e.src="data:image/jpg;base64,"+t.content,window.open("").document.write(e.outerHTML)};let l=Object(Y.f)('<button class="btn btn--default" type="button">&times;</button>');n.appendChild(Kf("Code",i)),n.appendChild(Kf("Type",r)),n.appendChild(Kf("Is binary",o));let u=Kf("Content",a,t.isBinary);n.appendChild(u);let d=Kf("File",s,!t.isBinary);n.appendChild(d);let p=Kf("Link",c,!t.isBinary);n.appendChild(p);let h=Object(Y.f)('<div class="form-service-task__action" />');return h.appendChild(l),n.appendChild(h),l.onclick=function(){for(var i in n.parentElement.removeChild(n),e)if(t===e[i]){e.splice(i,1),t=null;break}},i.onchange=function(){t.code=i.value},r.onchange=function(){t.type=r.value},o.onchange=function(){t.isBinary=o.checked,o.checked?(d.hidden=!1,u.hidden=!0):(a.value="",d.hidden=!0,u.hidden=!1,p.hidden=!0),t.isBinary=o.checked},s.onchange=function(){var e=s.files[0],n=new FileReader;n.readAsBinaryString(e),n.onload=function(){let e=btoa(n.result);t.content=e,p.hidden=!1},n.onerror=function(){console.log("there are some problems")}},a.onchange=function(){t.content=a.value},{node:n,codeField:i,typeField:r,isBinaryField:o,contentField:a}}var Zf=Object(Y.i)("#bpmn-container"),Jf=new Af({container:"#bpmn-container",moddleExtensions:{dela:Mf},additionalModules:[qf]});let Qf=new URL(window.location.href);if("production"==="production".trim()){var eg={modelId:Qf.searchParams.get("modelId")};"draft"===Qf.searchParams.get("variant")&&(eg.variant="draft"),r.a.get("bpmn/"+eg.modelId+".bpmn",{params:eg}).then((function(e){tg(e.data)}))}else if("development"==="production".trim()){tg(n(42).default)}function tg(e){Jf.importXML(e,(function(e){if(e)console.error(e);else{var t=Object(Y.f)('<div class="c-controls" />'),n=Object(Y.f)('<div class="c-panels" />'),i=Object(Y.f)('<div class="c-layout" />'),o=Object(Y.f)('<div class="c-layout__inner form-service-task layout-views" />'),a=Object(Y.f)('<div class="form-service-task__title">Views</div>');o.appendChild(a),i.appendChild(o);var s=Object(Y.f)('<div class="c-layout__inner form-service-task layout-beans" />'),c=Object(Y.f)('<div class="form-service-task__title">Beans</div>');s.appendChild(c),i.appendChild(s);var l=Object(Y.f)('<div class="c-layout__inner form-service-task layout-resources" />'),u=Object(Y.f)('<div class="form-service-task__title">Resources</div>');l.appendChild(u),i.appendChild(l);var d=Jf.getDefinitions();for(var p in d.rootElements)if("bpmn:Process"===d.rootElements[p].$type){let e=d.rootElements[p],n=Object(Y.f)('<input type="text" style="width: 100%"/>');n.value=e.name||"",t.appendChild(n),n.onchange=function(){n.value?e.name=n.value:delete e.name};let i=Object(Y.f)('<div class="form-service-task__action" />'),r=Object(Y.f)('<button class="btn btn--default" type="button">+</button>');if(i.appendChild(r),r.onclick=function(){let t=e.$model.create("dela:View");e.view.push(t);let n=$f(e.view,t);o.appendChild(n.node),i.parentElement.insertBefore(n.node,i)},e.view||o.appendChild(i),e.view){for(var p in e.view){let t=e.view[p],n=$f(e.view,t);o.appendChild(n.node)}o.appendChild(i),r.onclick=function(){let t=e.$model.create("dela:View");e.view.push(t);let n=$f(e.view,t);o.appendChild(n.node),i.parentElement.insertBefore(n.node,i)}}else e.view=[];let a=Object(Y.f)('<div class="form-service-task__action" />'),c=Object(Y.f)('<button class="btn btn--default" type="button">+</button>');if(a.appendChild(c),c.onclick=function(){let t=e.$model.create("dela:Bean");e.bean.push(t);let n=Yf(e.bean,t);s.appendChild(n.node),a.parentElement.insertBefore(n.node,a)},e.bean||s.appendChild(a),e.bean){for(var p in e.bean){let t=e.bean[p],n=Yf(e.bean,t);s.appendChild(n.node)}s.appendChild(a),c.onclick=function(){let t=e.$model.create("dela:Bean");e.bean.push(t);let n=Yf(e.bean,t);s.appendChild(n.node),a.parentElement.insertBefore(n.node,a)}}else e.bean=[];let u=Object(Y.f)('<div class="form-service-task__action" />'),h=Object(Y.f)('<button class="btn btn--default" type="button">+</button>');if(u.appendChild(h),h.onclick=function(){let t=e.$model.create("dela:Resource");e.resource.push(t);let n=Xf(e.resource,t);l.appendChild(n.node),u.parentElement.insertBefore(n.node,u)},e.resource||l.appendChild(u),e.resource){for(var p in e.resource){let t=e.resource[p],n=Xf(e.resource,t);l.appendChild(n.node)}l.appendChild(u),h.onclick=function(){let t=e.$model.create("dela:Resource");e.resource.push(t);let n=Xf(e.resource,t);l.appendChild(n.node),u.parentElement.insertBefore(n.node,u)}}else e.resource=[]}var h=Object(Y.f)('<button class="btn btn--default" disabled="disabled">Deploy</button>');h.onclick=function(){Jf.saveXML({format:!0},(function(e,t){r.a.post("/modelsource",t,{headers:{"Content-Type":"text/xml"},params:{modelId:Qf.searchParams.get("modelId")}})}))};var f=Object(Y.f)('<button class="btn btn--default" disabled="disabled">Save Draft</button>');f.onclick=function(){Jf.saveXML({format:!0},(function(e,t){r.a.post("/modelsource",t,{headers:{"Content-Type":"text/xml"},params:{modelId:Qf.searchParams.get("modelId"),variant:"draft"}})}))};var g=Object(Y.f)('<a href class="btn btn--default" href title="download BPMN diagram">BPMN diagram</a>'),m=Object(Y.f)('<a href class="btn btn--default" href title="download as SVG image">SVG image</a>');t.appendChild(h),t.appendChild(f),t.appendChild(g),t.appendChild(m),g.onclick=function(){var e,t;Jf.saveXML({format:!0},(function(n,i){e="data:application/bpmn20-xml;charset=UTF-8,"+encodeURIComponent(i),t=(Qf.searchParams.get("modelId")||"process")+".bpmn"})),g.setAttribute("href",e),g.setAttribute("download",t)},m.onclick=function(){var e,t;Jf.saveSVG((function(n,i){e="data:application/image/svg+xml;charset=UTF-8,"+encodeURIComponent(i),t=(Qf.searchParams.get("modelId")||"process")+".svg"})),m.setAttribute("href",e),m.setAttribute("download",t)};var v=Object(Y.f)('<button class="btn btn--default" data-target="views">Views</button>'),y=Object(Y.f)('<button class="btn btn--default" data-target="beans">Beans</button>'),b=Object(Y.f)('<button class="btn btn--default" data-target="resources">Resources</button>');v.addEventListener("click",(function(e){ng.call(this,e)})),y.addEventListener("click",(function(e){ng.call(this,e)})),b.addEventListener("click",(function(e){ng.call(this,e)})),n.appendChild(v),n.appendChild(y),n.appendChild(b),Zf.appendChild(t),Zf.appendChild(n),Zf.appendChild(i),Zf.classList.remove("with-error"),Zf.classList.add("with-diagram")}}))}function ng(e){e.preventDefault();let t=document.querySelector(".layout-"+this.dataset.target);t&&(t.classList.contains("is-shown")?(this.classList.remove("is-active"),t.classList.remove("is-shown")):(this.classList.add("is-active"),t.classList.add("is-shown")))}}]);